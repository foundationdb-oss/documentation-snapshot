{
  "post_stream": {
    "posts": [
      {
        "id": 8799,
        "name": "Mike Hearn",
        "username": "mikehearn",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mikehearn/{size}/984_2.png",
        "created_at": "2020-11-22T23:14:51.976Z",
        "cooked": "<p>I\u2019m investigating FDB as a database engine for apps that will have a relatively small number of users and relatively small datasets, but which have the following characteristics:</p>\n<ul>\n<li>Users may be spread around the world yet,</li>\n<li>They need low read latencies</li>\n<li>Servers will run on relatively cheap clouds or dedicated machines</li>\n</ul>\n<p>I\u2019m wondering what the best configuration is because despite reading the docs a few times and watching the multi-region tech talk by Evan in 2018, I find I\u2019m still not entirely sure. All I want is (say) 3 replicas of the dataset, separated by a WAN, in which the loss of one isn\u2019t fatal, and in which if the database grows an additional machine can be added to each replica to add storage capacity.</p>\n<ol>\n<li>Multi-region sounds good, but, only two regions are supported. But it may be that some projects need at least three (Europe, USA, Asia) and quite possibly more, to ensure app servers are close to users. So it seems this is out.</li>\n<li>\n<code>three_data_hall</code> mode doesn\u2019t seem right, because then you need at least 4 machines to make progress. But I want only 3 to make progress, with 1 lost (they\u2019ll probably be VMs so I expect \u201closs\u201d to be a rare and user-driven event).</li>\n<li>None of the single datacenter modes seem right. E.g. <code>triple</code> replication is good but you need 5 machines to make progress.</li>\n<li>\n<code>three_datacenter</code> mode therefore seems the best, at least for apps that want low latencies in Asia as well as Europe/USA, or want to split the US into two coastal regions.  But it says data is replicated six times, which seems wasteful. Why isn\u2019t it replicated three times? And what if I wanted four datacenters e.g. east-us/west-us/europe/taiwan but am OK with the same level of fault tolerance as 3, i.e. the 4th doesn\u2019t take part in leader election so having an even number isn\u2019t fatal?</li>\n</ol>\n<p>Maybe FDB isn\u2019t really designed/optimised for many replicas of a small dataset?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-11-22T23:14:51.976Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 778,
        "reads": 68,
        "readers_count": 67,
        "score": 3908.6,
        "yours": false,
        "topic_id": 2451,
        "topic_slug": "best-configuration-for-worldwide-low-latency-with-small-databases",
        "display_username": "Mike Hearn",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/multi-region-setup-with-write-and-read-clusters/3633",
            "internal": true,
            "reflection": true,
            "title": "Multi-region setup with write and read clusters",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 2
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 854,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/best-configuration-for-worldwide-low-latency-with-small-databases/2451/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 8801,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2020-11-23T02:31:50.569Z",
        "cooked": "<p>You could use the Disaster Recovery solution to asynchronously replicate one FDB database into multiple other clusters, but that would leave you with potential data loss if your main geographic site disappeared completely.</p>\n<p>Currently, multi-region essentially gives you a seamless failover between a hot primary cluster and a warm secondary cluster, not a full geo-replication solution.  I think what you\u2019re looking we\u2019ve discussed as part of extending multi-region to &gt;2 regions.  This has been on the roadmap, but as of now in 2020, it isn\u2019t implemented.</p>\n<p>I\u2019d recommend looking into CockroachDB, YugaByte, or TiDB, as alternatives that currently geo-replicate better.  (Cassandra or CouchDB if you\u2019re looking for your regions to operate independently and sync data later.)</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-11-23T02:31:50.569Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 9,
        "reads": 68,
        "readers_count": 67,
        "score": 73.6,
        "yours": false,
        "topic_id": 2451,
        "topic_slug": "best-configuration-for-worldwide-low-latency-with-small-databases",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/best-configuration-for-worldwide-low-latency-with-small-databases/2451/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8803,
        "name": "Oleg Samarin",
        "username": "osamarin",
        "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png",
        "created_at": "2020-11-24T14:01:40.506Z",
        "cooked": "<p>If I understand the low latency requirements correctly, <a class=\"mention\" href=\"/u/mikehearn\">@mikehearn</a> wants to have several clusters with active-active multimaster replication, and the user application should select  the nearest cluster for connection.</p>\n<p>Does fdb support this configuration?</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-11-24T14:01:40.506Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 5,
        "reads": 64,
        "readers_count": 63,
        "score": 42.8,
        "yours": false,
        "topic_id": 2451,
        "topic_slug": "best-configuration-for-worldwide-low-latency-with-small-databases",
        "display_username": "Oleg Samarin",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 711,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/best-configuration-for-worldwide-low-latency-with-small-databases/2451/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8804,
        "name": "Mike Hearn",
        "username": "mikehearn",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mikehearn/{size}/984_2.png",
        "created_at": "2020-11-24T18:19:43.778Z",
        "cooked": "<p>Hmm, that\u2019s a pity, as FDB is exactly the right fit for these apps otherwise (I have a library similar to the records layer I want to use). And honestly I feel more secure with Apple funding the DB than some VC-d to the hilt startup that\u2019s on Series D funding already.</p>\n<p>Multi-master isn\u2019t a requirement: it\u2019s OK if commit latencies are somewhat high as long as reads are fast, because when mapping data models to key/value spaces, you end up blocking on reads all the time, whereas writes commit in a batch at the end anyway. And I guess it\u2019s OK for apps to be using cached read versions and other tricks to avoid WAN roundtrips for every single read-only tx, if the client knows it hasn\u2019t done any writes recently (and e.g. the user hasn\u2019t pushed a refresh button). IIRC Facebook used to use a technique like this, where a user would be routed to a lagging slave datacenter until they did a write transaction, at that point a cookie would be used to transparently route them back to the master DC for a few minutes, where \u201ca few\u201d was set to be longer than the async replication delay. I suppose that might also work. However then you lose the fast reads for however long the DR cluster lags by, which isn\u2019t ideal, and of course you\u2019d ideally have an automated mechanism for detecting when the replica has caught up (not entirely sure how beyond incrementing a global atomic counter with every write \u2026 maybe using fdb\u2019s own version numbers)?</p>\n<p>Perhaps multi-region can be combined with DR? So you have two regions for robustness purposes, and then DR for getting data closer to users. If a user is hitting a lagged replica and does a write, that tx and all subsequent are sent to the master region until the lagged replica is caught up.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-11-24T18:19:43.778Z",
        "reply_count": 3,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 5,
        "reads": 61,
        "readers_count": 60,
        "score": 52.2,
        "yours": false,
        "topic_id": 2451,
        "topic_slug": "best-configuration-for-worldwide-low-latency-with-small-databases",
        "display_username": "Mike Hearn",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 711,
          "username": "osamarin",
          "name": "Oleg Samarin",
          "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 854,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/best-configuration-for-worldwide-low-latency-with-small-databases/2451/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8805,
        "name": "Josh Mintz",
        "username": "Jmintz",
        "avatar_template": "/user_avatar/forums.foundationdb.org/jmintz/{size}/451_2.png",
        "created_at": "2020-11-24T18:44:11.585Z",
        "cooked": "<blockquote>\n<p>honestly I feel more secure with Apple funding the DB than some VC-d to the hilt startup that\u2019s on Series D funding already.</p>\n</blockquote>\n<p>Cassandra and CouchDB don\u2019t quite fit that category\u2026being Apache projects. CouchDB is specifically a strategic focus for IBM. In fact, CouchDB 4.0 is being developed on FDB.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-11-24T18:45:22.031Z",
        "reply_count": 0,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 58,
        "readers_count": 57,
        "score": 16.6,
        "yours": false,
        "topic_id": 2451,
        "topic_slug": "best-configuration-for-worldwide-low-latency-with-small-databases",
        "display_username": "Josh Mintz",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 854,
          "username": "mikehearn",
          "name": "Mike Hearn",
          "avatar_template": "/user_avatar/forums.foundationdb.org/mikehearn/{size}/984_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 461,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/best-configuration-for-worldwide-low-latency-with-small-databases/2451/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8806,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2020-11-24T21:44:36.102Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"mikehearn\" data-post=\"4\" data-topic=\"2451\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/mikehearn/48/984_2.png\" class=\"avatar\"> mikehearn:</div>\n<blockquote>\n<p>Facebook used to use a technique like this, where a user would be routed to a lagging slave datacenter until they did a write transaction, at that point a cookie would be used to transparently route them back to the master DC for a few minutes, where \u201ca few\u201d was set to be longer than the async replication delay.</p>\n</blockquote>\n</aside>\n<p>I think this got published as <a href=\"https://www.usenix.org/conference/osdi20/presentation/shi\">FlightTracker: Consistency across Read-Optimized Online Stores at Facebook</a>.</p>\n<aside class=\"quote no-group\" data-username=\"mikehearn\" data-post=\"4\" data-topic=\"2451\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/mikehearn/48/984_2.png\" class=\"avatar\"> mikehearn:</div>\n<blockquote>\n<p>Perhaps multi-region can be combined with DR? So you have two regions for robustness purposes, and then DR for getting data closer to users.</p>\n</blockquote>\n</aside>\n<p>This is a possibility.  I\u2019m hesitant to recommend it because I don\u2019t think I\u2019m aware of anyone else running with &gt;1 DRs, and only O(days) of running DR and multi-region concurrently.  It\u2019s in the \u201cit should work\u201d category, but it\u2019s possible that there\u2019s lurking bugs.</p>\n<p>But even if it does work in terms of running stably, it\u2019s still not going to be great in terms of writing an application against it.  From the FDB client perspective, this would look like having two different clusters.  You would be able to create read-only transactions against your local (DR) cluster, and create read-write onces against the global cluster (the reads will also have high latency, and you\u2019ll be bound to the 5s limit still), and your application would need to be able to decide which one to do.</p>\n<p>Closer on the multi-region roadmap was getting a read version across the WAN, doing all reads locally, and then committing the transaction across the WAN, which sounds like more of what you\u2019re looking for.  But again, not yet implemented. <img src=\"https://emoji.discourse-cdn.com/twitter/disappointed.png?v=12\" title=\":disappointed:\" class=\"emoji\" alt=\":disappointed:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-11-24T21:47:11.655Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 1,
        "incoming_link_count": 6,
        "reads": 58,
        "readers_count": 57,
        "score": 46.6,
        "yours": false,
        "topic_id": 2451,
        "topic_slug": "best-configuration-for-worldwide-low-latency-with-small-databases",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://www.usenix.org/conference/osdi20/presentation/shi",
            "internal": false,
            "reflection": false,
            "title": "FlightTracker: Consistency across Read-Optimized Online Stores at Facebook | USENIX",
            "clicks": 18
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/best-configuration-for-worldwide-low-latency-with-small-databases/2451/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8807,
        "name": "Mike Hearn",
        "username": "mikehearn",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mikehearn/{size}/984_2.png",
        "created_at": "2020-11-24T22:02:49.068Z",
        "cooked": "<p>Thanks. How much work is it to implement, do you think? Is this a project that\u2019d require a large amount of new code?</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-11-24T22:02:49.068Z",
        "reply_count": 1,
        "reply_to_post_number": 6,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 56,
        "readers_count": 55,
        "score": 31.2,
        "yours": false,
        "topic_id": 2451,
        "topic_slug": "best-configuration-for-worldwide-low-latency-with-small-databases",
        "display_username": "Mike Hearn",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 854,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/best-configuration-for-worldwide-low-latency-with-small-databases/2451/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8808,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2020-11-25T17:10:31.016Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"mikehearn\" data-post=\"7\" data-topic=\"2451\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/mikehearn/48/984_2.png\" class=\"avatar\"> mikehearn:</div>\n<blockquote>\n<p>Is this a project that\u2019d require a large amount of new code?</p>\n</blockquote>\n</aside>\n<p>It kind of depends\u2026 The main problem I see is that operationalizing something like this would be quite painful\u2026 Also the high latencies could be a huge problem: if a replica ever falls behind by more than 5 seconds, you will not be able to read from it. There are other weird issues that you would need to address - for example currently <code>past_version</code> exceptions are handled by the client under the assumptions that the storage is falling behind which wouldn\u2019t necessarily be true anymore. This could lead to some surprising behavior.</p>\n<p>An alternative would be the following:</p>\n<ol>\n<li>Get a read version from the replica.</li>\n<li>Commit to the global cluster.</li>\n</ol>\n<p>That way you would only pay for the commit - everything else would be low latency (and read-only transactions would be as fast as running locally). However, this would come at a significant cost:</p>\n<ol>\n<li>You lose strict serializability across regions (this one might be ok - your transactions will still be serializable, but you might occasionally read stale data. Sometimes you might not even see your own writes, which might be a bigger issue).</li>\n<li>Depending on your workload, the conflict rate could become unacceptably high - to the point where your application stops making progress. Especially if you do not read your own writes, the sharding won\u2019t help you to mitigate this.</li>\n</ol>\n<p>We have a project in the pipeline that might be of better use for you which is basically a multi-cluster configuration. The basic idea is to split the global key space into ranges and each FDB cluster will own a set of ranges. That way you could do something like this:</p>\n<ol>\n<li>Shard your data by users.</li>\n<li>Each FDB cluster will be responsible for all users in its region.</li>\n<li>Have DR (or even two-datacenter mode) to get a hot standby in a second region - but just for fail over. Depending on your HA needs, just having a good backup story could be a cheaper alternative.</li>\n<li>If you have some global ranges, try to keep access to them minimal and just take the latency-hit.</li>\n</ol>\n<p>Obviously without more knowledge about your workload, it\u2019s hard to tell whether this would be an acceptable solution. Also it will take more time to get this feature implemented and working (though we always look for external contributors if you want to speed stuff up <img src=\"https://emoji.discourse-cdn.com/twitter/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"> ).</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-11-25T17:10:31.016Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 8,
        "reads": 53,
        "readers_count": 52,
        "score": 50.6,
        "yours": false,
        "topic_id": 2451,
        "topic_slug": "best-configuration-for-worldwide-low-latency-with-small-databases",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/best-configuration-for-worldwide-low-latency-with-small-databases/2451/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8819,
        "name": "Oleg Samarin",
        "username": "osamarin",
        "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png",
        "created_at": "2020-12-01T08:40:17.199Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"mikehearn\" data-post=\"4\" data-topic=\"2451\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/mikehearn/48/984_2.png\" class=\"avatar\"> mikehearn:</div>\n<blockquote>\n<p>Perhaps multi-region can be combined with DR? So you have two regions for robustness purposes, and then DR for getting data closer to users.</p>\n</blockquote>\n</aside>\n<p>If you have DR\u2019s, then you don\u2019t need to have multi-region. You can obtain some level of robustness with DR.</p>\n<p>Seems several DRs satisfy you needs. But there are some concerns</p>\n<ol>\n<li>There are several cluster files for connection to different DRs or to the master. You application would be responsible for choosing the necessary cluster files depending on the latency and the necessarity of writing.</li>\n<li>By default DR clusters are forbidden for queries against them. You application need to enable READ_LOCK_AWARE transaction option for overriding this.</li>\n<li>The data in DR clusters may be not consistent (when some mutations from the same transaction have already been applied to the DR, but some haven\u2019t yet).</li>\n<li>When you application makes writing to the master and then reads data from the nearest DR, it may see the old data that were before writting.</li>\n</ol>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-12-01T08:41:42.287Z",
        "reply_count": 0,
        "reply_to_post_number": 4,
        "quote_count": 1,
        "incoming_link_count": 7,
        "reads": 47,
        "readers_count": 46,
        "score": 59.4,
        "yours": false,
        "topic_id": 2451,
        "topic_slug": "best-configuration-for-worldwide-low-latency-with-small-databases",
        "display_username": "Oleg Samarin",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 711,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/best-configuration-for-worldwide-low-latency-with-small-databases/2451/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      8799,
      8801,
      8803,
      8804,
      8805,
      8806,
      8807,
      8808,
      8819
    ]
  },
  "timeline_lookup": [
    [
      1,
      1794
    ],
    [
      3,
      1792
    ],
    [
      8,
      1791
    ],
    [
      9,
      1786
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Best configuration for worldwide low latency with small databases",
  "id": 2451,
  "title": "Best configuration for worldwide low latency with small databases",
  "posts_count": 9,
  "created_at": "2020-11-22T23:14:51.893Z",
  "views": 2122,
  "reply_count": 5,
  "like_count": 5,
  "last_posted_at": "2020-12-01T08:40:17.199Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "best-configuration-for-worldwide-low-latency-with-small-databases",
  "category_id": 17,
  "word_count": 1831,
  "deleted_at": null,
  "user_id": 854,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_2451",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 9,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 5,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Cross Datacenter/Region?",
      "id": 186,
      "title": "Cross Datacenter/Region?",
      "slug": "cross-datacenter-region",
      "posts_count": 10,
      "reply_count": 3,
      "highest_post_number": 10,
      "image_url": null,
      "created_at": "2018-04-21T18:09:15.229Z",
      "last_posted_at": "2018-06-14T19:55:13.933Z",
      "bumped": true,
      "bumped_at": "2018-06-14T19:55:13.933Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 3406,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 130,
            "username": "aphistic",
            "name": "Erik Davidson",
            "avatar_template": "/user_avatar/forums.foundationdb.org/aphistic/{size}/90_2.png",
            "trust_level": 0
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 183,
            "username": "tylerchr",
            "name": "Tyler",
            "avatar_template": "/user_avatar/forums.foundationdb.org/tylerchr/{size}/143_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 54,
            "username": "Evan",
            "name": "Evan Tschannen",
            "avatar_template": "/user_avatar/forums.foundationdb.org/evan/{size}/104_2.png",
            "moderator": true,
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Replication method consideration",
      "id": 1410,
      "title": "Replication method consideration",
      "slug": "replication-method-consideration",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2019-05-30T12:13:55.382Z",
      "last_posted_at": "2019-05-31T00:39:24.107Z",
      "bumped": true,
      "bumped_at": "2019-05-31T00:39:24.107Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 792,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 595,
            "username": "Choboz",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/c/65b543/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Data location constraints",
      "id": 674,
      "title": "Data location constraints",
      "slug": "data-location-constraints",
      "posts_count": 4,
      "reply_count": 1,
      "highest_post_number": 4,
      "image_url": null,
      "created_at": "2018-08-31T13:39:32.808Z",
      "last_posted_at": "2018-09-01T02:15:26.294Z",
      "bumped": true,
      "bumped_at": "2018-09-01T02:15:26.294Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1298,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 363,
            "username": "ad-bitmed",
            "name": "AD",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ad-bitmed/{size}/370_2.png",
            "trust_level": 0
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Optimal configuration for more than 3 DCs",
      "id": 1519,
      "title": "Optimal configuration for more than 3 DCs",
      "slug": "optimal-configuration-for-more-than-3-dcs",
      "posts_count": 8,
      "reply_count": 4,
      "highest_post_number": 8,
      "image_url": null,
      "created_at": "2019-07-15T04:50:08.246Z",
      "last_posted_at": "2019-07-15T09:32:14.332Z",
      "bumped": true,
      "bumped_at": "2019-07-15T09:32:14.332Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 1332,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 542,
            "username": "jonahwest",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/90db22/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Multi DC replication",
      "id": 499,
      "title": "Multi DC replication",
      "slug": "multi-dc-replication",
      "posts_count": 7,
      "reply_count": 3,
      "highest_post_number": 7,
      "image_url": null,
      "created_at": "2018-06-08T11:15:53.704Z",
      "last_posted_at": "2018-10-17T22:46:28.056Z",
      "bumped": true,
      "bumped_at": "2018-10-17T22:46:28.056Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 3084,
      "category_id": 8,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 22,
            "username": "dave",
            "name": "David Scherer",
            "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 14,
            "username": "andrew.noyes",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 387,
            "username": "wll",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/wll/{size}/386_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 854,
        "username": "mikehearn",
        "name": "Mike Hearn",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mikehearn/{size}/984_2.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 711,
        "username": "osamarin",
        "name": "Oleg Samarin",
        "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 15,
        "username": "markus.pilman",
        "name": "Markus Pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 461,
        "username": "Jmintz",
        "name": "Josh Mintz",
        "avatar_template": "/user_avatar/forums.foundationdb.org/jmintz/{size}/451_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      }
    ],
    "created_by": {
      "id": 854,
      "username": "mikehearn",
      "name": "Mike Hearn",
      "avatar_template": "/user_avatar/forums.foundationdb.org/mikehearn/{size}/984_2.png"
    },
    "last_poster": {
      "id": 711,
      "username": "osamarin",
      "name": "Oleg Samarin",
      "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png"
    },
    "links": [
      {
        "url": "https://www.usenix.org/conference/osdi20/presentation/shi",
        "title": "FlightTracker: Consistency across Read-Optimized Online Stores at Facebook | USENIX",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 18,
        "user_id": 13,
        "domain": "www.usenix.org",
        "root_domain": "usenix.org"
      }
    ]
  },
  "bookmarks": []
}