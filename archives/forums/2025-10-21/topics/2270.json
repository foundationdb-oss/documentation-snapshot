{
  "post_stream": {
    "posts": [
      {
        "id": 7683,
        "name": "Leo Hu",
        "username": "lehu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
        "created_at": "2020-08-02T03:47:59.622Z",
        "cooked": "<p>Data distribution at our FDB cluster\u2019s <strong>DC1</strong> has been relatively even, but <strong>DC3</strong> has become <strong>uneven</strong> recently.</p>\n<p>Five days ago, the distribution at <strong>DC1</strong> was very even: disk usages of all nodes (Kubernetes pods in our case) were at 67%.</p>\n<p>However at <strong>DC3</strong>, the disk usages are uneven: some at <strong>61%</strong>, some at <strong>71%</strong>, and one pod got 79%. We got an alert (for greater than 75%). The 79% spike came down one day later, but the disk usages has stayed at a bifurcated state of 2 tiers for disk usages: about <strong>one-third</strong> of all 60 storage pods at the lower tier, and other <strong>two-third</strong> at the higher tier.</p>\n<p>We loaded data recently. The values of the 2 tiers have increased, but the difference between the 2 tiers (about 10 percentage points) remains. Here are sample values of the 2 tiers:<br>\n\u2013  61% and 71% (five days ago)<br>\n\u2013  63% and 72% (four days ago)<br>\n\u2013  64% and 74% (today)</p>\n<p>Here are the disk usages for the first 10 storage pods today:</p>\n<pre><code class=\"lang-auto\">POD_NAME                                 Size  Used Avail Use% Mounted on\n---------------------------------------- ----- ---- ----- ---- ----------------------\nxid2-storage-01-5b5f599588-wp59h         340G  251G  90G  74%  /var/lib/foundationdb\nxid2-storage-02-76c6b46c4-dj6z6          340G  217G 124G  64%  /var/lib/foundationdb\nxid2-storage-03-69b66fc568-qbvg2         340G  251G  90G  74%  /var/lib/foundationdb\nxid2-storage-04-c95ddcb98-6ljff          340G  252G  89G  74%  /var/lib/foundationdb\nxid2-storage-05-6cd5f5b77b-lbb5v         340G  252G  89G  75%  /var/lib/foundationdb\nxid2-storage-06-78bc5fb4db-mqzc5         340G  216G 125G  64%  /var/lib/foundationdb\nxid2-storage-07-6966fb97fb-j6jsx         340G  251G  90G  74%  /var/lib/foundationdb\nxid2-storage-08-7555965d4b-67h8r         340G  217G 124G  64%  /var/lib/foundationdb\nxid2-storage-09-55946fdcb4-kdh7f         340G  250G  91G  74%  /var/lib/foundationdb\nxid2-storage-10-6c6cd68cd4-mvcw8         340G  250G  91G  74%  /var/lib/foundationdb\n</code></pre>\n<p>Is there a way to fix this 2-tiered data distribution issue?</p>\n<p>Thanks.</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 7,
        "updated_at": "2020-08-02T03:47:59.622Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 17,
        "reads": 23,
        "readers_count": 22,
        "score": 89.6,
        "yours": false,
        "topic_id": 2270,
        "topic_slug": "data-distribution-disk-usage-uneven-bifurcated-at-2-tiers",
        "display_username": "Leo Hu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 643,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-distribution-disk-usage-uneven-bifurcated-at-2-tiers/2270/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 7684,
        "name": "Meng Xu",
        "username": "mengxu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
        "created_at": "2020-08-03T06:31:13.839Z",
        "cooked": "<p>Is there any hot spot among these storage servers? If the low-space-utilized storage servers are heavily read or write, they may stay with less data for load balancing purpose. DD uses both the space and write throughput to balance data among SSes.</p>\n<p>How about the data movement activity on the cluster? Event <code>RelocateShard</code> can be useful.</p>\n<p>The events <code>BgDDMountainChopper</code> and <code>BgDDValleyFiller</code> are also useful. They shows what decisions DD made to balance data among SSes.</p>\n<p>If all of above does not work, does the problem still exist if you kill the DD role and let it restart?</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 7,
        "updated_at": "2020-08-03T06:31:13.839Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 22,
        "readers_count": 21,
        "score": 14.4,
        "yours": false,
        "topic_id": 2270,
        "topic_slug": "data-distribution-disk-usage-uneven-bifurcated-at-2-tiers",
        "display_username": "Meng Xu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 337,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-distribution-disk-usage-uneven-bifurcated-at-2-tiers/2270/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7685,
        "name": "gaurav",
        "username": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "created_at": "2020-08-03T07:40:01.227Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"mengxu\" data-post=\"2\" data-topic=\"2270\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/mengxu/48/893_2.png\" class=\"avatar\"> mengxu:</div>\n<blockquote>\n<p>If the low-space-utilized storage servers are heavily read or write, they may stay with less data for load balancing purpose.</p>\n</blockquote>\n</aside>\n<p>How does reducing data size for given SS help in balancing of load?</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 7,
        "updated_at": "2020-08-03T07:40:01.227Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 23,
        "readers_count": 22,
        "score": 9.6,
        "yours": false,
        "topic_id": 2270,
        "topic_slug": "data-distribution-disk-usage-uneven-bifurcated-at-2-tiers",
        "display_username": "gaurav",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 166,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-distribution-disk-usage-uneven-bifurcated-at-2-tiers/2270/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7692,
        "name": "Russell Sears",
        "username": "sears",
        "avatar_template": "/user_avatar/forums.foundationdb.org/sears/{size}/887_2.png",
        "created_at": "2020-08-03T18:14:30.316Z",
        "cooked": "<p>If FDB notices that most updates are against a small key range, it will split the range onto two storage servers.  That way, two storage servers handle the updates instead of one.</p>\n<p>FDB also tries to balance space utilization across nodes, but sometimes the two goals conflict.</p>\n<p>If the emptier machines tend to be busier than the full machines, or if you expect lots of shifting write workloads in your setup, then it suggests the problem might have something to do with load balancing instead of space balancing.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 7,
        "updated_at": "2020-08-03T18:14:30.316Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 20,
        "readers_count": 19,
        "score": 9.0,
        "yours": false,
        "topic_id": 2270,
        "topic_slug": "data-distribution-disk-usage-uneven-bifurcated-at-2-tiers",
        "display_username": "Russell Sears",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 741,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-distribution-disk-usage-uneven-bifurcated-at-2-tiers/2270/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7697,
        "name": "Leo Hu",
        "username": "lehu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
        "created_at": "2020-08-03T23:26:46.170Z",
        "cooked": "<p>Meng, I pulled sample records for the events you mentioned. Don\u2019t know how to interpret them. Can you tell me what you see? Thanks.</p>\n<pre><code>/var/log/foundationdb# g -w RelocateShard *  | head -3\ntrace.10.104.219.200.4300.1591742762.lLtRwM.2.571.xml:&lt;Event Severity=\"10\" Time=\"1596437497.095264\" Type=\"RelocateShard\" ID=\"62a7ab6bb8577a81\" BeginPair=\"bd53650c6553f07e\" KeyBegin=\"\\x159\\x01P\\x00\\xff\\x00\\xff\\x03\\xa92\\xd1\" KeyEnd=\"\\x159\\x01P\\x00\\xff\\x00\\xff\\x03\\xae\\xf7?\" Priority=\"121\" RelocationID=\"bd53650c6553f07e\" SuppressedEventCount=\"0\" Machine=\"10.104.219.200:4300\" LogGroup=\"default\" Roles=\"DD\" /&gt;\ntrace.10.104.219.200.4300.1591742762.lLtRwM.2.571.xml:&lt;Event Severity=\"10\" Time=\"1596437518.569795\" Type=\"RelocateShard\" ID=\"62a7ab6bb8577a81\" EndPair=\"6f6235e5c34360f2\" Duration=\"83.9866\" Result=\"Success\" Machine=\"10.104.219.200:4300\" LogGroup=\"default\" Roles=\"DD\" /&gt;\ntrace.10.104.219.200.4300.1591742762.lLtRwM.2.571.xml:&lt;Event Severity=\"10\" Time=\"1596437519.172733\" Type=\"RelocateShard\" ID=\"62a7ab6bb8577a81\" BeginPair=\"22e7cc42dba0b24b\" KeyBegin=\"\\x159\\x01X\\x00\\xff\\x00\\xff\\x02\\xd6\\x19\\xa3\" KeyEnd=\"\\x159\\x01X\\x00\\xff\\x00\\xff\\x02\\xd9w\\xc7\" Priority=\"121\" RelocationID=\"22e7cc42dba0b24b\" SuppressedEventCount=\"0\" Machine=\"10.104.219.200:4300\" LogGroup=\"default\" Roles=\"DD\" /&gt;\n\n/var/log/foundationdb# g -w BgDDMountainChopper *  | head -3\ntrace.10.104.219.200.4300.1591742762.lLtRwM.2.571.xml:&lt;Event Severity=\"10\" Time=\"1596437497.080237\" Type=\"BgDDMountainChopper\" ID=\"62a7ab6bb8577a81\" SourceBytes=\"97009257126\" DestBytes=\"96134743075\" ShardBytes=\"193411567\" AverageShardBytes=\"175131940\" SourceTeam=\"Size 3; 10.104.216.165:4500:tls 1dcaa3a49eefa427, 10.104.222.138:4500:tls 9781fc81b9c02df2, 10.104.218.181:4500:tls c2842996384c3e8c\" DestTeam=\"Size 3; 10.104.222.182:4501:tls 64106db0bb815006, 10.104.220.188:4501:tls b471df16ae348822, 10.104.219.166:4500:tls ca906961ccf88e40\" Machine=\"10.104.219.200:4300\" LogGroup=\"default\" Roles=\"DD\" /&gt;\ntrace.10.104.219.200.4300.1591742762.lLtRwM.2.571.xml:&lt;Event Severity=\"10\" Time=\"1596437519.157230\" Type=\"BgDDMountainChopper\" ID=\"62a7ab6bb8577a81\" SourceBytes=\"97077445149\" DestBytes=\"95776258460\" ShardBytes=\"192051255\" AverageShardBytes=\"175131940\" SourceTeam=\"Size 3; 10.104.216.165:4500:tls 1dcaa3a49eefa427, 10.104.222.138:4500:tls 9781fc81b9c02df2, 10.104.218.181:4500:tls c2842996384c3e8c\" DestTeam=\"Size 3; 10.104.221.170:4500:tls 17f8dce48198edff, 10.104.222.172:4501:tls 3f30e62f68d5ea66, 10.104.219.166:4501:tls cdfec94d3910a996\" Machine=\"10.104.219.200:4300\" LogGroup=\"default\" Roles=\"DD\" /&gt;\ntrace.10.104.219.200.4300.1591742762.lLtRwM.2.571.xml:&lt;Event Severity=\"10\" Time=\"1596437529.548800\" Type=\"BgDDMountainChopper\" ID=\"62a7ab6bb8577a81\" SourceBytes=\"97104355369\" DestBytes=\"95696703530\" ShardBytes=\"203295749\" AverageShardBytes=\"175131940\" SourceTeam=\"Size 3; 10.104.216.165:4500:tls 1dcaa3a49eefa427, 10.104.222.138:4500:tls 9781fc81b9c02df2, 10.104.218.181:4500:tls c2842996384c3e8c\" DestTeam=\"Size 3; 10.104.222.172:4501:tls 3f30e62f68d5ea66, 10.104.218.166:4501:tls 6e3c03a54d7957da, 10.104.219.195:4500:tls 6ea914748c494668\" Machine=\"10.104.219.200:4300\" LogGroup=\"default\" Roles=\"DD\" /&gt;\n\n/var/log/foundationdb# g -w BgDDValleyFiller *  | head -3\ntrace.10.104.219.200.4300.1591742762.lLtRwM.2.571.xml:&lt;Event Severity=\"10\" Time=\"1596437530.509963\" Type=\"BgDDValleyFiller\" ID=\"62a7ab6bb8577a81\" SourceBytes=\"97150749865\" DestBytes=\"68060856830\" ShardBytes=\"186806761\" AverageShardBytes=\"175131940\" SourceTeam=\"Size 3; 10.104.220.203:4501:tls 44d0c699bd372f5c, 10.104.218.129:4501:tls 74bc3fd9a5088153, 10.104.222.162:4501:tls f778cd1298f9fa8b\" DestTeam=\"Size 3; 10.104.218.238:4501:tls 40864c06951a1db7, 10.104.218.166:4501:tls 6e3c03a54d7957da, 10.104.222.148:4500:tls 7e85d82e329e99cc\" Machine=\"10.104.219.200:4300\" LogGroup=\"default\" Roles=\"DD\" /&gt;\ntrace.10.104.219.200.4300.1591742762.lLtRwM.2.571.xml:&lt;Event Severity=\"10\" Time=\"1596437554.751788\" Type=\"BgDDValleyFiller\" ID=\"62a7ab6bb8577a81\" SourceBytes=\"96866242568\" DestBytes=\"68154018253\" ShardBytes=\"186967912\" AverageShardBytes=\"175131940\" SourceTeam=\"Size 3; 10.104.220.138:4501:tls 8d9112406bd383d2, 10.104.222.138:4500:tls 9781fc81b9c02df2, 10.104.218.181:4500:tls c2842996384c3e8c\" DestTeam=\"Size 3; 10.104.218.238:4500:tls 0bd6c45fe34b8518, 10.104.222.184:4501:tls a9adc56207b6e65f, 10.104.219.197:4500:tls f7c606591793bf91\" Machine=\"10.104.219.200:4300\" LogGroup=\"default\" Roles=\"DD\" /&gt;\ntrace.10.104.219.200.4300.1591742762.lLtRwM.2.571.xml:&lt;Event Severity=\"10\" Time=\"1596437581.004487\" Type=\"BgDDValleyFiller\" ID=\"62a7ab6bb8577a81\" SourceBytes=\"96962906782\" DestBytes=\"68412667180\" ShardBytes=\"223467332\" AverageShardBytes=\"175131940\" SourceTeam=\"Size 3; 10.104.220.138:4501:tls 8d9112406bd383d2, 10.104.222.138:4500:tls 9781fc81b9c02df2, 10.104.218.181:4500:tls c2842996384c3e8c\" DestTeam=\"Size 3; 10.104.218.238:4500:tls 0bd6c45fe34b8518, 10.104.218.180:4500:tls d7ad8c9c8238a86c, 10.104.220.173:4500:tls eb885625d03dd08b\" Machine=\"10.104.219.200:4300\" LogGroup=\"default\" Roles=\"DD\" /&gt;</code></pre>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 7,
        "updated_at": "2020-08-03T23:26:46.170Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 19,
        "readers_count": 18,
        "score": 8.8,
        "yours": false,
        "topic_id": 2270,
        "topic_slug": "data-distribution-disk-usage-uneven-bifurcated-at-2-tiers",
        "display_username": "Leo Hu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 643,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-distribution-disk-usage-uneven-bifurcated-at-2-tiers/2270/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7722,
        "name": "Meng Xu",
        "username": "mengxu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
        "created_at": "2020-08-06T05:59:23.355Z",
        "cooked": "<p>Sorry, the statement was incorrect.</p>\n<p>When DD balance between SSes, it only considers space. But DD splits shards based on write throughput. The split shards, hopefully, can be balanced by DD when DD balances the space.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 7,
        "updated_at": "2020-08-06T05:59:23.355Z",
        "reply_count": 0,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 18,
        "readers_count": 17,
        "score": 23.6,
        "yours": false,
        "topic_id": 2270,
        "topic_slug": "data-distribution-disk-usage-uneven-bifurcated-at-2-tiers",
        "display_username": "Meng Xu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 166,
          "username": "gaurav",
          "name": "gaurav",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 337,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-distribution-disk-usage-uneven-bifurcated-at-2-tiers/2270/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7723,
        "name": "Meng Xu",
        "username": "mengxu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
        "created_at": "2020-08-06T06:17:39.778Z",
        "cooked": "<p><code>RelocateShard</code> tells you what types of data movement is happening from the <code>Priority</code> field. The priority definition is at  <a href=\"https://github.com/xumengpanda/foundationdb/blob/859c3145e2830a7f409ee1de3ec7baae11274759/fdbserver/Knobs.cpp#L123-L136\" rel=\"nofollow noopener\">https://github.com/xumengpanda/foundationdb/blob/859c3145e2830a7f409ee1de3ec7baae11274759/fdbserver/Knobs.cpp#L123-L136</a></p>\n<p>You can aggregate those events to see what are the major reasons for DD to move data.<br>\nPriority <code>121</code>   indicates it is rebalancing for overutilized team, which means DD is doing work to rebalance data. But that is only one event. It has to use aggregated data to get meaningful conclusion.</p>\n<p><code>BgDDMountainChopper</code> and <code>BgDDValleyFiller</code> tells you what data movement decisions DD is making: Moving some shard from the <code>SourceTeam</code> to the <code>DestTeam</code> . The logic is at here: <a href=\"https://github.com/xumengpanda/foundationdb/blob/859c3145e2830a7f409ee1de3ec7baae11274759/fdbserver/DataDistributionQueue.actor.cpp#L1208\" rel=\"nofollow noopener\">https://github.com/xumengpanda/foundationdb/blob/859c3145e2830a7f409ee1de3ec7baae11274759/fdbserver/DataDistributionQueue.actor.cpp#L1208</a><br>\nThese events may give a rough idea about how DD is moving data: from which SS to which SS.</p>\n<p><strong>Note</strong>: Team is a set of 3 storage servers that stores the same data. A storage server can be grouped with other SSes into many teams. A shard is assigned to a SS team. The three SSes in the team are the three replicas of the shard. For example, we have two teams, Team1 = {SS1, SS2, SS3} and Team2 = {SS1, SS2, SS4}. Now we assign shard1 to team1 and shard2 to team2. Now SS1 has both shard1 and shard2, while SS4 has only SS4.  So if the localities of the SSes are skewed a lot, say some fault-tolerance zone (by default it is zoneId) has a lot of SSes while the other has very few SSes, then the zone with very few SSes may be forced to host more data. One event related to teams is <code>TeamCollectionInfo</code> . The event does not provide detailed team information <img src=\"https://emoji.discourse-cdn.com/twitter/frowning.png?v=9\" title=\":frowning:\" class=\"emoji\" alt=\":frowning:\"> but the overview info it provides sometimes can be useful.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 7,
        "updated_at": "2020-08-06T06:17:39.778Z",
        "reply_count": 0,
        "reply_to_post_number": 5,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 18,
        "readers_count": 17,
        "score": 3.6,
        "yours": false,
        "topic_id": 2270,
        "topic_slug": "data-distribution-disk-usage-uneven-bifurcated-at-2-tiers",
        "display_username": "Meng Xu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/xumengpanda/foundationdb/blob/859c3145e2830a7f409ee1de3ec7baae11274759/fdbserver/Knobs.cpp#L123-L136",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/Knobs.cpp at 859c3145e2830a7f409ee1de3ec7baae11274759 \u00b7 xumengpanda/foundationdb \u00b7 GitHub",
            "clicks": 3
          },
          {
            "url": "https://github.com/xumengpanda/foundationdb/blob/859c3145e2830a7f409ee1de3ec7baae11274759/fdbserver/DataDistributionQueue.actor.cpp#L1208",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/DataDistributionQueue.actor.cpp at 859c3145e2830a7f409ee1de3ec7baae11274759 \u00b7 xumengpanda/foundationdb \u00b7 GitHub",
            "clicks": 3
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 643,
          "username": "lehu",
          "name": "Leo Hu",
          "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 337,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-distribution-disk-usage-uneven-bifurcated-at-2-tiers/2270/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      7683,
      7684,
      7685,
      7692,
      7697,
      7722,
      7723
    ]
  },
  "timeline_lookup": [
    [
      1,
      1907
    ],
    [
      2,
      1906
    ],
    [
      4,
      1905
    ],
    [
      6,
      1903
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Data distribution / Disk usage uneven: bifurcated at 2 tiers",
  "id": 2270,
  "title": "Data distribution / Disk usage uneven: bifurcated at 2 tiers",
  "posts_count": 7,
  "created_at": "2020-08-02T03:47:59.558Z",
  "views": 537,
  "reply_count": 3,
  "like_count": 1,
  "last_posted_at": "2020-08-06T06:17:39.778Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "data-distribution-disk-usage-uneven-bifurcated-at-2-tiers",
  "category_id": 7,
  "word_count": 1600,
  "deleted_at": null,
  "user_id": 643,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_2270",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 7,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 4,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Data Distribution Stopped - How to Restart?",
      "id": 1626,
      "title": "Data Distribution Stopped - How to Restart?",
      "slug": "data-distribution-stopped-how-to-restart",
      "posts_count": 14,
      "reply_count": 8,
      "highest_post_number": 14,
      "image_url": "https://global.discourse-cdn.com/foundationdb/optimized/1X/815326e64932cc0dc6e18ad7f6e12f922e059ce8_2_1024x420.png",
      "created_at": "2019-09-12T21:07:32.803Z",
      "last_posted_at": "2019-11-12T19:57:18.277Z",
      "bumped": true,
      "bumped_at": "2019-11-12T19:57:18.277Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 5,
      "views": 1877,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 643,
            "username": "lehu",
            "name": "Leo Hu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 490,
            "username": "rjenkins",
            "name": "Ray Jenkins",
            "avatar_template": "/user_avatar/forums.foundationdb.org/rjenkins/{size}/487_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Keyspace partitions &amp; performance",
      "id": 168,
      "title": "Keyspace partitions & performance",
      "slug": "keyspace-partitions-performance",
      "posts_count": 9,
      "reply_count": 5,
      "highest_post_number": 9,
      "image_url": null,
      "created_at": "2018-04-21T05:03:54.670Z",
      "last_posted_at": "2018-04-22T03:29:31.049Z",
      "bumped": true,
      "bumped_at": "2018-04-22T03:29:31.049Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 5,
      "views": 5892,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 113,
            "username": "pH14",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ph14/{size}/92_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 9,
            "username": "mbhaskar",
            "name": "Bhaskar Muppana",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mbhaskar/{size}/277_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 54,
            "username": "Evan",
            "name": "Evan Tschannen",
            "avatar_template": "/user_avatar/forums.foundationdb.org/evan/{size}/104_2.png",
            "moderator": true,
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Storage server running out of space",
      "id": 1655,
      "title": "Storage server running out of space",
      "slug": "storage-server-running-out-of-space",
      "posts_count": 17,
      "reply_count": 14,
      "highest_post_number": 17,
      "image_url": null,
      "created_at": "2019-09-28T02:44:46.227Z",
      "last_posted_at": "2019-10-02T20:48:03.731Z",
      "bumped": true,
      "bumped_at": "2019-10-02T20:48:03.731Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 3,
      "views": 4053,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 311,
            "username": "ThomasJ",
            "name": "Thomas Johson",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 612,
            "username": "fzhjon",
            "name": "Jon Fu",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/f/9d8465/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Debugging Data Distribution",
      "id": 802,
      "title": "Debugging Data Distribution",
      "slug": "debugging-data-distribution",
      "posts_count": 4,
      "reply_count": 0,
      "highest_post_number": 4,
      "image_url": null,
      "created_at": "2018-10-25T03:02:35.580Z",
      "last_posted_at": "2018-11-14T00:30:26.528Z",
      "bumped": true,
      "bumped_at": "2018-11-14T00:30:26.528Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 921,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 38,
            "username": "panghy",
            "name": "Clement Pang",
            "avatar_template": "/user_avatar/forums.foundationdb.org/panghy/{size}/19_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 54,
            "username": "Evan",
            "name": "Evan Tschannen",
            "avatar_template": "/user_avatar/forums.foundationdb.org/evan/{size}/104_2.png",
            "moderator": true,
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "How to speed up balancing?",
      "id": 1565,
      "title": "How to speed up balancing?",
      "slug": "how-to-speed-up-balancing",
      "posts_count": 12,
      "reply_count": 7,
      "highest_post_number": 12,
      "image_url": null,
      "created_at": "2019-08-06T08:49:50.107Z",
      "last_posted_at": "2019-08-21T00:41:02.788Z",
      "bumped": true,
      "bumped_at": "2019-08-21T00:41:02.788Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1541,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 629,
            "username": "Sraw",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/a88e57/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 337,
        "username": "mengxu",
        "name": "Meng Xu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 643,
        "username": "lehu",
        "name": "Leo Hu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 166,
        "username": "gaurav",
        "name": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 3
      },
      {
        "id": 741,
        "username": "sears",
        "name": "Russell Sears",
        "avatar_template": "/user_avatar/forums.foundationdb.org/sears/{size}/887_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      }
    ],
    "created_by": {
      "id": 643,
      "username": "lehu",
      "name": "Leo Hu",
      "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png"
    },
    "last_poster": {
      "id": 337,
      "username": "mengxu",
      "name": "Meng Xu",
      "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png"
    },
    "links": [
      {
        "url": "https://github.com/xumengpanda/foundationdb/blob/859c3145e2830a7f409ee1de3ec7baae11274759/fdbserver/DataDistributionQueue.actor.cpp#L1208",
        "title": "foundationdb/DataDistributionQueue.actor.cpp at 859c3145e2830a7f409ee1de3ec7baae11274759 \u00b7 xumengpanda/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 337,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/xumengpanda/foundationdb/blob/859c3145e2830a7f409ee1de3ec7baae11274759/fdbserver/Knobs.cpp#L123-L136",
        "title": "foundationdb/Knobs.cpp at 859c3145e2830a7f409ee1de3ec7baae11274759 \u00b7 xumengpanda/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 337,
        "domain": "github.com",
        "root_domain": "github.com"
      }
    ]
  },
  "bookmarks": []
}