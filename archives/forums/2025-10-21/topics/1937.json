{
  "post_stream": {
    "posts": [
      {
        "id": 6158,
        "name": "Rahul Roy",
        "username": "rahul-nitkkr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rahul-nitkkr/{size}/754_2.png",
        "created_at": "2020-02-11T14:48:22.779Z",
        "cooked": "<p><code>FunctionKeyExpression</code>  don\u2019t seem to be honored in the evaluation of a query plan.<br>\nWe came across a <a href=\"https://github.com/FoundationDB/fdb-record-layer/blob/b4e1e7211d07c361003581dd9652a3f60fa4a6ca/fdb-record-layer-core/src/test/java/com/apple/foundationdb/record/provider/foundationdb/FunctionKeyIndexTest.java\" rel=\"nofollow noopener\">test case</a>which exposes this .<br>\nIs there any plan to make FunctionKeyExpressions allowed to be picked for indexes ?<br>\nAre there any workarounds for the same ?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-02-11T14:48:22.779Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 58,
        "reads": 28,
        "readers_count": 27,
        "score": 295.6,
        "yours": false,
        "topic_id": 1937,
        "topic_slug": "functionkeyexpression-is-not-honored-when-evaluating-the-queryplan",
        "display_username": "Rahul Roy",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/FoundationDB/fdb-record-layer/blob/b4e1e7211d07c361003581dd9652a3f60fa4a6ca/fdb-record-layer-core/src/test/java/com/apple/foundationdb/record/provider/foundationdb/FunctionKeyIndexTest.java",
            "internal": false,
            "reflection": false,
            "title": "fdb-record-layer/FunctionKeyIndexTest.java at b4e1e7211d07c361003581dd9652a3f60fa4a6ca \u00b7 FoundationDB/fdb-record-layer \u00b7 GitHub",
            "clicks": 6
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 712,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/functionkeyexpression-is-not-honored-when-evaluating-the-queryplan/1937/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 6159,
        "name": "Scott Gray",
        "username": "scgray",
        "avatar_template": "/user_avatar/forums.foundationdb.org/scgray/{size}/30_2.png",
        "created_at": "2020-02-11T15:56:29.010Z",
        "cooked": "<p>No, queries cannot currently use <code>FunctionKeyExpressions</code>.  The main problem is that the they currently have to way to express the structure of the index keys that they produce in a manner that would be meaningful to the planner.  For example, you could have a function that picks the third letter of every string field in the record and concatenates them to produce a fan-out index key \u2014 there planner has absolutely no insight into what is going on in the guts of the function to know how query arguments could be applied against the index.</p>\n<p>There is work going on in the planner that I will let others chime in on that may pave a path to having fully exposed function based indexes.</p>\n<p>What sort of index are you trying to create?</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-02-11T15:56:29.010Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 28,
        "readers_count": 27,
        "score": 20.6,
        "yours": false,
        "topic_id": 1937,
        "topic_slug": "functionkeyexpression-is-not-honored-when-evaluating-the-queryplan",
        "display_username": "Scott Gray",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 34,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/functionkeyexpression-is-not-honored-when-evaluating-the-queryplan/1937/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6160,
        "name": "Rahul Roy",
        "username": "rahul-nitkkr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rahul-nitkkr/{size}/754_2.png",
        "created_at": "2020-02-11T16:18:00.000Z",
        "cooked": "<p>Thank you for the insight <a class=\"mention\" href=\"/u/scgray\">@scgray</a>.</p>\n<p>Our use case is pretty straightforward, We\u2019re trying to create Uppercase string indexes on a few fields of our data.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-02-11T16:18:23.140Z",
        "reply_count": 0,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 25,
        "readers_count": 24,
        "score": 5.0,
        "yours": false,
        "topic_id": 1937,
        "topic_slug": "functionkeyexpression-is-not-honored-when-evaluating-the-queryplan",
        "display_username": "Rahul Roy",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 34,
          "username": "scgray",
          "name": "Scott Gray",
          "avatar_template": "/user_avatar/forums.foundationdb.org/scgray/{size}/30_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 712,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "via_email": true,
        "post_url": "/t/functionkeyexpression-is-not-honored-when-evaluating-the-queryplan/1937/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6161,
        "name": "Scott Gray",
        "username": "scgray",
        "avatar_template": "/user_avatar/forums.foundationdb.org/scgray/{size}/30_2.png",
        "created_at": "2020-02-11T16:25:14.472Z",
        "cooked": "<p>Oh, ok, then you probably want to take a look at collating indexes.  These are in the fdb-record-layer-icu package.  Here is an example: <a href=\"https://github.com/FoundationDB/fdb-record-layer/blob/master/fdb-record-layer-icu/src/test/java/com/apple/foundationdb/record/icu/TextCollatorICUTest.java\" rel=\"nofollow noopener\">https://github.com/FoundationDB/fdb-record-layer/blob/master/fdb-record-layer-icu/src/test/java/com/apple/foundationdb/record/icu/TextCollatorICUTest.java</a></p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-02-11T16:25:14.472Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 25,
        "readers_count": 24,
        "score": 15.0,
        "yours": false,
        "topic_id": 1937,
        "topic_slug": "functionkeyexpression-is-not-honored-when-evaluating-the-queryplan",
        "display_username": "Scott Gray",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/FoundationDB/fdb-record-layer/blob/master/fdb-record-layer-icu/src/test/java/com/apple/foundationdb/record/icu/TextCollatorICUTest.java",
            "internal": false,
            "reflection": false,
            "title": "fdb-record-layer/TextCollatorICUTest.java at master \u00b7 FoundationDB/fdb-record-layer \u00b7 GitHub",
            "clicks": 14
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 34,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/functionkeyexpression-is-not-honored-when-evaluating-the-queryplan/1937/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6162,
        "name": "Rahul Roy",
        "username": "rahul-nitkkr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rahul-nitkkr/{size}/754_2.png",
        "created_at": "2020-02-11T17:28:34.000Z",
        "cooked": "<p>Ah ok! Let me take a look at that. I\u2019ll come back with my findings.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-02-11T17:28:49.968Z",
        "reply_count": 0,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 25,
        "readers_count": 24,
        "score": 5.0,
        "yours": false,
        "topic_id": 1937,
        "topic_slug": "functionkeyexpression-is-not-honored-when-evaluating-the-queryplan",
        "display_username": "Rahul Roy",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 34,
          "username": "scgray",
          "name": "Scott Gray",
          "avatar_template": "/user_avatar/forums.foundationdb.org/scgray/{size}/30_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 712,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "via_email": true,
        "post_url": "/t/functionkeyexpression-is-not-honored-when-evaluating-the-queryplan/1937/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6163,
        "name": "Mike McMahon",
        "username": "MMcM",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/m/d07c76/{size}.png",
        "created_at": "2020-02-11T19:08:16.177Z",
        "cooked": "<p>First, I will second Scott\u2019s recommendation that you try a collating index with case-insensitivity (<code>3</code>) strength. They are designed for just this kind of use.</p>\n<p>That said, an index defined with a simple function, such as one that uppercases, on a field can in fact be used in a query. The restriction is that the entire key expression that defines the index must be used verbatim in the query with [in]equality predicates. And the <code>FunctionKeyExpression</code> implementation must be marked as a <code>QueryableKeyExpression</code>.</p>\n<p>So, given <code>UPPER(f)</code>, you can do the equivalent of `WHERE UPPER(f) &gt;= \u2018e\u2019 AND UPPER(f) &lt;= \u2018m\u2019 to scan such an index between those bounds.</p>\n<p>What doesn\u2019t work is planner support for \u201cunderstanding\u201d what the index does. An imaginary case of this would be something like <code>WHERE UPPER(f &gt;= 'e' AND f &lt;= 'm')</code>.</p>\n<p>I have created a pull request to fix the test that you found to demonstrate the simple case that does work today.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-02-11T19:08:16.177Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 23,
        "readers_count": 22,
        "score": 19.6,
        "yours": false,
        "topic_id": 1937,
        "topic_slug": "functionkeyexpression-is-not-honored-when-evaluating-the-queryplan",
        "display_username": "Mike McMahon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 219,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/functionkeyexpression-is-not-honored-when-evaluating-the-queryplan/1937/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6403,
        "name": "Vibhuti Dembi",
        "username": "VibhutiD",
        "avatar_template": "/user_avatar/forums.foundationdb.org/vibhutid/{size}/668_2.png",
        "created_at": "2020-03-03T12:09:29.164Z",
        "cooked": "<p>Hi Mike,</p>\n<aside class=\"quote no-group\" data-username=\"MMcM\" data-post=\"6\" data-topic=\"1937\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/m/d07c76/48.png\" class=\"avatar\"> MMcM:</div>\n<blockquote>\n<p>First, I will second Scott\u2019s recommendation that you try a collating index with case-insensitivity ( <code>3</code> ) strength. They are designed for just this kind of use.</p>\n</blockquote>\n</aside>\n<p>I have the same use-case. I am trying to create a uppercase testCollate index and referring to <a href=\"https://github.com/FoundationDB/fdb-record-layer/blob/master/fdb-record-layer-core/src/test/java/com/apple/foundationdb/record/provider/foundationdb/query/FDBCollateQueryTest.java\" rel=\"noopener nofollow ugc\">FDBCollateQueryTest</a> class but my query is not behaving as expected. I\u2019m not sure if my inference is correct.</p>\n<pre><code>Message Order {\n         int32 order_id = 1;\n         int32 price = 2;\n         string buyer = 3;\n}\n</code></pre>\n<p>I have inserted data with values of buyer : [\u201cfoo\u201d, \u201cbar\u201d, \u201cvibhuti\u201d]. My use-case is that user queries buyer: \u201cFOO\u201d and it returns the order with value \u201cfoo\u201d (case-insensitive search). For the above model, the index that I have created is:</p>\n<pre><code>KeyExpression NAME_FIELD = function(CollateFunctionKeyExpressionFactoryJRE.FUNCTION_NAME, field(\"buyer\"));\nbuilder.addIndex(\"order\", \"buyerIndex\", NAME_FIELD );\n</code></pre>\n<p>And the query that I\u2019m firing is (to make sure it picks up this index):</p>\n<p><code>RecordQuery query = RecordQuery.newBuilder().setRecordType(\"Order\").setFilter(Query.field(\"buyer\").equalsValue(\"vibhuti\")).setAllowedIndex(\"buyerIndex\").setRequiredResults(field(\"buyer)).setSort(field(\"buyer\")).build();</code></p>\n<p>When I fire this query, it throws me an error stating \u201cCannot sort without appropriate index: Field { \u2019 buyer\u2019 None}.\u201d The index has already been registered (I have verified this with an IndexScan.). If I remove the setSort method, it does a full range scan instead.</p>\n<p>Is the index I have constructed correct? If not, could you please guide me as to how to proceed further?<br>\nThanks.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-03-03T12:09:29.164Z",
        "reply_count": 1,
        "reply_to_post_number": 6,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 15,
        "readers_count": 14,
        "score": 8.0,
        "yours": false,
        "topic_id": 1937,
        "topic_slug": "functionkeyexpression-is-not-honored-when-evaluating-the-queryplan",
        "display_username": "Vibhuti Dembi",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/FoundationDB/fdb-record-layer/blob/master/fdb-record-layer-core/src/test/java/com/apple/foundationdb/record/provider/foundationdb/query/FDBCollateQueryTest.java",
            "internal": false,
            "reflection": false,
            "title": "fdb-record-layer/FDBCollateQueryTest.java at master \u00b7 FoundationDB/fdb-record-layer \u00b7 GitHub",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 653,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/functionkeyexpression-is-not-honored-when-evaluating-the-queryplan/1937/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6406,
        "name": "Mike McMahon",
        "username": "MMcM",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/m/d07c76/{size}.png",
        "created_at": "2020-03-03T19:02:04.165Z",
        "cooked": "<p>Your query and sort expressions must match the collating index; that is, they must involve the collate function expression.</p>\n<p>Unlike in SQL, where <code>COLLATE</code> clauses affect the behavior of the column itself in indexes and queries, in the record layer that remains unaffected and applications of a collation function are indexed and queried.</p>\n<p>Specifically, instead of <code>Query.field(\"buyer\")</code> use <code>Query.keyExpression(NAME_FIELD)</code> and instead of <code>Key.Expressions.field(\"buyer\")</code> again <code>NAME_FIELD</code>. Review the test class you referred to again and note how it does that.</p>\n<p>Since there is an equality filter on the collated field, the sort won\u2019t make any difference in this query. But I assume that it will in the actual use case.</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-03-03T19:06:01.826Z",
        "reply_count": 1,
        "reply_to_post_number": 7,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 15,
        "readers_count": 14,
        "score": 13.0,
        "yours": false,
        "topic_id": 1937,
        "topic_slug": "functionkeyexpression-is-not-honored-when-evaluating-the-queryplan",
        "display_username": "Mike McMahon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 653,
          "username": "VibhutiD",
          "name": "Vibhuti Dembi",
          "avatar_template": "/user_avatar/forums.foundationdb.org/vibhutid/{size}/668_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 219,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/functionkeyexpression-is-not-honored-when-evaluating-the-queryplan/1937/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6412,
        "name": "Vibhuti Dembi",
        "username": "VibhutiD",
        "avatar_template": "/user_avatar/forums.foundationdb.org/vibhutid/{size}/668_2.png",
        "created_at": "2020-03-04T06:45:04.928Z",
        "cooked": "<p>Ahh got it. Yes the use-case is more complex than this. It works now.<br>\nThanks a ton.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-03-04T06:45:04.928Z",
        "reply_count": 0,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 15,
        "readers_count": 14,
        "score": 3.0,
        "yours": false,
        "topic_id": 1937,
        "topic_slug": "functionkeyexpression-is-not-honored-when-evaluating-the-queryplan",
        "display_username": "Vibhuti Dembi",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 219,
          "username": "MMcM",
          "name": "Mike McMahon",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/m/d07c76/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 653,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/functionkeyexpression-is-not-honored-when-evaluating-the-queryplan/1937/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      6158,
      6159,
      6160,
      6161,
      6162,
      6163,
      6403,
      6406,
      6412
    ]
  },
  "timeline_lookup": [
    [
      1,
      2079
    ],
    [
      7,
      2058
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "FunctionKeyExpression is not honored when evaluating the QueryPlan",
  "id": 1937,
  "title": "FunctionKeyExpression is not honored when evaluating the QueryPlan",
  "posts_count": 9,
  "created_at": "2020-02-11T14:48:22.721Z",
  "views": 960,
  "reply_count": 5,
  "like_count": 0,
  "last_posted_at": "2020-03-04T06:45:04.928Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "functionkeyexpression-is-not-honored-when-evaluating-the-queryplan",
  "category_id": 12,
  "word_count": 854,
  "deleted_at": null,
  "user_id": 712,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_1937",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 9,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 4,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Extending the Record layer query and planner",
      "id": 3629,
      "title": "Extending the Record layer query and planner",
      "slug": "extending-the-record-layer-query-and-planner",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2022-10-27T17:47:43.828Z",
      "last_posted_at": "2022-10-28T12:38:37.911Z",
      "bumped": true,
      "bumped_at": "2022-10-28T12:38:37.911Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 388,
      "category_id": 12,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 782,
            "username": "omidb",
            "name": "Omid Bakhshandeh",
            "avatar_template": "/user_avatar/forums.foundationdb.org/omidb/{size}/925_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Mixed ascending/descending sort?",
      "id": 1582,
      "title": "Mixed ascending/descending sort?",
      "slug": "mixed-ascending-descending-sort",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2019-08-12T21:35:24.255Z",
      "last_posted_at": "2019-08-12T23:19:20.337Z",
      "bumped": true,
      "bumped_at": "2019-08-12T23:19:20.337Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1070,
      "category_id": 12,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 173,
            "username": "jkominek",
            "name": "Jay Kominek",
            "avatar_template": "/user_avatar/forums.foundationdb.org/jkominek/{size}/140_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Multiple questions about Indexes, functions and watches to implement etcd-layer",
      "id": 2047,
      "title": "Multiple questions about Indexes, functions and watches to implement etcd-layer",
      "slug": "multiple-questions-about-indexes-functions-and-watches-to-implement-etcd-layer",
      "posts_count": 8,
      "reply_count": 6,
      "highest_post_number": 8,
      "image_url": null,
      "created_at": "2020-04-06T11:43:10.344Z",
      "last_posted_at": "2020-06-03T06:21:53.521Z",
      "bumped": true,
      "bumped_at": "2020-06-03T06:21:53.521Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 8,
      "views": 3094,
      "category_id": 12,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 534,
            "username": "PierreZ",
            "name": "Pierre Zemb",
            "avatar_template": "/user_avatar/forums.foundationdb.org/pierrez/{size}/866_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Full range scan performed in sort when not required",
      "id": 1995,
      "title": "Full range scan performed in sort when not required",
      "slug": "full-range-scan-performed-in-sort-when-not-required",
      "posts_count": 4,
      "reply_count": 2,
      "highest_post_number": 4,
      "image_url": null,
      "created_at": "2020-03-02T10:49:06.926Z",
      "last_posted_at": "2020-03-03T10:16:53.281Z",
      "bumped": true,
      "bumped_at": "2020-03-03T10:16:53.281Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 987,
      "category_id": 12,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 737,
            "username": "aymalik",
            "name": "Aayushi Malik",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/aca169/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Understanding text index on fdb record layer",
      "id": 1073,
      "title": "Understanding text index on fdb record layer",
      "slug": "understanding-text-index-on-fdb-record-layer",
      "posts_count": 3,
      "reply_count": 1,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2019-01-27T02:39:23.416Z",
      "last_posted_at": "2019-01-30T00:25:55.440Z",
      "bumped": true,
      "bumped_at": "2019-01-30T00:25:55.440Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 8,
      "views": 3511,
      "category_id": 12,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 323,
            "username": "WolfDan",
            "name": "Wolf Dan",
            "avatar_template": "/user_avatar/forums.foundationdb.org/wolfdan/{size}/806_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 712,
        "username": "rahul-nitkkr",
        "name": "Rahul Roy",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rahul-nitkkr/{size}/754_2.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 34,
        "username": "scgray",
        "name": "Scott Gray",
        "avatar_template": "/user_avatar/forums.foundationdb.org/scgray/{size}/30_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 219,
        "username": "MMcM",
        "name": "Mike McMahon",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/m/d07c76/{size}.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 653,
        "username": "VibhutiD",
        "name": "Vibhuti Dembi",
        "avatar_template": "/user_avatar/forums.foundationdb.org/vibhutid/{size}/668_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      }
    ],
    "created_by": {
      "id": 712,
      "username": "rahul-nitkkr",
      "name": "Rahul Roy",
      "avatar_template": "/user_avatar/forums.foundationdb.org/rahul-nitkkr/{size}/754_2.png"
    },
    "last_poster": {
      "id": 653,
      "username": "VibhutiD",
      "name": "Vibhuti Dembi",
      "avatar_template": "/user_avatar/forums.foundationdb.org/vibhutid/{size}/668_2.png"
    },
    "links": [
      {
        "url": "https://github.com/FoundationDB/fdb-record-layer/blob/master/fdb-record-layer-icu/src/test/java/com/apple/foundationdb/record/icu/TextCollatorICUTest.java",
        "title": "fdb-record-layer/TextCollatorICUTest.java at master \u00b7 FoundationDB/fdb-record-layer \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 14,
        "user_id": 34,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/FoundationDB/fdb-record-layer/blob/b4e1e7211d07c361003581dd9652a3f60fa4a6ca/fdb-record-layer-core/src/test/java/com/apple/foundationdb/record/provider/foundationdb/FunctionKeyIndexTest.java",
        "title": "fdb-record-layer/FunctionKeyIndexTest.java at b4e1e7211d07c361003581dd9652a3f60fa4a6ca \u00b7 FoundationDB/fdb-record-layer \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 6,
        "user_id": 712,
        "domain": "github.com",
        "root_domain": "github.com"
      }
    ]
  },
  "bookmarks": []
}