{
  "post_stream": {
    "posts": [
      {
        "id": 12121,
        "name": "Rajiv M Ranganath",
        "username": "rajivr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "created_at": "2022-12-13T04:40:13.289Z",
        "cooked": "<p>I was wondering if FDB caches range reads in the C client?</p>\n<p>For example, suppose in my layer code, I do a range read to get all key values that have a prefix of <code>(\"some\", \"subspace\",)</code>.</p>\n<p>After this future resolves and all values have been collected by the layer code, if I were to issue another range read for prefix <code>(\"some\", \"subspace\", \"inner\", \"data\")</code> within the same transaction, would the second request still hit the storage server or will the C client return a cached result, saving itself a trip to the storage server?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 2,
        "updated_at": "2022-12-13T04:41:09.278Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 17,
        "reads": 26,
        "readers_count": 25,
        "score": 90.2,
        "yours": false,
        "topic_id": 3692,
        "topic_slug": "are-range-reads-cached-in-the-c-client",
        "display_username": "Rajiv M Ranganath",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/question-regarding-fdb-c-api-cache/4397/6",
            "internal": true,
            "reflection": true,
            "title": "Question regarding FDB C API cache",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 946,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/are-range-reads-cached-in-the-c-client/3692/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 12123,
        "name": "Alec Grieser",
        "username": "alloc",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
        "created_at": "2022-12-13T16:41:25.057Z",
        "cooked": "<p>Yes, by default, the FDB C client does maintain a cache of read ranges, and it will use that if possible to save trips to the storage server.</p>\n<p>That cache is managed as a part of the \u201cread your writes\u201d code (see: <a href=\"https://github.com/apple/foundationdb/blob/main/fdbclient/include/fdbclient/ReadYourWrites.h\"><code>ReadYourWrites.actor.h</code></a> and <a href=\"https://github.com/apple/foundationdb/blob/main/fdbclient/ReadYourWrites.actor.cpp\"><code>ReadYourWrites.actor.cpp</code></a>). The primary goal of that code is to maintain a set of updates performed by your client so that if you read a key that your client has already written in the same transaction, you get back the new value (that is, the one you just wrote) instead of a previous value. However, that cache also contains ranges you\u2019ve already read (even if there are no modifications) which similarly will be used purely to avoid duplicate lookups.</p>\n<p>Note that if you disable ReadYourWrites (via the transaction option: <a href=\"https://apple.github.io/foundationdb/api-python.html#fdb.Transaction.options.set_read_your_writes_disable\"><code>set_read_your_writes_disable</code></a>), then this will disable both the write cache (so you will no longer read your own writes, as you might expect) and the read cache (so you will now re-issue reads for previously read ranges). So that\u2019s something to be aware of, performance-wise, if you end up needing that option.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 2,
        "updated_at": "2022-12-13T16:41:25.057Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 26,
        "readers_count": 25,
        "score": 50.2,
        "yours": false,
        "topic_id": 3692,
        "topic_slug": "are-range-reads-cached-in-the-c-client",
        "display_username": "Alec Grieser",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/blob/main/fdbclient/ReadYourWrites.actor.cpp",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/ReadYourWrites.actor.cpp at main \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 6
          },
          {
            "url": "https://github.com/apple/foundationdb/blob/main/fdbclient/include/fdbclient/ReadYourWrites.h",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/ReadYourWrites.h at main \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 6
          },
          {
            "url": "https://apple.github.io/foundationdb/api-python.html#fdb.Transaction.options.set_read_your_writes_disable",
            "internal": false,
            "reflection": false,
            "title": "Python API \u2014 FoundationDB 7.2",
            "clicks": 3
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 3
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 8,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/are-range-reads-cached-in-the-c-client/3692/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      12121,
      12123
    ]
  },
  "timeline_lookup": [
    [
      1,
      1044
    ],
    [
      2,
      1043
    ]
  ],
  "suggested_topics": [],
  "tags": [
    "bindings"
  ],
  "tags_descriptions": {},
  "fancy_title": "Are range reads cached in the C client?",
  "id": 3692,
  "title": "Are range reads cached in the C client?",
  "posts_count": 2,
  "created_at": "2022-12-13T04:40:13.214Z",
  "views": 353,
  "reply_count": 0,
  "like_count": 3,
  "last_posted_at": "2022-12-13T16:41:25.057Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "are-range-reads-cached-in-the-c-client",
  "category_id": 5,
  "word_count": 320,
  "deleted_at": null,
  "user_id": 946,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_3692",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 2,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 2,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Allow range reads without cache pollution",
      "id": 1067,
      "title": "Allow range reads without cache pollution",
      "slug": "allow-range-reads-without-cache-pollution",
      "posts_count": 6,
      "reply_count": 1,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2019-01-25T23:10:12.158Z",
      "last_posted_at": "2019-01-27T19:40:32.858Z",
      "bumped": true,
      "bumped_at": "2019-01-27T19:40:32.858Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 1033,
      "category_id": 8,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Question regarding FDB C API cache",
      "id": 4397,
      "title": "Question regarding FDB C API cache",
      "slug": "question-regarding-fdb-c-api-cache",
      "posts_count": 8,
      "reply_count": 6,
      "highest_post_number": 8,
      "image_url": null,
      "created_at": "2024-03-21T22:09:38.037Z",
      "last_posted_at": "2024-04-30T16:37:08.175Z",
      "bumped": true,
      "bumped_at": "2024-04-30T16:37:08.175Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance",
        "operator"
      ],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 344,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 1395,
            "username": "vivan",
            "name": "tc",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/v/6bbea6/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 1237,
            "username": "danthegoodman",
            "name": "Dan Goodman",
            "avatar_template": "/user_avatar/forums.foundationdb.org/danthegoodman/{size}/1567_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 454,
            "username": "jzhou",
            "name": "Jingyu Zhou",
            "avatar_template": "/user_avatar/forums.foundationdb.org/jzhou/{size}/445_2.png",
            "admin": true,
            "moderator": true,
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "How to Fetch all stored key-values at once",
      "id": 1285,
      "title": "How to Fetch all stored key-values at once",
      "slug": "how-to-fetch-all-stored-key-values-at-once",
      "posts_count": 7,
      "reply_count": 4,
      "highest_post_number": 7,
      "image_url": null,
      "created_at": "2019-04-05T12:12:49.636Z",
      "last_posted_at": "2019-04-10T20:48:57.581Z",
      "bumped": true,
      "bumped_at": "2019-04-10T20:48:57.581Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "fdbsummit"
      ],
      "tags_descriptions": {},
      "like_count": 3,
      "views": 5507,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 511,
            "username": "sakthivelpvs",
            "name": "Sakthivel",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9dc877/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "FoundationDB Summit 2019: Building a Performant Configuration Store Layer",
      "id": 1762,
      "title": "FoundationDB Summit 2019: Building a Performant Configuration Store Layer",
      "slug": "foundationdb-summit-2019-building-a-performant-configuration-store-layer",
      "posts_count": 4,
      "reply_count": 2,
      "highest_post_number": 4,
      "image_url": null,
      "created_at": "2019-11-18T22:28:38.146Z",
      "last_posted_at": "2019-11-20T14:21:21.864Z",
      "bumped": true,
      "bumped_at": "2019-11-20T14:21:21.864Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 758,
      "category_id": 10,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        }
      ]
    },
    {
      "fancy_title": "How to Find Out the FDB Client Talking to a Remote Active Region for GetReadVersion in a Two-Region Configuration?",
      "id": 1300,
      "title": "How to Find Out the FDB Client Talking to a Remote Active Region for GetReadVersion in a Two-Region Configuration?",
      "slug": "how-to-find-out-the-fdb-client-talking-to-a-remote-active-region-for-getreadversion-in-a-two-region-configuration",
      "posts_count": 7,
      "reply_count": 5,
      "highest_post_number": 7,
      "image_url": null,
      "created_at": "2019-04-11T09:50:04.367Z",
      "last_posted_at": "2019-06-14T21:04:57.471Z",
      "bumped": true,
      "bumped_at": "2019-06-14T21:04:57.471Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "bindings"
      ],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 1272,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 531,
            "username": "jltz",
            "name": "Jun Li",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/c0e974/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 8,
        "username": "alloc",
        "name": "Alec Grieser",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 946,
        "username": "rajivr",
        "name": "Rajiv M Ranganath",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      }
    ],
    "created_by": {
      "id": 946,
      "username": "rajivr",
      "name": "Rajiv M Ranganath",
      "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png"
    },
    "last_poster": {
      "id": 8,
      "username": "alloc",
      "name": "Alec Grieser",
      "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png"
    },
    "links": [
      {
        "url": "https://github.com/apple/foundationdb/blob/main/fdbclient/include/fdbclient/ReadYourWrites.h",
        "title": "foundationdb/ReadYourWrites.h at main \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 6,
        "user_id": 8,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/main/fdbclient/ReadYourWrites.actor.cpp",
        "title": "foundationdb/ReadYourWrites.actor.cpp at main \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 6,
        "user_id": 8,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://apple.github.io/foundationdb/api-python.html#fdb.Transaction.options.set_read_your_writes_disable",
        "title": "Python API \u2014 FoundationDB 7.2",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 8,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      }
    ]
  },
  "bookmarks": []
}