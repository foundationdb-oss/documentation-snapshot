{
  "post_stream": {
    "posts": [
      {
        "id": 6519,
        "name": "",
        "username": "v-pap",
        "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png",
        "created_at": "2020-03-29T21:33:25.941Z",
        "cooked": "<p>Currently I am in the process of creating a time series DB. The main goal of the system is to store time series data about machine metrics (CPU load, etc.). My current model is something like this: <code>key: resolution_per_second / machine_id / (metric, year, month, day, hour, minute, second) value: float64</code> There are other similar directories for other resolutions (minute, hour, day) e.g. for minute resolution: <code>resolution_per_minute / machine_id / (metric, year, month, day, hour, minute) value: [sum (float64), count (int)]</code>. In the above examples slashes represent directories and parentheses represent tuples. Each 5s a machine produces about 400 metrics that need to be written in the time series DB. Each time a metric is to be written, there is a check to update the aggregated values for each resolution. This works like this: If a new key-value with per second resolution is received then the per minute tuple is updated, and in a similar way this works for lower resolutions. As a result, the current hour tuple is updated every one minute, and the current day tuple is updated every one hour.<br>\nUnfortunately this model / implementation is not working quite well. Even though read speeds are quite fast, the write performance is not so good, which results to frequent timeouts. We use around 16 processes to handle approximately 15 machines and essentially each request / transaction is a bundle of 400 metrics for a specific machine. As you can probably tell we use directories in order to avoid large keys and minimize conflicts, we even tried to split those requests to smaller ones, but we still get timeouts. In addition, the fdb cluster doesn\u2019t seem to be bothered by the load with mostly less than 20% IO load.<br>\nDo you have any suggestions on how we could improve performance?<br>\nThank you for your time</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-03-29T21:36:51.538Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 419,
        "reads": 58,
        "readers_count": 57,
        "score": 2096.6,
        "yours": false,
        "topic_id": 2032,
        "topic_slug": "scalable-time-series-database-improving-write-throughput",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 744,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/scalable-time-series-database-improving-write-throughput/2032/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 6520,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2020-03-29T22:28:48.217Z",
        "cooked": "<p>Can you describe how you are using the directory layer?</p>\n<p>Are you using atomic ops?</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-03-29T22:28:48.217Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 52,
        "readers_count": 51,
        "score": 15.4,
        "yours": false,
        "topic_id": 2032,
        "topic_slug": "scalable-time-series-database-improving-write-throughput",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/scalable-time-series-database-improving-write-throughput/2032/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6521,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2020-03-30T06:50:07.515Z",
        "cooked": "<p>This sounds more like a request for help in optimizing your cluster rather than your data model.  Can you please provide a full description of how you\u2019re running your cluster, in what environment or on what shape of machines, and how you\u2019ve configured FDB on it?</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-03-30T06:50:24.218Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 50,
        "readers_count": 49,
        "score": 15.0,
        "yours": false,
        "topic_id": 2032,
        "topic_slug": "scalable-time-series-database-improving-write-throughput",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/scalable-time-series-database-improving-write-throughput/2032/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6525,
        "name": "",
        "username": "v-pap",
        "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png",
        "created_at": "2020-03-30T13:53:02.883Z",
        "cooked": "<p><a class=\"mention\" href=\"/u/steavedhams\">@SteavedHams</a><br>\nAt this time we don\u2019t use atomic ops. But undoubtedly they would help with the aggregations. Apart from that, everything else is quite standard, simple writes of key-values and range reads (which are quite fast).</p>\n<p><a class=\"mention\" href=\"/u/alexmiller\">@alexmiller</a><br>\nThe FDB cluster is deployed on a GCE kubernetes cluster with the help of the FDB operator. The FDB cluster is run on local ssds. Here is a summary:</p>\n<pre><code class=\"lang-auto\">Configuration:\n  Redundancy mode        - double\n  Storage engine         - ssd-2\n  Coordinators           - 3\n  Desired Proxies        - 3\n  Desired Resolvers      - 1\n  Desired Logs           - 3\n\nCluster:\n  FoundationDB processes - 7\n  Zones                  - 7\n  Machines               - 7\n</code></pre>\n<p>and</p>\n<pre><code class=\"lang-auto\">databaseConfiguration:\n      log_routers: -1\n      logs: 3\n      proxies: 3\n      redundancy_mode: double\n      remote_logs: -1\n      resolvers: 1\n      storage_engine: ssd-2\n      usable_regions: 1\n    generations:\n      reconciled: 4\n    health:\n      available: true\n      fullReplication: true\n      healthy: true\n    processCounts:\n      log: 4\n      storage: 3\n</code></pre>\n<p>Also here is the status of the cluster when writing data, and at the same getting a few timeouts (transaction timeout: 2s with no retries)</p>\n<pre><code class=\"lang-auto\">Workload:\n  Read rate              - 1078 Hz\n  Write rate             - 651 Hz\n  Transactions started   - 25 Hz\n  Transactions committed - 4 Hz\n  Conflict rate          - 0 Hz\n\nBackup and DR:\n  Running backups        - 0\n  Running DRs            - 0\n\nProcess performance details:\n  10.112.14.112:4501     ( 11% cpu; 17% machine; 0.003 Gbps;  7% disk IO; 2.7 GB / 11.4 GB RAM  )\n  10.112.15.97:4501      (  2% cpu; 45% machine; 0.001 Gbps;  9% disk IO; 0.5 GB / 10.7 GB RAM  )\n  10.112.16.97:4501      (  9% cpu; 23% machine; 0.002 Gbps;  6% disk IO; 0.7 GB / 11.6 GB RAM  )\n  10.112.17.80:4501      (  2% cpu; 22% machine; 0.001 Gbps;  9% disk IO; 0.5 GB / 11.1 GB RAM  )\n  10.112.18.89:4501      (  1% cpu; 49% machine; 0.003 Gbps;  0% disk IO; 0.5 GB / 10.3 GB RAM  )\n  10.112.20.78:4501      (  3% cpu; 25% machine; 0.001 Gbps; 10% disk IO; 0.5 GB / 10.3 GB RAM  )\n  10.112.23.111:4501     ( 11% cpu; 19% machine; 0.004 Gbps;  4% disk IO; 2.7 GB / 11.0 GB RAM  )\n\nCoordination servers:\n  10.112.14.112:4501  (reachable)\n  10.112.16.97:4501  (reachable)\n  10.112.23.111:4501  (reachable)\n\nClient time: 03/30/20 14:28:06\n\n</code></pre>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-03-30T14:32:37.842Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 11,
        "reads": 50,
        "readers_count": 49,
        "score": 65.0,
        "yours": false,
        "topic_id": 2032,
        "topic_slug": "scalable-time-series-database-improving-write-throughput",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 744,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/scalable-time-series-database-improving-write-throughput/2032/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6529,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2020-03-30T19:04:36.027Z",
        "cooked": "<p><a class=\"mention\" href=\"/u/alexmiller\">@alexmiller</a> I\u2019m pretty sure this is a data model or implementation issue.</p>\n<p>400 metrics being written per transaction, where each one is writing a raw data point then updating 3 summations for 3 different resolutions every 5 seconds.  Without atomic ops, that\u2019s 1200 keys read and 1600 keys written per transaction.  With 15 logging hosts doing this, that\u2019s 18,000 reads and 24,000 writes every 5 seconds, which is a very low rate that should not require any cluster tuning at all to achieve.</p>\n<p><a class=\"mention\" href=\"/u/v-pap\">@v-pap</a> Looking at your Workload statistics, I\u2019m going to guess your transactions are written in a very serial way, so your 1200 reads are often taking more than 2 seconds.  Also, the reason I asked about the directory layer is every unique folder read during a transaction adds an additional read latency.  Note that \u201c/a/b/c/d\u201d involves 4 unique folders, not one.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-03-30T19:04:36.027Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 47,
        "readers_count": 46,
        "score": 19.4,
        "yours": false,
        "topic_id": 2032,
        "topic_slug": "scalable-time-series-database-improving-write-throughput",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/scalable-time-series-database-improving-write-throughput/2032/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6531,
        "name": "",
        "username": "v-pap",
        "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png",
        "created_at": "2020-03-30T20:45:26.528Z",
        "cooked": "<p>At first I would like to thank you for your comment, but I think I need to clarify some things. Each machine starts to scrape metrics from a random offset, for example, at 16:30:14 another machine starts at 16:30:16 so the load is mostly evenly distributed. In addition, the aggregation is not updated every 5 second for every resolution. Indeed the minute aggregation is updated every 5 sec, but the other resolutions are updated in a rolling fashion. For example, the hour aggregation is updated each time a minute has passed, and the day aggregation is updated each time an hour has passed. This is achieved by checking if the current key is present in the FDB. If it isn\u2019t, this means that this is the first time we get data for this e.g. minute so we can assume that the previous minute has been filled adequately and thus it is used to update the hour aggregation. Also I should have written that the metrics could be up to 400, not that they are exactly 400. They usually are between 200-300. As far as the directories are concerned, I don\u2019t think that they are part of the problem, since we cache them each time we need to open them, and we are talking about a maximum depth of 3 directories.</p>\n<p>I would say these perf stats are more representative of the workload I describe here.</p>\n<pre><code class=\"lang-auto\">Workload:\n  Read rate              - 2436 Hz\n  Write rate             - 1386 Hz\n  Transactions started   - 11 Hz\n  Transactions committed - 3 Hz\n  Conflict rate          - 0 Hz\n\nBackup and DR:\n  Running backups        - 0\n  Running DRs            - 0\n\n</code></pre>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-03-30T20:59:19.303Z",
        "reply_count": 1,
        "reply_to_post_number": 5,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 46,
        "readers_count": 45,
        "score": 24.2,
        "yours": false,
        "topic_id": 2032,
        "topic_slug": "scalable-time-series-database-improving-write-throughput",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 7,
          "username": "SteavedHams",
          "name": "Steve Atherton",
          "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 744,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/scalable-time-series-database-improving-write-throughput/2032/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6533,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2020-03-30T21:09:33.426Z",
        "cooked": "<p>And are you doing these reads serially or in parallel per metric?  <code>Read rate</code> gives the number of point or range reads per second, but range reads could be far more expensive.  What is the ping RTT between your client and one of the storage servers?</p>\n<p>Overall, it seems like with your current implementation, it\u2019s largely the 2s transaction timeout that\u2019s harming you.  Both Steve and I are guessing that you\u2019re doing your reads in serial, so you either need to change your code to be able to handle each metric in parallel (and issue reads to FDB in parallel), or lengthen your transaction timeout to give your code more time to run.</p>\n<p>As your utilization and 0% conflict rate numbers have indicated, this isn\u2019t a cluster saturation problem nor a transaction conflict problem.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-03-30T21:09:33.426Z",
        "reply_count": 1,
        "reply_to_post_number": 6,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 45,
        "readers_count": 44,
        "score": 29.0,
        "yours": false,
        "topic_id": 2032,
        "topic_slug": "scalable-time-series-database-improving-write-throughput",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 744,
          "username": "v-pap",
          "name": "",
          "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/scalable-time-series-database-improving-write-throughput/2032/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6535,
        "name": "",
        "username": "v-pap",
        "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png",
        "created_at": "2020-03-30T22:06:49.165Z",
        "cooked": "<p>It\u2019s clearly obvious that ping is not the problem.</p>\n<pre><code class=\"lang-auto\">PING 10.112.15.97 (10.112.15.97) 56(84) bytes of data.\n64 bytes from 10.112.15.97: icmp_seq=1 ttl=62 time=2.20 ms\n64 bytes from 10.112.15.97: icmp_seq=2 ttl=62 time=0.148 ms\n64 bytes from 10.112.15.97: icmp_seq=3 ttl=62 time=0.184 ms\n64 bytes from 10.112.15.97: icmp_seq=4 ttl=62 time=0.181 ms\n64 bytes from 10.112.15.97: icmp_seq=5 ttl=62 time=0.186 ms\n</code></pre>\n<p>If I understand correctly, one main issue of my implementation may be that I write serially the metrics for each machine in one transaction (this applies for the reads that I need for the aggregations as well) is that correct ? Since this implementation is written in python, which framework or library do you propose for parallelizing this process?</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-03-30T22:06:49.165Z",
        "reply_count": 1,
        "reply_to_post_number": 7,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 42,
        "readers_count": 41,
        "score": 28.4,
        "yours": false,
        "topic_id": 2032,
        "topic_slug": "scalable-time-series-database-improving-write-throughput",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/cpu-limited-storage-processes/2140",
            "internal": true,
            "reflection": true,
            "title": "CPU limited storage processes",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 744,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/scalable-time-series-database-improving-write-throughput/2032/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6537,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2020-03-30T22:48:00.513Z",
        "cooked": "<p>The python fdb library supports asynchronous reads.  See<br>\n<a href=\"https://apple.github.io/foundationdb/api-python.html#future-objects\" class=\"onebox\" target=\"_blank\">https://apple.github.io/foundationdb/api-python.html#future-objects</a><br>\nand<br>\n<a href=\"https://apple.github.io/foundationdb/developer-guide.html#developer-guide-programming-with-futures\" class=\"onebox\" target=\"_blank\">https://apple.github.io/foundationdb/developer-guide.html#developer-guide-programming-with-futures</a><br>\nfor more info and an example.</p>\n<p>Writes in an fdb transaction do not involve talking to the cluster, they are buffered in the client and submitted all at once when you call <code>commit()</code>.  Serial reads are almost certainly why your transactions are taking so long.</p>\n<p>Note that you can avoid reads to support aggregation if you use atomic ops, and you could have your current-hour and current-day metrics be updated live while the hour or day is still in-progress without having to do a range scan or accumulate history on the client or whatever you are currently doing.  You just need to split your aggregation key into two keys, one for the sum and one for the count, and use the atomic add operation to update them.  Since you are storing floats, however, you may need to normalize to some large internal 64 which will mean effectively fixed precision, in case that is a concern.  Doing a single read of the current data point being logged to see if it already exists is still a good idea, as it will prevent a data point from adding to the aggregations more than once in the event of a <code>commit_unknown_result</code> error from the cluster.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-03-30T22:48:32.731Z",
        "reply_count": 0,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 42,
        "readers_count": 41,
        "score": 43.4,
        "yours": false,
        "topic_id": 2032,
        "topic_slug": "scalable-time-series-database-improving-write-throughput",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://apple.github.io/foundationdb/developer-guide.html#developer-guide-programming-with-futures",
            "internal": false,
            "reflection": false,
            "title": "Developer Guide \u2014 FoundationDB 6.2",
            "clicks": 4
          },
          {
            "url": "https://apple.github.io/foundationdb/api-python.html#future-objects",
            "internal": false,
            "reflection": false,
            "title": "Python API \u2014 FoundationDB 6.2",
            "clicks": 2
          }
        ],
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 744,
          "username": "v-pap",
          "name": "",
          "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/scalable-time-series-database-improving-write-throughput/2032/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      6519,
      6520,
      6521,
      6525,
      6529,
      6531,
      6533,
      6535,
      6537
    ]
  },
  "timeline_lookup": [
    [
      1,
      2032
    ],
    [
      4,
      2031
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Scalable time series database / Improving write throughput",
  "id": 2032,
  "title": "Scalable time series database / Improving write throughput",
  "posts_count": 9,
  "created_at": "2020-03-29T21:33:25.875Z",
  "views": 1709,
  "reply_count": 4,
  "like_count": 2,
  "last_posted_at": "2020-03-30T22:48:00.513Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "scalable-time-series-database-improving-write-throughput",
  "category_id": 7,
  "word_count": 1694,
  "deleted_at": null,
  "user_id": 744,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_2032",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 9,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 3,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Transaction/operation throughput",
      "id": 1880,
      "title": "Transaction/operation throughput",
      "slug": "transaction-operation-throughput",
      "posts_count": 11,
      "reply_count": 5,
      "highest_post_number": 11,
      "image_url": null,
      "created_at": "2020-01-14T22:48:44.649Z",
      "last_posted_at": "2020-01-23T15:09:25.796Z",
      "bumped": true,
      "bumped_at": "2020-01-23T15:09:25.796Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 6,
      "views": 2027,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 679,
            "username": "Daniel-B-Smith",
            "name": "Daniel Smith",
            "avatar_template": "/user_avatar/forums.foundationdb.org/daniel-b-smith/{size}/743_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 321,
            "username": "poma",
            "name": "Roman Semenov",
            "avatar_template": "/user_avatar/forums.foundationdb.org/poma/{size}/325_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Scripts to deploy, benchmark, and tinker with 1M operations/sec FoundationDB cluster on AWS",
      "id": 637,
      "title": "Scripts to deploy, benchmark, and tinker with 1M operations/sec FoundationDB cluster on AWS",
      "slug": "scripts-to-deploy-benchmark-and-tinker-with-1m-operations-sec-foundationdb-cluster-on-aws",
      "posts_count": 14,
      "reply_count": 5,
      "highest_post_number": 14,
      "image_url": null,
      "created_at": "2018-08-14T14:13:06.849Z",
      "last_posted_at": "2018-11-06T16:58:50.747Z",
      "bumped": true,
      "bumped_at": "2018-11-06T16:58:50.747Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 7,
      "views": 4284,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 321,
            "username": "poma",
            "name": "Roman Semenov",
            "avatar_template": "/user_avatar/forums.foundationdb.org/poma/{size}/325_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 55,
            "username": "bowlofstew",
            "name": "Stewart Henderson",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/b/aca169/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 255,
            "username": "aqua",
            "name": "Matt Lohier",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/b9bd4f/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 409,
            "username": "TommyLike",
            "name": "Hu Sheng",
            "avatar_template": "/user_avatar/forums.foundationdb.org/tommylike/{size}/395_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "A few design-pattern + check-my-understanding questions",
      "id": 1153,
      "title": "A few design-pattern + check-my-understanding questions",
      "slug": "a-few-design-pattern-check-my-understanding-questions",
      "posts_count": 10,
      "reply_count": 6,
      "highest_post_number": 10,
      "image_url": null,
      "created_at": "2019-02-19T15:18:58.329Z",
      "last_posted_at": "2019-02-21T19:51:53.686Z",
      "bumped": true,
      "bumped_at": "2019-02-21T19:51:53.686Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 2273,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 519,
            "username": "JamesThompson",
            "name": "James Thompson",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/c67d28/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 173,
            "username": "jkominek",
            "name": "Jay Kominek",
            "avatar_template": "/user_avatar/forums.foundationdb.org/jkominek/{size}/140_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "FoundationDB cluster performance issue - Periods of high disk I/O and sustained high latency",
      "id": 2184,
      "title": "FoundationDB cluster performance issue - Periods of high disk I/O and sustained high latency",
      "slug": "foundationdb-cluster-performance-issue-periods-of-high-disk-i-o-and-sustained-high-latency",
      "posts_count": 22,
      "reply_count": 17,
      "highest_post_number": 22,
      "image_url": null,
      "created_at": "2020-06-15T15:45:43.650Z",
      "last_posted_at": "2020-07-06T06:50:56.594Z",
      "bumped": true,
      "bumped_at": "2020-07-06T06:50:56.594Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 2571,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 779,
            "username": "imtdk",
            "name": null,
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/i/22d042/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 747,
            "username": "ashishgupta",
            "name": "Ashish Gupta",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/c67d28/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        }
      ]
    },
    {
      "fancy_title": "Why doesn&rsquo;t my cluster performance scale when I double the number of machines?",
      "id": 640,
      "title": "Why doesn't my cluster performance scale when I double the number of machines?",
      "slug": "why-doesnt-my-cluster-performance-scale-when-i-double-the-number-of-machines",
      "posts_count": 21,
      "reply_count": 16,
      "highest_post_number": 21,
      "image_url": null,
      "created_at": "2018-08-15T09:26:47.588Z",
      "last_posted_at": "2018-08-17T07:32:00.164Z",
      "bumped": true,
      "bumped_at": "2018-08-17T07:32:00.164Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 3323,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 255,
            "username": "aqua",
            "name": "Matt Lohier",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/b9bd4f/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 68,
            "username": "daverosenthal",
            "name": "Dave Rosenthal",
            "avatar_template": "/user_avatar/forums.foundationdb.org/daverosenthal/{size}/51_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 321,
            "username": "poma",
            "name": "Roman Semenov",
            "avatar_template": "/user_avatar/forums.foundationdb.org/poma/{size}/325_2.png",
            "trust_level": 1
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 744,
        "username": "v-pap",
        "name": "",
        "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png",
        "post_count": 4,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 7,
        "username": "SteavedHams",
        "name": "Steve Atherton",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      }
    ],
    "created_by": {
      "id": 744,
      "username": "v-pap",
      "name": "",
      "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png"
    },
    "last_poster": {
      "id": 7,
      "username": "SteavedHams",
      "name": "Steve Atherton",
      "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png"
    },
    "links": [
      {
        "url": "https://apple.github.io/foundationdb/developer-guide.html#developer-guide-programming-with-futures",
        "title": "Developer Guide \u2014 FoundationDB 6.2",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 4,
        "user_id": 7,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      },
      {
        "url": "https://apple.github.io/foundationdb/api-python.html#future-objects",
        "title": "Python API \u2014 FoundationDB 6.2",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 7,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      }
    ]
  },
  "bookmarks": []
}