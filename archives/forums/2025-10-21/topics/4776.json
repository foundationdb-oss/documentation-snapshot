{
  "post_stream": {
    "posts": [
      {
        "id": 14708,
        "name": "Matthieu Patou",
        "username": "mpatou_openai",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mpatou_openai/{size}/1883_2.png",
        "created_at": "2025-02-15T20:27:42.254Z",
        "cooked": "<p>I\u2019m in the process of evaluating creating highly available FDB clusters and so we want to rely on the multi-region configuration described here: <a href=\"https://github.com/apple/foundationdb/wiki/Multi-Region-Replication\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Multi Region Replication \u00b7 apple/foundationdb Wiki \u00b7 GitHub</a>.</p>\n<p>So far our clusters were within 1 K8s cluster and one region so we would use <code>publicIPSource</code> set to service, which served us well and provided obviously some stability.</p>\n<p>But using services with clusterIP is way more complicated with a multi region multi k8s cluster setup because clusterIP are not meant to be routable outside of a k8s cluster.</p>\n<p>That leaves us with 2 other choices:</p>\n<ul>\n<li>nodeIP</li>\n<li>DNS name</li>\n</ul>\n<p>NodeIP I feel is really dangerous because should a majority of controller pods be restarted and you now have a cluster that is not available. I have been burnt in the past with too many pods restarting at once and also with our cloud provider (Azure) upgrading nodes behind our back to trust 100% this for something that needs to be highly available.</p>\n<p>I guess this leaves DNS only but I have a vague feeling with it too a not a good one because once in a while there is something weird going on with the DNS between the cluster, I don\u2019t have a concrete example of that but the weird feeling that I would run into issues.</p>\n<p>With that said I\u2019m wondering for those of you that are using mutli-region FDB and k8s what are you using and why ?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2025-02-15T20:27:42.254Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 11,
        "reads": 14,
        "readers_count": 13,
        "score": 57.8,
        "yours": false,
        "topic_id": 4776,
        "topic_slug": "which-publicipsource-to-use-when-using-fdb-with-multi-region-and-kubernetes",
        "display_username": "Matthieu Patou",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/wiki/Multi-Region-Replication",
            "internal": false,
            "reflection": false,
            "title": "Multi Region Replication \u00b7 apple/foundationdb Wiki \u00b7 GitHub",
            "clicks": 2
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1484,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/which-publicipsource-to-use-when-using-fdb-with-multi-region-and-kubernetes/4776/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 14735,
        "name": "Johannes Scheuermann",
        "username": "johscheuer",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
        "created_at": "2025-02-24T16:41:21.985Z",
        "cooked": "<p>The actual setup depends on your cloud provider and what they recommend for multi-Kubernetes setups. (not sure if Azure supports providing a routable subnet to the AKS cluster)</p>\n<blockquote>\n<p>I guess this leaves DNS only but I have a vague feeling with it too a not a good one because once in a while there is something weird going on with the DNS between the cluster, I don\u2019t have a concrete example of that but the weird feeling that I would run into issues.</p>\n</blockquote>\n<p>DNS will only be used for the initial connection to the cluster, after that the clients will make use of the IP addresses of the Pods. So DNS is not in the critical path. For completeness there was an issue with DNS reported here: <a href=\"https://forums.foundationdb.org/t/fdb-regular-recovery-with-operator/4562/10\" class=\"inline-onebox\">FDB regular recovery with operator - #10 by jlemaes</a></p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2025-02-24T16:41:21.985Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 11,
        "reads": 13,
        "readers_count": 12,
        "score": 77.6,
        "yours": false,
        "topic_id": 4776,
        "topic_slug": "which-publicipsource-to-use-when-using-fdb-with-multi-region-and-kubernetes",
        "display_username": "Johannes Scheuermann",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/fdb-regular-recovery-with-operator/4562/10",
            "internal": true,
            "reflection": false,
            "title": "FDB regular recovery with operator",
            "clicks": 2
          },
          {
            "url": "https://forums.foundationdb.org/t/fdb-regular-recovery-with-operator/4562/12",
            "internal": true,
            "reflection": true,
            "title": "FDB regular recovery with operator",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 849,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/which-publicipsource-to-use-when-using-fdb-with-multi-region-and-kubernetes/4776/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 14737,
        "name": "Matthieu Patou",
        "username": "mpatou_openai",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mpatou_openai/{size}/1883_2.png",
        "created_at": "2025-02-25T18:07:20.065Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"johscheuer\" data-post=\"2\" data-topic=\"4776\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/j/f475e1/48.png\" class=\"avatar\"> johscheuer:</div>\n<blockquote>\n<p>DNS will only be used for the initial connection to the cluster, after that the clients will make use of the IP addresses of the Pods. So DNS is not in the critical path.</p>\n</blockquote>\n</aside>\n<p>Oh that\u2019s good to know, I guess we will use DNS then?</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2025-02-25T18:07:20.065Z",
        "reply_count": 0,
        "reply_to_post_number": 2,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 12,
        "readers_count": 11,
        "score": 2.4,
        "yours": false,
        "topic_id": 4776,
        "topic_slug": "which-publicipsource-to-use-when-using-fdb-with-multi-region-and-kubernetes",
        "display_username": "Matthieu Patou",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1484,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/which-publicipsource-to-use-when-using-fdb-with-multi-region-and-kubernetes/4776/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      14708,
      14735,
      14737
    ]
  },
  "timeline_lookup": [
    [
      1,
      248
    ],
    [
      2,
      239
    ],
    [
      3,
      238
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Which publicIPSource to use when using FDB with multi-region and kubernetes?",
  "id": 4776,
  "title": "Which publicIPSource to use when using FDB with multi-region and kubernetes?",
  "posts_count": 3,
  "created_at": "2025-02-15T20:27:42.208Z",
  "views": 63,
  "reply_count": 1,
  "like_count": 1,
  "last_posted_at": "2025-02-25T18:07:20.065Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "which-publicipsource-to-use-when-using-fdb-with-multi-region-and-kubernetes",
  "category_id": 7,
  "word_count": 441,
  "deleted_at": null,
  "user_id": 1484,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_4776",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 3,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 1,
  "participant_count": 2,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Proposal: Don&rsquo;t identify a coordinator based on its IP",
      "id": 502,
      "title": "Proposal: Don't identify a coordinator based on its IP",
      "slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
      "posts_count": 26,
      "reply_count": 13,
      "highest_post_number": 26,
      "image_url": null,
      "created_at": "2018-06-09T13:09:51.305Z",
      "last_posted_at": "2019-08-06T20:24:41.013Z",
      "bumped": true,
      "bumped_at": "2019-08-06T20:24:41.013Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 10,
      "views": 8425,
      "category_id": 8,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 302,
            "username": "basgys",
            "name": "Bastien Gysler",
            "avatar_template": "/user_avatar/forums.foundationdb.org/basgys/{size}/291_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 339,
            "username": "Zatte",
            "name": "Mikael Rapp ",
            "avatar_template": "/user_avatar/forums.foundationdb.org/zatte/{size}/344_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 260,
            "username": "jared2501",
            "name": "Jared2501",
            "avatar_template": "/user_avatar/forums.foundationdb.org/jared2501/{size}/266_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 545,
            "username": "rishabh",
            "name": "Rishabh",
            "avatar_template": "/user_avatar/forums.foundationdb.org/rishabh/{size}/540_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 614,
            "username": "qrpike",
            "name": "Quinton Pike",
            "avatar_template": "/user_avatar/forums.foundationdb.org/qrpike/{size}/618_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Using Service IPs over Pod IPs and running a DR to another cluster?",
      "id": 3515,
      "title": "Using Service IPs over Pod IPs and running a DR to another cluster?",
      "slug": "using-service-ips-over-pod-ips-and-running-a-dr-to-another-cluster",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2022-08-23T11:15:54.485Z",
      "last_posted_at": "2022-08-26T08:10:11.839Z",
      "bumped": true,
      "bumped_at": "2022-08-26T08:10:11.839Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 414,
      "category_id": 16,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 1154,
            "username": "pwood",
            "name": "Peter Wood",
            "avatar_template": "/user_avatar/forums.foundationdb.org/pwood/{size}/1653_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 849,
            "username": "johscheuer",
            "name": "Johannes Scheuermann",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "useDNSInClusterFile - Connection string invalid",
      "id": 3679,
      "title": "useDNSInClusterFile - Connection string invalid",
      "slug": "usednsinclusterfile-connection-string-invalid",
      "posts_count": 13,
      "reply_count": 9,
      "highest_post_number": 13,
      "image_url": null,
      "created_at": "2022-12-01T22:46:28.002Z",
      "last_posted_at": "2023-01-23T09:15:29.448Z",
      "bumped": true,
      "bumped_at": "2023-01-23T09:15:29.448Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "operator"
      ],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1518,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 1190,
            "username": "KRKroening",
            "name": "KrKroening",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krkroening/{size}/1473_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 970,
            "username": "mason",
            "name": "mason",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mason/{size}/1145_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 849,
            "username": "johscheuer",
            "name": "Johannes Scheuermann",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "How to use RoutingConfig with FDB operator",
      "id": 3069,
      "title": "How to use RoutingConfig with FDB operator",
      "slug": "how-to-use-routingconfig-with-fdb-operator",
      "posts_count": 4,
      "reply_count": 1,
      "highest_post_number": 4,
      "image_url": null,
      "created_at": "2021-12-09T15:28:48.193Z",
      "last_posted_at": "2022-01-14T19:31:10.288Z",
      "bumped": true,
      "bumped_at": "2022-01-14T19:31:10.288Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 599,
      "category_id": 16,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 890,
            "username": "tangerine",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/tangerine/{size}/1084_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 3,
            "username": "john_brownlee",
            "name": "John Brownlee",
            "avatar_template": "/user_avatar/forums.foundationdb.org/john_brownlee/{size}/22_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "K8s operator fdb.cluster IP addresses issue",
      "id": 2273,
      "title": "K8s operator fdb.cluster IP addresses issue",
      "slug": "k8s-operator-fdb-cluster-ip-addresses-issue",
      "posts_count": 6,
      "reply_count": 1,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2020-08-03T20:04:36.427Z",
      "last_posted_at": "2020-09-18T09:27:09.647Z",
      "bumped": true,
      "bumped_at": "2020-09-18T09:27:09.647Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "operator"
      ],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 1219,
      "category_id": 16,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 798,
            "username": "ghenom",
            "name": "Ghenom",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/46a35a/{size}.png",
            "trust_level": 0
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 3,
            "username": "john_brownlee",
            "name": "John Brownlee",
            "avatar_template": "/user_avatar/forums.foundationdb.org/john_brownlee/{size}/22_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 820,
            "username": "kcking",
            "name": "Kevin King",
            "avatar_template": "/user_avatar/forums.foundationdb.org/kcking/{size}/934_2.png",
            "trust_level": 1
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 1484,
        "username": "mpatou_openai",
        "name": "Matthieu Patou",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mpatou_openai/{size}/1883_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 849,
        "username": "johscheuer",
        "name": "Johannes Scheuermann",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      }
    ],
    "created_by": {
      "id": 1484,
      "username": "mpatou_openai",
      "name": "Matthieu Patou",
      "avatar_template": "/user_avatar/forums.foundationdb.org/mpatou_openai/{size}/1883_2.png"
    },
    "last_poster": {
      "id": 1484,
      "username": "mpatou_openai",
      "name": "Matthieu Patou",
      "avatar_template": "/user_avatar/forums.foundationdb.org/mpatou_openai/{size}/1883_2.png"
    },
    "links": [
      {
        "url": "https://forums.foundationdb.org/t/fdb-regular-recovery-with-operator/4562/10",
        "title": "FDB regular recovery with operator",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 849,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://github.com/apple/foundationdb/wiki/Multi-Region-Replication",
        "title": "Multi Region Replication \u00b7 apple/foundationdb Wiki \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 1484,
        "domain": "github.com",
        "root_domain": "github.com"
      }
    ]
  },
  "bookmarks": []
}