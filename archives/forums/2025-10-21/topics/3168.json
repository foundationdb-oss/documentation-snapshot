{
  "post_stream": {
    "posts": [
      {
        "id": 10698,
        "name": "Oleg Samarin",
        "username": "osamarin",
        "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png",
        "created_at": "2022-02-14T09:36:56.207Z",
        "cooked": "<p>Hi, All.</p>\n<p>I\u2019d like to compare performance of differnent FDB storage engines. I\u2019m doing some tests.</p>\n<p>I have a testing environment with 3-node fdb cluster. Each node has one stateless process, one transaction process and two storage processes, all 4 fdbserver processes on each node. I also have a transaction source that can send testing transactions to FDB with an internal ratekeeper.</p>\n<p>I\u2019ve put a memory limit to the processes:</p>\n<pre><code class=\"lang-auto\">memory = 5GiB\ncache_memory = 3GiB\n</code></pre>\n<p>Such configuration works perfectly with sqlite <code>ssd</code> storage engine: I get stable 2250 tps. If I send a greater TPS volume, then the storage processes are not on time in writing changes and both the storage queue and the durability lag start growing. So I regard 2250 tps as a maximal stable performance.</p>\n<p>But when I run the same test on the same stand with <code>ssd-redwood-experimental</code> storage engine, I cann\u2019t get any stable performance result. Even with a relatively small TPS volume (1000 tps) the storage processes consume the memory infinitely. They respect neither <code>cache_memory</code> nor <code>memory</code> limits and after a short time fdbmonitor kills and restart them:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://global.discourse-cdn.com/foundationdb/original/2X/4/48f85d738f70c67ad18b36b24437e58ff165a9df.png\" data-download-href=\"/uploads/short-url/apwuQuqcgUgUNgV7I9RrOVRITKf.png?dl=1\" title=\"redwood-memory\" rel=\"noopener nofollow ugc\"><img src=\"https://global.discourse-cdn.com/foundationdb/optimized/2X/4/48f85d738f70c67ad18b36b24437e58ff165a9df_2_679x500.png\" alt=\"redwood-memory\" data-base62-sha1=\"apwuQuqcgUgUNgV7I9RrOVRITKf\" width=\"679\" height=\"500\" srcset=\"https://global.discourse-cdn.com/foundationdb/optimized/2X/4/48f85d738f70c67ad18b36b24437e58ff165a9df_2_679x500.png, https://global.discourse-cdn.com/foundationdb/optimized/2X/4/48f85d738f70c67ad18b36b24437e58ff165a9df_2_1018x750.png 1.5x, https://global.discourse-cdn.com/foundationdb/optimized/2X/4/48f85d738f70c67ad18b36b24437e58ff165a9df_2_1358x1000.png 2x\" data-small-upload=\"https://global.discourse-cdn.com/foundationdb/optimized/2X/4/48f85d738f70c67ad18b36b24437e58ff165a9df_2_10x10.png\"><div class=\"meta\">\n<svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">redwood-memory</span><span class=\"informations\">1691\u00d71244 257 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg>\n</div></a></div></p>\n<p>The storage queue is quite low (~7 Mb) and does not grow at the same time.</p>\n<p>What am I missing? How to achieve stable work of redwood without memory leaks and restarts?</p>\n<p><a href=\"https://drive.google.com/file/d/1szw-veQgzXFlPEo_Wzw36rLLOqaA9EOZ/view?usp=sharing\" rel=\"noopener nofollow ugc\">fdbserver trace file</a></p>\n<p><a href=\"https://drive.google.com/file/d/1OiqR-Y_sz66lvT9PE6O1mDcdEnnPSTsu/view?usp=sharing\" rel=\"noopener nofollow ugc\">foundationdb.conf</a></p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-02-14T09:48:08.277Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 466,
        "reads": 76,
        "readers_count": 75,
        "score": 2335.2,
        "yours": false,
        "topic_id": 3168,
        "topic_slug": "redwood-storage-engine-runs-out-of-memory",
        "display_username": "Oleg Samarin",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://drive.google.com/file/d/1OiqR-Y_sz66lvT9PE6O1mDcdEnnPSTsu/view?usp=sharing",
            "internal": false,
            "reflection": false,
            "title": "foundationdb.conf - Google Drive",
            "clicks": 16
          },
          {
            "url": "https://drive.google.com/file/d/1szw-veQgzXFlPEo_Wzw36rLLOqaA9EOZ/view?usp=sharing",
            "internal": false,
            "reflection": false,
            "title": "trace.192.168.56.161.4700.1644829722.q9CvvM.0.1.xml - Google Drive",
            "clicks": 1
          },
          {
            "url": "https://global.discourse-cdn.com/foundationdb/original/2X/4/48f85d738f70c67ad18b36b24437e58ff165a9df.png",
            "internal": false,
            "reflection": false,
            "title": "48f85d738f70c67ad18b36b24437e58ff165a9df.png",
            "clicks": 0
          },
          {
            "url": "https://forums.foundationdb.org/t/error-out-of-memory-with-foundationdb-7-0-0/3429/5",
            "internal": true,
            "reflection": true,
            "title": "ERROR: Out of memory with Foundationdb 7.0.0",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 711,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/redwood-storage-engine-runs-out-of-memory/3168/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 10699,
        "name": "",
        "username": "Imperatorx",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/i/d2c977/{size}.png",
        "created_at": "2022-02-14T14:54:06.302Z",
        "cooked": "<p>I might be wrong, but my understanding is that the minimum memory requirement is 8GB with the default 2GB cache memory, so if you set cache_memory to 3GB, you should set memory to at least 9GB.</p>\n<p>From doc:</p>\n<blockquote>\n<p>If you increase the <code>cache_memory</code> parameter, you should also increase the <code>memory</code> parameter by the same amount.</p>\n</blockquote>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-02-14T14:54:06.302Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 70,
        "readers_count": 69,
        "score": 24.0,
        "yours": false,
        "topic_id": 3168,
        "topic_slug": "redwood-storage-engine-runs-out-of-memory",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 164,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/redwood-storage-engine-runs-out-of-memory/3168/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10700,
        "name": "Oleg Samarin",
        "username": "osamarin",
        "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png",
        "created_at": "2022-02-14T15:06:16.064Z",
        "cooked": "<ol>\n<li>With sqlite this recommendation is actual only with general fdbserver processes, when the single process has a lot of memory objects. But a dedicated storage process has only two large memory objects: the storage cache and the storage queue that is 1.5GB by default. So <code>memory</code>=<code>cache_memory</code>+2GB is enough for a dedicated sqlite storage process</li>\n<li>I also tried to set</li>\n</ol>\n<pre><code class=\"lang-auto\">memory = 9GiB\ncache_memory = 3GiB\n</code></pre>\n<p>The problem with Out-Of-Memory persisted.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-02-14T15:06:36.582Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 73,
        "readers_count": 72,
        "score": 29.6,
        "yours": false,
        "topic_id": 3168,
        "topic_slug": "redwood-storage-engine-runs-out-of-memory",
        "display_username": "Oleg Samarin",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 164,
          "username": "Imperatorx",
          "name": "",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/i/d2c977/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 711,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/redwood-storage-engine-runs-out-of-memory/3168/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10715,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2022-02-15T23:12:37.826Z",
        "cooked": "<p>Hi Oleg,</p>\n<p>Redwood does indeed have at least one memory leak, which I am currently investigating.</p>\n<p>The one that I\u2019ve found so far is a one-line patch, here is the diff.</p><aside class=\"onebox githubcommit\" data-onebox-src=\"https://github.com/sfc-gh-satherton/foundationdb/commit/42136bf80889a19935986686a3b741620da6cf08\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/sfc-gh-satherton/foundationdb/commit/42136bf80889a19935986686a3b741620da6cf08\" target=\"_blank\" rel=\"noopener\">github.com/sfc-gh-satherton/foundationdb</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Commit\">\n    <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 14 16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/sfc-gh-satherton/foundationdb/commit/42136bf80889a19935986686a3b741620da6cf08\" target=\"_blank\" rel=\"noopener\">Fixed memory leak (and minor performance bug) where RedwoodRecordRef::updateCache() would create the key copy to be placed in the cache but not actually place it into the real cache entry because the cache parameter was accepted by value.</a>\n    </h4>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        committed <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2022-02-15\" data-time=\"06:47:30\" data-timezone=\"UTC\">06:47AM - 15 Feb 22 UTC</span>\n      </div>\n\n      <div class=\"user\">\n        <a href=\"https://github.com/sfc-gh-satherton\" target=\"_blank\" rel=\"noopener\">\n          <img alt=\"sfc-gh-satherton\" src=\"https://global.discourse-cdn.com/foundationdb/original/2X/8/8a40bcc36176b339e22f42601c6e330890633fac.png\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\" data-dominant-color=\"E2E4BE\">\n          sfc-gh-satherton\n        </a>\n      </div>\n\n      <div class=\"lines\" title=\"changed 1 files with 1 additions and 1 deletions\">\n        <a href=\"https://github.com/sfc-gh-satherton/foundationdb/commit/42136bf80889a19935986686a3b741620da6cf08\" target=\"_blank\" rel=\"noopener\">\n          <span class=\"added\">+1</span>\n          <span class=\"removed\">-1</span>\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n<p>\nThis bug will \u201cleak\u201d (memory is held but useless) key-sized chunks of memory when keys are inserted into a page, but these extra key copies only live as long as the page is in cache, and since insertion fills the page which leads to a rebuild or split I do not expect this to be an enormous source of memory leakage.  I think there is something else in the update path which is holding on to memory that is no longer needed.</p>\n<p>If it is convenient for you to try this patch and report your results that would be very helpful!</p>\n<blockquote>\n<p>But a dedicated storage process has only two large memory objects: the storage cache and the storage queue that is 1.5GB by default.</p>\n</blockquote>\n<p>Redwood actually has significant state in memory beyond this in the form of a per-page cache of reconstituted compressed keys.  Unfortunately how large this is relative to the page cache varies based on how many unique paths in each page a workload has visited and how large and how compressible its keys are.  Tracking the size of this cache in realtime and trimming or size limiting it is tricky, but in the short term at least I will add a knob to reduce Redwood\u2019s effective page cache size by some % to leave room for the decompressed key cache.</p>\n<p>The 3GB / 9GB test you ran would have been my next request - Does the memory usage curve change at all as the memory size grows?</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-02-15T23:12:37.826Z",
        "reply_count": 2,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 70,
        "readers_count": 69,
        "score": 54.0,
        "yours": false,
        "topic_id": 3168,
        "topic_slug": "redwood-storage-engine-runs-out-of-memory",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/sfc-gh-satherton/foundationdb/commit/42136bf80889a19935986686a3b741620da6cf08",
            "internal": false,
            "reflection": false,
            "title": "Fixed memory leak (and minor performance bug) where RedwoodRecordRef:\u2026 \u00b7 sfc-gh-satherton/foundationdb@42136bf \u00b7 GitHub",
            "clicks": 17
          }
        ],
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 711,
          "username": "osamarin",
          "name": "Oleg Samarin",
          "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/redwood-storage-engine-runs-out-of-memory/3168/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10716,
        "name": "Oleg Samarin",
        "username": "osamarin",
        "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png",
        "created_at": "2022-02-16T08:31:57.404Z",
        "cooked": "<p>Thank you very much for your answer. Now I\u2019m testing the <code>ssd-rocksdb-experimental</code> engine. After I complete these tests I will be able to return to testing redwood with your patch.</p>\n<p>But it would be nice if there were some metrics that showed the page cache and the recompression state sizes. It would help to troubleshoot such problems.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-02-16T08:37:18.624Z",
        "reply_count": 0,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 67,
        "readers_count": 66,
        "score": 43.4,
        "yours": false,
        "topic_id": 3168,
        "topic_slug": "redwood-storage-engine-runs-out-of-memory",
        "display_username": "Oleg Samarin",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 7,
          "username": "SteavedHams",
          "name": "Steve Atherton",
          "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 711,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/redwood-storage-engine-runs-out-of-memory/3168/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10717,
        "name": "Oleg Samarin",
        "username": "osamarin",
        "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png",
        "created_at": "2022-02-16T08:56:34.330Z",
        "cooked": "<p><a class=\"mention\" href=\"/u/steavedhams\">@SteavedHams</a> This bug is not a reason of my issue because I\u2019m using 6.3.22 there is no <code>RedwoodRecordRef::updateCache</code> method.</p>\n<p>What fdb version would you recommend to test for redwood?</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-02-16T08:56:34.330Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 66,
        "readers_count": 65,
        "score": 18.2,
        "yours": false,
        "topic_id": 3168,
        "topic_slug": "redwood-storage-engine-runs-out-of-memory",
        "display_username": "Oleg Samarin",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 7,
          "username": "SteavedHams",
          "name": "Steve Atherton",
          "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 711,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/redwood-storage-engine-runs-out-of-memory/3168/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10720,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2022-02-16T16:06:00.865Z",
        "cooked": "<p>Redwood in FDB 6.3 is quite old and was far from complete, much has been refactored since then to remove CPU and memory overheads and improve IO scheduling.  I recommend testing with FDB 7.0.0, in this version Redwood is renamed to <code>ssd-redwood-1-experimental</code>, still carrying the experimental label as it is still not ready for production use.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-02-16T16:06:00.865Z",
        "reply_count": 1,
        "reply_to_post_number": 6,
        "quote_count": 0,
        "incoming_link_count": 17,
        "reads": 67,
        "readers_count": 66,
        "score": 118.4,
        "yours": false,
        "topic_id": 3168,
        "topic_slug": "redwood-storage-engine-runs-out-of-memory",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 711,
          "username": "osamarin",
          "name": "Oleg Samarin",
          "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/redwood-storage-engine-runs-out-of-memory/3168/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10750,
        "name": "Oleg Samarin",
        "username": "osamarin",
        "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png",
        "created_at": "2022-02-25T12:14:12.468Z",
        "cooked": "<p>I finally manged to test the <code>ssd-redwood-1-experimental</code> 7.0.0 with the patch you had provided.</p>\n<p>No memory leaks more occured,</p>\n<p>FDB in the same configuraiton gives</p>\n<ul>\n<li>2250 tps sqlite 6.3</li>\n<li>2500 tps sqlite 7.0</li>\n<li>5000 tps redwood 7.0</li>\n<li>5500 tps rocksdb 6.3</li>\n</ul>\n<p>redwood storage processes take 4.65 GB of memory each when the cache_memory is 3 GB</p>\n<p>So the riht formula for dedicated storage process memory = cache_memory*1.5 + 2GB (because there is a 1.5 GB limit of the storage queue) .</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-02-25T12:14:12.468Z",
        "reply_count": 1,
        "reply_to_post_number": 7,
        "quote_count": 0,
        "incoming_link_count": 9,
        "reads": 61,
        "readers_count": 60,
        "score": 122.2,
        "yours": false,
        "topic_id": 3168,
        "topic_slug": "redwood-storage-engine-runs-out-of-memory",
        "display_username": "Oleg Samarin",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 7,
          "username": "SteavedHams",
          "name": "Steve Atherton",
          "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 2
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 711,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/redwood-storage-engine-runs-out-of-memory/3168/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10752,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2022-02-25T15:38:33.469Z",
        "cooked": "<p>The additional memory Redwood needs varies a lot by the workload\u2019s key randomness and compressibility.  In 7.1, this extra usage will be tracked and count against the page cache limit so total memory usage should be closer to SQLite\u2019s for a given cache size configuration.  Also note that SQLite and Redwood do not make use of the OS page cache, so if you have unallocated memory on the host it would be better to add it to the storage processes.  RocksDB does use the OS page cache so anything unused by applications effectively increase its cache size.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-02-25T15:38:33.469Z",
        "reply_count": 1,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 60,
        "readers_count": 59,
        "score": 37.0,
        "yours": false,
        "topic_id": 3168,
        "topic_slug": "redwood-storage-engine-runs-out-of-memory",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 711,
          "username": "osamarin",
          "name": "Oleg Samarin",
          "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/redwood-storage-engine-runs-out-of-memory/3168/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10753,
        "name": "Oleg Samarin",
        "username": "osamarin",
        "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png",
        "created_at": "2022-02-25T16:01:52.249Z",
        "cooked": "<p>There were only a little of unallocated memory on the OS.</p>\n<p>Rocksdb utilizes I/O in the softest manner: it makes a few of large I/O operations instead of a lot of small operations with SQLite and Redwood. So if the performance is bound by ssd, then rocksdb seems is preferrable.</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-02-28T07:15:26.959Z",
        "reply_count": 1,
        "reply_to_post_number": 9,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 60,
        "readers_count": 59,
        "score": 32.0,
        "yours": false,
        "topic_id": 3168,
        "topic_slug": "redwood-storage-engine-runs-out-of-memory",
        "display_username": "Oleg Samarin",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 7,
          "username": "SteavedHams",
          "name": "Steve Atherton",
          "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 711,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/redwood-storage-engine-runs-out-of-memory/3168/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10894,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2022-04-03T03:27:04.640Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"osamarin\" data-post=\"10\" data-topic=\"3168\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/osamarin/48/905_2.png\" class=\"avatar\"> osamarin:</div>\n<blockquote>\n<p>Rocksdb utilizes I/O in the softest manner: it makes a few of large I/O operations instead of a lot of small operations with SQLite and Redwood. So if the performance is bound by ssd, then rocksdb seems is preferrable.</p>\n</blockquote>\n</aside>\n<p>These are not good general conclusions.  Storage engine performance is highly workload dependent and there is no storage engine design which minimizes I/O for all workloads.</p>\n<blockquote>\n<p>few of large I/O operations instead of a lot of small operations</p>\n</blockquote>\n<p>You say \u201cI/O\u201d here but this is not correct, this statement applies to only <em>writes</em>.  LSMs optimize for write I/O while BTrees optimize for read I/O.  LSMs write only serially and only to new files, which enables low write amp at commit time.  To pay for this, at read time there is read amplification because logically adjacent records are written to different places at different times.  To close this gap, compaction rewrites existing data, combining multiple files to a single file to collate data logically and reduce the number of files that must be consulted at read time.  Point reads can avoid most read amp using bloom filters but probabilistic filtering is much harder to apply to range reads, so read amp can be especially high there especially when reading ranges with deleted records.</p>\n<p>In contrast, BTrees pay write amplification at commit time to guarantee that at read time each record or range has a well defined location, minimizing read amplification.  Redwood in particular does only batch updates, merging a sorted change set into the tree and pushing all updates to the leaf level immediately.  For highly random small KV sets/clears, this will result in very high write amplification, but for more correlated/grouped changes or for large KV pairs the write amp can be very low.</p>\n<blockquote>\n<p>So if the performance is bound by ssd, then rocksdb seems is preferrable.</p>\n</blockquote>\n<p>This really doesn\u2019t follow.  In a BTree, the write amp and read amp per operation are very predictable. With an LSM there is a constant competition for I/O between read amp from needing compaction and read+write I/O to perform that compaction.  At disk saturation this is a delicate balance.  On the BTree side, the biggest issue with IO saturation is reads starving writes or writes starving reads.  With the SQLite engine, reads starving writes is a common problem at disk saturation, but Redwood uses prioritized I/O dispatch to keep performance stable even when the disk is saturated.</p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-04-03T03:28:03.603Z",
        "reply_count": 1,
        "reply_to_post_number": 10,
        "quote_count": 1,
        "incoming_link_count": 10,
        "reads": 53,
        "readers_count": 52,
        "score": 80.6,
        "yours": false,
        "topic_id": 3168,
        "topic_slug": "redwood-storage-engine-runs-out-of-memory",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/redwood-storage-engine-runs-out-of-memory/3168/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10909,
        "name": "Oleg Samarin",
        "username": "osamarin",
        "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png",
        "created_at": "2022-04-05T12:28:00.744Z",
        "cooked": "<p><a class=\"mention\" href=\"/u/steavedhams\">@SteavedHams</a> Thank you for your response.</p>\n<p>You are right, the test results belong to my workload model that is mostly write-intensive and do a little read volume:</p>\n<p>There are a relative small amount of static data and a huge amount of dynamic data. The static data are read and written (are updated), but the dynamic data are only written (are inserted).</p>\n<p>Because the total size of the static data fits to the storage cache, it does not cause any disk reads. So the only i/o are writes with sqlite and redwood. Of cause, there are some ssd reads on LSM rewrites with rocksdb, but it is done asynchronously.</p>\n<p>When using rocksdb the ssd utilisation is lower, but the CPU utilisation is large, because each logical read of static requires merging a lot of data in memory.</p>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-04-05T12:28:00.744Z",
        "reply_count": 0,
        "reply_to_post_number": 11,
        "quote_count": 0,
        "incoming_link_count": 7,
        "reads": 49,
        "readers_count": 48,
        "score": 44.8,
        "yours": false,
        "topic_id": 3168,
        "topic_slug": "redwood-storage-engine-runs-out-of-memory",
        "display_username": "Oleg Samarin",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 7,
          "username": "SteavedHams",
          "name": "Steve Atherton",
          "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 711,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/redwood-storage-engine-runs-out-of-memory/3168/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      10698,
      10699,
      10700,
      10715,
      10716,
      10717,
      10720,
      10750,
      10752,
      10753,
      10894,
      10909
    ]
  },
  "timeline_lookup": [
    [
      1,
      1346
    ],
    [
      2,
      1345
    ],
    [
      4,
      1344
    ],
    [
      7,
      1343
    ],
    [
      8,
      1334
    ],
    [
      11,
      1298
    ],
    [
      12,
      1295
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Redwood storage engine runs out of memory",
  "id": 3168,
  "title": "Redwood storage engine runs out of memory",
  "posts_count": 12,
  "created_at": "2022-02-14T09:36:56.126Z",
  "views": 1649,
  "reply_count": 10,
  "like_count": 6,
  "last_posted_at": "2022-04-05T12:28:00.744Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "redwood-storage-engine-runs-out-of-memory",
  "category_id": 7,
  "word_count": 1637,
  "deleted_at": null,
  "user_id": 711,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": "https://global.discourse-cdn.com/foundationdb/optimized/2X/4/48f85d738f70c67ad18b36b24437e58ff165a9df_2_1024x753.png",
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_3168",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 12,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 3,
  "show_read_indicator": false,
  "thumbnails": [
    {
      "max_width": null,
      "max_height": null,
      "width": 1691,
      "height": 1244,
      "url": "https://global.discourse-cdn.com/foundationdb/original/2X/4/48f85d738f70c67ad18b36b24437e58ff165a9df.png"
    },
    {
      "max_width": 1024,
      "max_height": 1024,
      "width": 1024,
      "height": 753,
      "url": "https://global.discourse-cdn.com/foundationdb/optimized/2X/4/48f85d738f70c67ad18b36b24437e58ff165a9df_2_1024x753.png"
    }
  ],
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Some Clarification on Storage Engine and Disk/IO",
      "id": 1453,
      "title": "Some Clarification on Storage Engine and Disk/IO",
      "slug": "some-clarification-on-storage-engine-and-disk-io",
      "posts_count": 13,
      "reply_count": 8,
      "highest_post_number": 13,
      "image_url": null,
      "created_at": "2019-06-13T18:18:46.358Z",
      "last_posted_at": "2019-07-23T06:20:18.977Z",
      "bumped": true,
      "bumped_at": "2019-07-23T06:20:18.977Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 2341,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 594,
            "username": "zhuyi29",
            "name": "Zoe",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/z/edb3f5/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "ERROR: Out of memory with Foundationdb 7.0.0",
      "id": 3429,
      "title": "ERROR: Out of memory with Foundationdb 7.0.0",
      "slug": "error-out-of-memory-with-foundationdb-7-0-0",
      "posts_count": 10,
      "reply_count": 4,
      "highest_post_number": 10,
      "image_url": null,
      "created_at": "2022-07-06T08:50:54.863Z",
      "last_posted_at": "2023-08-31T09:02:22.084Z",
      "bumped": true,
      "bumped_at": "2023-08-31T09:02:22.084Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 4,
      "views": 1363,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 1133,
            "username": "redcuckoo",
            "name": "Yurii Momotenko",
            "avatar_template": "/user_avatar/forums.foundationdb.org/redcuckoo/{size}/1660_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 14,
            "username": "andrew.noyes",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 711,
            "username": "osamarin",
            "name": "Oleg Samarin",
            "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Discussion thread for new storage engine ideas",
      "id": 101,
      "title": "Discussion thread for new storage engine ideas",
      "slug": "discussion-thread-for-new-storage-engine-ideas",
      "posts_count": 31,
      "reply_count": 16,
      "highest_post_number": 33,
      "image_url": null,
      "created_at": "2018-04-20T06:11:56.229Z",
      "last_posted_at": "2020-02-18T21:37:22.164Z",
      "bumped": true,
      "bumped_at": "2020-02-18T21:37:22.164Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 31,
      "views": 15718,
      "category_id": 5,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 68,
            "username": "daverosenthal",
            "name": "Dave Rosenthal",
            "avatar_template": "/user_avatar/forums.foundationdb.org/daverosenthal/{size}/51_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 257,
            "username": "cih.y2k",
            "name": "cih.y2k",
            "avatar_template": "/user_avatar/forums.foundationdb.org/cih.y2k/{size}/423_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 419,
            "username": "doublemax",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/8e7dd6/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 1,
            "username": "davelester",
            "name": "Dave Lester",
            "avatar_template": "/user_avatar/forums.foundationdb.org/davelester/{size}/1927_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Redwood Storage Engine documentation for 7.1 is missing",
      "id": 3575,
      "title": "Redwood Storage Engine documentation for 7.1 is missing",
      "slug": "redwood-storage-engine-documentation-for-7-1-is-missing",
      "posts_count": 13,
      "reply_count": 6,
      "highest_post_number": 13,
      "image_url": null,
      "created_at": "2022-10-03T17:56:11.741Z",
      "last_posted_at": "2024-02-01T00:01:10.918Z",
      "bumped": true,
      "bumped_at": "2024-02-01T00:01:10.918Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 10,
      "views": 3319,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 156,
            "username": "spullara",
            "name": "Sam Pullara",
            "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 1022,
            "username": "liyyue",
            "name": "liyyue",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/54ee81/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 849,
            "username": "johscheuer",
            "name": "Johannes Scheuermann",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 1342,
            "username": "newhook",
            "name": "Matthew Newhook",
            "avatar_template": "/user_avatar/forums.foundationdb.org/newhook/{size}/1684_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "How to increase the read/write throughput for foundationdb 5.2",
      "id": 1968,
      "title": "How to increase the read/write throughput for foundationdb 5.2",
      "slug": "how-to-increase-the-read-write-throughput-for-foundationdb-5-2",
      "posts_count": 21,
      "reply_count": 19,
      "highest_post_number": 23,
      "image_url": null,
      "created_at": "2020-02-20T00:35:23.457Z",
      "last_posted_at": "2020-05-24T08:05:30.224Z",
      "bumped": true,
      "bumped_at": "2020-05-24T08:05:30.224Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 3153,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 718,
            "username": "Cliicy",
            "name": "Dragon",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/c/47e85d/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 711,
        "username": "osamarin",
        "name": "Oleg Samarin",
        "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png",
        "post_count": 7,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 7,
        "username": "SteavedHams",
        "name": "Steve Atherton",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "post_count": 4,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 164,
        "username": "Imperatorx",
        "name": "",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/i/d2c977/{size}.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      }
    ],
    "created_by": {
      "id": 711,
      "username": "osamarin",
      "name": "Oleg Samarin",
      "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png"
    },
    "last_poster": {
      "id": 711,
      "username": "osamarin",
      "name": "Oleg Samarin",
      "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png"
    },
    "links": [
      {
        "url": "https://github.com/sfc-gh-satherton/foundationdb/commit/42136bf80889a19935986686a3b741620da6cf08",
        "title": "Fixed memory leak (and minor performance bug) where RedwoodRecordRef:\u2026 \u00b7 sfc-gh-satherton/foundationdb@42136bf \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 17,
        "user_id": 7,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://drive.google.com/file/d/1OiqR-Y_sz66lvT9PE6O1mDcdEnnPSTsu/view?usp=sharing",
        "title": "foundationdb.conf - Google Drive",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 16,
        "user_id": 711,
        "domain": "drive.google.com",
        "root_domain": "google.com"
      },
      {
        "url": "https://drive.google.com/file/d/1szw-veQgzXFlPEo_Wzw36rLLOqaA9EOZ/view?usp=sharing",
        "title": "trace.192.168.56.161.4700.1644829722.q9CvvM.0.1.xml - Google Drive",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 711,
        "domain": "drive.google.com",
        "root_domain": "google.com"
      }
    ]
  },
  "bookmarks": []
}