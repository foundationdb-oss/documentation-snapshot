{
  "post_stream": {
    "posts": [
      {
        "id": 10803,
        "name": "Lars Hagen",
        "username": "larshagen",
        "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png",
        "created_at": "2022-03-16T09:22:29.787Z",
        "cooked": "<p>This happened recently in one of our test environments, with fdb operator version v0.41.1.</p>\n<p>We were in the process of scaling a cluster down, when an external incident caused all FDB pods to be deleted. When the operator brought the cluster back up, it did not bring back the pods that we were in the process of draining for data, and the corresponding PVCs were deleted.</p>\n<p>This caused the cluster to come back up without any copies of some of its data, and since the PVCs were deleted it was not possible to recover.</p>\n<p>Is this a known issue, and has it already been fixed in a newer version of the operator?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2022-03-16T09:22:29.787Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 100,
        "reads": 26,
        "readers_count": 25,
        "score": 505.2,
        "yours": false,
        "topic_id": 3213,
        "topic_slug": "data-loss-during-recovery-from-mass-pod-deletion-during-scale-down",
        "display_username": "Lars Hagen",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 724,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-loss-during-recovery-from-mass-pod-deletion-during-scale-down/3213/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 10804,
        "name": "Johannes Scheuermann",
        "username": "johscheuer",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
        "created_at": "2022-03-16T10:10:22.436Z",
        "cooked": "<p>Hello,</p>\n<p>we still have an issue open for recreating Pods if they are not fully excluded: <a href=\"https://github.com/FoundationDB/fdb-kubernetes-operator/issues/970\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Operator should recreate Pods if they are not fully excluded \u00b7 Issue #970 \u00b7 FoundationDB/fdb-kubernetes-operator \u00b7 GitHub</a> the fix for this should be pretty trivial. Otherwise the operator won\u2019t recreate Pods that are marked for removal (this happens during a scale down). If you have some capacity a I\u2019m happy to review a PR for that.</p>\n<p>In addition to that we made some changes in the operator that should prevent this from happening even without the fix from above. We changed the way how resources are teared down, this is the interesting code part: <a href=\"https://github.com/FoundationDB/fdb-kubernetes-operator/blob/main/controllers/remove_process_groups.go#L73-L100\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">fdb-kubernetes-operator/remove_process_groups.go at main \u00b7 FoundationDB/fdb-kubernetes-operator \u00b7 GitHub</a> we will only remove process groups (Pod + PVC + optional Service) if the cluster has the required fault tolerance if not the operator won\u2019t remove anything in addition to that the operator will tear down process groups per default by fault domain (zone) with a wait period of 60 seconds between those removals. If you want you can change the wait time between removals as well as the removal mode.</p>\n<p>In general I would suggest upgrading the operator to at least <code>v0.51.1</code> which is the latest 0. version and then considering upgrading to the operator release 1.0.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2022-03-16T10:10:22.436Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 26,
        "readers_count": 25,
        "score": 15.2,
        "yours": false,
        "topic_id": 3213,
        "topic_slug": "data-loss-during-recovery-from-mass-pod-deletion-during-scale-down",
        "display_username": "Johannes Scheuermann",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/FoundationDB/fdb-kubernetes-operator/issues/970",
            "internal": false,
            "reflection": false,
            "title": "Operator should recreate Pods if they are not fully excluded \u00b7 Issue #970 \u00b7 FoundationDB/fdb-kubernetes-operator \u00b7 GitHub",
            "clicks": 9
          },
          {
            "url": "https://github.com/FoundationDB/fdb-kubernetes-operator/blob/main/controllers/remove_process_groups.go#L73-L100",
            "internal": false,
            "reflection": false,
            "title": "fdb-kubernetes-operator/remove_process_groups.go at main \u00b7 FoundationDB/fdb-kubernetes-operator \u00b7 GitHub",
            "clicks": 2
          }
        ],
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 849,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-loss-during-recovery-from-mass-pod-deletion-during-scale-down/3213/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10806,
        "name": "Lars Hagen",
        "username": "larshagen",
        "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png",
        "created_at": "2022-03-16T10:57:22.261Z",
        "cooked": "<p>Thank you for the quick reply!</p>\n<p>Improvements in resource teardown is very good news, and we will work on getting up to date on our operator version.</p>\n<p>Am I right in thinking that if we were on v0.51.1, the excluded pods would still not be recreated, but the PVCs would still be around, so we could bring the cluster back by reverting the storage pod count to what it was before the scale down? Would any other action be required?</p>\n<p>We will also look into whether we can contribute a PR to solve issue <span class=\"hashtag\">#970</span>.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2022-03-16T10:57:22.261Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 24,
        "readers_count": 23,
        "score": 9.8,
        "yours": false,
        "topic_id": 3213,
        "topic_slug": "data-loss-during-recovery-from-mass-pod-deletion-during-scale-down",
        "display_username": "Lars Hagen",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 849,
          "username": "johscheuer",
          "name": "Johannes Scheuermann",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 724,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-loss-during-recovery-from-mass-pod-deletion-during-scale-down/3213/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10807,
        "name": "Johannes Scheuermann",
        "username": "johscheuer",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
        "created_at": "2022-03-16T11:16:14.263Z",
        "cooked": "<blockquote>\n<p>Am I right in thinking that if we were on v0.51.1, the excluded pods would still not be recreated, but the PVCs would still be around, so we could bring the cluster back by reverting the storage pod count to what it was before the scale down? Would any other action be required?</p>\n</blockquote>\n<p>That depends a little bit on the timing, if the operator reaches the point where it tries to delete all resources and the fault tolerance would still be good it would have deleted the PVCs also. In general the risk should be lower to run into this issue, the zone deletion was added later and only landed in 1.0.0 which should ensure that at least some of the data is still available. I think reverting the storage pod count should be enough but you might want to test this behaviour.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2022-03-16T11:16:14.263Z",
        "reply_count": 0,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 21,
        "readers_count": 20,
        "score": 4.2,
        "yours": false,
        "topic_id": 3213,
        "topic_slug": "data-loss-during-recovery-from-mass-pod-deletion-during-scale-down",
        "display_username": "Johannes Scheuermann",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 724,
          "username": "larshagen",
          "name": "Lars Hagen",
          "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 849,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-loss-during-recovery-from-mass-pod-deletion-during-scale-down/3213/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10825,
        "name": "Lars Hagen",
        "username": "larshagen",
        "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png",
        "created_at": "2022-03-18T12:25:08.781Z",
        "cooked": "<p>We have done some more testing, where we have repeatedly started scaling down a cluster, and then deleted all pods in the middle of the scale down.</p>\n<ol>\n<li>With operator version 0.41.1, the PVCs and services are deleted for the pods marked for removal.</li>\n<li>With operator version 0.51.1, the PVCs and services are <em>not</em> deleted, and we are able to bring the cluster back by disabling the operator, modifying the FDB CRD to revert scale down and remove marks for deletion, remove the FDB excludes with fdbcli, and re-enable the operator.</li>\n<li>With operator version 0.41.1, we were able to get the data back when using a storage class with reclaim policy \u201cRetain\u201d. It is then possible to recreate the PVCs and services, and then follow the same steps as for 0.51.1 to make the operator bring the cluster back (at least this works in azure, it will probably depend on the environment).</li>\n</ol>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2022-03-18T12:27:03.518Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 18,
        "readers_count": 17,
        "score": 3.6,
        "yours": false,
        "topic_id": 3213,
        "topic_slug": "data-loss-during-recovery-from-mass-pod-deletion-during-scale-down",
        "display_username": "Lars Hagen",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 724,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-loss-during-recovery-from-mass-pod-deletion-during-scale-down/3213/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10826,
        "name": "Lars Hagen",
        "username": "larshagen",
        "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png",
        "created_at": "2022-03-18T12:30:07.470Z",
        "cooked": "<p>The actions we plan to take are:</p>\n<ol>\n<li>Upgrade the operator in all clusters, first to 0.51.1, then to 1.0.0</li>\n<li>Change our storage class to use reclaim policy \u201cRetain\u201d.</li>\n<li>Contribute a fix for issue <span class=\"hashtag\">#970</span>\n</li>\n</ol>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2022-03-18T12:30:07.470Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 17,
        "readers_count": 16,
        "score": 3.4,
        "yours": false,
        "topic_id": 3213,
        "topic_slug": "data-loss-during-recovery-from-mass-pod-deletion-during-scale-down",
        "display_username": "Lars Hagen",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 724,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-loss-during-recovery-from-mass-pod-deletion-during-scale-down/3213/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10827,
        "name": "Johannes Scheuermann",
        "username": "johscheuer",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
        "created_at": "2022-03-18T14:02:24.803Z",
        "cooked": "<p>Thanks for the update!</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2022-03-18T14:02:24.803Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 16,
        "readers_count": 15,
        "score": 3.2,
        "yours": false,
        "topic_id": 3213,
        "topic_slug": "data-loss-during-recovery-from-mass-pod-deletion-during-scale-down",
        "display_username": "Johannes Scheuermann",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 849,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-loss-during-recovery-from-mass-pod-deletion-during-scale-down/3213/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10841,
        "name": "Lars Hagen",
        "username": "larshagen",
        "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png",
        "created_at": "2022-03-22T14:32:48.831Z",
        "cooked": "<p>We were a bit unsure what the correct fix for <span class=\"hashtag\">#970</span> is, on our private fork we are currently testing out always recreating pods if we cannot verify that we are at the desired fault tolerance. That is, if we fail to read the current fault tolerance, or if the value we get is below desired.</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2022-03-22T14:32:48.831Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 15,
        "readers_count": 14,
        "score": 8.0,
        "yours": false,
        "topic_id": 3213,
        "topic_slug": "data-loss-during-recovery-from-mass-pod-deletion-during-scale-down",
        "display_username": "Lars Hagen",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 724,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-loss-during-recovery-from-mass-pod-deletion-during-scale-down/3213/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10842,
        "name": "Johannes Scheuermann",
        "username": "johscheuer",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
        "created_at": "2022-03-22T16:09:28.107Z",
        "cooked": "<blockquote>\n<p>We were a bit unsure what the correct fix for <span class=\"hashtag-raw\">#970</span> is, on our private fork we are currently testing out always recreating pods if we cannot verify that we are at the desired fault tolerance. That is, if we fail to read the current fault tolerance, or if the value we get is below desired.</p>\n</blockquote>\n<p>I think there are two ways to implement that. One is the approach that you picked and only recreate Pods that are marked for removal when the desired fault tolerance is not met. Another approach would be to simply always recreate Pods when they are marked for removal but not fully excluded that would a check like this:</p>\n<pre><code class=\"lang-auto\">if processGroup.IsMarkedForRemoval() &amp;&amp; processGroup.IsExcluded() {\n   continue\n}\n</code></pre>\n<p>This still gives a user a way to force a deletion of a process group by putting it on the removal list without exclusion (a process group that is marked to be removed without exclusion will be handled like it is excluded). From an implementation perspective always recreating Pods if the process group is not fully excluded should be pretty simple and probably only requires a change single code line change.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2022-03-22T16:09:28.107Z",
        "reply_count": 0,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 15,
        "readers_count": 14,
        "score": 8.0,
        "yours": false,
        "topic_id": 3213,
        "topic_slug": "data-loss-during-recovery-from-mass-pod-deletion-during-scale-down",
        "display_username": "Johannes Scheuermann",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 724,
          "username": "larshagen",
          "name": "Lars Hagen",
          "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 849,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-loss-during-recovery-from-mass-pod-deletion-during-scale-down/3213/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10846,
        "name": "Lars Hagen",
        "username": "larshagen",
        "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png",
        "created_at": "2022-03-22T20:01:42.273Z",
        "cooked": "<p>Yes, that makes sense. I think what confused us is that we tried to copy in the same logic as for pod deletion, so checking <code>IsMarkedForRemoval</code>, then <code>IsExcluded</code> and then running exclude calls to FDB to check what can be safely removed.</p>\n<p>BTW, is there a reason we have a separate subreconciler for excluding processes that are marked for removal but not yet excluded, but we also seem to have the same logic replicated in the <code>removeProcessGroups</code> subreconciler?</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2022-03-22T20:01:42.273Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 14,
        "readers_count": 13,
        "score": 7.8,
        "yours": false,
        "topic_id": 3213,
        "topic_slug": "data-loss-during-recovery-from-mass-pod-deletion-during-scale-down",
        "display_username": "Lars Hagen",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 724,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-loss-during-recovery-from-mass-pod-deletion-during-scale-down/3213/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10852,
        "name": "Johannes Scheuermann",
        "username": "johscheuer",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
        "created_at": "2022-03-23T19:48:34.290Z",
        "cooked": "<blockquote>\n<p>Yes, that makes sense. I think what confused us is that we tried to copy in the same logic as for pod deletion, so checking <code>IsMarkedForRemoval</code> , then <code>IsExcluded</code> and then running exclude calls to FDB to check what can be safely removed.</p>\n</blockquote>\n<p>The CanSafelyRemove check is not required here since the <code>IsExcluded</code> check will cover that.</p>\n<blockquote>\n<p>BTW, is there a reason we have a separate subreconciler for excluding processes that are marked for removal but not yet excluded, but we also seem to have the same logic replicated in the <code>removeProcessGroups</code> subreconciler?</p>\n</blockquote>\n<p>The logic has some similarities but they are doing slightly different things for example the exclude reconciler checks if we have enough running processes to actually exclude the processes that are marked for removal (<a href=\"https://github.com/FoundationDB/fdb-kubernetes-operator/blob/main/controllers/exclude_processes.go#L127-L161\" rel=\"noopener nofollow ugc\">https://github.com/FoundationDB/fdb-kubernetes-operator/blob/main/controllers/exclude_processes.go#L127-L161</a>) the idea is to prevent that an exclude brings the cluster in a bad state. The remove process groups reconciler does a bunch of tests before actually removing any process groups like checking if the fault tolerance is good and will use the CanSafelyRemove (<a href=\"https://github.com/FoundationDB/fdb-kubernetes-operator/blob/main/fdbclient/admin_client.go#L382-L433\" rel=\"noopener nofollow ugc\">https://github.com/FoundationDB/fdb-kubernetes-operator/blob/main/fdbclient/admin_client.go#L382-L433</a>) method to check if the process groups that are marked as removal are \u201cfully\u201d excluded. The list of process groups will then be removed by the defined removal mode (default is one fault domain at a time with a 1 minute wait in between those removals).</p>\n<p>I hope that helps. In the future I plan to write down a design doc to improve this process.</p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2022-03-23T19:48:34.290Z",
        "reply_count": 0,
        "reply_to_post_number": 10,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 14,
        "readers_count": 13,
        "score": 2.8,
        "yours": false,
        "topic_id": 3213,
        "topic_slug": "data-loss-during-recovery-from-mass-pod-deletion-during-scale-down",
        "display_username": "Johannes Scheuermann",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/FoundationDB/fdb-kubernetes-operator/blob/main/controllers/exclude_processes.go#L127-L161",
            "internal": false,
            "reflection": false,
            "title": "fdb-kubernetes-operator/exclude_processes.go at main \u00b7 FoundationDB/fdb-kubernetes-operator \u00b7 GitHub",
            "clicks": 0
          },
          {
            "url": "https://github.com/FoundationDB/fdb-kubernetes-operator/blob/main/fdbclient/admin_client.go#L382-L433",
            "internal": false,
            "reflection": false,
            "title": "fdb-kubernetes-operator/admin_client.go at main \u00b7 FoundationDB/fdb-kubernetes-operator \u00b7 GitHub",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 724,
          "username": "larshagen",
          "name": "Lars Hagen",
          "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 849,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-loss-during-recovery-from-mass-pod-deletion-during-scale-down/3213/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10853,
        "name": "Lars Hagen",
        "username": "larshagen",
        "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png",
        "created_at": "2022-03-24T07:44:16.420Z",
        "cooked": "<p>Thanks for the explanation. My understanding so far:</p>\n<ul>\n<li>\n<code>excludeProcesses</code> reconciler reads the <code>removalTimestamp</code> field and decides which processes to exclude in FDB. It then calls exclude, which will mark the processes as excluded in <code>status.json</code>\n</li>\n<li>\n<code>removeProcessGroups</code> reconciler reads the excluded status from <code>status.json</code>, and runs exclude again to check if exclusion is finished. if exclusion is finished it sets the <code>excludedTimestamp</code>, and can start removing the process group.</li>\n</ul>\n<p>We have now tested out the proposed fix for <span class=\"hashtag\">#970</span> (using <code>IsExcluded()</code> instead of fault tolerance check) on our fork, and verified that it solves our failure scenario. We will make an upstream PR soon.</p>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2022-03-24T07:44:16.420Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 12,
        "readers_count": 11,
        "score": 7.4,
        "yours": false,
        "topic_id": 3213,
        "topic_slug": "data-loss-during-recovery-from-mass-pod-deletion-during-scale-down",
        "display_username": "Lars Hagen",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 724,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-loss-during-recovery-from-mass-pod-deletion-during-scale-down/3213/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10858,
        "name": "Johannes Scheuermann",
        "username": "johscheuer",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
        "created_at": "2022-03-25T09:31:54.572Z",
        "cooked": "<blockquote>\n<ul>\n<li><code>excludeProcesses</code> reconciler reads the <code>removalTimestamp</code> field and decides which processes to exclude in FDB. It then calls exclude, which will mark the processes as excluded in <code>status.json</code></li>\n</ul>\n</blockquote>\n<p>That is correct (there is also some more documentation here: <a href=\"https://github.com/FoundationDB/fdb-kubernetes-operator/blob/main/docs/manual/technical_design.md#excludeprocesses\" rel=\"noopener nofollow ugc\">https://github.com/FoundationDB/fdb-kubernetes-operator/blob/main/docs/manual/technical_design.md#excludeprocesses</a>) and there is also a check if the operator is allowed to exclude processes or if to many processes are missing.</p>\n<blockquote>\n<ul>\n<li><code>removeProcessGroups</code> reconciler reads the excluded status from <code>status.json</code> , and runs exclude again to check if exclusion is finished. if exclusion is finished it sets the <code>excludedTimestamp</code> , and can start removing the process group.</li>\n</ul>\n</blockquote>\n<p>That\u2019s also correct and here is some additional documentation: <a href=\"https://github.com/FoundationDB/fdb-kubernetes-operator/blob/main/docs/manual/technical_design.md#removeprocessgroups\" rel=\"noopener nofollow ugc\">https://github.com/FoundationDB/fdb-kubernetes-operator/blob/main/docs/manual/technical_design.md#removeprocessgroups</a></p>\n<p>That\u2019s a good reminder for me to review the docs I shared with you to check if they still represent the current state <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<blockquote>\n<p>We have now tested out the proposed fix for <span class=\"hashtag-raw\">#970</span> (using <code>IsExcluded()</code> instead of fault tolerance check) on our fork, and verified that it solves our failure scenario. We will make an upstream PR soon.</p>\n</blockquote>\n<p>Awesome! Let me know if you need any help.</p>",
        "post_number": 13,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2022-03-25T09:31:54.572Z",
        "reply_count": 0,
        "reply_to_post_number": 12,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 12,
        "readers_count": 11,
        "score": 17.4,
        "yours": false,
        "topic_id": 3213,
        "topic_slug": "data-loss-during-recovery-from-mass-pod-deletion-during-scale-down",
        "display_username": "Johannes Scheuermann",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/FoundationDB/fdb-kubernetes-operator/blob/main/docs/manual/technical_design.md#removeprocessgroups",
            "internal": false,
            "reflection": false,
            "title": "fdb-kubernetes-operator/technical_design.md at main \u00b7 FoundationDB/fdb-kubernetes-operator \u00b7 GitHub",
            "clicks": 2
          },
          {
            "url": "https://github.com/FoundationDB/fdb-kubernetes-operator/blob/main/docs/manual/technical_design.md#excludeprocesses",
            "internal": false,
            "reflection": false,
            "title": "fdb-kubernetes-operator/technical_design.md at main \u00b7 FoundationDB/fdb-kubernetes-operator \u00b7 GitHub",
            "clicks": 1
          }
        ],
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 724,
          "username": "larshagen",
          "name": "Lars Hagen",
          "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 849,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-loss-during-recovery-from-mass-pod-deletion-during-scale-down/3213/13",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10859,
        "name": "Lars Hagen",
        "username": "larshagen",
        "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png",
        "created_at": "2022-03-25T13:33:41.750Z",
        "cooked": "<p>Here is the PR <a href=\"https://github.com/FoundationDB/fdb-kubernetes-operator/pull/1136\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Recreating pods that are not fully excluded. by aasmundeldhuset \u00b7 Pull Request #1136 \u00b7 FoundationDB/fdb-kubernetes-operator \u00b7 GitHub</a></p>",
        "post_number": 14,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2022-03-25T13:33:41.750Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 11,
        "readers_count": 10,
        "score": 2.2,
        "yours": false,
        "topic_id": 3213,
        "topic_slug": "data-loss-during-recovery-from-mass-pod-deletion-during-scale-down",
        "display_username": "Lars Hagen",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/FoundationDB/fdb-kubernetes-operator/pull/1136",
            "internal": false,
            "reflection": false,
            "title": "Recreating pods that are not fully excluded. by aasmundeldhuset \u00b7 Pull Request #1136 \u00b7 FoundationDB/fdb-kubernetes-operator \u00b7 GitHub",
            "clicks": 5
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 724,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-loss-during-recovery-from-mass-pod-deletion-during-scale-down/3213/14",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      10803,
      10804,
      10806,
      10807,
      10825,
      10826,
      10827,
      10841,
      10842,
      10846,
      10852,
      10853,
      10858,
      10859
    ]
  },
  "timeline_lookup": [
    [
      1,
      1316
    ],
    [
      3,
      1315
    ],
    [
      5,
      1313
    ],
    [
      8,
      1309
    ],
    [
      11,
      1308
    ],
    [
      13,
      1307
    ],
    [
      14,
      1306
    ]
  ],
  "suggested_topics": [],
  "tags": [
    "operator"
  ],
  "tags_descriptions": {},
  "fancy_title": "Data loss during recovery from mass pod deletion during scale down",
  "id": 3213,
  "title": "Data loss during recovery from mass pod deletion during scale down",
  "posts_count": 14,
  "created_at": "2022-03-16T09:22:29.689Z",
  "views": 711,
  "reply_count": 5,
  "like_count": 0,
  "last_posted_at": "2022-03-25T13:33:41.750Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "data-loss-during-recovery-from-mass-pod-deletion-during-scale-down",
  "category_id": 16,
  "word_count": 1689,
  "deleted_at": null,
  "user_id": 724,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_3213",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 14,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 2,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Failure / Recovery scenario",
      "id": 2384,
      "title": "Failure / Recovery scenario",
      "slug": "failure-recovery-scenario",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2020-10-10T01:06:26.706Z",
      "last_posted_at": "2020-10-12T13:36:11.016Z",
      "bumped": true,
      "bumped_at": "2020-10-12T13:36:11.016Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 695,
      "category_id": 16,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 819,
            "username": "mbuleandra",
            "name": "Marius",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mbuleandra/{size}/977_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 3,
            "username": "john_brownlee",
            "name": "John Brownlee",
            "avatar_template": "/user_avatar/forums.foundationdb.org/john_brownlee/{size}/22_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Shutdown/scale down FDB on OCP/kubernetes (and keep the pvc)",
      "id": 3236,
      "title": "Shutdown/scale down FDB on OCP/kubernetes (and keep the pvc)",
      "slug": "shutdown-scale-down-fdb-on-ocp-kubernetes-and-keep-the-pvc",
      "posts_count": 9,
      "reply_count": 1,
      "highest_post_number": 9,
      "image_url": null,
      "created_at": "2022-03-30T14:57:08.042Z",
      "last_posted_at": "2022-04-02T08:35:13.149Z",
      "bumped": true,
      "bumped_at": "2022-04-02T08:35:13.149Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "operator"
      ],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 735,
      "category_id": 17,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 890,
            "username": "tangerine",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/tangerine/{size}/1084_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 849,
            "username": "johscheuer",
            "name": "Johannes Scheuermann",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 1029,
            "username": "liuyan",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/839c29/{size}.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "FDB Cluster upgrade does not deletes old pods",
      "id": 4074,
      "title": "FDB Cluster upgrade does not deletes old pods",
      "slug": "fdb-cluster-upgrade-does-not-deletes-old-pods",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2023-07-20T23:41:53.789Z",
      "last_posted_at": "2023-07-24T09:21:01.151Z",
      "bumped": true,
      "bumped_at": "2023-07-24T09:21:01.151Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 211,
      "category_id": 16,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 1292,
            "username": "mdfaizsiddiqui",
            "name": "Faiz",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mdfaizsiddiqui/{size}/1628_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 849,
            "username": "johscheuer",
            "name": "Johannes Scheuermann",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "FDB kubernetes operator continuously boucing processes",
      "id": 2092,
      "title": "FDB kubernetes operator continuously boucing processes",
      "slug": "fdb-kubernetes-operator-continuously-boucing-processes",
      "posts_count": 9,
      "reply_count": 5,
      "highest_post_number": 9,
      "image_url": null,
      "created_at": "2020-04-29T10:57:13.947Z",
      "last_posted_at": "2020-05-03T07:18:12.844Z",
      "bumped": true,
      "bumped_at": "2020-05-03T07:18:12.844Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1013,
      "category_id": 16,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 724,
            "username": "larshagen",
            "name": "Lars Hagen",
            "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 3,
            "username": "john_brownlee",
            "name": "John Brownlee",
            "avatar_template": "/user_avatar/forums.foundationdb.org/john_brownlee/{size}/22_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Changing the PVC size in spec resulting in new pods being created and the old pods still remain",
      "id": 3511,
      "title": "Changing the PVC size in spec resulting in new pods being created and the old pods still remain",
      "slug": "changing-the-pvc-size-in-spec-resulting-in-new-pods-being-created-and-the-old-pods-still-remain",
      "posts_count": 5,
      "reply_count": 2,
      "highest_post_number": 5,
      "image_url": null,
      "created_at": "2022-08-22T15:01:40.271Z",
      "last_posted_at": "2022-08-26T08:06:11.323Z",
      "bumped": true,
      "bumped_at": "2022-08-26T08:06:11.323Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "operator"
      ],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 531,
      "category_id": 16,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 890,
            "username": "tangerine",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/tangerine/{size}/1084_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 849,
            "username": "johscheuer",
            "name": "Johannes Scheuermann",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
            "trust_level": 2
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 724,
        "username": "larshagen",
        "name": "Lars Hagen",
        "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png",
        "post_count": 8,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 849,
        "username": "johscheuer",
        "name": "Johannes Scheuermann",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
        "post_count": 6,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      }
    ],
    "created_by": {
      "id": 724,
      "username": "larshagen",
      "name": "Lars Hagen",
      "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png"
    },
    "last_poster": {
      "id": 724,
      "username": "larshagen",
      "name": "Lars Hagen",
      "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png"
    },
    "links": [
      {
        "url": "https://github.com/FoundationDB/fdb-kubernetes-operator/issues/970",
        "title": "Operator should recreate Pods if they are not fully excluded \u00b7 Issue #970 \u00b7 FoundationDB/fdb-kubernetes-operator \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 9,
        "user_id": 849,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/FoundationDB/fdb-kubernetes-operator/pull/1136",
        "title": "Recreating pods that are not fully excluded. by aasmundeldhuset \u00b7 Pull Request #1136 \u00b7 FoundationDB/fdb-kubernetes-operator \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 5,
        "user_id": 724,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/FoundationDB/fdb-kubernetes-operator/blob/main/controllers/remove_process_groups.go#L73-L100",
        "title": "fdb-kubernetes-operator/remove_process_groups.go at main \u00b7 FoundationDB/fdb-kubernetes-operator \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 849,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/FoundationDB/fdb-kubernetes-operator/blob/main/docs/manual/technical_design.md#removeprocessgroups",
        "title": "fdb-kubernetes-operator/technical_design.md at main \u00b7 FoundationDB/fdb-kubernetes-operator \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 849,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/FoundationDB/fdb-kubernetes-operator/blob/main/docs/manual/technical_design.md#excludeprocesses",
        "title": "fdb-kubernetes-operator/technical_design.md at main \u00b7 FoundationDB/fdb-kubernetes-operator \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 849,
        "domain": "github.com",
        "root_domain": "github.com"
      }
    ]
  },
  "bookmarks": []
}