{
  "post_stream": {
    "posts": [
      {
        "id": 13392,
        "name": "Yurii Momotenko",
        "username": "redcuckoo",
        "avatar_template": "/user_avatar/forums.foundationdb.org/redcuckoo/{size}/1660_2.png",
        "created_at": "2023-10-19T10:28:51.610Z",
        "cooked": "<p>Problem: Recently, we started getting the PacketLimitExceeded error (Severity 40)</p>\n<p>We have pretty extensive load on this DB, but we haven\u2019t noticed such error earlier. Lately we noticed that latency for getting info has been increased, which was resulted as I think due to high conflict rate, which was caused by this error.</p>\n<p>It occurred on multiple different databases at once, I think due to increasing load on it. However, when monitoring status we are getting \u201cThe database is not being saturated by the workload\u201d.</p>\n<p>I have looked up the forum and issue, but couldn\u2019t find such issues.</p>\n<p>Also in the code base, there are \u201cFlowKnobs\u201d with this option, but it\u2019s impossible to set from config if I am right?</p>\n<p>What\u2019s proper way to solve it?</p>\n<p>(!) Also worth noting, that we are getting this message with status time to time, when facing this error (that\u2019s <strong>storage</strong> server), but it looks more like a result to me:</p>\n<pre><code class=\"lang-auto\">  Performance limited by process: Storage server MVCC memory.\n  Most limiting process: &lt;IP&gt;:4501:tls\n</code></pre>\n<hr>\n<p>Foundationdb version:</p>\n<pre><code class=\"lang-auto\">FoundationDB CLI 7.1 (v7.1.23)\nsource version dd2e68b9b3175667914673539f06b8e1071c07d6\nprotocol fdb00b071010000\n</code></pre>\n<p>Configuration is as follows</p>\n<pre><code class=\"lang-auto\">Configuration:\n  Redundancy mode        - double\n  Storage engine         - ssd-redwood-1-experimental\n  Coordinators           - 6\n  Usable Regions         - 2\n  Regions: \n    Primary -\n        Datacenter                    - WC1\n    Remote -\n        Datacenter                    - EC1\n\nCluster:\n  FoundationDB processes - 247 (less 0 excluded; 6 with errors)\n  Zones                  - 6\n  Machines               - 6\n  Memory availability    - 3.5 GB per process on machine with least available\n                           &gt;&gt;&gt;&gt;&gt; (WARNING: 4.0 GB recommended) &lt;&lt;&lt;&lt;&lt;\n  Retransmissions rate   - 16 Hz\n  Fault Tolerance        - 1 machines\n  Server time            - 10/19/23 10:09:24\n\nData:\n  Replication health     - Healthy (Repartitioning)\n  Moving data            - 389.000 GB\n  Sum of key-value sizes - 50.081 TB\n  Disk space used        - 205.194 TB\n\nOperating space:\n  Storage server         - 701.4 GB free on most full server\n  Log server             - 3341.2 GB free on most full server\n\nWorkload:\n  Read rate              - 42293 Hz\n  Write rate             - 50489 Hz\n  Transactions started   - 27356 Hz\n  Transactions committed - 560 Hz\n  Conflict rate          - 5 Hz\n\nBackup and DR:\n  Running backups        - 0\n  Running DRs            - 0\n</code></pre>\n<p>So, this is how most of <strong>stateless</strong> servers look like (<em>status details</em>):</p>\n<pre><code class=\"lang-auto\">  &lt;IP&gt;:4560:tls  ( 13% cpu; 20% machine; 1.916 Gbps; 45% disk IO; 2.8 GB / 3.5 GB RAM  )\n    Last logged error: PacketLimitExceeded at Thu Oct 19 09:33:33 2023\n  &lt;IP&gt;:4561:tls  (  7% cpu; 20% machine; 1.916 Gbps; 53% disk IO; 3.0 GB / 3.5 GB RAM  )\n    Last logged error: PacketLimitExceeded at Thu Oct 19 01:11:17 2023\n  &lt;IP&gt;:4562:tls  (  3% cpu; 20% machine; 1.916 Gbps; 46% disk IO; 2.5 GB / 3.5 GB RAM  )\n    Last logged error: PacketLimitExceeded at Thu Oct 19 01:11:10 2023\n</code></pre>\n<p>Related error description from <em>status json</em></p>\n<pre><code class=\"lang-auto\">        \"messages\": [\n          {\n            \"description\": \"PacketLimitExceeded at Thu Oct 19 09:33:33 2023\",\n            \"name\": \"process_error\",\n            \"raw_log_message\": \"\\\"Severity\\\"=\\\"40\\\", \\\"ErrorKind\\\"=\\\"Unset\\\", \\\"Time\\\"=\\\"1697708013.974044\\\", \\\"DateTime\\\"=\\\"2023-10-19T09:33:33Z\\\", \\\"Type\\\"=\\\"PacketLimitExceeded\\\", \\\"ID\\\"=\\\"0000000000000000\\\", \\\"ToPeer\\\"=\\\"67.213.220.39:36284:tls\\\", \\\"Length\\\"=\\\"129276072\\\", \\\"ThreadID\\\"=\\\"12729161780852052616\\\", \\\"Backtrace\\\"=\\\"addr2line -e fdbserver.debug -p -C -f -i 0x366fadc 0x366e6f0 0x366eaee 0x3474c8e 0x347ed25 0xb924a8 0xba0603 0x10a5ca0 0x10a67e5 0x10a72d0 0x11ad550 0x360a35e 0xa574d9 0x7f092816b083\\\", \\\"Machine\\\"=\\\"&lt;IP&gt;:4560\\\", \\\"LogGroup\\\"=\\\"default\\\", \\\"Roles\\\"=\\\"CP\\\"\",\n            \"time\": 1697710000,\n            \"type\": \"PacketLimitExceeded\"\n          }\n        ],\n</code></pre>\n<p><em>sudo systemctl status foundationdb.service</em> doesn\u2019t return any errors</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2023-10-19T10:28:51.610Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 56,
        "reads": 26,
        "readers_count": 25,
        "score": 280.0,
        "yours": false,
        "topic_id": 4188,
        "topic_slug": "packetlimitexceeded-error-on-stateless-servers",
        "display_username": "Yurii Momotenko",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1133,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/packetlimitexceeded-error-on-stateless-servers/4188/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 13393,
        "name": "Yurii Momotenko",
        "username": "redcuckoo",
        "avatar_template": "/user_avatar/forums.foundationdb.org/redcuckoo/{size}/1660_2.png",
        "created_at": "2023-10-19T11:17:35.208Z",
        "cooked": "<p>Per server amount of server:</p>\n<p>Region 1 (3 machines on each the following):</p>\n<ul>\n<li>23 storage</li>\n<li>3 stateless</li>\n<li>23 transaction</li>\n</ul>\n<p>Region 2 (3 machines on each the following):</p>\n<ul>\n<li>15 storage</li>\n<li>3 stateless</li>\n<li>15 transaction</li>\n</ul>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2023-10-19T11:18:06.894Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 20,
        "readers_count": 19,
        "score": 4.0,
        "yours": false,
        "topic_id": 4188,
        "topic_slug": "packetlimitexceeded-error-on-stateless-servers",
        "display_username": "Yurii Momotenko",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1133,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/packetlimitexceeded-error-on-stateless-servers/4188/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13394,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2023-10-19T11:56:50.251Z",
        "cooked": "<p>Few questions:</p>\n<p>Did you change this knob on the client through a network option? (If so: I would strongly recommend against doing this).<br>\nGiven how you asked your question I assume you didn\u2019t change this knob on the server? It is possible to do, but you probably don\u2019t want to because this could cause large latency increases which can cause all kind of problems.<br>\nDo you have client logs enabled? If so: do you see the error there as well? Or do you see <code>LargePacketSent</code> messages (which would be of Severity 30).<br>\nDid you somehow change the max transaction size on the client?</p>\n<p>It\u2019s hard to tell what exactly is going on here. There should be safeguards against this error. Generally we don\u2019t allow packets to grow beyond a threshold because that can cause bad latency spikes and even priority inversion problems. But without more context it\u2019s hard to tell what\u2019s going on here. It could be a configuration bug or it could be an FDB bug\u2026</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2023-10-19T11:56:50.251Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 21,
        "readers_count": 20,
        "score": 24.2,
        "yours": false,
        "topic_id": 4188,
        "topic_slug": "packetlimitexceeded-error-on-stateless-servers",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/packetlimitexceeded-error-on-stateless-servers/4188/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13395,
        "name": "Yurii Momotenko",
        "username": "redcuckoo",
        "avatar_template": "/user_avatar/forums.foundationdb.org/redcuckoo/{size}/1660_2.png",
        "created_at": "2023-10-19T12:18:56.664Z",
        "cooked": "<p>Answering the questions:</p>\n<ul>\n<li>No, I haven\u2019t changed the knob on the client</li>\n<li>I don\u2019t have client logs at the moment, will retrieve them and reply one more time. Generally speaking, docker containers get \u201ctransaction cancelled\u201d which may be because of context timeout.</li>\n<li>I couldn\u2019t find anything which would point that we changed default transaction size. When batching, we have our own default limitation of 30k bytes (which way below 10m bytes limitation from documentation).</li>\n</ul>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2023-10-19T12:18:56.664Z",
        "reply_count": 0,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 19,
        "readers_count": 18,
        "score": 13.8,
        "yours": false,
        "topic_id": 4188,
        "topic_slug": "packetlimitexceeded-error-on-stateless-servers",
        "display_username": "Yurii Momotenko",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 15,
          "username": "markus.pilman",
          "name": "Markus Pilman",
          "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1133,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/packetlimitexceeded-error-on-stateless-servers/4188/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13396,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2023-10-19T12:33:33.932Z",
        "cooked": "<p>Yes 30KB transactions shouldn\u2019t be a problem at all.</p>\n<p>The role that is running on the process reporting the error is a commit proxy. So the most likely (though not only) explanation would be that the proxy batches more transactions that it can send to the remote (probably a tlog).</p>\n<p>What is running on <code>\\\"Machine\\\"=\\\"&lt;IP&gt;:4560\\\"</code> that is being logged above? It also would be helpful if you could download <a href=\"https://github.com/apple/foundationdb/releases/tag/7.1.23\">the debug package</a> and run the <code>addr2line</code> command that you can find in the logs and post it here.</p>\n<p>As a general comment: You\u2019re running a very large number of transaction processes. While this shouldn\u2019t cause the kind of problem you\u2019re seeing, it might still not be optimal. For a cluster this size you probably want to run something closer to 6 tlogs, maybe even 3 (it depends a bit on the workload). We usually start with a small number of tlogs and add more as their CPUs start to get close to 100% or we see high commit latencies.<br>\nAre these tlogs even being recruited (the quick and dirty way to see this is to look for CPU activity, the more precise way of checking is to look at the <code>Roles</code> field in the trace files)?</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2023-10-19T12:33:33.932Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 18,
        "readers_count": 17,
        "score": 38.6,
        "yours": false,
        "topic_id": 4188,
        "topic_slug": "packetlimitexceeded-error-on-stateless-servers",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/releases/tag/7.1.23",
            "internal": false,
            "reflection": false,
            "title": "Release Release 7.1.23 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 2
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/packetlimitexceeded-error-on-stateless-servers/4188/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13405,
        "name": "Yurii Momotenko",
        "username": "redcuckoo",
        "avatar_template": "/user_avatar/forums.foundationdb.org/redcuckoo/{size}/1660_2.png",
        "created_at": "2023-10-23T11:21:46.710Z",
        "cooked": "<p>Below you can find retrieved logs for failing commit_proxy. I have checked for others failing processes, indeed error occurs only when role \u201ccommit proxy\u201d is selected for stateless process.</p>\n<p>What I have done so far, reduced number of transaction process as recommended, leaving one per each server (result three in each region). Tried increasing number of stateless processses which resulted in nothing.</p>\n<p>I haven\u2019t retrieved client logs yet, but I have played around with the load. When turned off all containers (no load, minor reads), after restarting foundationdb the problem is gone. When I turn on read-only containers with do minor writes, errros appear immediately.</p>\n<p><code>./trace.&lt;IP&gt;.4561.1697724267.mpSk9X.2.135.xml:17993:&lt;Event Severity=\"40\" ErrorKind=\"Unset\" Time=\"1698034854.330258\" DateTime=\"2023-10-23T04:20:54Z\" Type=\"PacketLimitExceeded\" ID=\"0000000000000000\" ToPeer=\"&lt;IP&gt;:60804:tls\" Length=\"139867048\" ThreadID=\"800837820210536801\" Backtrace=\"addr2line -e fdbserver.debug -p -C -f -i 0x366fadc 0x366e6f0 0x366eaee 0x3474c8e 0x347ed25 0xb924a8 0xba0603 0x10a5ca0 0x10a67e5 0x10a72d0 0x11ad550 0x360a35e 0xa574d9 0x7f49aa6ae083\" Machine=\"&lt;IP&gt;:4561\" LogGroup=\"default\" Roles=\"CP\" /&gt;</code></p>\n<p><code>addr2line -e fdbserver.debug.x86_64 -p -C -f -i 0x366fadc 0x366e6f0 0x366eaee 0x3474c8e 0x347ed25 0xb924a8 0xba0603 0x10a5ca0 0x10a67e5 0x10a72d0 0x11ad550 0x360a35e 0xa574d9 0x7f49aa6ae083</code></p>\n<pre><code class=\"lang-auto\">std::string::_M_rep() const at /opt/rh/devtoolset-8/root/usr/include/c++/8/bits/basic_string.h:3322\n (inlined by) std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::basic_string(std::string const&amp;) at /opt/rh/devtoolset-8/root/usr/include/c++/8/bits/basic_string.tcc:613\n (inlined by) std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; std::operator+&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;(std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, char const*) at /opt/rh/devtoolset-8/root/usr/include/c++/8/bits/basic_string.h:5967\n (inlined by) BaseTraceEvent::backtrace(std::string const&amp;) at /home/foundationdb_ci/src/oOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOo/foundationdb/flow/Trace.cpp:1216\nstd::string::_M_rep() const at /opt/rh/devtoolset-8/root/usr/include/c++/8/bits/basic_string.h:3322\n (inlined by) std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::~basic_string() at /opt/rh/devtoolset-8/root/usr/include/c++/8/bits/basic_string.h:3640\n (inlined by) BaseTraceEvent::log() at /home/foundationdb_ci/src/oOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOo/foundationdb/flow/Trace.cpp:1235\nBaseTraceEvent::~BaseTraceEvent() at /home/foundationdb_ci/src/oOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOo/foundationdb/flow/Trace.cpp:1275\nsendPacket(TransportData*, Reference&lt;Peer&gt;, ISerializeSource const&amp;, Endpoint const&amp;, bool) at /home/foundationdb_ci/src/oOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOo/foundationdb/flow/Trace.h:543 (discriminator 2)\nReference&lt;Peer&gt;::~Reference() at /home/foundationdb_ci/src/oOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOo/foundationdb/flow/FastRef.h:124\n (inlined by) FlowTransport::sendUnreliable(ISerializeSource const&amp;, Endpoint const&amp;, bool) at /home/foundationdb_ci/src/oOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOo/foundationdb/fdbrpc/FlowTransport.actor.cpp:1770\nReference&lt;Peer&gt;::~Reference() at /home/foundationdb_ci/src/oOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOo/foundationdb/flow/FastRef.h:124\n (inlined by) a_body1cont2 at /home/foundationdb_ci/src/oOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOo/foundationdb/fdbrpc/networksender.actor.h:38\nActorCallback&lt;(anonymous namespace)::NetworkSenderActor&lt;GetKeyServerLocationsReply&gt;, 0, GetKeyServerLocationsReply&gt;::fire(GetKeyServerLocationsReply const&amp;) at /home/foundationdb_ci/foundationdb_build_output/dbdbdbdbdbdbdbdbdbdbdbdbdbdbdbdb/fdbrpc/networksender.actor.g.h:178\n (inlined by) fire at /home/foundationdb_ci/src/oOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOo/foundationdb/flow/flow.h:1318\nvoid SAV&lt;GetKeyServerLocationsReply&gt;::send&lt;GetKeyServerLocationsReply&amp;&gt;(GetKeyServerLocationsReply&amp;) at /home/foundationdb_ci/src/oOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOo/foundationdb/flow/flow.h:659\n (inlined by) void ReplyPromise&lt;GetKeyServerLocationsReply&gt;::send&lt;GetKeyServerLocationsReply&amp;&gt;(GetKeyServerLocationsReply&amp;) const at /home/foundationdb_ci/src/oOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOo/foundationdb/fdbrpc/fdbrpc.h:120\n (inlined by) a_body1cont3 at /home/foundationdb_ci/src/oOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOo/foundationdb/fdbserver/CommitProxyServer.actor.cpp:1796\n (inlined by) a_body1cont2break1 at /home/foundationdb_ci/foundationdb_build_output/dbdbdbdbdbdbdbdbdbdbdbdbdbdbdbdb/fdbserver/CommitProxyServer.actor.g.cpp:7954\n (inlined by) a_body1cont2loopBody1 at /home/foundationdb_ci/foundationdb_build_output/dbdbdbdbdbdbdbdbdbdbdbdbdbdbdbdb/fdbserver/CommitProxyServer.actor.g.cpp:7897\n(anonymous namespace)::DoKeyServerLocationRequestActorState&lt;(anonymous namespace)::DoKeyServerLocationRequestActor&gt;::a_body1cont2(Void const&amp;, int) [clone .isra.4754] [clone .constprop.25679] at /home/foundationdb_ci/foundationdb_build_output/dbdbdbdbdbdbdbdbdbdbdbdbdbdbdbdb/fdbserver/CommitProxyServer.actor.g.cpp:7887\n (inlined by) a_body1cont2 at /home/foundationdb_ci/foundationdb_build_output/dbdbdbdbdbdbdbdbdbdbdbdbdbdbdbdb/fdbserver/CommitProxyServer.actor.g.cpp:7676\nActorCallback&lt;(anonymous namespace)::DoKeyServerLocationRequestActor, 1, Void&gt;::fire(Void const&amp;) at /home/foundationdb_ci/foundationdb_build_output/dbdbdbdbdbdbdbdbdbdbdbdbdbdbdbdb/fdbserver/CommitProxyServer.actor.g.cpp:7725\n (inlined by) fire at /home/foundationdb_ci/src/oOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOo/foundationdb/flow/flow.h:1318\nvoid SAV&lt;Void&gt;::send&lt;Void&gt;(Void&amp;&amp;) at /home/foundationdb_ci/src/oOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOo/foundationdb/flow/flow.h:659\nPromise&lt;Void&gt;::~Promise() at /home/foundationdb_ci/src/oOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOo/foundationdb/flow/flow.h:927\n (inlined by) N2::PromiseTask::~PromiseTask() at /home/foundationdb_ci/src/oOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOo/foundationdb/flow/Net2.actor.cpp:1206\n (inlined by) N2::PromiseTask::operator()() at /home/foundationdb_ci/src/oOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOo/foundationdb/flow/Net2.actor.cpp:1213\n (inlined by) N2::Net2::run() at /home/foundationdb_ci/src/oOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOo/foundationdb/flow/Net2.actor.cpp:1559\nmain at /home/foundationdb_ci/src/oOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOoOo/foundationdb/fdbserver/fdbserver.actor.cpp:2141 (discriminator 5)\n\n</code></pre>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2023-10-23T11:21:46.710Z",
        "reply_count": 0,
        "reply_to_post_number": 5,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 16,
        "readers_count": 15,
        "score": 8.2,
        "yours": false,
        "topic_id": 4188,
        "topic_slug": "packetlimitexceeded-error-on-stateless-servers",
        "display_username": "Yurii Momotenko",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 15,
          "username": "markus.pilman",
          "name": "Markus Pilman",
          "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1133,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/packetlimitexceeded-error-on-stateless-servers/4188/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13407,
        "name": "Yurii Momotenko",
        "username": "redcuckoo",
        "avatar_template": "/user_avatar/forums.foundationdb.org/redcuckoo/{size}/1660_2.png",
        "created_at": "2023-10-24T01:09:28.795Z",
        "cooked": "<p>And these are client trace.</p>\n<p>Thank you for advises on retrieving logs, learned a lot for myself. Any help on the issue would be greatly appreciated:</p>\n<p>Severity 40 (can\u2019t provide addr2line unfortunately, as I couldn\u2019t find libfdb_c.so-debug):</p>\n<pre><code class=\"lang-auto\">./trace.172.18.0.5.1.1698108180.Y6Vm2T.0.1.xml:2970:&lt;Event Severity=\"40\" ErrorKind=\"Unset\" Time=\"1698108287.621518\" DateTime=\"2023-10-24T00:44:47Z\" Type=\"PacketLimitExceeded\" ID=\"0000000000000000\" FromPeer=\"&lt;IP&gt;:4500:tls\" Length=\"140500720\" ThreadID=\"11821446256232085457\" Backtrace=\"addr2line -e libfdb_c.so-debug -p -C -f -i 0xa5320c 0xa51e20 0xa5221e 0x93a8e9 0x93c627 0x93b17b 0x93cfbd 0x7c74d0 0x9e657e 0x325ef2 0x88fbcf 0x2ddb32 0x2b9089 0xffff801a2748a126\" Machine=\"172.18.0.5:1\" LogGroup=\"default\" ClientDescription=\"primary-7.1.23-11821446256232085457\" /&gt;\n</code></pre>\n<p>Severity 30 (large packet received, as you have mentioned), also SlowTask, ConnectionClosed (not posting here):</p>\n<pre><code class=\"lang-auto\">./trace.172.18.0.5.1.1698108180.Y6Vm2T.0.1.xml:1575:&lt;Event Severity=\"30\" Time=\"1698108273.700053\" DateTime=\"2023-10-24T00:44:33Z\" Type=\"LargePacketReceived\" ID=\"0000000000000000\" SuppressedEventCount=\"0\" FromPeer=\"&lt;IP&gt;:4500:tls\" Length=\"3954352\" Token=\"65037c2cf0098638\" ThreadID=\"11821446256232085457\" Machine=\"172.18.0.5:1\" LogGroup=\"default\" ClientDescription=\"primary-7.1.23-11821446256232085457\" /&gt;\n</code></pre>\n<p>Severity 30, but from other cluster, with bigger value in \u201cLength\u201d field</p>\n<pre><code class=\"lang-auto\">./trace.172.19.0.4.1.1698108158.WLW4H8.0.1.xml:20261:&lt;Event Severity=\"30\" Time=\"1698109248.706203\" DateTime=\"2023-10-24T01:00:48Z\" Type=\"LargePacketReceived\" ID=\"0000000000000000\" SuppressedEventCount=\"0\" FromPeer=\"&lt;IP&gt;:4562:tls\" Length=\"95547696\" Token=\"03ebc63ccf8e394c\" ThreadID=\"14986448794029255822\" Machine=\"172.19.0.4:1\" LogGroup=\"default\" ClientDescription=\"primary-7.1.23-14986448794029255822\" /&gt;\n</code></pre>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2023-10-24T01:09:28.795Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 18,
        "readers_count": 17,
        "score": 8.6,
        "yours": false,
        "topic_id": 4188,
        "topic_slug": "packetlimitexceeded-error-on-stateless-servers",
        "display_username": "Yurii Momotenko",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1133,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/packetlimitexceeded-error-on-stateless-servers/4188/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13411,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2023-10-24T12:19:27.114Z",
        "cooked": "<p>It seems <code>GetKeyServerLocationsReply</code> is the culprit \u2013 which is very strange\u2026 Do you use long DNS names?</p>\n<p>But generally, this doesn\u2019t make much sense to me. Maybe <a class=\"mention\" href=\"/u/jzhou\">@jzhou</a> has seen something like this before?</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2023-10-24T12:19:27.114Z",
        "reply_count": 2,
        "reply_to_post_number": 7,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 18,
        "readers_count": 17,
        "score": 13.6,
        "yours": false,
        "topic_id": 4188,
        "topic_slug": "packetlimitexceeded-error-on-stateless-servers",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 1133,
          "username": "redcuckoo",
          "name": "Yurii Momotenko",
          "avatar_template": "/user_avatar/forums.foundationdb.org/redcuckoo/{size}/1660_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/packetlimitexceeded-error-on-stateless-servers/4188/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13415,
        "name": "Jingyu Zhou",
        "username": "jzhou",
        "avatar_template": "/user_avatar/forums.foundationdb.org/jzhou/{size}/445_2.png",
        "created_at": "2023-10-25T03:30:31.742Z",
        "cooked": "<p>This is indeed weird. <code>GetKeyServerLocationsReply</code> should be almost constant size, containing storage server information for the given key. We\u2019ve never seen this before.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2023-10-25T03:30:31.742Z",
        "reply_count": 0,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 18,
        "readers_count": 17,
        "score": 3.6,
        "yours": false,
        "topic_id": 4188,
        "topic_slug": "packetlimitexceeded-error-on-stateless-servers",
        "display_username": "Jingyu Zhou",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 15,
          "username": "markus.pilman",
          "name": "Markus Pilman",
          "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": true,
        "staff": true,
        "user_id": 454,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/packetlimitexceeded-error-on-stateless-servers/4188/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13416,
        "name": "Yurii Momotenko",
        "username": "redcuckoo",
        "avatar_template": "/user_avatar/forums.foundationdb.org/redcuckoo/{size}/1660_2.png",
        "created_at": "2023-10-25T09:19:31.014Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"8\" data-topic=\"4188\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>It seems <code>GetKeyServerLocationsReply</code> is the culprit \u2013 which is very strange\u2026 Do you use long DNS names?</p>\n</blockquote>\n</aside>\n<p>As for the server names we do not use DNS names, just IPs.</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2023-10-25T09:19:31.014Z",
        "reply_count": 0,
        "reply_to_post_number": 8,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 17,
        "readers_count": 16,
        "score": 3.4,
        "yours": false,
        "topic_id": 4188,
        "topic_slug": "packetlimitexceeded-error-on-stateless-servers",
        "display_username": "Yurii Momotenko",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1133,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/packetlimitexceeded-error-on-stateless-servers/4188/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13417,
        "name": "Yurii Momotenko",
        "username": "redcuckoo",
        "avatar_template": "/user_avatar/forums.foundationdb.org/redcuckoo/{size}/1660_2.png",
        "created_at": "2023-10-25T09:29:25.511Z",
        "cooked": "<p>Is it possible that the cause is multiregion set up? Because it affects only our multiregion set ups (two out of three). The non multiregion cluster is not affected.</p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2023-10-25T09:29:25.511Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 16,
        "readers_count": 15,
        "score": 3.2,
        "yours": false,
        "topic_id": 4188,
        "topic_slug": "packetlimitexceeded-error-on-stateless-servers",
        "display_username": "Yurii Momotenko",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1133,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/packetlimitexceeded-error-on-stateless-servers/4188/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13418,
        "name": "Yurii Momotenko",
        "username": "redcuckoo",
        "avatar_template": "/user_avatar/forums.foundationdb.org/redcuckoo/{size}/1660_2.png",
        "created_at": "2023-10-25T10:27:47.185Z",
        "cooked": "<p>UPD: I have just realised, that we are running different FoundationDB version (6.3.23) and engine (ssd) on not affected cluster. In comparison to 7.1.23 with redwood on clusters with error.</p>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2023-10-25T10:27:47.185Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 16,
        "readers_count": 15,
        "score": 3.2,
        "yours": false,
        "topic_id": 4188,
        "topic_slug": "packetlimitexceeded-error-on-stateless-servers",
        "display_username": "Yurii Momotenko",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1133,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/packetlimitexceeded-error-on-stateless-servers/4188/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13422,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2023-10-25T15:25:47.770Z",
        "cooked": "<p>I don\u2019t think this is redwood related. Redwood isn\u2019t involved in the offending call. Multiregion and FDB versions are probably more likely to make a difference (though both don\u2019t make a lot of sense to me). As Jingyu said, the <code>GetKeyServerLocationsReply</code> object should be of almost constant size: it contains two keys and 2-4 storage server interfaces. I also don\u2019t think that this structure did change in the last few versions in any meaningful way.</p>\n<p>So basically I believe you would need someone with a lot of debugging experience actually looking at the system. My best guess is some kind of bug that we never reproduced in testing or production.</p>",
        "post_number": 13,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2023-10-25T15:25:47.770Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 15,
        "readers_count": 14,
        "score": 8.0,
        "yours": false,
        "topic_id": 4188,
        "topic_slug": "packetlimitexceeded-error-on-stateless-servers",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/packetlimitexceeded-error-on-stateless-servers/4188/13",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13424,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2023-10-26T08:33:11.623Z",
        "cooked": "<p><a class=\"mention\" href=\"/u/redcuckoo\">@redcuckoo</a> Do you by any chance use <code>fdb_transaction_get_estimated_range_size_bytes</code> somewhere in the client code? This would be a possibility where we could create an unbounded request. For example if you do this for the range <code>['', \\xff)</code> this could, if I read the code correctly, cause the issue you\u2019re seeing.</p>",
        "post_number": 14,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2023-10-26T08:33:11.623Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 16,
        "readers_count": 15,
        "score": 38.2,
        "yours": false,
        "topic_id": 4188,
        "topic_slug": "packetlimitexceeded-error-on-stateless-servers",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 2
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/packetlimitexceeded-error-on-stateless-servers/4188/14",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13428,
        "name": "Yurii Momotenko",
        "username": "redcuckoo",
        "avatar_template": "/user_avatar/forums.foundationdb.org/redcuckoo/{size}/1660_2.png",
        "created_at": "2023-10-27T14:06:01.895Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"14\" data-topic=\"4188\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p><a class=\"mention\" href=\"/u/redcuckoo\">@redcuckoo</a> Do you by any chance use <code>fdb_transaction_get_estimated_range_size_bytes</code> somewhere in the client code?</p>\n</blockquote>\n</aside>\n<p>That is actually the answer. Thank you so much <a class=\"mention\" href=\"/u/markus.pilman\">@markus.pilman</a> and <a class=\"mention\" href=\"/u/jzhou\">@jzhou</a> for helping to figure it out. I look at the code and found that we indeed using it in one of our services.</p>\n<p><strong>How we utilized it:</strong><br>\nWe had metrics which would give us a size for each namespace in the DB. And eventually as database grew, the range for some prefixes became too big and this error pop up.</p>\n<p>This is how it looks in the code, and that\u2019s not a good idea to do so for big db and a lot of data per namespace:</p>\n<pre><code class=\"lang-auto\">\t\t\t\tnsRange, err := fdb.PrefixRange(tuple.Tuple{int(prefix)}.FDBKey())\n\t\t\t\tif err != nil {\n\t\t\t\t\treturn nil, fmt.Errorf(\"failed make prefix range, %w\", err)\n\t\t\t\t}\n\t\t\t\tsize, err := transaction.Snapshot().GetEstimatedRangeSizeBytes(nsRange).Get()\n</code></pre>\n<p>Where <code>prefix</code> is namespace and <code>GetEstimatedRangeSizeBytes</code> is actually a function from go bindings which utilizes <code>fdb_transaction_get_estimated_range_size_bytes</code>Also as I</p>",
        "post_number": 15,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2023-10-27T14:06:01.895Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 8,
        "reads": 16,
        "readers_count": 15,
        "score": 58.2,
        "yours": false,
        "topic_id": 4188,
        "topic_slug": "packetlimitexceeded-error-on-stateless-servers",
        "display_username": "Yurii Momotenko",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1133,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/packetlimitexceeded-error-on-stateless-servers/4188/15",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13439,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2023-10-30T09:35:38.054Z",
        "cooked": "<p>I am glad we found the problem. However, I would consider this to be a FDB bug <img src=\"https://emoji.discourse-cdn.com/twitter/frowning.png?v=12\" title=\":frowning:\" class=\"emoji\" alt=\":frowning:\" loading=\"lazy\" width=\"20\" height=\"20\"> Basically you\u2019re using an API which, according to documentation, should be safe to use but can cause server crashes.</p>\n<p>We\u2019ll need to think about how to fix this. Easiest would be to return an error to the client when this happens, but chopping up a range into smaller ranges might not be a trivial task for an application. The client should be able to do this, but it might make this operation more expensive than a user might anticipate.</p>",
        "post_number": 16,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2023-10-30T09:35:38.054Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 16,
        "readers_count": 15,
        "score": 18.2,
        "yours": false,
        "topic_id": 4188,
        "topic_slug": "packetlimitexceeded-error-on-stateless-servers",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/packetlimitexceeded-error-on-stateless-servers/4188/16",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13460,
        "name": "",
        "username": "Imperatorx",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/i/d2c977/{size}.png",
        "created_at": "2023-11-09T14:29:57.285Z",
        "cooked": "<p>Is this scenario driven by a large dataset AND an unbounded range estimation or is an estimation on a sufficiently large bounded range (e.g. a directory) enough to trigger this? What is a best guess for the size when this phenomenon starts manifesting?</p>",
        "post_number": 17,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2023-11-09T14:29:57.285Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 15,
        "readers_count": 14,
        "score": 8.0,
        "yours": false,
        "topic_id": 4188,
        "topic_slug": "packetlimitexceeded-error-on-stateless-servers",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 164,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/packetlimitexceeded-error-on-stateless-servers/4188/17",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13461,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2023-11-09T14:38:37.014Z",
        "cooked": "<p>It depends on the average shard size and the size of your cluster. So this bug will trigger if the range you\u2019re trying to get an estimate for is split across too many fdb storage processes.</p>\n<p>So this situation is really not great as I don\u2019t believe the client can easily do something here:</p>\n<ol>\n<li>If the range you\u2019re trying to get an estimate is hot, it is more likely that this bug will trigger (since we\u2019ll have smaller shards).</li>\n<li>If the range you pass is very large this bug is more likely to trigger.</li>\n<li>If the cluster serving this range is very large (has many storage server), this bug is more likely to trigger.</li>\n</ol>\n<p>So I don\u2019t think you can easily estimate the above and make a good call. I think the best is to be very conservative and use this feature only for ranges you expect to be small (maybe &lt;10GB but not sure). Even if you don\u2019t see crashes, you might see higher tail latencies due to this.</p>\n<p>Hopefully we\u2019ll have a patch out soon</p>",
        "post_number": 18,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2023-11-09T14:38:37.014Z",
        "reply_count": 0,
        "reply_to_post_number": 17,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 15,
        "readers_count": 14,
        "score": 23.0,
        "yours": false,
        "topic_id": 4188,
        "topic_slug": "packetlimitexceeded-error-on-stateless-servers",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 164,
          "username": "Imperatorx",
          "name": "",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/i/d2c977/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/packetlimitexceeded-error-on-stateless-servers/4188/18",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      13392,
      13393,
      13394,
      13395,
      13396,
      13405,
      13407,
      13411,
      13415,
      13416,
      13417,
      13418,
      13422,
      13424,
      13428,
      13439,
      13460,
      13461
    ]
  },
  "timeline_lookup": [
    [
      1,
      733
    ],
    [
      6,
      729
    ],
    [
      8,
      728
    ],
    [
      12,
      727
    ],
    [
      15,
      725
    ],
    [
      16,
      723
    ],
    [
      17,
      712
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "PacketLimitExceeded error on stateless servers",
  "id": 4188,
  "title": "PacketLimitExceeded error on stateless servers",
  "posts_count": 18,
  "created_at": "2023-10-19T10:28:51.524Z",
  "views": 506,
  "reply_count": 6,
  "like_count": 7,
  "last_posted_at": "2023-11-09T14:38:37.014Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "packetlimitexceeded-error-on-stateless-servers",
  "category_id": 7,
  "word_count": 2848,
  "deleted_at": null,
  "user_id": 1133,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_4188",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 18,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 4,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "High rate of transaction retries with error code 1009 (Request for future version)",
      "id": 1715,
      "title": "High rate of transaction retries with error code 1009 (Request for future version)",
      "slug": "high-rate-of-transaction-retries-with-error-code-1009-request-for-future-version",
      "posts_count": 40,
      "reply_count": 12,
      "highest_post_number": 41,
      "image_url": "https://global.discourse-cdn.com/foundationdb/optimized/1X/e6c4d4687de20f3c4dc13128e9c17631f370788f_2_1024x181.png",
      "created_at": "2019-11-05T12:13:50.883Z",
      "last_posted_at": "2020-04-30T06:36:21.616Z",
      "bumped": true,
      "bumped_at": "2020-04-30T07:15:53.411Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 5,
      "views": 5148,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 539,
            "username": "aikoven",
            "name": "Daniel Lytkin",
            "avatar_template": "/user_avatar/forums.foundationdb.org/aikoven/{size}/535_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 260,
            "username": "jared2501",
            "name": "Jared2501",
            "avatar_template": "/user_avatar/forums.foundationdb.org/jared2501/{size}/266_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Segmentation fault error and broken cluster",
      "id": 483,
      "title": "Segmentation fault error and broken cluster",
      "slug": "segmentation-fault-error-and-broken-cluster",
      "posts_count": 17,
      "reply_count": 12,
      "highest_post_number": 17,
      "image_url": null,
      "created_at": "2018-05-31T15:34:28.123Z",
      "last_posted_at": "2018-06-11T17:31:13.656Z",
      "bumped": true,
      "bumped_at": "2018-06-11T17:31:13.656Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 4331,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 211,
            "username": "brk0v",
            "name": "Viacheslav Biriukov",
            "avatar_template": "/user_avatar/forums.foundationdb.org/brk0v/{size}/173_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 156,
            "username": "spullara",
            "name": "Sam Pullara",
            "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Troubles scaling up the cluster",
      "id": 751,
      "title": "Troubles scaling up the cluster",
      "slug": "troubles-scaling-up-the-cluster",
      "posts_count": 32,
      "reply_count": 26,
      "highest_post_number": 32,
      "image_url": null,
      "created_at": "2018-10-08T03:24:54.004Z",
      "last_posted_at": "2018-11-01T16:26:01.527Z",
      "bumped": true,
      "bumped_at": "2018-11-01T16:26:01.527Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 3747,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 311,
            "username": "ThomasJ",
            "name": "Thomas Johson",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 15,
            "username": "markus.pilman",
            "name": "Markus Pilman",
            "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 255,
            "username": "aqua",
            "name": "Matt Lohier",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/b9bd4f/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Cluster tuning cookbook",
      "id": 520,
      "title": "Cluster tuning cookbook",
      "slug": "cluster-tuning-cookbook",
      "posts_count": 27,
      "reply_count": 19,
      "highest_post_number": 27,
      "image_url": null,
      "created_at": "2018-06-19T14:35:25.802Z",
      "last_posted_at": "2019-02-01T12:38:24.733Z",
      "bumped": true,
      "bumped_at": "2019-02-01T12:38:24.733Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 12,
      "views": 8885,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 310,
            "username": "shamatar",
            "name": "Alexander",
            "avatar_template": "/user_avatar/forums.foundationdb.org/shamatar/{size}/315_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 41,
            "username": "amirouche",
            "name": "Amirouche",
            "avatar_template": "/user_avatar/forums.foundationdb.org/amirouche/{size}/1911_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 502,
            "username": "nikolas.ioannou",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/n/5daacb/{size}.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "How to scale foundation db reads",
      "id": 1108,
      "title": "How to scale foundation db reads",
      "slug": "how-to-scale-foundation-db-reads",
      "posts_count": 21,
      "reply_count": 13,
      "highest_post_number": 21,
      "image_url": null,
      "created_at": "2019-02-02T12:39:23.370Z",
      "last_posted_at": "2019-03-18T16:32:32.430Z",
      "bumped": true,
      "bumped_at": "2019-03-18T16:32:32.430Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 7,
      "views": 6504,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 504,
            "username": "preslavle",
            "name": "Preslav Le",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/p/9de0a6/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 1133,
        "username": "redcuckoo",
        "name": "Yurii Momotenko",
        "avatar_template": "/user_avatar/forums.foundationdb.org/redcuckoo/{size}/1660_2.png",
        "post_count": 9,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 15,
        "username": "markus.pilman",
        "name": "Markus Pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "post_count": 7,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 454,
        "username": "jzhou",
        "name": "Jingyu Zhou",
        "avatar_template": "/user_avatar/forums.foundationdb.org/jzhou/{size}/445_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "moderator": true,
        "trust_level": 2
      },
      {
        "id": 164,
        "username": "Imperatorx",
        "name": "",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/i/d2c977/{size}.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      }
    ],
    "created_by": {
      "id": 1133,
      "username": "redcuckoo",
      "name": "Yurii Momotenko",
      "avatar_template": "/user_avatar/forums.foundationdb.org/redcuckoo/{size}/1660_2.png"
    },
    "last_poster": {
      "id": 15,
      "username": "markus.pilman",
      "name": "Markus Pilman",
      "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png"
    },
    "links": [
      {
        "url": "https://github.com/apple/foundationdb/releases/tag/7.1.23",
        "title": "Release Release 7.1.23 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 15,
        "domain": "github.com",
        "root_domain": "github.com"
      }
    ]
  },
  "bookmarks": []
}