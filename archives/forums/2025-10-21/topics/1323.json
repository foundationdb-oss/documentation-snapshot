{
  "post_stream": {
    "posts": [
      {
        "id": 4008,
        "name": "Sakthivel",
        "username": "sakthivelpvs",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9dc877/{size}.png",
        "created_at": "2019-04-22T12:11:57.117Z",
        "cooked": "<p>The DB is available and able to retrieve data using fdbcli and the C client (client-1) written by also working for more than a week. Today\u2019 I have tried to run the same client code without any change, but it was blocked by \u201cfdb_future_block_until_ready\u201d API call. It is not returning.</p>\n<p>I\u2019m able to connect and get db data from another client (client-2), which is similar to client-1 code. client-2 will write the data first and fetch the range of data after committing. But, client-1 code will try to fetch the range of data alone.</p>\n<p>Here attaching piece of my code,</p>\n<blockquote>\n<p><span class=\"hashtag-raw\">#define</span> FDB_API_VERSION 600<br>\nFDBDatabase *db;<br>\nvoid db_check_error(fdb_error_t errorNum)<br>\n{<br>\nif(errorNum) {<br>\nfprintf(stderr, \u201cError (%d): %s\\n\u201d, errorNum, fdb_get_error(errorNum)); exit(errorNum);<br>\n}<br>\n}</p>\n<p>void db_run_network()<br>\n{<br>\ndb_check_error(fdb_run_network());<br>\n}</p>\n<p>void wait_and_check_error(FDBFuture *future)<br>\n{<br>\ndb_check_error(fdb_future_block_until_ready(future));<br>\nif(fdb_future_get_error(future))<br>\n{<br>\ndb_check_error(fdb_future_get_error(future));<br>\n}<br>\n}</p>\n<p>void db_retrieve_data()<br>\n{<br>\nconst FDBKeyValue *kvs = NULL;<br>\nint more, count, i;<br>\nint rowLimit = 0; // 0 for unlimited<br>\nint byteLimit = 0; // 0 for unlimited<br>\nint iteration = 1;<br>\nfdb_bool_t snapshot = 0;<br>\nfdb_bool_t reverse = 0;<br>\nchar *json_string = NULL;</p>\n<pre><code>    //  get value\n    FDBTransaction *tr;\n    db_check_error(fdb_database_create_transaction(db, &amp;tr));\n\n    FDBFuture* f = fdb_transaction_get_range(tr, (const uint8_t *)\"\", 0, 0, 1, (const uint8_t *)\"\\xff\", 1, 0, 1, rowLimit, byteLimit, FDB_STREAMING_MODE_WANT_ALL, iteration, snapshot, reverse);\n\n    /*Its getting blocked here and doesn't return*/\n    wait_and_check_error(f);\n\n    db_check_error(fdb_future_get_keyvalue_array(f, &amp;kvs, &amp;count, &amp;more));\n\n    if (kvs != NULL)\n    {\n            for (i = 0; i&lt;count; i++)\n            {\n                    printf(\"Key %.*s   Value %.*s\\n\\n\", kvs[i].key_length, (char *)kvs[i].key, kvs[i].value_length, (char *)kvs[i].value);\n            }\n    }\n\n    fdb_transaction_destroy(tr);\n    fdb_future_destroy(f);\n</code></pre>\n<p>}</p>\n<p>int init_db()<br>\n{<br>\n//  set up network<br>\ndb_check_error(fdb_select_api_version(FDB_API_VERSION));<br>\ndb_check_error(fdb_setup_network());</p>\n<pre><code>    // run network\n    pthread_create(&amp;network_thread, NULL, (void *)db_run_network, NULL);\n\n    //  get cluster\n    FDBFuture *clusterFuture = fdb_create_cluster(\"/etc/fdb/fdb.cluster\");\n    wait_and_check_error(clusterFuture);\n\n    //  get database\n    FDBCluster *cluster;\n    axstrm_db_check_error(fdb_future_get_cluster(clusterFuture, &amp;cluster));\n    fdb_future_destroy(clusterFuture);\n\n    FDBFuture *dbFuture = fdb_cluster_create_database(cluster, (const uint8_t *)\"DB\", 2);\n    wait_and_check_error(dbFuture);\n    db_check_error(fdb_future_get_database(dbFuture, &amp;db));\n    fdb_future_destroy(dbFuture);\n\n    //  read data\n    db_retrieve_data();\n\n    return 0;\n</code></pre>\n<p>}</p>\n</blockquote>\n<p>It will work if I remove the folder name \u201cfdb\u201d, which created when i run the fdbserver. fdb folder has the storage related files. If I remove the folder and run again it will create new \u201cfdb\u201d folder and it\u2019s working. I\u2019m facing this issue rarely and no idea how to solve this problem. I\u2019m loosing my data frequently if remove that \u201cfdb\u201d folder.</p>\n<p>I have created memory using fdbcli (\u201cconfigure new single memory\u201d). It was created a week before. Still it accessible using fdbcli.</p>\n<p>Please let me know the solution for this, how to get the DB data without losing.</p>\n<p>Thanks in advance.</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2019-04-22T12:14:56.119Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 108,
        "reads": 34,
        "readers_count": 33,
        "score": 546.8,
        "yours": false,
        "topic_id": 1323,
        "topic_slug": "indefinite-blocking-of-fdb-future-block-until-ready-even-though-db-is-available",
        "display_username": "Sakthivel",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 511,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/indefinite-blocking-of-fdb-future-block-until-ready-even-though-db-is-available/1323/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 4014,
        "name": "Christophe Chevalier",
        "username": "KrzysFR",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
        "created_at": "2019-04-23T08:09:58.987Z",
        "cooked": "<p>Are you, by any chance, running out of disk space?</p>\n<p>By default, the cluster will stop accepting transaction when the available disk space runs below a set threshold (&lt;5% remaining iirc).</p>\n<p>Removing the folder will create new space, until it is consumed again by your tests.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2019-04-23T08:09:58.987Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 30,
        "readers_count": 29,
        "score": 11.0,
        "yours": false,
        "topic_id": 1323,
        "topic_slug": "indefinite-blocking-of-fdb-future-block-until-ready-even-though-db-is-available",
        "display_username": "Christophe Chevalier",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 53,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/indefinite-blocking-of-fdb-future-block-until-ready-even-though-db-is-available/1323/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4031,
        "name": "Sakthivel",
        "username": "sakthivelpvs",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9dc877/{size}.png",
        "created_at": "2019-04-26T07:06:08.936Z",
        "cooked": "<p>Its working. There was an issue with threads and fdb_run_network thread was not running. I have solved the thread issue and now it\u2019s working fine.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2019-04-26T07:06:08.936Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 27,
        "readers_count": 26,
        "score": 5.4,
        "yours": false,
        "topic_id": 1323,
        "topic_slug": "indefinite-blocking-of-fdb-future-block-until-ready-even-though-db-is-available",
        "display_username": "Sakthivel",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 511,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/indefinite-blocking-of-fdb-future-block-until-ready-even-though-db-is-available/1323/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      4008,
      4014,
      4031
    ]
  },
  "timeline_lookup": [
    [
      1,
      2374
    ],
    [
      3,
      2371
    ]
  ],
  "suggested_topics": [],
  "tags": [
    "bindings"
  ],
  "tags_descriptions": {},
  "fancy_title": "Indefinite blocking of fdb_future_block_until_ready even though DB is available",
  "id": 1323,
  "title": "Indefinite blocking of fdb_future_block_until_ready even though DB is available",
  "posts_count": 3,
  "created_at": "2019-04-22T12:11:56.933Z",
  "views": 956,
  "reply_count": 0,
  "like_count": 0,
  "last_posted_at": "2019-04-26T07:06:08.936Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "indefinite-blocking-of-fdb-future-block-until-ready-even-though-db-is-available",
  "category_id": 7,
  "word_count": 497,
  "deleted_at": null,
  "user_id": 511,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_1323",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 3,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 2,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "FoundationDB fdb_future_block_until_ready return before data is ready",
      "id": 2433,
      "title": "FoundationDB fdb_future_block_until_ready return before data is ready",
      "slug": "foundationdb-fdb-future-block-until-ready-return-before-data-is-ready",
      "posts_count": 5,
      "reply_count": 1,
      "highest_post_number": 5,
      "image_url": null,
      "created_at": "2020-11-10T13:27:14.993Z",
      "last_posted_at": "2020-11-11T08:23:12.575Z",
      "bumped": true,
      "bumped_at": "2020-11-11T08:23:12.575Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 555,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 851,
            "username": "dandanogni",
            "name": "dandan ogni",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/bbce88/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 14,
            "username": "andrew.noyes",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Why is `fdb_future_block_until_ready` blocking forever?",
      "id": 3850,
      "title": "Why is `fdb_future_block_until_ready` blocking forever?",
      "slug": "why-is-fdb-future-block-until-ready-blocking-forever",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2023-03-11T06:29:24.906Z",
      "last_posted_at": "2023-03-11T06:47:40.350Z",
      "bumped": true,
      "bumped_at": "2023-03-11T06:47:40.350Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 361,
      "category_id": 17,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest single",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 1225,
            "username": "roj",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/roj/{size}/1536_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Fdb_future_block_until_ready timeout",
      "id": 2698,
      "title": "Fdb_future_block_until_ready timeout",
      "slug": "fdb-future-block-until-ready-timeout",
      "posts_count": 1,
      "reply_count": 0,
      "highest_post_number": 1,
      "image_url": null,
      "created_at": "2021-05-13T10:33:42.463Z",
      "last_posted_at": "2021-05-13T10:33:42.529Z",
      "bumped": true,
      "bumped_at": "2021-05-13T10:33:42.529Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 331,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest single",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 851,
            "username": "dandanogni",
            "name": "dandan ogni",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/bbce88/{size}.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Fork and indefinite blocking of fdb_future_block_until_ready",
      "id": 560,
      "title": "Fork and indefinite blocking of fdb_future_block_until_ready",
      "slug": "fork-and-indefinite-blocking-of-fdb-future-block-until-ready",
      "posts_count": 3,
      "reply_count": 1,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2018-07-11T17:59:19.588Z",
      "last_posted_at": "2018-07-12T16:10:30.664Z",
      "bumped": true,
      "bumped_at": "2018-07-12T16:10:30.664Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 868,
      "category_id": 5,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 208,
            "username": "cloudspeech",
            "name": "Cloudspeech",
            "avatar_template": "/user_avatar/forums.foundationdb.org/cloudspeech/{size}/330_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Mac version of FoundationDB seems unhealthy",
      "id": 624,
      "title": "Mac version of FoundationDB seems unhealthy",
      "slug": "mac-version-of-foundationdb-seems-unhealthy",
      "posts_count": 5,
      "reply_count": 2,
      "highest_post_number": 5,
      "image_url": null,
      "created_at": "2018-08-09T01:54:43.781Z",
      "last_posted_at": "2018-08-09T14:27:32.729Z",
      "bumped": true,
      "bumped_at": "2018-08-09T14:27:32.729Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1806,
      "category_id": 5,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 349,
            "username": "knaversr",
            "name": "rob rodgers",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/k/82dd89/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 511,
        "username": "sakthivelpvs",
        "name": "Sakthivel",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9dc877/{size}.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 53,
        "username": "KrzysFR",
        "name": "Christophe Chevalier",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      }
    ],
    "created_by": {
      "id": 511,
      "username": "sakthivelpvs",
      "name": "Sakthivel",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9dc877/{size}.png"
    },
    "last_poster": {
      "id": 511,
      "username": "sakthivelpvs",
      "name": "Sakthivel",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9dc877/{size}.png"
    }
  },
  "bookmarks": []
}