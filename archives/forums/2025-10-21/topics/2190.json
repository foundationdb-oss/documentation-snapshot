{
  "post_stream": {
    "posts": [
      {
        "id": 7397,
        "name": "Mike Rhodes",
        "username": "mikerhodes",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mikerhodes/{size}/480_2.png",
        "created_at": "2020-06-18T16:06:24.839Z",
        "cooked": "<p>A slightly random question here. After deleting a key range within FDB, I\u2019d like to understand how long the data remains on disk for. By my understanding, the SSD engine is a pretty vanilla SQLite database.</p>\n<p>By default, from what I can see from the SQLite documentation, SQLite will leave data on disk until it reuses the pages. Related to this, SQLite has the secure_delete pragma to overwrite deleted data with zeros, <a href=\"https://www.sqlite.org/pragma.html#pragma_secure_delete\" rel=\"nofollow noopener\">https://www.sqlite.org/pragma.html#pragma_secure_delete</a>, and it also states that one could VACUUM to gain similar benefits in terms of clearing old data.</p>\n<p>Looking through the FoundationDB code at <a href=\"https://github.com/apple/foundationdb/blob/master/fdbserver/KeyValueStoreSQLite.actor.cpp\" rel=\"nofollow noopener\">https://github.com/apple/foundationdb/blob/master/fdbserver/KeyValueStoreSQLite.actor.cpp</a>, what I see is:</p>\n<ul>\n<li>I can\u2019t see that <code>secure_delete</code> PRAGMA is set.</li>\n<li>I don\u2019t think there is a VACUUM after each write.</li>\n</ul>\n<p>This seems like a pretty sensible default way to work, frankly.</p>\n<p>I can see a lot of code related to \u201cspring cleaning\u201d in <code>KeyValueStoreSQLite.actor.cpp</code>, however, which I can\u2019t really follow sadly. Perhaps this is key here as it appears to be concerned with periodic VACUUMing of the database. The <code>auto_vacuum=2</code> set on creating database files seems to mostly be about enabling a more efficient incremental vacuum.</p>\n<p>So my basic question is whether I\u2019m reading the code right about the behaviour that FoundationDB is setting up on its files. Also, what does the spring clean code do, and how do the various knobs mentioned in the code affect it. Broadly, there are two main scenarios I am considering:</p>\n<ul>\n<li>Where we delete a key range but never touch the key ranges stored in that SQLite file again (modulo rebalance operations I guess).</li>\n<li>Where we are regularly doing writes to key ranges that end up in that SQLite file.</li>\n</ul>\n<p>Or am I totally barking up the wrong tree here <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=9\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"> Anyway, thanks for making your way through the post and any light you can shed here.</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-06-18T16:20:25.507Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 328,
        "reads": 57,
        "readers_count": 56,
        "score": 1641.4,
        "yours": false,
        "topic_id": 2190,
        "topic_slug": "data-retention-after-deleting-a-key-range-using-ssd-engine",
        "display_username": "Mike Rhodes",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 4,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/blob/master/fdbserver/KeyValueStoreSQLite.actor.cpp",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/KeyValueStoreSQLite.actor.cpp at master \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 1
          },
          {
            "url": "https://www.sqlite.org/pragma.html#pragma_secure_delete",
            "internal": false,
            "reflection": false,
            "title": "Pragma statements supported by SQLite",
            "clicks": 1
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 481,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-retention-after-deleting-a-key-range-using-ssd-engine/2190/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 7399,
        "name": "",
        "username": "tuk",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/b5ac83/{size}.png",
        "created_at": "2020-06-18T16:51:05.750Z",
        "cooked": "<p>Few of your queries are answered in the below discussions</p>\n<ul>\n<li><a href=\"https://forums.foundationdb.org/t/shards-are-not-splitted-into-smaller-ones/815\" class=\"inline-onebox\">Shards are not splitted into smaller ones</a></li>\n<li><a href=\"https://forums.foundationdb.org/t/used-disk-space-dramatically-increases-while-sum-of-key-value-sizes-is-constant/644/7\" class=\"inline-onebox\">Used disk space dramatically increases while sum of key-value sizes is constant</a></li>\n</ul>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-06-18T16:51:05.750Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 55,
        "readers_count": 54,
        "score": 31.0,
        "yours": false,
        "topic_id": 2190,
        "topic_slug": "data-retention-after-deleting-a-key-range-using-ssd-engine",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/used-disk-space-dramatically-increases-while-sum-of-key-value-sizes-is-constant/644/7",
            "internal": true,
            "reflection": false,
            "title": "Used disk space dramatically increases while sum of key-value sizes is constant",
            "clicks": 33
          },
          {
            "url": "https://forums.foundationdb.org/t/shards-are-not-splitted-into-smaller-ones/815",
            "internal": true,
            "reflection": false,
            "title": "Shards are not splitted into smaller ones",
            "clicks": 12
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 714,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-retention-after-deleting-a-key-range-using-ssd-engine/2190/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7402,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2020-06-18T20:33:37.816Z",
        "cooked": "<p>Auto vacuuming enables incrementally relocating free pages to the end of the page file so the space can be truncated to exclude those pages.  In contrast, a full vacuum cycle rebuilds the btree to use a minimal space footprint, which effectively rewrites all pages so no previously unreferenced page content will be included in the result.</p>\n<p>If you are worried about forensic recovery of cleared KV pairs, then I think at a minimum you would need to set the <code>secure_delete</code> pragma.  Assuming your filesystem zeroes blocks on disk that have been truncated off of a file, vacuuming off wholly unused pages should be wiped clean, however range clears also likely start or end in the middle of a page and only clear part of the page.  In such pages, the deleted record bytes will still be present but unreferenced until a new record uses the space, so without further modification the removed bytes will still exist for forensic discovery.</p>\n<p>I have to point out, however, that our SQLite source is actually not vanilla, it\u2019s been modified a good bit, and it is possible that in our modifications we weakened or broke the <code>secure_delete</code> contract.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-06-18T20:33:37.816Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 55,
        "readers_count": 54,
        "score": 46.0,
        "yours": false,
        "topic_id": 2190,
        "topic_slug": "data-retention-after-deleting-a-key-range-using-ssd-engine",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-retention-after-deleting-a-key-range-using-ssd-engine/2190/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7414,
        "name": "Mike Rhodes",
        "username": "mikerhodes",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mikerhodes/{size}/480_2.png",
        "created_at": "2020-06-19T13:22:17.920Z",
        "cooked": "<p><img src=\"https://emoji.discourse-cdn.com/twitter/ok_hand.png?v=9\" title=\":ok_hand:\" class=\"emoji\" alt=\":ok_hand:\"> Thanks for the details, I think I have enough for now. Essentially, yes, the question was around how long relatively easy to retrieve traces of data remain on disk.</p>\n<p>I guess the obvious question I missed: is the new Redwood engine far enough along that it is reasonable to ask how it handles data deletion and length of time deleted items remain easily recoverable?</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-06-19T13:22:17.920Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 54,
        "readers_count": 53,
        "score": 25.8,
        "yours": false,
        "topic_id": 2190,
        "topic_slug": "data-retention-after-deleting-a-key-range-using-ssd-engine",
        "display_username": "Mike Rhodes",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 481,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-retention-after-deleting-a-key-range-using-ssd-engine/2190/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7417,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2020-06-19T21:19:46.393Z",
        "cooked": "<p>Currently in Redwood, deleted data or parts of it could remain recoverable indefinitely because</p>\n<ul>\n<li>Free pages within a Redwood file are not returned to the filesystem due to the additional IO necessary to maintain the required metadata to do this.</li>\n<li>Within a page, deleted records are initially marked as deleted with a single bit changes, though a later page contents rebuild (to reclaim freed bytes or for other reasons) will remove the deleted record bytes.</li>\n<li>Since pages in Redwood are never modified in-place, multiple copies of a page with deleted record bytes can exist in pages retained as part of the retained version interval or in pages that are in the free list.</li>\n<li>Redwood is a B+Tree (SQLite is a B-Tree) so records above the leaf level are not user KV pairs but rather minimal length boundary keys used for traversal decisions.  This means that given the user KV pairs<br>\n<code>Aaaa -&gt; 1342     Bbbb -&gt; 213     Cccc -&gt; 12344</code><br>\nthen the string <code>B</code> could be used as a minimal boundary key, it would exist in an internal page, and deleting the record with a key of <code>Bbbb</code> would not remove the boundary key so part of the deleted key is still recoverable.  This is a simple example but it can also happen with longer shared prefixes that cross page boundaries, where after removing all records with a certain shared prefix that shared prefix plus one byte is still present as a boundary key in an internal BTree page.</li>\n</ul>\n<p>It would be possible to add options to always rebuild page contents when a record is being deleted, and to explicitly write all zeroes to freed pages.  However, this would not solve the boundary key \u201cleak\u201d describe above.</p>\n<p>I also want to point out that overwriting a block on an SSD would not normally overwrite the same physical storage that held the old data, nor would it erase the old copy until some unspecified point in the future which is drive logic depending.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-06-19T21:19:46.393Z",
        "reply_count": 2,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 55,
        "readers_count": 54,
        "score": 46.0,
        "yours": false,
        "topic_id": 2190,
        "topic_slug": "data-retention-after-deleting-a-key-range-using-ssd-engine",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 481,
          "username": "mikerhodes",
          "name": "Mike Rhodes",
          "avatar_template": "/user_avatar/forums.foundationdb.org/mikerhodes/{size}/480_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-retention-after-deleting-a-key-range-using-ssd-engine/2190/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7418,
        "name": "gaurav",
        "username": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "created_at": "2020-06-20T03:51:47.885Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"SteavedHams\" data-post=\"5\" data-topic=\"2190\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/steavedhams/48/18_2.png\" class=\"avatar\"> SteavedHams:</div>\n<blockquote>\n<p>Free pages within a Redwood file are not returned to the filesystem due to the additional IO necessary to maintain the required metadata to do this.</p>\n</blockquote>\n</aside>\n<p>Is this a fixed design constraint for Redwood, or something that would be relaxed later on?<br>\nThere are a lot of real scenarios we have come across where extra data got created due to unforeseen situations/bugs, which gets cleaned up later.</p>\n<p>Even if there was a manual compaction command/tool, it might be useful.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-06-20T03:53:15.355Z",
        "reply_count": 1,
        "reply_to_post_number": 5,
        "quote_count": 1,
        "incoming_link_count": 4,
        "reads": 50,
        "readers_count": 49,
        "score": 35.0,
        "yours": false,
        "topic_id": 2190,
        "topic_slug": "data-retention-after-deleting-a-key-range-using-ssd-engine",
        "display_username": "gaurav",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/is-it-possible-to-enable-perpetual-storage-wiggle-at-the-shard-level-instead-of-the-process-level/4760",
            "internal": true,
            "reflection": true,
            "title": "Is it possible to enable `perpetual_storage_wiggle` at the 'shard' level instead of the 'process' level?",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 166,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-retention-after-deleting-a-key-range-using-ssd-engine/2190/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7419,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2020-06-20T05:20:26.132Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"gaurav\" data-post=\"6\" data-topic=\"2190\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/g/b487fb/48.png\" class=\"avatar\"> gaurav:</div>\n<blockquote>\n<p>Is this a fixed design constraint for Redwood, or something that would be relaxed later on?<br>\nThere are a lot of real scenarios we have come across where extra data got created due to unforeseen situations/bugs, which gets cleaned up later.</p>\n<p>Even if there was a manual compaction command/tool, it might be useful.</p>\n</blockquote>\n</aside>\n<p>There are several ways that file shrinking support could be added, with various performance tradeoffs, and likely an on-disk format change.  A format change just means a migration to the new storage engine format must be done, but that is a process which already has to work smoothly so that current production deployments can migrate to Redwood without service interruption.</p>\n<p>For a manual compaction, such as after a temporary space usage increase, there is actually already a way to make this happen:  For each host\u2019s storage processes (or for smaller host count clusters then for each storage process), exclude the storage process(es), wait for data distribution to move data away from the host, then re-include the storage process(es).  This will effectively rebuild compact BTree\u2019s of all of the data.</p>\n<p>What I\u2019ve just described is essentially a storage engine migration from one storage engine to <em>the same</em> storage engine, as the steps given is how storage engine migration already works.  It\u2019s just that currently the actual storage engine migration logic does not let you do this.  It will be supported in some form, possibly as noted here: <a href=\"https://github.com/apple/foundationdb/issues/2640\" class=\"inline-onebox\">Support for storage engine parameters in configuration string \u00b7 Issue #2640 \u00b7 apple/foundationdb \u00b7 GitHub</a> or some other way.</p>\n<p>A compaction tool is possible but not trivial as it must work on a live storage engine.  It is possible we would create one if there is a strong enough need for it.  The storage engine self migration method is not particularly IO or network efficient compared to a custom tool, but on the other hand it is essentially already written and its performance impact is known, which is essentially the same as a maintenance-driven host/process exclusion.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-06-20T05:20:26.132Z",
        "reply_count": 1,
        "reply_to_post_number": 6,
        "quote_count": 1,
        "incoming_link_count": 8,
        "reads": 48,
        "readers_count": 47,
        "score": 69.6,
        "yours": false,
        "topic_id": 2190,
        "topic_slug": "data-retention-after-deleting-a-key-range-using-ssd-engine",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/issues/2640",
            "internal": false,
            "reflection": false,
            "title": "Support for storage engine parameters in configuration string \u00b7 Issue #2640 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 11
          }
        ],
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-retention-after-deleting-a-key-range-using-ssd-engine/2190/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7420,
        "name": "gaurav",
        "username": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "created_at": "2020-06-20T11:49:58.790Z",
        "cooked": "<p>Thanks for the detailed reply.</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-06-20T11:49:58.790Z",
        "reply_count": 0,
        "reply_to_post_number": 7,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 46,
        "readers_count": 45,
        "score": 29.2,
        "yours": false,
        "topic_id": 2190,
        "topic_slug": "data-retention-after-deleting-a-key-range-using-ssd-engine",
        "display_username": "gaurav",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 7,
          "username": "SteavedHams",
          "name": "Steve Atherton",
          "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 166,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-retention-after-deleting-a-key-range-using-ssd-engine/2190/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7432,
        "name": "Mike Rhodes",
        "username": "mikerhodes",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mikerhodes/{size}/480_2.png",
        "created_at": "2020-06-22T12:07:30.047Z",
        "cooked": "<p>Fantastic reply; thank you for the detail.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-06-22T12:07:30.047Z",
        "reply_count": 0,
        "reply_to_post_number": 5,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 46,
        "readers_count": 45,
        "score": 19.2,
        "yours": false,
        "topic_id": 2190,
        "topic_slug": "data-retention-after-deleting-a-key-range-using-ssd-engine",
        "display_username": "Mike Rhodes",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 7,
          "username": "SteavedHams",
          "name": "Steve Atherton",
          "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 481,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/data-retention-after-deleting-a-key-range-using-ssd-engine/2190/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      7397,
      7399,
      7402,
      7414,
      7417,
      7418,
      7419,
      7420,
      7432
    ]
  },
  "timeline_lookup": [
    [
      1,
      1951
    ],
    [
      4,
      1950
    ],
    [
      8,
      1949
    ],
    [
      9,
      1947
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Data retention after deleting a key range using SSD engine",
  "id": 2190,
  "title": "Data retention after deleting a key range using SSD engine",
  "posts_count": 9,
  "created_at": "2020-06-18T16:06:24.766Z",
  "views": 1379,
  "reply_count": 5,
  "like_count": 4,
  "last_posted_at": "2020-06-22T12:07:30.047Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "data-retention-after-deleting-a-key-range-using-ssd-engine",
  "category_id": 7,
  "word_count": 1406,
  "deleted_at": null,
  "user_id": 481,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_2190",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 9,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 4,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Shards are not splitted into smaller ones",
      "id": 815,
      "title": "Shards are not splitted into smaller ones",
      "slug": "shards-are-not-splitted-into-smaller-ones",
      "posts_count": 13,
      "reply_count": 9,
      "highest_post_number": 13,
      "image_url": null,
      "created_at": "2018-10-29T10:43:52.561Z",
      "last_posted_at": "2021-08-16T17:39:23.884Z",
      "bumped": true,
      "bumped_at": "2021-08-16T17:39:23.884Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 4,
      "views": 2641,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 296,
            "username": "theos",
            "name": "Daniil Gitelson",
            "avatar_template": "/user_avatar/forums.foundationdb.org/theos/{size}/282_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 156,
            "username": "spullara",
            "name": "Sam Pullara",
            "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 417,
            "username": "lihtnes",
            "name": "Senthil Ramamoorthy",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/848f3c/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "FoundationDB cluster performance issue - Periods of high disk I/O and sustained high latency",
      "id": 2184,
      "title": "FoundationDB cluster performance issue - Periods of high disk I/O and sustained high latency",
      "slug": "foundationdb-cluster-performance-issue-periods-of-high-disk-i-o-and-sustained-high-latency",
      "posts_count": 22,
      "reply_count": 17,
      "highest_post_number": 22,
      "image_url": null,
      "created_at": "2020-06-15T15:45:43.650Z",
      "last_posted_at": "2020-07-06T06:50:56.594Z",
      "bumped": true,
      "bumped_at": "2020-07-06T06:50:56.594Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 2571,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 779,
            "username": "imtdk",
            "name": null,
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/i/22d042/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 747,
            "username": "ashishgupta",
            "name": "Ashish Gupta",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/c67d28/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        }
      ]
    },
    {
      "fancy_title": "Cannot clear all keys by &ldquo;clearrange \\x00 \\xff&rdquo;",
      "id": 1578,
      "title": "Cannot clear all keys by \"clearrange \\x00 \\xff\"",
      "slug": "cannot-clear-all-keys-by-clearrange-x00-xff",
      "posts_count": 16,
      "reply_count": 10,
      "highest_post_number": 18,
      "image_url": null,
      "created_at": "2019-08-10T05:44:48.247Z",
      "last_posted_at": "2022-07-03T22:20:16.158Z",
      "bumped": true,
      "bumped_at": "2022-07-03T22:20:16.158Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 2970,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 629,
            "username": "Sraw",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/a88e57/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 15,
            "username": "markus.pilman",
            "name": "Markus Pilman",
            "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Disk space used not going down after clearrange",
      "id": 2153,
      "title": "Disk space used not going down after clearrange",
      "slug": "disk-space-used-not-going-down-after-clearrange",
      "posts_count": 7,
      "reply_count": 2,
      "highest_post_number": 7,
      "image_url": null,
      "created_at": "2020-06-02T15:35:25.369Z",
      "last_posted_at": "2020-06-05T17:59:33.994Z",
      "bumped": true,
      "bumped_at": "2020-06-05T17:59:33.994Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 1370,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 773,
            "username": "surya",
            "name": "Surya Teja Gora",
            "avatar_template": "/user_avatar/forums.foundationdb.org/surya/{size}/871_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 714,
            "username": "tuk",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/b5ac83/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Background disk IOPS after large clearrange",
      "id": 1941,
      "title": "Background disk IOPS after large clearrange",
      "slug": "background-disk-iops-after-large-clearrange",
      "posts_count": 6,
      "reply_count": 2,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2020-02-12T09:32:03.789Z",
      "last_posted_at": "2020-02-13T10:26:19.193Z",
      "bumped": true,
      "bumped_at": "2020-02-13T10:26:19.193Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1539,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 724,
            "username": "larshagen",
            "name": "Lars Hagen",
            "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 7,
        "username": "SteavedHams",
        "name": "Steve Atherton",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 481,
        "username": "mikerhodes",
        "name": "Mike Rhodes",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mikerhodes/{size}/480_2.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 166,
        "username": "gaurav",
        "name": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 3
      },
      {
        "id": 714,
        "username": "tuk",
        "name": "",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/b5ac83/{size}.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      }
    ],
    "created_by": {
      "id": 481,
      "username": "mikerhodes",
      "name": "Mike Rhodes",
      "avatar_template": "/user_avatar/forums.foundationdb.org/mikerhodes/{size}/480_2.png"
    },
    "last_poster": {
      "id": 481,
      "username": "mikerhodes",
      "name": "Mike Rhodes",
      "avatar_template": "/user_avatar/forums.foundationdb.org/mikerhodes/{size}/480_2.png"
    },
    "links": [
      {
        "url": "https://forums.foundationdb.org/t/used-disk-space-dramatically-increases-while-sum-of-key-value-sizes-is-constant/644/7",
        "title": "Used disk space dramatically increases while sum of key-value sizes is constant",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 33,
        "user_id": 714,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://forums.foundationdb.org/t/shards-are-not-splitted-into-smaller-ones/815",
        "title": "Shards are not splitted into smaller ones",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 12,
        "user_id": 714,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://github.com/apple/foundationdb/issues/2640",
        "title": "Support for storage engine parameters in configuration string \u00b7 Issue #2640 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 11,
        "user_id": 7,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/master/fdbserver/KeyValueStoreSQLite.actor.cpp",
        "title": "foundationdb/KeyValueStoreSQLite.actor.cpp at master \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 481,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://www.sqlite.org/pragma.html#pragma_secure_delete",
        "title": "Pragma statements supported by SQLite",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 481,
        "domain": "www.sqlite.org",
        "root_domain": "sqlite.org"
      }
    ]
  },
  "bookmarks": []
}