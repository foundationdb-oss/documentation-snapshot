{
  "post_stream": {
    "posts": [
      {
        "id": 13849,
        "name": "Yiyuan Liu",
        "username": "yiyuanliu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/yiyuanliu/{size}/1593_2.png",
        "created_at": "2024-03-19T10:49:42.238Z",
        "cooked": "<p>Recently, we have observed high GRV proxy latency in one of our clusters. Average GRV proxy latency is about 300us, and maximum latency reaching 50ms. After checking the logs of the GRV proxy servers, we found the following types of warning messages:</p>\n<ul>\n<li>LargePacketSent/LargePacketReceived approximately once per second</li>\n<li>GrvProxyRateLeaseExpired once every 5 seconds</li>\n</ul>\n<p>Our FoundationDB version is <code>7.1.31</code>. The code stack corresponding to LargePacketSent is as follows:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://global.discourse-cdn.com/foundationdb/original/2X/6/6262ccbea5666488c3d47c706e11ae52fdd1f060.jpeg\" data-download-href=\"/uploads/short-url/e2mt7oksTEW5LaCG3Tm2lPnc1qw.jpeg?dl=1\" title=\"20240319-184503\" rel=\"noopener nofollow ugc\"><img src=\"https://global.discourse-cdn.com/foundationdb/optimized/2X/6/6262ccbea5666488c3d47c706e11ae52fdd1f060_2_690x422.jpeg\" alt=\"20240319-184503\" data-base62-sha1=\"e2mt7oksTEW5LaCG3Tm2lPnc1qw\" width=\"690\" height=\"422\" srcset=\"https://global.discourse-cdn.com/foundationdb/optimized/2X/6/6262ccbea5666488c3d47c706e11ae52fdd1f060_2_690x422.jpeg, https://global.discourse-cdn.com/foundationdb/optimized/2X/6/6262ccbea5666488c3d47c706e11ae52fdd1f060_2_1035x633.jpeg 1.5x, https://global.discourse-cdn.com/foundationdb/optimized/2X/6/6262ccbea5666488c3d47c706e11ae52fdd1f060_2_1380x844.jpeg 2x\" data-dominant-color=\"323333\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">20240319-184503</span><span class=\"informations\">1391\u00d7852 251 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Does this mean that there is an issue with our network, and how could we further troubleshoot this problem? We have encountered high GRV proxy latency before, and at that time, we chose to restart all servers, after which the latency returned to normal. However, after running for a while, the latency of the GRV proxy gradually increased again.</p>\n<p>Thanks!</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2024-03-19T10:49:42.238Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 47,
        "reads": 26,
        "readers_count": 25,
        "score": 240.2,
        "yours": false,
        "topic_id": 4390,
        "topic_slug": "high-grv-proxy-latency",
        "display_username": "Yiyuan Liu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://global.discourse-cdn.com/foundationdb/original/2X/6/6262ccbea5666488c3d47c706e11ae52fdd1f060.jpeg",
            "internal": false,
            "reflection": false,
            "title": "6262ccbea5666488c3d47c706e11ae52fdd1f060.jpeg",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1263,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/high-grv-proxy-latency/4390/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 13850,
        "name": "Yiyuan Liu",
        "username": "yiyuanliu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/yiyuanliu/{size}/1593_2.png",
        "created_at": "2024-03-19T11:31:09.025Z",
        "cooked": "<p>Noticed that there is a bug fix related to GRV proxy latency in version 7.1.34 <a href=\"https://github.com/apple/foundationdb/pull/10627\" rel=\"noopener nofollow ugc\">(10627)</a>. Maybe this can solve our problem. <img src=\"https://emoji.discourse-cdn.com/twitter/face_with_monocle.png?v=12\" title=\":face_with_monocle:\" class=\"emoji\" alt=\":face_with_monocle:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2024-03-19T11:31:09.025Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 26,
        "readers_count": 25,
        "score": 10.2,
        "yours": false,
        "topic_id": 4390,
        "topic_slug": "high-grv-proxy-latency",
        "display_username": "Yiyuan Liu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/pull/10627",
            "internal": false,
            "reflection": false,
            "title": "Remove SS entries from RateKeeper once it is down by hfu94 \u00b7 Pull Request #10627 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 16
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1263,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/high-grv-proxy-latency/4390/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13863,
        "name": "Jingyu Zhou",
        "username": "jzhou",
        "avatar_template": "/user_avatar/forums.foundationdb.org/jzhou/{size}/445_2.png",
        "created_at": "2024-03-21T22:09:12.963Z",
        "cooked": "<p>Yes. That almost certainly will fix your problem. The large packet you saw is probably the response from Ratekeeper, which contains too many staled storage servers. As a result, GRV proxy spent more time processing the packet, causing high GRV latency.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2024-03-21T22:09:12.963Z",
        "reply_count": 0,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 22,
        "readers_count": 21,
        "score": 19.4,
        "yours": false,
        "topic_id": 4390,
        "topic_slug": "high-grv-proxy-latency",
        "display_username": "Jingyu Zhou",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 1263,
          "username": "yiyuanliu",
          "name": "Yiyuan Liu",
          "avatar_template": "/user_avatar/forums.foundationdb.org/yiyuanliu/{size}/1593_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": true,
        "admin": true,
        "staff": true,
        "user_id": 454,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/high-grv-proxy-latency/4390/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      13849,
      13850,
      13863
    ]
  },
  "timeline_lookup": [
    [
      1,
      581
    ],
    [
      3,
      579
    ]
  ],
  "suggested_topics": [],
  "tags": [
    "performance"
  ],
  "tags_descriptions": {},
  "fancy_title": "High GRV proxy latency",
  "id": 4390,
  "title": "High GRV proxy latency",
  "posts_count": 3,
  "created_at": "2024-03-19T10:49:42.166Z",
  "views": 211,
  "reply_count": 1,
  "like_count": 1,
  "last_posted_at": "2024-03-21T22:09:12.963Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "high-grv-proxy-latency",
  "category_id": 7,
  "word_count": 208,
  "deleted_at": null,
  "user_id": 1263,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": "https://global.discourse-cdn.com/foundationdb/optimized/2X/6/6262ccbea5666488c3d47c706e11ae52fdd1f060_2_1024x627.jpeg",
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_4390",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 3,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 2,
  "show_read_indicator": false,
  "thumbnails": [
    {
      "max_width": null,
      "max_height": null,
      "width": 1391,
      "height": 852,
      "url": "https://global.discourse-cdn.com/foundationdb/original/2X/6/6262ccbea5666488c3d47c706e11ae52fdd1f060.jpeg"
    },
    {
      "max_width": 1024,
      "max_height": 1024,
      "width": 1024,
      "height": 627,
      "url": "https://global.discourse-cdn.com/foundationdb/optimized/2X/6/6262ccbea5666488c3d47c706e11ae52fdd1f060_2_1024x627.jpeg"
    }
  ],
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "How to scale foundation db reads",
      "id": 1108,
      "title": "How to scale foundation db reads",
      "slug": "how-to-scale-foundation-db-reads",
      "posts_count": 21,
      "reply_count": 13,
      "highest_post_number": 21,
      "image_url": null,
      "created_at": "2019-02-02T12:39:23.370Z",
      "last_posted_at": "2019-03-18T16:32:32.430Z",
      "bumped": true,
      "bumped_at": "2019-03-18T16:32:32.430Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 7,
      "views": 6504,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 504,
            "username": "preslavle",
            "name": "Preslav Le",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/p/9de0a6/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "GRV throughput saturates at 400K per second",
      "id": 2550,
      "title": "GRV throughput saturates at 400K per second",
      "slug": "grv-throughput-saturates-at-400k-per-second",
      "posts_count": 1,
      "reply_count": 0,
      "highest_post_number": 1,
      "image_url": null,
      "created_at": "2021-02-10T04:01:56.353Z",
      "last_posted_at": "2021-02-10T04:01:56.446Z",
      "bumped": true,
      "bumped_at": "2021-02-10T04:01:56.446Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 3,
      "views": 968,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest single",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 645,
            "username": "subramaniamr",
            "name": "Subramaniam R",
            "avatar_template": "/user_avatar/forums.foundationdb.org/subramaniamr/{size}/658_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "FoundationDB Summit 2019: Building a Performant Configuration Store Layer",
      "id": 1762,
      "title": "FoundationDB Summit 2019: Building a Performant Configuration Store Layer",
      "slug": "foundationdb-summit-2019-building-a-performant-configuration-store-layer",
      "posts_count": 4,
      "reply_count": 2,
      "highest_post_number": 4,
      "image_url": null,
      "created_at": "2019-11-18T22:28:38.146Z",
      "last_posted_at": "2019-11-20T14:21:21.864Z",
      "bumped": true,
      "bumped_at": "2019-11-20T14:21:21.864Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 758,
      "category_id": 10,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        }
      ]
    },
    {
      "fancy_title": "High rate of transaction retries with error code 1009 (Request for future version)",
      "id": 1715,
      "title": "High rate of transaction retries with error code 1009 (Request for future version)",
      "slug": "high-rate-of-transaction-retries-with-error-code-1009-request-for-future-version",
      "posts_count": 40,
      "reply_count": 12,
      "highest_post_number": 41,
      "image_url": "https://global.discourse-cdn.com/foundationdb/optimized/1X/e6c4d4687de20f3c4dc13128e9c17631f370788f_2_1024x181.png",
      "created_at": "2019-11-05T12:13:50.883Z",
      "last_posted_at": "2020-04-30T06:36:21.616Z",
      "bumped": true,
      "bumped_at": "2020-04-30T07:15:53.411Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 5,
      "views": 5148,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 539,
            "username": "aikoven",
            "name": "Daniel Lytkin",
            "avatar_template": "/user_avatar/forums.foundationdb.org/aikoven/{size}/535_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 260,
            "username": "jared2501",
            "name": "Jared2501",
            "avatar_template": "/user_avatar/forums.foundationdb.org/jared2501/{size}/266_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Proxies and packet loss/retransmits",
      "id": 1511,
      "title": "Proxies and packet loss/retransmits",
      "slug": "proxies-and-packet-loss-retransmits",
      "posts_count": 3,
      "reply_count": 1,
      "highest_post_number": 3,
      "image_url": "https://global.discourse-cdn.com/foundationdb/optimized/1X/f8d09cdaf53a5d47bcb4afb77a2bd3bbde3fc6f3_2_1024x329.png",
      "created_at": "2019-07-09T04:23:16.512Z",
      "last_posted_at": "2019-07-12T03:27:46.174Z",
      "bumped": true,
      "bumped_at": "2019-07-12T03:27:46.174Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1326,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 619,
            "username": "eastern-grey",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/e/c67d28/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 1263,
        "username": "yiyuanliu",
        "name": "Yiyuan Liu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/yiyuanliu/{size}/1593_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 454,
        "username": "jzhou",
        "name": "Jingyu Zhou",
        "avatar_template": "/user_avatar/forums.foundationdb.org/jzhou/{size}/445_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "moderator": true,
        "trust_level": 2
      }
    ],
    "created_by": {
      "id": 1263,
      "username": "yiyuanliu",
      "name": "Yiyuan Liu",
      "avatar_template": "/user_avatar/forums.foundationdb.org/yiyuanliu/{size}/1593_2.png"
    },
    "last_poster": {
      "id": 454,
      "username": "jzhou",
      "name": "Jingyu Zhou",
      "avatar_template": "/user_avatar/forums.foundationdb.org/jzhou/{size}/445_2.png"
    },
    "links": [
      {
        "url": "https://github.com/apple/foundationdb/pull/10627",
        "title": "Remove SS entries from RateKeeper once it is down by hfu94 \u00b7 Pull Request #10627 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 16,
        "user_id": 1263,
        "domain": "github.com",
        "root_domain": "github.com"
      }
    ]
  },
  "bookmarks": []
}