{
  "post_stream": {
    "posts": [
      {
        "id": 14898,
        "name": "",
        "username": "lorenzsimon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/lorenzsimon/{size}/1962_2.png",
        "created_at": "2025-05-01T13:53:28.804Z",
        "cooked": "<p>Hi all,</p>\n<p>I am evaluating FDB record layer for a new project. One key feature is that users can register data schemas at runtime and then store data for those schemas.</p>\n<p>I have read the original record layer paper and it looks like this is something CloudKit is already doing. The app developers can define the schemas for their data and CloudKit stores this in the metadata store. But I don\u2019t understand how they do this. All the examples show how the schemas are defined in .proto files and the record layer process needs to know the schema definitions at compile time.</p>\n<p>They hint that: \u201cCloudKit translates the application schema into a Record Layer metadata definition and stores it in a metadata store (depicted in Figure 3).\u201d</p>\n<p>And later go on with: \u201cWe currently use descriptor objects to generate new metadata to be stored in the metadata store.\u201d</p>\n<p>Are they really running the protoc compiler in a separate process \u201cprotoc --include_imports --descriptor_set_out=descriptorfilename.desc path/to/protofile/abc.proto\u201d and build the metadata from the output?</p>\n<p>Thanks for any hints or explanations <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=14\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2025-05-01T13:53:28.804Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 20,
        "reads": 24,
        "readers_count": 23,
        "score": 114.8,
        "yours": false,
        "topic_id": 4885,
        "topic_slug": "how-to-generate-record-schemas-dynamically",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1547,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-generate-record-schemas-dynamically/4885/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 14899,
        "name": "Mike McMahon",
        "username": "MMcM",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/m/d07c76/{size}.png",
        "created_at": "2025-05-01T19:48:12.901Z",
        "cooked": "<p>Protobuf descriptors themselves have a Protobuf representation.</p>\n<p>Take a <code>DescriptorProtos.FileDescriptorProto.Builder</code>, populate it, <code>build</code> to get a <code>DescriptorProtos.FileDescriptorProto</code>. Give that to <code>Descriptors.FileDescriptor.buildFrom</code>.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2025-05-01T19:48:12.901Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 23,
        "readers_count": 22,
        "score": 19.6,
        "yours": false,
        "topic_id": 4885,
        "topic_slug": "how-to-generate-record-schemas-dynamically",
        "display_username": "Mike McMahon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 219,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-generate-record-schemas-dynamically/4885/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 14900,
        "name": "",
        "username": "lorenzsimon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/lorenzsimon/{size}/1962_2.png",
        "created_at": "2025-05-02T06:58:34.522Z",
        "cooked": "<p>Ok I see. So I could build the proto file dynamically via FileDescriptorProto and save it in the meta data store. And then build dynamic messages from the type descriptors.</p>\n<p>Is there any performance penalty from doing it this way?</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2025-05-02T06:58:34.522Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 24,
        "readers_count": 23,
        "score": 14.8,
        "yours": false,
        "topic_id": 4885,
        "topic_slug": "how-to-generate-record-schemas-dynamically",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1547,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-generate-record-schemas-dynamically/4885/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      14898,
      14899,
      14900
    ]
  },
  "timeline_lookup": [
    [
      1,
      173
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "How to generate record schemas dynamically?",
  "id": 4885,
  "title": "How to generate record schemas dynamically?",
  "posts_count": 3,
  "created_at": "2025-05-01T13:53:28.740Z",
  "views": 104,
  "reply_count": 0,
  "like_count": 2,
  "last_posted_at": "2025-05-02T06:58:34.522Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "how-to-generate-record-schemas-dynamically",
  "category_id": 12,
  "word_count": 249,
  "deleted_at": null,
  "user_id": 1547,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_4885",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 3,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 2,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Record Layer with DynamicMessage?",
      "id": 1576,
      "title": "Record Layer with DynamicMessage?",
      "slug": "record-layer-with-dynamicmessage",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2019-08-09T02:38:58.207Z",
      "last_posted_at": "2019-08-09T06:54:19.750Z",
      "bumped": true,
      "bumped_at": "2019-08-09T06:54:19.750Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 3,
      "views": 650,
      "category_id": 12,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest single",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 629,
            "username": "Sraw",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/a88e57/{size}.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Use the fdb-record-layer without using protobuf",
      "id": 4306,
      "title": "Use the fdb-record-layer without using protobuf",
      "slug": "use-the-fdb-record-layer-without-using-protobuf",
      "posts_count": 5,
      "reply_count": 3,
      "highest_post_number": 5,
      "image_url": null,
      "created_at": "2023-12-20T08:00:41.110Z",
      "last_posted_at": "2023-12-22T17:31:59.745Z",
      "bumped": true,
      "bumped_at": "2023-12-22T17:31:59.745Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 293,
      "category_id": 12,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 1364,
            "username": "whisper-bye",
            "name": "whisperbye",
            "avatar_template": "/user_avatar/forums.foundationdb.org/whisper-bye/{size}/1714_2.png",
            "trust_level": 0
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 219,
            "username": "MMcM",
            "name": "Mike McMahon",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/m/d07c76/{size}.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Question about FDB Record Layer&rsquo;s SIGMOD&rsquo;19 paper",
      "id": 2460,
      "title": "Question about FDB Record Layer's SIGMOD'19 paper",
      "slug": "question-about-fdb-record-layers-sigmod19-paper",
      "posts_count": 5,
      "reply_count": 3,
      "highest_post_number": 5,
      "image_url": null,
      "created_at": "2020-12-02T13:26:04.240Z",
      "last_posted_at": "2020-12-04T12:54:03.141Z",
      "bumped": true,
      "bumped_at": "2020-12-04T12:54:03.141Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1056,
      "category_id": 12,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 857,
            "username": "zydong",
            "name": "ZhiyuanDong",
            "avatar_template": "/user_avatar/forums.foundationdb.org/zydong/{size}/994_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Protobuf dependency?",
      "id": 1021,
      "title": "Protobuf dependency?",
      "slug": "protobuf-dependency",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2019-01-15T05:31:06.623Z",
      "last_posted_at": "2019-01-15T14:55:34.784Z",
      "bumped": true,
      "bumped_at": "2019-01-15T14:55:34.784Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 1195,
      "category_id": 12,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Schema evolution with multiple services",
      "id": 2887,
      "title": "Schema evolution with multiple services",
      "slug": "schema-evolution-with-multiple-services",
      "posts_count": 5,
      "reply_count": 2,
      "highest_post_number": 5,
      "image_url": null,
      "created_at": "2021-09-16T03:58:23.081Z",
      "last_posted_at": "2021-11-03T02:20:32.498Z",
      "bumped": true,
      "bumped_at": "2021-11-03T02:20:32.498Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 992,
      "category_id": 12,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 38,
            "username": "panghy",
            "name": "Clement Pang",
            "avatar_template": "/user_avatar/forums.foundationdb.org/panghy/{size}/19_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 1547,
        "username": "lorenzsimon",
        "name": "",
        "avatar_template": "/user_avatar/forums.foundationdb.org/lorenzsimon/{size}/1962_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 219,
        "username": "MMcM",
        "name": "Mike McMahon",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/m/d07c76/{size}.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      }
    ],
    "created_by": {
      "id": 1547,
      "username": "lorenzsimon",
      "name": "",
      "avatar_template": "/user_avatar/forums.foundationdb.org/lorenzsimon/{size}/1962_2.png"
    },
    "last_poster": {
      "id": 1547,
      "username": "lorenzsimon",
      "name": "",
      "avatar_template": "/user_avatar/forums.foundationdb.org/lorenzsimon/{size}/1962_2.png"
    }
  },
  "bookmarks": []
}