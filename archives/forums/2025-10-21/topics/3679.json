{
  "post_stream": {
    "posts": [
      {
        "id": 12081,
        "name": "KrKroening",
        "username": "KRKroening",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krkroening/{size}/1473_2.png",
        "created_at": "2022-12-01T22:46:28.089Z",
        "cooked": "<p>I\u2019m looking for some guidance on using the DNS option for the cluster file connection string. I\u2019m able to deploy the cluster fine when using pod or service IPs. I have tried this set up with multiple image versions of the operator/fdb/sidecar from 7.1.25 to 7.2.0 which was released yesterday, all with the same results. Between attempts I am deleting the operator deployment and the fdb cluster.</p>\n<p>When I enable <code>useDNSInClusterFile</code>, the operator will create the cluster, pick coordinators, and initialize the cluster file with the what I expect for the connection string. However the operator errors after that with <code>FoundationDB error code 2104 (Connection string invalid)</code>.</p>\n<pre><code class=\"lang-auto\">...\n{\"level\":\"info\",\"ts\":1669932412.0034533,\"logger\":\"controller\",\"msg\":\"Attempting to run sub-reconciler\",\"namespace\":\"foundationdb\",\"cluster\":\"foundationdb-cluster\",\"subReconciler\":\"controllers.updateLabels\"}\n{\"level\":\"info\",\"ts\":1669932412.0045478,\"logger\":\"controller\",\"msg\":\"Attempting to run sub-reconciler\",\"namespace\":\"foundationdb\",\"cluster\":\"foundationdb-cluster\",\"subReconciler\":\"controllers.updateDatabaseConfiguration\"}\n{\"level\":\"info\",\"ts\":1669932412.0046866,\"logger\":\"fdbclient\",\"msg\":\"Fetch values from FDB\",\"namespace\":\"foundationdb\",\"cluster\":\"foundationdb-cluster\",\"key\":\"\\ufffd\\ufffd/status/json\"}\n{\"level\":\"info\",\"ts\":1669932412.0048652,\"logger\":\"fdbclient\",\"msg\":\"Done fetching values from FDB\",\"namespace\":\"foundationdb\",\"cluster\":\"foundationdb-cluster\",\"key\":\"\\ufffd\\ufffd/status/json\"}\n{\"level\":\"error\",\"ts\":1669932412.0050175,\"logger\":\"controller\",\"msg\":\"Error in reconciliation\",\"namespace\":\"foundationdb\",\"cluster\":\"foundationdb-cluster\",\"subReconciler\":\"controllers.updateDatabaseConfiguration\",\"requeueAfter\":0,\"error\":\"FoundationDB error code 2104 (Connection string invalid)\",\"stacktrace\":\"github.com/FoundationDB/fdb-kubernetes-operator/controllers.(*FoundationDBClusterReconciler).Reconcile\\n\\t/workspace/controllers/cluster_controller.go:180\\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\\n\\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.12.3/pkg/internal/controller/controller.go:121\\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\\n\\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.12.3/pkg/internal/controller/controller.go:320\\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\\n\\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.12.3/pkg/internal/controller/controller.go:273\\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\\n\\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.12.3/pkg/internal/controller/controller.go:234\"}\n{\"level\":\"error\",\"ts\":1669932412.005133,\"msg\":\"Reconciler error\",\"controller\":\"foundationdbcluster\",\"controllerGroup\":\"apps.foundationdb.org\",\"controllerKind\":\"FoundationDBCluster\",\"foundationDBCluster\":{\"name\":\"foundationdb-cluster\",\"namespace\":\"foundationdb\"},\"namespace\":\"foundationdb\",\"name\":\"foundationdb-cluster\",\"reconcileID\":\"31fb36e8-85f9-4d36-b3ac-a93c1c0d3a88\",\"error\":\"FoundationDB error code 2104 (Connection string invalid)\",\"stacktrace\":\"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\\n\\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.12.3/pkg/internal/controller/controller.go:273\\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\\n\\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.12.3/pkg/internal/controller/controller.go:234\"}\n</code></pre>\n<p>The cluster-config generated:</p>\n<pre><code class=\"lang-auto\">cluster-file: &gt;-\n    foundationdb_cluster:LNg3SuB6Knl88bYxNJ5scY2gkDXr1fsp@foundationdb-cluster-storage-1.foundationdb-cluster.foundationdb.svc.cluster.local:4501,foundationdb-cluster-storage-2.foundationdb-cluster.foundationdb.svc.cluster.local:4501,foundationdb-cluster-storage-3.foundationdb-cluster.foundationdb.svc.cluster.local:4501\n  fdbmonitor-conf-cluster_controller: |-\n    [general]\n    kill_on_configuration_change = false\n    restart_delay = 60\n    [fdbserver.1]\n    command = $BINARY_DIR/fdbserver\n    cluster_file = /var/fdb/data/fdb.cluster\n    seed_cluster_file = /var/dynamic-conf/fdb.cluster\n    public_address = $FDB_PUBLIC_IP:4501\n    class = cluster_controller\n    logdir = /var/log/fdb-trace-logs\n    loggroup = foundationdb-cluster\n    datadir = /var/fdb/data\n    locality_instance_id = $FDB_INSTANCE_ID\n    locality_machineid = $FDB_MACHINE_ID\n    locality_zoneid = $FDB_ZONE_ID\n    listen_address = $FDB_POD_IP:4501\n    knob_disable_posix_kernel_aio = 1\n    locality_dns_name = $FDB_DNS_NAME\n  fdbmonitor-conf-log: |-\n    [general]\n    kill_on_configuration_change = false\n    restart_delay = 60\n    [fdbserver.1]\n    command = $BINARY_DIR/fdbserver\n    cluster_file = /var/fdb/data/fdb.cluster\n    seed_cluster_file = /var/dynamic-conf/fdb.cluster\n    public_address = $FDB_PUBLIC_IP:4501\n    class = log\n    logdir = /var/log/fdb-trace-logs\n    loggroup = foundationdb-cluster\n    datadir = /var/fdb/data\n    locality_instance_id = $FDB_INSTANCE_ID\n    locality_machineid = $FDB_MACHINE_ID\n    locality_zoneid = $FDB_ZONE_ID\n    listen_address = $FDB_POD_IP:4501\n    knob_disable_posix_kernel_aio = 1\n    locality_dns_name = $FDB_DNS_NAME\n  fdbmonitor-conf-storage: |-\n    [general]\n    kill_on_configuration_change = false\n    restart_delay = 60\n    [fdbserver.1]\n    command = $BINARY_DIR/fdbserver\n    cluster_file = /var/fdb/data/fdb.cluster\n    seed_cluster_file = /var/dynamic-conf/fdb.cluster\n    public_address = $FDB_PUBLIC_IP:4501\n    class = storage\n    logdir = /var/log/fdb-trace-logs\n    loggroup = foundationdb-cluster\n    datadir = /var/fdb/data\n    locality_instance_id = $FDB_INSTANCE_ID\n    locality_machineid = $FDB_MACHINE_ID\n    locality_zoneid = $FDB_ZONE_ID\n    listen_address = $FDB_POD_IP:4501\n    knob_disable_posix_kernel_aio = 1\n    locality_dns_name = $FDB_DNS_NAME\n  running-version: 7.2.0\n</code></pre>\n<p>If I exec into one of the pods and check the status, I get the following:</p>\n<pre><code class=\"lang-auto\">Using cluster file `/var/dynamic-conf/fdb.cluster'.\n\nUnable to communicate with the cluster controller at 172.20.179.0:4501 to get\nstatus.\n\nConfiguration:\n  Redundancy mode        - unknown\n  Storage engine         - unknown\n  Encryption at-rest     - disabled\n  Coordinators           - unknown\n  Usable Regions         - unknown\n\nCluster:\n  FoundationDB processes - unknown\n  Zones                  - unknown\n  Machines               - \n  Machines               - unknown\n\nData:\n  Replication health     - unknown\n  Moving data            - unknown\n  Sum of key-value sizes - unknown\n  Disk space used        - unknown\n\nOperating space:\n  Unable to retrieve operating space status\n\nWorkload:\n  Read rate              - unknown\n  Write rate             - unknown\n  Transactions started   - unknown\n  Transactions committed - unknown\n  Conflict rate          - unknown\n\nBackup and DR:\n  Running backups        - 0\n  Running DRs            - 0\n</code></pre>\n<p>Execing into the coordinator gives similar results:</p>\n<pre><code class=\"lang-auto\">WARNING: Long delay (Ctrl-C to interrupt)\nUsing cluster file `/var/dynamic-conf/fdb.cluster'.\n\nThe coordinator(s) have no record of this database. Either the coordinator\naddresses are incorrect, the coordination state on those machines is missing, or\nno database has been created.\n\n  foundationdb-cluster-storage-1.foundationdb-cluster.foundationdb.svc.cluster.local:4501  (reachable)\n  foundationdb-cluster-storage-2.foundationdb-cluster.foundationdb.svc.cluster.local:4501  (reachable)\n  foundationdb-cluster-storage-3.foundationdb-cluster.foundationdb.svc.cluster.local:4501  (reachable)\n\nUnable to locate the data distributor worker.\n\nUnable to locate the ratekeeper worker.\n\nUnable to locate the consistencyScan worker.\n</code></pre>\n<p>I am running the FDB cluster on EKS via the operator with the following configuration:</p>\n<pre><code class=\"lang-auto\">apiVersion: apps.foundationdb.org/v1beta2\nkind: FoundationDBCluster\nmetadata:\n  labels:\n    argocd.argoproj.io/instance: foundationdb.foundationdb.in-cluster\n  name: foundationdb-cluster\n  namespace: foundationdb\nspec:\n  automationOptions:\n    killProcesses: true\n    replacements:\n      enabled: true\n      maxConcurrentReplacements: 2\n  faultDomain:\n    key: foundationdb.org/none\n  labels:\n    filterOnOwnerReference: false\n    matchLabels:\n      foundationdb.org/fdb-cluster-name: foundationdb-cluster\n    processClassLabels:\n      - foundationdb.org/fdb-process-class\n    processGroupIDLabels:\n      - foundationdb.org/fdb-process-group-id\n  mainContainer:\n    imageConfigs:\n      - baseImage: foundationdb/foundationdb\n      - tag: 7.2.0\n  minimumUptimeSecondsForBounce: 60\n  processCounts:\n    cluster_controller: 1\n    stateless: -1\n  processes:\n    general:\n      customParameters:\n        - knob_disable_posix_kernel_aio=1\n      podTemplate:\n        spec:\n          containers:\n            - name: foundationdb\n              resources:\n                requests:\n                  cpu: 400m\n                  memory: 955Mi\n              securityContext:\n                runAsUser: 0\n            - livenessProbe:\n                failureThreshold: 5\n                initialDelaySeconds: 15\n                periodSeconds: 30\n                successThreshold: 1\n                tcpSocket:\n                  port: 8080\n                timeoutSeconds: 1\n              name: foundationdb-kubernetes-sidecar\n              resources:\n                limits:\n                  cpu: 100m\n                  memory: 128Mi\n                requests:\n                  cpu: 100m\n                  memory: 128Mi\n              securityContext:\n                runAsUser: 0\n          initContainers:\n            - name: foundationdb-kubernetes-init\n              resources:\n                limits:\n                  cpu: 100m\n                  memory: 128Mi\n                requests:\n                  cpu: 100m\n                  memory: 128Mi\n              securityContext:\n                runAsUser: 0\n      volumeClaimTemplate:\n        spec:\n          resources:\n            requests:\n              storage: 16G\n  replaceInstancesWhenResourcesChange: false\n  routing:\n    publicIPSource: service\n    useDNSInClusterFile: true\n  sidecarContainer:\n    enableLivenessProbe: false\n    enableReadinessProbe: false\n  useExplicitListenAddress: true\n  version: 7.2.0\n</code></pre>\n<p>Notably, I have the routing block as</p>\n<pre><code class=\"lang-auto\">  routing:\n    publicIPSource: service\n    useDNSInClusterFile: true\n</code></pre>\n<p>Documentation is very light on this feature, so I don\u2019t know if I\u2019m missing a configuration option or what. I found <a href=\"https://github.com/FoundationDB/fdb-kubernetes-operator/tree/main/config/tests/dns\" rel=\"noopener nofollow ugc\">this test case</a> which helped a little. I checked the <a href=\"https://github.com/apple/foundationdb/blob/main/flow/include/flow/Hostname.h#L56\" rel=\"noopener nofollow ugc\">validation in FoundationDB itself for the hostname</a> and the regex passes, so hostnames themselves should be valid. I\u2019ve read just about every forum post and issue that mentions the DNS option.</p>\n<p>My ultimate use case is to connect to the FDB cluster from another peered cluster via Cilium cluster mesh. I can do that with the pod IPs, but I need the predicable service names for this solution to be viable.</p>\n<p>Does anyone have any suggestions? I\u2019ve been trying to figure this out for a while now and I\u2019m out of ideas. Thanks.</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2022-12-01T22:46:28.089Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 522,
        "reads": 53,
        "readers_count": 52,
        "score": 2620.6,
        "yours": false,
        "topic_id": 3679,
        "topic_slug": "usednsinclusterfile-connection-string-invalid",
        "display_username": "KrKroening",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/blob/main/flow/include/flow/Hostname.h#L56",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/Hostname.h at main \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 4
          },
          {
            "url": "https://github.com/FoundationDB/fdb-kubernetes-operator/tree/main/config/tests/dns",
            "internal": false,
            "reflection": false,
            "title": "fdb-kubernetes-operator/config/tests/dns at main \u00b7 FoundationDB/fdb-kubernetes-operator \u00b7 GitHub",
            "clicks": 3
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1190,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/usednsinclusterfile-connection-string-invalid/3679/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 12098,
        "name": "Johannes Scheuermann",
        "username": "johscheuer",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
        "created_at": "2022-12-06T09:57:21.470Z",
        "cooked": "<blockquote>\n<p>Documentation is very light on this feature</p>\n</blockquote>\n<p>That\u2019s very kind to say we don\u2019t have documentation for that feature yet <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"> Hopefully we are able to write down the documentation by the end of this year (I\u2019m happy if you want to contribute the documentation).</p>\n<p>Do you mind to share your operator deployment? When using the multi-version client setup there is currently an issue that needs some additional configuration. The TLDR of the issue is that the primary (default) library of the FDB operator is 6.2.29, since the operator supports 6.2.20 and newer versions (this is build here: <a href=\"https://github.com/FoundationDB/fdb-kubernetes-operator/blob/main/Dockerfile#L7\" rel=\"noopener nofollow ugc\">https://github.com/FoundationDB/fdb-kubernetes-operator/blob/main/Dockerfile#L7</a>). This version of the FDB bindings don\u2019t understand the DNS entires in the cluster file and therefore you get the error. There are 2 ways to workaround this issue:</p>\n<p>1.) Build you own operator image with 7.1 as the default library (we will do that in the operator repository once we drop support fro 6.2 and 6.3) and use your own image.<br>\n2.) Copy the library from a 7.1 image to a \u201cspecial\u201d place and set <code>LD_LIBRARY_PATH</code> something like this:</p>\n<pre><code class=\"lang-auto\">        - name: foundationdb-kubernetes-init-7-1-primary\n          image: foundationdb/foundationdb-kubernetes-sidecar:7.1.25\n          imagePullPolicy: Always\n          args:\n            # Note that we are only copying a library, rather than copying any binaries. \n            - \"--copy-library\"\n            - \"7.1\"\n            - \"--output-dir\"\n            - \"/var/output-files/primary\" # Note that we use `primary` as the subdirectory rather than specifying the FoundationDB version like we did in the other examples.\n            - \"--init-mode\"\n          volumeMounts:\n            - name: fdb-binaries\n              mountPath: /var/output-files\n</code></pre>\n<p>and in the operator simply add this environment variable:</p>\n<pre><code class=\"lang-auto\">          - name: LD_LIBRARY_PATH\n            value: /usr/bin/fdb/primary/lib\n</code></pre>\n<p>Depending on your setup either option 1 or option 2 is the better fit.</p>\n<p>Like I said if you\u2019re currently trying out this feature and you want to write the documentation for it, I\u2019m more than happy to help.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2022-12-06T09:57:21.470Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 7,
        "reads": 46,
        "readers_count": 45,
        "score": 44.2,
        "yours": false,
        "topic_id": 3679,
        "topic_slug": "usednsinclusterfile-connection-string-invalid",
        "display_username": "Johannes Scheuermann",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/FoundationDB/fdb-kubernetes-operator/blob/main/Dockerfile#L7",
            "internal": false,
            "reflection": false,
            "title": "fdb-kubernetes-operator/Dockerfile at main \u00b7 FoundationDB/fdb-kubernetes-operator \u00b7 GitHub",
            "clicks": 6
          }
        ],
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 849,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/usednsinclusterfile-connection-string-invalid/3679/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 12112,
        "name": "KrKroening",
        "username": "KRKroening",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krkroening/{size}/1473_2.png",
        "created_at": "2022-12-08T22:25:15.349Z",
        "cooked": "<p><a class=\"mention\" href=\"/u/johscheuer\">@johscheuer</a> Thanks for the help.</p>\n<p>I went with option <span class=\"hashtag\">#1</span> and built an image with the updated version</p>\n<pre><code class=\"lang-auto\">ARG BASE_IMAGE=docker.io/debian:bullseye\n\n# Build the manager binary\nFROM docker.io/library/golang:1.19.3 as builder\n\n# Install FDB this version is only required to compile the fdb operator\nARG FDB_VERSION=7.1.5\nARG FDB_WEBSITE=https://github.com/apple/foundationdb/releases/download\nARG TAG=\"latest\"\n\nRUN set -eux &amp;&amp; \\\n\tcurl --fail -L ${FDB_WEBSITE}/${FDB_VERSION}/foundationdb-clients_${FDB_VERSION}-1_amd64.deb -o fdb.deb &amp;&amp; \\\n\tdpkg -i fdb.deb &amp;&amp; \\\n    rm fdb.deb\n\nRUN apt-get -y update &amp;&amp; apt-get install -y unzip\nRUN curl -sL https://github.com/FoundationDB/fdb-kubernetes-operator/archive/refs/tags/v1.10.0.zip &gt; /tmp/fdb-kubernetes-operator.zip\nRUN unzip /tmp/fdb-kubernetes-operator.zip -d /\n\nWORKDIR /workspace\n# Copy the Go Modules manifests\nRUN cp /fdb-kubernetes-operator-1.10.0/go.mod go.mod\nRUN cp /fdb-kubernetes-operator-1.10.0/go.sum go.sum\n# cache deps before building and copying source so that we don't need to re-download as much\n# and so that source changes don't invalidate our downloaded layer\nRUN go mod download -x\n\n# Copy the go source\nRUN cp /fdb-kubernetes-operator-1.10.0/main.go main.go\nRUN cp /fdb-kubernetes-operator-1.10.0/Makefile Makefile\nRUN cp -r /fdb-kubernetes-operator-1.10.0/api/ api/\nRUN cp -r /fdb-kubernetes-operator-1.10.0/controllers/ controllers/\nRUN cp -r /fdb-kubernetes-operator-1.10.0/setup/ setup/\nRUN cp -r /fdb-kubernetes-operator-1.10.0/fdbclient/ fdbclient/\nRUN cp -r /fdb-kubernetes-operator-1.10.0/internal/ internal/\nRUN cp -r /fdb-kubernetes-operator-1.10.0/pkg/ pkg/\nRUN cp -r /fdb-kubernetes-operator-1.10.0/mock-kubernetes-client/ mock-kubernetes-client/\n\n# Build\nRUN CGO_ENABLED=1 GOOS=linux GOARCH=amd64 GO111MODULE=on make manager\n\n# Create user and group here since we don't have the tools\n# in distroless\nRUN groupadd --gid 4059 fdb &amp;&amp; \\\n\tuseradd --gid 4059 --uid 4059 --create-home --shell /bin/bash fdb &amp;&amp; \\\n\tmkdir -p /var/log/fdb &amp;&amp; \\\n\ttouch /var/log/fdb/.keep\n\nFROM $BASE_IMAGE\n\nVOLUME /usr/lib/fdb\n\nWORKDIR /\n\nCOPY --from=builder /etc/passwd /etc/passwd\nCOPY --from=builder /etc/group /etc/group\nCOPY --chown=fdb:fdb --from=builder /workspace/bin/manager .\nCOPY --from=builder /usr/lib/libfdb_c.so /usr/lib/\nCOPY --chown=fdb:fdb --from=builder /var/log/fdb/.keep /var/log/fdb/.keep\n\n# Set to the numeric UID of fdb user to satisfy PodSecurityPolices which enforce runAsNonRoot\nUSER 4059\n\nENV FDB_NETWORK_OPTION_TRACE_LOG_GROUP=fdb-kubernetes-operator\nENV FDB_NETWORK_OPTION_TRACE_ENABLE=/var/log/fdb\nENV FDB_BINARY_DIR=/usr/bin/fdb\nENV FDB_NETWORK_OPTION_EXTERNAL_CLIENT_DIRECTORY=/usr/bin/fdb\n\nENTRYPOINT [\"/manager\"]\n</code></pre>\n<p>With that new image, I am able to start up the operator and get past the connection string invalid error. Here is the operator deployment I\u2019m now using:</p>\n<pre><code class=\"lang-auto\">apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    app.kubernetes.io/instance: foundationdb-operator\n    app.kubernetes.io/name: foundationdb-operator\n    app.kubernetes.io/version: 1.10.0\n  name: foundationdb-operator\n  namespace: foundationdb-operator\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app.kubernetes.io/instance: foundationdb-operator\n      app.kubernetes.io/name: foundationdb-operator\n  template:\n    metadata:\n      labels:\n        app.kubernetes.io/instance: foundationdb-operator\n        app.kubernetes.io/name: foundationdb-operator\n    spec:\n      containers:\n        - command:\n            - /manager\n            - '-cli-timeout=30'\n          image: &lt;custom-image-repo&gt;/foundationdb-operator:1.10.0\n          imagePullPolicy: IfNotPresent\n          livenessProbe:\n            failureThreshold: 3\n            httpGet:\n              path: /metrics\n              port: metrics\n              scheme: HTTP\n            periodSeconds: 10\n            successThreshold: 1\n            timeoutSeconds: 1\n          name: manager\n          ports:\n            - containerPort: 8080\n              name: metrics\n              protocol: TCP\n          resources:\n            limits:\n              cpu: 500m\n              memory: 256Mi\n            requests:\n              cpu: 500m\n              memory: 256Mi\n          securityContext:\n            allowPrivilegeEscalation: false\n            capabilities:\n              drop:\n                - all\n            privileged: false\n            readOnlyRootFilesystem: true\n          terminationMessagePath: /dev/termination-log\n          terminationMessagePolicy: File\n          volumeMounts:\n            - mountPath: /tmp\n              name: tmp\n            - mountPath: /var/log/fdb\n              name: logs\n            - mountPath: /usr/bin/fdb\n              name: fdb-binaries\n      dnsPolicy: ClusterFirst\n      initContainers:\n        - args:\n            - '--copy-library'\n            - '7.1'\n            - '--copy-binary'\n            - fdbcli\n            - '--copy-binary'\n            - fdbbackup\n            - '--copy-binary'\n            - fdbrestore\n            - '--output-dir'\n            - /var/output-files/7.1.5\n            - '--init-mode'\n          image: 'foundationdb/foundationdb-kubernetes-sidecar:7.1.5-1'\n          imagePullPolicy: IfNotPresent\n          name: foundationdb-kubernetes-init-7-1\n          resources:\n            limits:\n              cpu: 10m\n              memory: 50Mi\n            requests:\n              cpu: 10m\n              memory: 50Mi\n          securityContext:\n            allowPrivilegeEscalation: false\n            capabilities:\n              drop:\n                - all\n            privileged: false\n            readOnlyRootFilesystem: true\n          terminationMessagePath: /dev/termination-log\n          terminationMessagePolicy: File\n          volumeMounts:\n            - mountPath: /var/output-files\n              name: fdb-binaries\n      restartPolicy: Always\n      schedulerName: default-scheduler\n      securityContext:\n        fsGroup: 4059\n        runAsGroup: 4059\n        runAsUser: 4059\n      serviceAccount: foundationdb-operator\n      serviceAccountName: foundationdb-operator\n      terminationGracePeriodSeconds: 10\n      volumes:\n        - emptyDir: {}\n          name: tmp\n        - emptyDir: {}\n          name: logs\n        - emptyDir: {}\n          name: fdb-binaries\n</code></pre>\n<p>I ran into another problem, which I\u2019ve managed to solve. The operator couldn\u2019t reconcile the cluster with these logs.</p>\n<pre><code class=\"lang-auto\">{\"level\":\"info\",\"ts\":1670524142.8491852,\"logger\":\"controller\",\"msg\":\"Attempting to run sub-reconciler\",\"namespace\":\"foundationdb\",\"cluster\":\"foundationdb-cluster\",\"subReconciler\":\"controllers.updateDatabaseConfiguration\"}\n{\"level\":\"info\",\"ts\":1670524142.8493474,\"logger\":\"fdbclient\",\"msg\":\"Fetch values from FDB\",\"namespace\":\"foundationdb\",\"cluster\":\"foundationdb-cluster\",\"key\":\"\\ufffd\\ufffd/status/json\"}\n{\"level\":\"info\",\"ts\":1670524150.8583922,\"logger\":\"fdbclient\",\"msg\":\"Done fetching values from FDB\",\"namespace\":\"foundationdb\",\"cluster\":\"foundationdb-cluster\",\"key\":\"\\ufffd\\ufffd/status/json\"}\n{\"level\":\"info\",\"ts\":1670524150.8593502,\"logger\":\"controller\",\"msg\":\"Configuring database\",\"namespace\":\"foundationdb\",\"cluster\":\"foundationdb-cluster\",\"reconciler\":\"updateDatabaseConfiguration\",\"current configuration\":{\"redundancy_mode\":\"double\",\"storage_engine\":\"ssd-2\",\"usable_regions\":1,\"log_routers\":-1,\"remote_logs\":-1},\"desired configuration\":{\"redundancy_mode\":\"double\",\"storage_engine\":\"ssd-2\",\"usable_regions\":1,\"logs\":3,\"proxies\":3,\"resolvers\":1,\"log_routers\":-1,\"remote_logs\":-1}}\n{\"level\":\"info\",\"ts\":1670524150.8594463,\"logger\":\"fdbclient\",\"msg\":\"Running command\",\"namespace\":\"foundationdb\",\"cluster\":\"foundationdb-cluster\",\"path\":\"/usr/bin/fdb/7.1/fdbcli\",\"args\":[\"/usr/bin/fdb/7.1/fdbcli\",\"--exec\",\"configure new double ssd-2 usable_regions=1 logs=3 resolvers=1 log_routers=-1 remote_logs=-1 proxies=3 regions=[]\",\"-C\",\"/tmp/b9f9c3d4-513e-4efb-a141-8d698722e40f\",\"--log\",\"--log\",\"--trace_format\",\"xml\",\"--log-dir\",\"/var/log/fdb\",\"--timeout\",\"30\"]}\n{\"level\":\"error\",\"ts\":1670524180.8982832,\"logger\":\"fdbclient\",\"msg\":\"Error from FDB command\",\"namespace\":\"foundationdb\",\"cluster\":\"foundationdb-cluster\",\"code\":1,\"stdout\":\"\\nWARNING: Long delay (Ctrl-C to interrupt)\\nSpecified timeout reached -- exiting...\\nWarning: Proxy role is being split into GRV Proxy and Commit Proxy, now prefer configuring 'grv_proxies' and 'commit_proxies' separately. Generally we should follow that 'commit_proxies' is three times of 'grv_proxies' count and 'grv_proxies' should be not more than 4.\\n3 proxies are automatically converted into 1 GRV proxies and 2 Commit proxies.\\n\\nThe database is unavailable; type `status' for more information.\\n\\n\",\"stderr\":\"\",\"error\":\"exit status 1\",\"stacktrace\":\"github.com/FoundationDB/fdb-kubernetes-operator/fdbclient.(*cliAdminClient).ConfigureDatabase\\n\\t/workspace/fdbclient/admin_client.go:364\\ngithub.com/FoundationDB/fdb-kubernetes-operator/controllers.updateDatabaseConfiguration.reconcile\\n\\t/workspace/controllers/update_database_configuration.go:110\\ngithub.com/FoundationDB/fdb-kubernetes-operator/controllers.(*FoundationDBClusterReconciler).Reconcile\\n\\t/workspace/controllers/cluster_controller.go:166\\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\\n\\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.12.3/pkg/internal/controller/controller.go:121\\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\\n\\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.12.3/pkg/internal/controller/controller.go:320\\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\\n\\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.12.3/pkg/internal/controller/controller.go:273\\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\\n\\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.12.3/pkg/internal/controller/controller.go:234\"}\n{\"level\":\"error\",\"ts\":1670524180.898432,\"logger\":\"controller\",\"msg\":\"Error in reconciliation\",\"namespace\":\"foundationdb\",\"cluster\":\"foundationdb-cluster\",\"subReconciler\":\"controllers.updateDatabaseConfiguration\",\"requeueAfter\":0,\"error\":\"fdb timeout: exit status 1\",\"stacktrace\":\"github.com/FoundationDB/fdb-kubernetes-operator/controllers.(*FoundationDBClusterReconciler).Reconcile\\n\\t/workspace/controllers/cluster_controller.go:180\\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\\n\\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.12.3/pkg/internal/controller/controller.go:121\\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\\n\\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.12.3/pkg/internal/controller/controller.go:320\\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\\n\\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.12.3/pkg/internal/controller/controller.go:273\\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\\n\\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.12.3/pkg/internal/controller/controller.go:234\"}\n</code></pre>\n<p>In the end I found a status message in the status json log that indicated the cluster was trying(and evidently failing) to recruit a transaction process. I modified my cluster by explicitly adding 2 transaction processes and the cluster was finally able to reconcile and I can connect to the cluster from my test microservice. I\u2019m going to have to look at my process setup closer.</p>\n<p>A new thing I\u2019m running across is trying to run the cluster without a headless service. I have the config set to <code>headlessService: false</code> but there is still a headless service created in the cluster and that\u2019s reflected in the connection string. I believe that\u2019s one of the last hurdles I have to have my multicluster connection. Is there a hidden dependency that is preventing the headless service from being disabled?</p>\n<pre><code class=\"lang-auto\">routing:\n  useDNSInClusterFile: true\n  headlessService: false\n  publicIpSource: service\n</code></pre>\n<p>Edit:<br>\nThis is interesting. Left the cluster running overnight. Sometime in the last 12h(logs don\u2019t go back that far) the operator tried to rotate coordinators or something, created new pods, hit the EKS cluster\u2019s resource/node limit(not unexpected), but now the connection string is  <code>foundationdb_cluster:9Iscf7sSnSCx3uJQH3JGf96GvfSQ5wPQ@10.0.3.74:4501(fromHostname),10.0.11.67:4501(fromHostname),10.0.13.169:4501(fromHostname)</code>. Aside from the strange addresses, the generationID also regenerated instead of using the fixed value I provide to the operator.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2022-12-09T21:08:06.742Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 10,
        "reads": 39,
        "readers_count": 38,
        "score": 62.8,
        "yours": false,
        "topic_id": 3679,
        "topic_slug": "usednsinclusterfile-connection-string-invalid",
        "display_username": "KrKroening",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1190,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/usednsinclusterfile-connection-string-invalid/3679/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 12130,
        "name": "Johannes Scheuermann",
        "username": "johscheuer",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
        "created_at": "2022-12-15T06:49:25.160Z",
        "cooked": "<blockquote>\n<p>I went with option <span class=\"hashtag-raw\">#1</span> and built an image with the updated version</p>\n</blockquote>\n<p>You don\u2019t have to change the Dockerfile, you can simply pass the build-arg to the docker build command e.g.: <code>docker build --build-arg FDB_VERSION=7.1.25 --platform='linux/amd64'  -t foundationdb/fdb-kubernetes-operator .</code></p>\n<blockquote>\n<p>In the end I found a status message in the status json log that indicated the cluster was trying(and evidently failing) to recruit a transaction process. I modified my cluster by explicitly adding 2 transaction processes and the cluster was finally able to reconcile and I can connect to the cluster from my test microservice. I\u2019m going to have to look at my process setup closer.</p>\n</blockquote>\n<p>Do you mind to share your <code>FoundationDBCluster</code>? Just to understand what the issue could be.</p>\n<blockquote>\n<p>A new thing I\u2019m running across is trying to run the cluster without a headless service. I have the config set to <code>headlessService: false</code> but there is still a headless service created in the cluster and that\u2019s reflected in the connection string. I believe that\u2019s one of the last hurdles I have to have my multicluster connection. Is there a hidden dependency that is preventing the headless service from being disabled?</p>\n</blockquote>\n<p>In the current implementation the operator will always create a headless service if DNS is enabled. We made those changes to use the Pod DNS entries: <a href=\"https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#pod-s-hostname-and-subdomain-fields\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">DNS for Services and Pods | Kubernetes</a>. Is there a reason that you cannot use another headless service or what exactly is missing on the automatic created headless service?</p>\n<blockquote>\n<p>This is interesting. Left the cluster running overnight. Sometime in the last 12h(logs don\u2019t go back that far) the operator tried to rotate coordinators or something, created new pods, hit the EKS cluster\u2019s resource/node limit(not unexpected), but now the connection string is <code>foundationdb_cluster:9Iscf7sSnSCx3uJQH3JGf96GvfSQ5wPQ@10.0.3.74:4501(fromHostname),10.0.11.67:4501(fromHostname),10.0.13.169:4501(fromHostname)</code> . Aside from the strange addresses, the generationID also regenerated instead of using the fixed value I provide to the operator.</p>\n</blockquote>\n<p>If you mean by <code>generationID</code> this string <code>9Iscf7sSnSCx3uJQH3JGf96GvfSQ5wPQ</code>, it\u2019s expected that the generationID changes if new coordinators are selected. That generationID is used to distinguish different coordinator \u201cgeneration\u201d.</p>\n<p>The connection string value that you showed there, is that the connection string from <code>/var/dynamic-conf/fdb.cluster</code> or the content from <code>/var/fdb/data/fdb.cluster</code>? The latter (<code>/var/fdb/data/...</code>) is the connection string file managed by the fdbserver process itself, so it\u2019s expected that you see IP addresses there, since the fdbserver process was resolving those.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2022-12-15T06:49:25.160Z",
        "reply_count": 1,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 30,
        "readers_count": 29,
        "score": 16.0,
        "yours": false,
        "topic_id": 3679,
        "topic_slug": "usednsinclusterfile-connection-string-invalid",
        "display_username": "Johannes Scheuermann",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#pod-s-hostname-and-subdomain-fields",
            "internal": false,
            "reflection": false,
            "title": "DNS for Services and Pods | Kubernetes",
            "clicks": 4
          }
        ],
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 1190,
          "username": "KRKroening",
          "name": "KrKroening",
          "avatar_template": "/user_avatar/forums.foundationdb.org/krkroening/{size}/1473_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 849,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/usednsinclusterfile-connection-string-invalid/3679/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 12133,
        "name": "KrKroening",
        "username": "KRKroening",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krkroening/{size}/1473_2.png",
        "created_at": "2022-12-15T20:22:38.596Z",
        "cooked": "<p>Building a new dockerfile fits better into our CI/CD so that\u2019s why I opted for that option. Thanks for the suggestion though.</p>\n<aside class=\"quote no-group\" data-username=\"johscheuer\" data-post=\"4\" data-topic=\"3679\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/j/f475e1/48.png\" class=\"avatar\"> johscheuer:</div>\n<blockquote>\n<p>Do you mind to share your <code>FoundationDBCluster</code>? Just to understand what the issue could be.</p>\n</blockquote>\n</aside>\n<p>This was the FoundationDBCluster when it was failing. I don\u2019t have the log files anymore with the actual error.</p>\n<pre><code class=\"lang-auto\">apiVersion: apps.foundationdb.org/v1beta2\nkind: FoundationDBCluster\nmetadata:\n  name: foundationdb-cluster\n  namespace: foundationdb\nspec:\n  automationOptions:\n    killProcesses: true\n    replacements:\n      enabled: true\n      maxConcurrentReplacements: 2\n  faultDomain:\n    key: foundationdb.org/none\n  labels:\n    filterOnOwnerReference: false\n    matchLabels:\n      foundationdb.org/fdb-cluster-name: foundationdb-cluster\n    processClassLabels:\n    - foundationdb.org/fdb-process-class\n    processGroupIDLabels:\n    - foundationdb.org/fdb-process-group-id\n    - app.kubernetes.io/name\n  minimumUptimeSecondsForBounce: 60\n  processCounts:\n    cluster_controller: 1\n    stateless: 2\n    log: 3\n    storage: 3\n  partialConnectionString: \n    databaseName: foundationdb_cluster\n    generationID: cKicfHRW3OHgnNpYdVb2j1NHl89UKvJT\n  processes:\n    general:\n      customParameters:\n      - knob_disable_posix_kernel_aio=1\n      podTemplate:\n        spec:\n          containers:\n          - name: foundationdb\n            resources:\n              requests:\n                cpu: 500m\n                memory: 2.5Gi\n            securityContext:\n              runAsUser: 0\n          - name: foundationdb-kubernetes-sidecar\n            resources:\n                limits:\n                  cpu: 200m\n                  memory: 328Mi\n                requests:\n                  cpu: 200m\n                  memory: 328Mi\n            securityContext:\n              runAsUser: 0\n            livenessProbe:\n              failureThreshold: 5\n              periodSeconds: 30\n              successThreshold: 1\n              tcpSocket:\n                port: 8080\n              timeoutSeconds: 1\n              initialDelaySeconds: 15\n          initContainers:\n          - name: foundationdb-kubernetes-init\n            resources:\n                limits:\n                  cpu: 200m\n                  memory: 228Mi\n                requests:\n                  cpu: 200m\n                  memory: 228Mi\n            securityContext:\n              runAsUser: 0\n      volumeClaimTemplate:\n        spec:\n          resources:\n            resources:\n              requests:\n                storage: 16G\n  replaceInstancesWhenResourcesChange: true\n  routing:\n    headlessService: true\n    useDNSInClusterFile: true\n    publicIPSource: service\n  sidecarContainer:\n    enableLivenessProbe: false\n    enableReadinessProbe: false\n  useExplicitListenAddress: false\n  mainContainer:\n    imageConfigs:\n      - baseImage: foundationdb/foundationdb\n      - tag: 7.1.5\n  version: 7.1.5\n</code></pre>\n<p>Updated to this config and the cluster was able to come up fully</p>\n<pre><code class=\"lang-auto\">apiVersion: apps.foundationdb.org/v1beta2\nkind: FoundationDBCluster\nmetadata:\n  name: foundationdb-cluster\n  namespace: foundationdb\nspec:\n  automationOptions:\n    killProcesses: true\n    replacements:\n      enabled: true\n      maxConcurrentReplacements: 2\n  faultDomain:\n    key: foundationdb.org/none\n  labels:\n    filterOnOwnerReference: false\n    matchLabels:\n      foundationdb.org/fdb-cluster-name: foundationdb-cluster\n    processClassLabels:\n    - foundationdb.org/fdb-process-class\n    processGroupIDLabels:\n    - foundationdb.org/fdb-process-group-id\n    - app.kubernetes.io/name\n  minimumUptimeSecondsForBounce: 60\n  processCounts:\n    cluster_controller: 1\n    stateless: 1\n    log: 3\n    storage: 3\n    transaction: 2\n  partialConnectionString: \n    databaseName: foundationdb_cluster\n    generationID: cKicfHRW3OHgnNpYdVb2j1NHl89UKvJT\n  processes:\n    general:\n      customParameters:\n      - knob_disable_posix_kernel_aio=1\n      - knob_worker_failure_time=10\n      podTemplate:\n        spec:\n          containers:\n          - name: foundationdb\n            resources:\n              requests:\n                cpu: 500m\n                memory: 2.5Gi\n            securityContext:\n              runAsUser: 0\n          - name: foundationdb-kubernetes-sidecar\n            resources:\n                limits:\n                  cpu: 200m\n                  memory: 328Mi\n                requests:\n                  cpu: 200m\n                  memory: 328Mi\n            securityContext:\n              runAsUser: 0\n            livenessProbe:\n              failureThreshold: 5\n              periodSeconds: 30\n              successThreshold: 1\n              tcpSocket:\n                port: 8080\n              timeoutSeconds: 1\n              initialDelaySeconds: 15\n          initContainers:\n          - name: foundationdb-kubernetes-init\n            resources:\n                limits:\n                  cpu: 200m\n                  memory: 228Mi\n                requests:\n                  cpu: 200m\n                  memory: 228Mi\n            securityContext:\n              runAsUser: 0\n      volumeClaimTemplate:\n        spec:\n          resources:\n            resources:\n              requests:\n                storage: 16G\n  replaceInstancesWhenResourcesChange: true\n  routing:\n    headlessService: true\n    useDNSInClusterFile: true\n    publicIPSource: service\n  sidecarContainer:\n    enableLivenessProbe: false\n    enableReadinessProbe: false\n  useExplicitListenAddress: false\n  mainContainer:\n    imageConfigs:\n      - baseImage: foundationdb/foundationdb\n      - tag: 7.1.5\n  version: 7.1.5\n</code></pre>\n<blockquote>\n<p>In the current implementation the operator will always create a headless service if DNS is enabled. We made those changes to use the Pod DNS entries: <a href=\"https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#pod-s-hostname-and-subdomain-fields\" rel=\"noopener nofollow ugc\">DNS for Services and Pods | Kubernetes</a>. Is there a reason that you cannot use another headless service or what exactly is missing on the automatic created headless service?</p>\n</blockquote>\n<p>Makes sense. As I\u2019m attempting to get this to work with a Cilium multi-cluster service mesh, services need a ClusterIP to be part of the service mesh. I can hit the fdb services from the other cluster if I modify the remote app\u2019s conn string to include just the service dns(eg, <code>foundationdb-cluster-storage-1.foundationdb.svc.cluster.local:4501</code>) which, as expected, is rejected since the cluster wants the headless dns.</p>\n<p>I\u2019m currently running down an idea that involves mirroring the fdb headless service\u2019s EndpointSplice into the remote cluster. So far that is allowing the remote app to hit the fdb cluster using the expected connection string, but the request is erroring with a timeout. I can\u2019t say yet if the error is in my approach or the cluster as the cluster status was returning an unhealthy status. At the same time, I had a local app connecting to fdb successfully. I saved that status log but it\u2019s too large to post in here.<br>\nProcess counts at this point were set to</p>\n<pre><code class=\"lang-auto\">  cluster_controller: 1\n  stateless: 1\n  log: 3\n  storage: 3\n  transaction: 1\n</code></pre>\n<p>and resources were</p>\n<pre><code class=\"lang-auto\">  requests:\n    cpu: 400m\n    memory: 3.73Gi\n  limits:\n    cpu: 1000m\n    memory: 5.73Gi\n</code></pre>\n<p><a href=\"https://pastebin.com/GFfTErv2\" rel=\"noopener nofollow ugc\">FDB status json</a> Pastebin link.<br>\nTrace logs from the cluster didn\u2019t tell me much but here\u2019s a snippet. <code>10.2.13.74:47444</code> is the remote app. 10.0 IPs are local pods, 172 ips are service IPs.</p>\n<pre><code class=\"lang-auto\">&lt;Event Severity=\"10\" Time=\"1671038819.605231\" DateTime=\"2022-12-14T17:26:59Z\" Type=\"GetClientInfoFromLeaderGotClientInfo\" ID=\"8a5ede519d76bd5f\" CommitProxy0=\"172.20.189.179:4501\" GrvProxy0=\"172.20.189.179:4501\" ClientID=\"7585bc134b4d70ec\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038820.108217\" DateTime=\"2022-12-14T17:27:00Z\" Type=\"ConnectionFrom\" ID=\"e71881de0c78e7c7\" SuppressedEventCount=\"0\" FromAddress=\"10.2.13.74:47444\" ListenAddress=\"10.0.11.247:4501\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038820.121625\" DateTime=\"2022-12-14T17:27:00Z\" Type=\"ConnectionEstablished\" ID=\"e71881de0c78e7c7\" SuppressedEventCount=\"6\" Peer=\"10.2.13.74:47444\" ConnectionId=\"0\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038820.121625\" DateTime=\"2022-12-14T17:27:00Z\" Type=\"NotifyAddressHealthy\" ID=\"0000000000000000\" SuppressedEventCount=\"0\" Address=\"10.2.13.74:47444\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038820.121625\" DateTime=\"2022-12-14T17:27:00Z\" Type=\"IncomingConnection\" ID=\"e71881de0c78e7c7\" SuppressedEventCount=\"0\" FromAddr=\"10.2.13.74:47444\" CanonicalAddr=\"10.2.13.74:47444\" IsPublic=\"0\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038820.734171\" DateTime=\"2022-12-14T17:27:00Z\" Type=\"PingLatency\" ID=\"0000000000000000\" Elapsed=\"36.0005\" PeerAddr=\"172.20.186.138:4501\" MinLatency=\"0.000660181\" MaxLatency=\"0.00109434\" MeanLatency=\"0.000771463\" MedianLatency=\"0.000750065\" P90Latency=\"0.000909328\" Count=\"36\" BytesReceived=\"82512\" BytesSent=\"23820\" TimeoutCount=\"0\" ConnectOutgoingCount=\"0\" ConnectIncomingCount=\"95\" ConnectFailedCount=\"0\" ConnectMinLatency=\"0\" ConnectMaxLatency=\"0\" ConnectMeanLatency=\"0\" ConnectMedianLatency=\"0\" ConnectP90Latency=\"0\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038820.735880\" DateTime=\"2022-12-14T17:27:00Z\" Type=\"ProcessTimeOffset\" ID=\"0000000000000000\" ProcessTime=\"1671038820.735882\" SystemTime=\"1671038820.735882\" OffsetFromSystemTime=\"0.000000\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038821.402629\" DateTime=\"2022-12-14T17:27:01Z\" Type=\"NominatingLeader\" ID=\"0000000000000000\" NextNominee=\"0000000000000000\" CurrentNominee=\"637647361392c4bb\" Key=\"foundationdb_cluster:cKicfHRW3OHgnNpYdVb2j1NHl89UKvJT\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038821.402629\" DateTime=\"2022-12-14T17:27:01Z\" Type=\"GetLeaderReply\" ID=\"0000000000000000\" SuppressedEventCount=\"0\" Coordinator=\"foundationdb-cluster-storage-2.foundationdb-cluster.foundationdb.svc.cluster.local:4501\" Nominee=\"0000000000000000\" ClusterKey=\"foundationdb_cluster:cKicfHRW3OHgnNpYdVb2j1NHl89UKvJT\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038821.402629\" DateTime=\"2022-12-14T17:27:01Z\" Type=\"MonitorLeaderAndGetClientInfoLeaderChange\" ID=\"0000000000000000\" NewLeader=\"61e6cf218d37bcc7\" Key=\"foundationdb_cluster:cKicfHRW3OHgnNpYdVb2j1NHl89UKvJT\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038821.402629\" DateTime=\"2022-12-14T17:27:01Z\" Type=\"LeaderChanged\" ID=\"69fac5258d55a17a\" ToID=\"61e6cf218d37bcc7\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038822.402673\" DateTime=\"2022-12-14T17:27:02Z\" Type=\"NominatingLeader\" ID=\"0000000000000000\" NextNominee=\"637647361392c4bb\" CurrentNominee=\"0000000000000000\" Key=\"foundationdb_cluster:cKicfHRW3OHgnNpYdVb2j1NHl89UKvJT\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038822.402673\" DateTime=\"2022-12-14T17:27:02Z\" Type=\"GetLeaderReply\" ID=\"0000000000000000\" SuppressedEventCount=\"0\" Coordinator=\"foundationdb-cluster-storage-2.foundationdb-cluster.foundationdb.svc.cluster.local:4501\" Nominee=\"637647361392c4bb\" ClusterKey=\"foundationdb_cluster:cKicfHRW3OHgnNpYdVb2j1NHl89UKvJT\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038822.402673\" DateTime=\"2022-12-14T17:27:02Z\" Type=\"MonitorLeaderAndGetClientInfoLeaderChange\" ID=\"0000000000000000\" NewLeader=\"61e6cf218d37bcc7\" Key=\"foundationdb_cluster:cKicfHRW3OHgnNpYdVb2j1NHl89UKvJT\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038822.402673\" DateTime=\"2022-12-14T17:27:02Z\" Type=\"LeaderChanged\" ID=\"69fac5258d55a17a\" ToID=\"61e6cf218d37bcc7\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"20\" Time=\"1671038822.988973\" DateTime=\"2022-12-14T17:27:02Z\" Type=\"N2_ReadError\" ID=\"e71881de0c78e7c7\" SuppressedEventCount=\"0\" ErrorCode=\"2\" Message=\"End of file\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038822.988973\" DateTime=\"2022-12-14T17:27:02Z\" Type=\"NotifyAddressFailed\" ID=\"0000000000000000\" SuppressedEventCount=\"0\" Address=\"10.2.13.74:47444\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038822.988973\" DateTime=\"2022-12-14T17:27:02Z\" Type=\"ConnectionClosed\" ID=\"e71881de0c78e7c7\" Error=\"connection_failed\" ErrorDescription=\"Network connection failed\" ErrorCode=\"1026\" SuppressedEventCount=\"0\" PeerAddr=\"10.2.13.74:47444\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038822.988973\" DateTime=\"2022-12-14T17:27:02Z\" Type=\"PeerDestroy\" ID=\"0000000000000000\" Error=\"connection_failed\" ErrorDescription=\"Network connection failed\" ErrorCode=\"1026\" SuppressedEventCount=\"0\" PeerAddr=\"10.2.13.74:47444\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038823.734205\" DateTime=\"2022-12-14T17:27:03Z\" Type=\"PingLatency\" ID=\"0000000000000000\" Elapsed=\"36.0005\" PeerAddr=\"172.20.189.179:4501\" MinLatency=\"0.000243664\" MaxLatency=\"0.00130987\" MeanLatency=\"0.000386443\" MedianLatency=\"0.000338078\" P90Latency=\"0.000474691\" Count=\"36\" BytesReceived=\"53016\" BytesSent=\"29168\" TimeoutCount=\"0\" ConnectOutgoingCount=\"0\" ConnectIncomingCount=\"0\" ConnectFailedCount=\"0\" ConnectMinLatency=\"0\" ConnectMaxLatency=\"0\" ConnectMeanLatency=\"0\" ConnectMedianLatency=\"0\" ConnectP90Latency=\"0\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038824.229319\" DateTime=\"2022-12-14T17:27:04Z\" Type=\"LocalConfigurationMetrics\" ID=\"49a14732fce62693\" Elapsed=\"5.00003\" Snapshots=\"0 -1 0\" ChangeRequestsFetched=\"0 -1 0\" Mutations=\"0 -1 0\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" TrackLatestType=\"Original\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038824.229319\" DateTime=\"2022-12-14T17:27:04Z\" Type=\"MachineLoadDetail\" ID=\"0000000000000000\" User=\"6262055\" Nice=\"13835\" System=\"1619707\" Idle=\"89714417\" IOWait=\"82706\" IRQ=\"0\" SoftIRQ=\"163208\" Steal=\"2029\" Guest=\"0\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038824.229319\" DateTime=\"2022-12-14T17:27:04Z\" Type=\"ProcessMetrics\" ID=\"0000000000000000\" Elapsed=\"5.00002\" CPUSeconds=\"0.024636\" MainThreadCPUSeconds=\"0.023005\" UptimeSeconds=\"413884\" Memory=\"235266048\" ResidentMemory=\"51638272\" UnusedAllocatedMemory=\"131072\" MbpsSent=\"0.0527166\" MbpsReceived=\"0.0494526\" DiskTotalBytes=\"15677202432\" DiskFreeBytes=\"15660347392\" DiskQueueDepth=\"0\" DiskIdleSeconds=\"5.00002\" DiskReads=\"0\" DiskReadSeconds=\"5.00002\" DiskWrites=\"0\" DiskWriteSeconds=\"5.00002\" DiskReadsCount=\"140\" DiskWritesCount=\"479348\" DiskWriteSectors=\"0\" DiskReadSectors=\"0\" FileWrites=\"0\" FileReads=\"0\" CacheReadBytes=\"0\" CacheFinds=\"0\" CacheWritesBlocked=\"0\" CacheReadsBlocked=\"0\" CachePageReadsMerged=\"0\" CacheWrites=\"0\" CacheReads=\"0\" CacheHits=\"0\" CacheMisses=\"0\" CacheEvictions=\"0\" DCID=\"[not set]\" ZoneID=\"foundationdb-cluster-storage-2\" MachineID=\"foundationdb-cluster-storage-2\" AIOSubmitCount=\"0\" AIOCollectCount=\"0\" AIOSubmitLag=\"0\" AIODiskStall=\"0\" CurrentConnections=\"12\" ConnectionsEstablished=\"0.199999\" ConnectionsClosed=\"0.199999\" ConnectionErrors=\"0\" TLSPolicyFailures=\"0\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" TrackLatestType=\"Original\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038824.229319\" DateTime=\"2022-12-14T17:27:04Z\" Type=\"MemoryMetrics\" ID=\"0000000000000000\" TotalMemory16=\"0\" ApproximateUnusedMemory16=\"0\" ActiveThreads16=\"0\" TotalMemory32=\"131072\" ApproximateUnusedMemory32=\"0\" ActiveThreads32=\"1\" TotalMemory64=\"786432\" ApproximateUnusedMemory64=\"131072\" ActiveThreads64=\"6\" TotalMemory96=\"131040\" ApproximateUnusedMemory96=\"0\" ActiveThreads96=\"1\" TotalMemory128=\"131072\" ApproximateUnusedMemory128=\"0\" ActiveThreads128=\"1\" TotalMemory256=\"524288\" ApproximateUnusedMemory256=\"0\" ActiveThreads256=\"2\" TotalMemory512=\"0\" ApproximateUnusedMemory512=\"0\" ActiveThreads512=\"0\" TotalMemory1024=\"0\" ApproximateUnusedMemory1024=\"0\" ActiveThreads1024=\"0\" TotalMemory2048=\"0\" ApproximateUnusedMemory2048=\"0\" ActiveThreads2048=\"0\" TotalMemory4096=\"0\" ApproximateUnusedMemory4096=\"0\" ActiveThreads4096=\"0\" TotalMemory8192=\"0\" ApproximateUnusedMemory8192=\"0\" ActiveThreads8192=\"0\" TotalMemory16384=\"0\" ApproximateUnusedMemory16384=\"0\" ActiveThreads16384=\"0\" HugeArenaMemory=\"92912\" DCID=\"[not set]\" ZoneID=\"foundationdb-cluster-storage-2\" MachineID=\"foundationdb-cluster-storage-2\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038824.229319\" DateTime=\"2022-12-14T17:27:04Z\" Type=\"FastAllocMemoryUsage\" ID=\"0000000000000000\" TotalMemory=\"1703904\" UnusedMemory=\"131072\" Utilization=\"92.307548%\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038824.229319\" DateTime=\"2022-12-14T17:27:04Z\" Type=\"NetworkMetrics\" ID=\"0000000000000000\" Elapsed=\"5.00002\" CantSleep=\"0\" WontSleep=\"0\" Yields=\"1\" YieldCalls=\"141\" YieldCallsTrue=\"0\" RunLoopProfilingSignals=\"0\" YieldBigStack=\"0\" RunLoopIterations=\"393\" TimersExecuted=\"572\" TasksExecuted=\"562\" ASIOEventsProcessed=\"428\" ReadCalls=\"257\" WriteCalls=\"123\" ReadProbes=\"124\" WriteProbes=\"0\" PacketsRead=\"126\" PacketsGenerated=\"126\" WouldBlock=\"124\" LaunchTime=\"0\" ReactTime=\"0.000844479\" DCID=\"[not set]\" ZoneID=\"foundationdb-cluster-storage-2\" MachineID=\"foundationdb-cluster-storage-2\" SlowTask2M=\"1\" PriorityBusy0=\"4.9861\" PriorityStarvedBelow1=\"0.013937\" PriorityMaxStarvedBelow1=\"0.00108194\" PriorityStarvedBelow3500=\"0.013937\" PriorityMaxStarvedBelow3500=\"0.00108194\" PriorityStarvedBelow7000=\"0.013937\" PriorityMaxStarvedBelow7000=\"0.00108194\" PriorityStarvedBelow7500=\"0.0123634\" PriorityMaxStarvedBelow7500=\"0.00108194\" PriorityStarvedBelow8500=\"0.0119841\" PriorityMaxStarvedBelow8500=\"0.00108194\" PriorityStarvedBelow8900=\"0.0118778\" PriorityMaxStarvedBelow8900=\"0.00108194\" PriorityStarvedBelow10500=\"0.00340915\" PriorityMaxStarvedBelow10500=\"0.00108194\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" TrackLatestType=\"Original\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1671038824.229319\" DateTime=\"2022-12-14T17:27:04Z\" Type=\"MachineMetrics\" ID=\"0000000000000000\" Elapsed=\"5.00002\" MbpsSent=\"0\" MbpsReceived=\"0\" OutSegs=\"0\" RetransSegs=\"0\" CPUSeconds=\"0.662288\" TotalMemory=\"8080842752\" CommittedMemory=\"1159446528\" AvailableMemory=\"6921396224\" DCID=\"[not set]\" ZoneID=\"foundationdb-cluster-storage-2\" MachineID=\"foundationdb-cluster-storage-2\" ThreadID=\"3996680950543339390\" Machine=\"172.20.194.130:4501\" LogGroup=\"foundationdb-cluster\" Roles=\"CD\" TrackLatestType=\"Original\" /&gt;\n</code></pre>\n<p>Yesterday I upgraded the EKS clusters to a larger instance type that can handle giving the FDB processes the recommended 8gb and 1cpu in case that was contributing. I haven\u2019t completed reconnecting the cluster mesh since the migration, so still unknown if that was contributing to the timeouts in the remote cluster. So far the cluster status is healthy.</p>\n<blockquote>\n<p>If you mean by <code>generationID</code> this string <code>9Iscf7sSnSCx3uJQH3JGf96GvfSQ5wPQ</code>, it\u2019s expected that the generationID changes if new coordinators are selected. That generationID is used to distinguish different coordinator \u201cgeneration\u201d.</p>\n</blockquote>\n<p>I see that the docs say <code>seedConnectionString</code> isn\u2019t used after the initial reconcilliation, but <code>partialConnectionString</code> doesn\u2019t say anything about that. You\u2019re saying that <code>partialConnectionString</code> also only applies to the initial reconcilliation?</p>\n<pre><code class=\"lang-auto\">partialConnectionString: \n    databaseName: foundationdb_cluster\n    generationID: cKicfHRW3OHgnNpYdVb2j1NHl89UKvJT\n</code></pre>\n<blockquote>\n<p>The connection string value that you showed there, is that the connection string from <code>/var/dynamic-conf/fdb.cluster</code> or the content from <code>/var/fdb/data/fdb.cluster</code>? The latter (<code>/var/fdb/data/...</code>) is the connection string file managed by the fdbserver process itself, so it\u2019s expected that you see IP addresses there, since the fdbserver process was resolving those.</p>\n</blockquote>\n<p>I saw the conn string with the <code>&lt;ip&gt;(fromHostname)</code> in the ConfigMap, which would be the dynamic-conf mount. I haven\u2019t encountered that since.</p>\n<p>Thanks for all the help.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2022-12-15T20:22:38.596Z",
        "reply_count": 0,
        "reply_to_post_number": 4,
        "quote_count": 1,
        "incoming_link_count": 16,
        "reads": 35,
        "readers_count": 34,
        "score": 87.0,
        "yours": false,
        "topic_id": 3679,
        "topic_slug": "usednsinclusterfile-connection-string-invalid",
        "display_username": "KrKroening",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#pod-s-hostname-and-subdomain-fields",
            "internal": false,
            "reflection": false,
            "title": "DNS for Services and Pods | Kubernetes",
            "clicks": 3
          },
          {
            "url": "https://pastebin.com/GFfTErv2",
            "internal": false,
            "reflection": false,
            "title": "FDB status json - Pastebin.com",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1190,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/usednsinclusterfile-connection-string-invalid/3679/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 12151,
        "name": "KrKroening",
        "username": "KRKroening",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krkroening/{size}/1473_2.png",
        "created_at": "2022-12-22T00:28:28.408Z",
        "cooked": "<p>Wanted to post an update as I have finally managed to get FoundationDB working across clusters. In the end, it ended up being pretty simple. It was just a journey of understanding all the pieces to get there.</p>\n<p>I have two clusters deployed on EKS joined via VPC-peering. Cilium is running on both clusters and both are part of the cluster mesh. This solution would likely work with any cluster network setup that grants direct pod IP access.</p>\n<p>The FoundationDBCluster routing options were set to:</p>\n<pre><code class=\"lang-auto\">  useDNSInClusterFile: true\n  headlessService: true\n  publicIpSource: pod\n</code></pre>\n<p>The biggest change was changing <code>publicIpSource</code> from \u2018service\u2019 to \u2018pod\u2019. I discovered that when I did a <code>fdbcli status</code> from my remote cluster, it returned an error that it couldn\u2019t reach the cluster coordinator, but it was trying to resolve using the service IP (the cluster_controller\u2019s public IP). Since only the pod IPs are visible across the clusters, my remote service couldn\u2019t resolve the controller. Upon learning the public IP was used in this way, I changed the <code>publicIpSource</code> to \u2018pod\u2019.</p>\n<p>Since the headless service is still used, using the pod public IP source doesn\u2019t change the connection string so we still get the benefit of the DNS names.</p>\n<p>The other half of the puzzle is using the EndpointSlice from the FDB headless service and mirroring that over to the remote cluster where another headless service lives. For testing purposes, that mirroring process is done manually. To automate that, I\u2019m looking into something like an operator/script/watcher and utilizing the Cilium service mesh. We need something to mirror the fdb cluster-file anyway, so it\u2019s not as inconvenient as I first thought it would be.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2022-12-22T00:28:28.408Z",
        "reply_count": 2,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 29,
        "readers_count": 28,
        "score": 35.8,
        "yours": false,
        "topic_id": 3679,
        "topic_slug": "usednsinclusterfile-connection-string-invalid",
        "display_username": "KrKroening",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1190,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/usednsinclusterfile-connection-string-invalid/3679/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 12169,
        "name": "Johannes Scheuermann",
        "username": "johscheuer",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
        "created_at": "2022-12-27T08:55:35.155Z",
        "cooked": "<p>Great to hear that you managed to setup everything. If you want you can write a setup document in the fdb-kubernetes-operator repo or if you want to write a blog post about this I\u2019m happy to reference it from the operator repo.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2022-12-27T08:55:35.155Z",
        "reply_count": 0,
        "reply_to_post_number": 6,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 28,
        "readers_count": 27,
        "score": 5.6,
        "yours": false,
        "topic_id": 3679,
        "topic_slug": "usednsinclusterfile-connection-string-invalid",
        "display_username": "Johannes Scheuermann",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 1190,
          "username": "KRKroening",
          "name": "KrKroening",
          "avatar_template": "/user_avatar/forums.foundationdb.org/krkroening/{size}/1473_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 849,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/usednsinclusterfile-connection-string-invalid/3679/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 12240,
        "name": "mason",
        "username": "mason",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mason/{size}/1145_2.png",
        "created_at": "2023-01-17T14:02:14.045Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"KRKroening\" data-post=\"6\" data-topic=\"3679\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/krkroening/48/1473_2.png\" class=\"avatar\"> KRKroening:</div>\n<blockquote>\n<p>Wanted to post an update as I have finally managed to get FoundationDB working across clusters. In the end, it ended up being pretty simple. It was just a journey of understanding all the pieces to get there.</p>\n<p>I have two clusters deployed on EKS joined via VPC-peering. Cilium is running on both clusters and both are part of the cluster mesh. This solution would likely work with any cluster network setup that grants direct pod IP access.</p>\n</blockquote>\n</aside>\n<p>Hi <a class=\"mention\" href=\"/u/krkroening\">@KRKroening</a>,</p>\n<p>Could you share some information about your multi clusters?<br>\nYour multi clusters use multi DC or you setup each cluster separate manual?</p>\n<p>I plan to use multi cluster but I don\u2019t have final solution, it\u2019s good if I have your help.<br>\nThank</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2023-01-17T14:02:14.045Z",
        "reply_count": 2,
        "reply_to_post_number": 6,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 23,
        "readers_count": 22,
        "score": 14.6,
        "yours": false,
        "topic_id": 3679,
        "topic_slug": "usednsinclusterfile-connection-string-invalid",
        "display_username": "mason",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 970,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/usednsinclusterfile-connection-string-invalid/3679/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 12246,
        "name": "Johannes Scheuermann",
        "username": "johscheuer",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
        "created_at": "2023-01-18T10:46:38.060Z",
        "cooked": "<p>Just as reference if others have the same question: <a href=\"https://forums.foundationdb.org/t/run-foundationdb-cluster-on-multi-kuberbetes-clusters/3741/3\" class=\"inline-onebox\">Run FoundationDB cluster on multi Kuberbetes clusters - #3 by johscheuer</a></p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2023-01-18T10:46:38.060Z",
        "reply_count": 0,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 21,
        "readers_count": 20,
        "score": 19.2,
        "yours": false,
        "topic_id": 3679,
        "topic_slug": "usednsinclusterfile-connection-string-invalid",
        "display_username": "Johannes Scheuermann",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/run-foundationdb-cluster-on-multi-kuberbetes-clusters/3741/3",
            "internal": true,
            "reflection": false,
            "title": "Run FoundationDB cluster on multi Kuberbetes clusters",
            "clicks": 16
          }
        ],
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 970,
          "username": "mason",
          "name": "mason",
          "avatar_template": "/user_avatar/forums.foundationdb.org/mason/{size}/1145_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 849,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/usednsinclusterfile-connection-string-invalid/3679/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 12259,
        "name": "KrKroening",
        "username": "KRKroening",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krkroening/{size}/1473_2.png",
        "created_at": "2023-01-19T16:34:53.098Z",
        "cooked": "<p>I have FDB running on a single cluster and my services running on the second cluster. Sounds like the link johscheuer provided aligns more with that you are looking for.</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2023-01-19T16:34:53.098Z",
        "reply_count": 2,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 21,
        "readers_count": 20,
        "score": 24.2,
        "yours": false,
        "topic_id": 3679,
        "topic_slug": "usednsinclusterfile-connection-string-invalid",
        "display_username": "KrKroening",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 970,
          "username": "mason",
          "name": "mason",
          "avatar_template": "/user_avatar/forums.foundationdb.org/mason/{size}/1145_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1190,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/usednsinclusterfile-connection-string-invalid/3679/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 12260,
        "name": "mason",
        "username": "mason",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mason/{size}/1145_2.png",
        "created_at": "2023-01-19T16:37:25.627Z",
        "cooked": "<p>Hi <a class=\"mention\" href=\"/u/krkroening\">@KRKroening</a></p>\n<p>Can you help me a little bit in this post?<br>\n<a href=\"https://forums.foundationdb.org/t/run-foundationdb-cluster-on-multi-kuberbetes-clusters/3741/4\">https://forums.foundationdb.org/t/run-foundationdb-cluster-on-multi-kuberbetes-clusters/3741/4</a></p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2023-01-19T16:37:25.627Z",
        "reply_count": 0,
        "reply_to_post_number": 10,
        "quote_count": 0,
        "incoming_link_count": 8,
        "reads": 22,
        "readers_count": 21,
        "score": 44.4,
        "yours": false,
        "topic_id": 3679,
        "topic_slug": "usednsinclusterfile-connection-string-invalid",
        "display_username": "mason",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/run-foundationdb-cluster-on-multi-kuberbetes-clusters/3741/4",
            "internal": true,
            "reflection": false,
            "title": "Run FoundationDB cluster on multi Kuberbetes clusters",
            "clicks": 6
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 1190,
          "username": "KRKroening",
          "name": "KrKroening",
          "avatar_template": "/user_avatar/forums.foundationdb.org/krkroening/{size}/1473_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 970,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/usednsinclusterfile-connection-string-invalid/3679/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 12280,
        "name": "mason",
        "username": "mason",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mason/{size}/1145_2.png",
        "created_at": "2023-01-21T14:23:48.651Z",
        "cooked": "<p>Hi <a class=\"mention\" href=\"/u/krkroening\">@KRKroening</a> ,<br>\nWould you share your cluster information like instance type, which configuration for cluster by eksctl, network, \u2026? for successful deployment FDB operator on eks.</p>\n<p>I create eks cluster and deploy FDB, it deploy fdb-kubernetes-operator and cluster-controller only. For storage pod, log pod, transaction pod, \u2026 those cannot be assigned to any nodes in cluster, so those don\u2019t have ip and cannot connect to them. Those pods are in pending state, not start.</p>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2023-01-21T14:23:48.651Z",
        "reply_count": 1,
        "reply_to_post_number": 10,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 23,
        "readers_count": 22,
        "score": 9.6,
        "yours": false,
        "topic_id": 3679,
        "topic_slug": "usednsinclusterfile-connection-string-invalid",
        "display_username": "mason",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 1190,
          "username": "KRKroening",
          "name": "KrKroening",
          "avatar_template": "/user_avatar/forums.foundationdb.org/krkroening/{size}/1473_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 970,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/usednsinclusterfile-connection-string-invalid/3679/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 12283,
        "name": "Johannes Scheuermann",
        "username": "johscheuer",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
        "created_at": "2023-01-23T09:15:29.448Z",
        "cooked": "<p>Like I commented in the other thread that\u2019s an issue with your EKS cluster configuration that prevents that EBS volumes are created. You probably want to check this guide: <a href=\"https://docs.aws.amazon.com/eks/latest/userguide/storage-classes.html\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Storage classes - Amazon EKS</a> and debug the issue.</p>",
        "post_number": 13,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2023-01-23T09:15:29.448Z",
        "reply_count": 0,
        "reply_to_post_number": 12,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 24,
        "readers_count": 23,
        "score": 9.8,
        "yours": false,
        "topic_id": 3679,
        "topic_slug": "usednsinclusterfile-connection-string-invalid",
        "display_username": "Johannes Scheuermann",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://docs.aws.amazon.com/eks/latest/userguide/storage-classes.html",
            "internal": false,
            "reflection": false,
            "title": "Storage classes - Amazon EKS",
            "clicks": 1
          }
        ],
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 970,
          "username": "mason",
          "name": "mason",
          "avatar_template": "/user_avatar/forums.foundationdb.org/mason/{size}/1145_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 849,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/usednsinclusterfile-connection-string-invalid/3679/13",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      12081,
      12098,
      12112,
      12130,
      12133,
      12151,
      12169,
      12240,
      12246,
      12259,
      12260,
      12280,
      12283
    ]
  },
  "timeline_lookup": [
    [
      1,
      1055
    ],
    [
      2,
      1051
    ],
    [
      3,
      1048
    ],
    [
      4,
      1042
    ],
    [
      5,
      1041
    ],
    [
      6,
      1035
    ],
    [
      7,
      1030
    ],
    [
      8,
      1008
    ],
    [
      9,
      1007
    ],
    [
      10,
      1006
    ],
    [
      12,
      1004
    ],
    [
      13,
      1003
    ]
  ],
  "suggested_topics": [],
  "tags": [
    "operator"
  ],
  "tags_descriptions": {},
  "fancy_title": "useDNSInClusterFile - Connection string invalid",
  "id": 3679,
  "title": "useDNSInClusterFile - Connection string invalid",
  "posts_count": 13,
  "created_at": "2022-12-01T22:46:28.002Z",
  "views": 1518,
  "reply_count": 9,
  "like_count": 0,
  "last_posted_at": "2023-01-23T09:15:29.448Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "usednsinclusterfile-connection-string-invalid",
  "category_id": 7,
  "word_count": 6734,
  "deleted_at": null,
  "user_id": 1190,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_3679",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 13,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 2,
  "participant_count": 3,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Run FoundationDB cluster on multi Kuberbetes clusters",
      "id": 3741,
      "title": "Run FoundationDB cluster on multi Kuberbetes clusters",
      "slug": "run-foundationdb-cluster-on-multi-kuberbetes-clusters",
      "posts_count": 21,
      "reply_count": 17,
      "highest_post_number": 22,
      "image_url": null,
      "created_at": "2023-01-17T15:19:19.604Z",
      "last_posted_at": "2023-02-06T09:43:57.894Z",
      "bumped": true,
      "bumped_at": "2023-02-06T09:53:51.968Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1906,
      "category_id": 16,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 970,
            "username": "mason",
            "name": "mason",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mason/{size}/1145_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 849,
            "username": "johscheuer",
            "name": "Johannes Scheuermann",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Proposal: Don&rsquo;t identify a coordinator based on its IP",
      "id": 502,
      "title": "Proposal: Don't identify a coordinator based on its IP",
      "slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
      "posts_count": 26,
      "reply_count": 13,
      "highest_post_number": 26,
      "image_url": null,
      "created_at": "2018-06-09T13:09:51.305Z",
      "last_posted_at": "2019-08-06T20:24:41.013Z",
      "bumped": true,
      "bumped_at": "2019-08-06T20:24:41.013Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 10,
      "views": 8425,
      "category_id": 8,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 302,
            "username": "basgys",
            "name": "Bastien Gysler",
            "avatar_template": "/user_avatar/forums.foundationdb.org/basgys/{size}/291_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 339,
            "username": "Zatte",
            "name": "Mikael Rapp ",
            "avatar_template": "/user_avatar/forums.foundationdb.org/zatte/{size}/344_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 260,
            "username": "jared2501",
            "name": "Jared2501",
            "avatar_template": "/user_avatar/forums.foundationdb.org/jared2501/{size}/266_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 545,
            "username": "rishabh",
            "name": "Rishabh",
            "avatar_template": "/user_avatar/forums.foundationdb.org/rishabh/{size}/540_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 614,
            "username": "qrpike",
            "name": "Quinton Pike",
            "avatar_template": "/user_avatar/forums.foundationdb.org/qrpike/{size}/618_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Deployment with custom fdb.cluster file",
      "id": 592,
      "title": "Deployment with custom fdb.cluster file",
      "slug": "deployment-with-custom-fdb-cluster-file",
      "posts_count": 8,
      "reply_count": 4,
      "highest_post_number": 8,
      "image_url": null,
      "created_at": "2018-07-26T23:00:18.994Z",
      "last_posted_at": "2018-07-27T23:44:31.722Z",
      "bumped": true,
      "bumped_at": "2018-07-27T23:44:31.722Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 4329,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 311,
            "username": "ThomasJ",
            "name": "Thomas Johson",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Issues with V6.2 TLS Cluster",
      "id": 1904,
      "title": "Issues with V6.2 TLS Cluster",
      "slug": "issues-with-v6-2-tls-cluster",
      "posts_count": 12,
      "reply_count": 8,
      "highest_post_number": 12,
      "image_url": null,
      "created_at": "2020-01-23T17:31:13.342Z",
      "last_posted_at": "2020-01-28T16:35:52.821Z",
      "bumped": true,
      "bumped_at": "2020-01-28T16:35:52.821Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1620,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 643,
            "username": "lehu",
            "name": "Leo Hu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Connecting to the database using `fdbcli` results in an error",
      "id": 1841,
      "title": "Connecting to the database using `fdbcli` results in an error",
      "slug": "connecting-to-the-database-using-fdbcli-results-in-an-error",
      "posts_count": 8,
      "reply_count": 4,
      "highest_post_number": 8,
      "image_url": null,
      "created_at": "2019-12-14T07:23:08.203Z",
      "last_posted_at": "2019-12-17T15:06:03.064Z",
      "bumped": true,
      "bumped_at": "2019-12-17T15:06:03.064Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 2426,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 700,
            "username": "viveksinghggits",
            "name": "Vivek Singh",
            "avatar_template": "/user_avatar/forums.foundationdb.org/viveksinghggits/{size}/737_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 3,
            "username": "john_brownlee",
            "name": "John Brownlee",
            "avatar_template": "/user_avatar/forums.foundationdb.org/john_brownlee/{size}/22_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 849,
        "username": "johscheuer",
        "name": "Johannes Scheuermann",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
        "post_count": 5,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 1190,
        "username": "KRKroening",
        "name": "KrKroening",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krkroening/{size}/1473_2.png",
        "post_count": 5,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 970,
        "username": "mason",
        "name": "mason",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mason/{size}/1145_2.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      }
    ],
    "created_by": {
      "id": 1190,
      "username": "KRKroening",
      "name": "KrKroening",
      "avatar_template": "/user_avatar/forums.foundationdb.org/krkroening/{size}/1473_2.png"
    },
    "last_poster": {
      "id": 849,
      "username": "johscheuer",
      "name": "Johannes Scheuermann",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png"
    },
    "links": [
      {
        "url": "https://forums.foundationdb.org/t/run-foundationdb-cluster-on-multi-kuberbetes-clusters/3741/3",
        "title": "Run FoundationDB cluster on multi Kuberbetes clusters",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 16,
        "user_id": 849,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#pod-s-hostname-and-subdomain-fields",
        "title": "DNS for Services and Pods | Kubernetes",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 7,
        "user_id": 849,
        "domain": "kubernetes.io",
        "root_domain": "kubernetes.io"
      },
      {
        "url": "https://github.com/FoundationDB/fdb-kubernetes-operator/blob/main/Dockerfile#L7",
        "title": "fdb-kubernetes-operator/Dockerfile at main \u00b7 FoundationDB/fdb-kubernetes-operator \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 6,
        "user_id": 849,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://forums.foundationdb.org/t/run-foundationdb-cluster-on-multi-kuberbetes-clusters/3741/4",
        "title": "Run FoundationDB cluster on multi Kuberbetes clusters",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 6,
        "user_id": 970,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/main/flow/include/flow/Hostname.h#L56",
        "title": "foundationdb/Hostname.h at main \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 4,
        "user_id": 1190,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/FoundationDB/fdb-kubernetes-operator/tree/main/config/tests/dns",
        "title": "fdb-kubernetes-operator/config/tests/dns at main \u00b7 FoundationDB/fdb-kubernetes-operator \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 1190,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://docs.aws.amazon.com/eks/latest/userguide/storage-classes.html",
        "title": "Storage classes - Amazon EKS",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 849,
        "domain": "docs.aws.amazon.com",
        "root_domain": "amazon.com"
      }
    ]
  },
  "bookmarks": []
}