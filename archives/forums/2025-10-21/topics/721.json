{
  "post_stream": {
    "posts": [
      {
        "id": 2146,
        "name": "Ashish Motivala",
        "username": "ashishnm",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/b5e925/{size}.png",
        "created_at": "2018-09-21T15:41:31.859Z",
        "cooked": "<p>We operate FDB in AWS with EC2 instances and EBS for all storage. While we can scale out FDB many times by adding more EC2 instances, there are cases when we need to migrate all the data from 1 FDB cluster to another. We call this a \u201cwiggle\u201d. We wiggle for reasons like 1) the AWS instances have reached their EBS throughput limit and we upsize the instances, 2) the SQLite btree is too fragmented, etc. The wiggle is achieved by setting up a new cluster, starting with its processes excluded. And then including new servers\u2019 processes and excluding old servers\u2019 processes until all old servers\u2019 processes are excluded.</p>\n<p>We currently have a cluster with 288 storage procs + other roles and say 1.5K clients connecting it (say 1/2 short lived monitoring and 1/2 persistent clients). This is the largest cluster we\u2019ve built thus far. We started the wiggle over to a new cluster by adding a similar number of worker processes as <em>excluded</em>. As soon as we did that the cluster went down. We went through several recoveries and cluster coordinator re-elections. And we had to shutdown the new cluster processes in order to get the old cluster to recover successfully.</p>\n<p>We suspect that the cluster controller was overloaded, and unable to heartbeat with the coordinators in a timely matter. And the coordinators nominated a new CC. This kept happening multiple times. We also saw the CC controller being trigger happy and finding a better master and killing the master with log messages of type BetterMasterExists. And then of course the controller itself got replaced.</p>\n<ol>\n<li>Have you seen similar issues with large clusters?</li>\n<li>There is clearly a limit with the number of workers a CC can handle. Adjusting timeout knobs can probably make this scale higher.</li>\n<li>Wiggles from one large cluster to another need different and more cumbersome steps.</li>\n</ol>\n<p>Pl. can you share your experiences with large clusters? And how do you achieve migration to another larger cluster if you do that?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2018-09-23T19:08:22.700Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 237,
        "reads": 76,
        "readers_count": 75,
        "score": 1209.2,
        "yours": false,
        "topic_id": 721,
        "topic_slug": "migrating-from-a-large-cluster-to-another",
        "display_username": "Ashish Motivala",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 4,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/troubles-scaling-up-the-cluster/751/2",
            "internal": true,
            "reflection": true,
            "title": "Troubles scaling up the cluster",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 16,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/migrating-from-a-large-cluster-to-another/721/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 2149,
        "name": "Ashish Motivala",
        "username": "ashishnm",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/b5e925/{size}.png",
        "created_at": "2018-09-22T16:16:05.972Z",
        "cooked": "<blockquote>\n<p>We also saw the CC controller being trigger happy and finding a better master and killing the master with log messages of type BetterMasterExists.<br>\nWe figured out why this was happening. We have the desired tlogs set to 10, while the we use 6 machine ids to locality placement. And we introduced new machine ids as part of the wiggle, which resulting in an attempt to recruit more tlogs.</p>\n</blockquote>\n<p>But the cluster coordinator limits in terms of number of clients and workers in the cluster isn\u2019t well understood.<br>\nWould be great if folks running large clusters can share their experiences.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2018-09-22T16:16:05.972Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 72,
        "readers_count": 71,
        "score": 44.4,
        "yours": false,
        "topic_id": 721,
        "topic_slug": "migrating-from-a-large-cluster-to-another",
        "display_username": "Ashish Motivala",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 16,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/migrating-from-a-large-cluster-to-another/721/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2152,
        "name": "Mike McMahon",
        "username": "killertypo",
        "avatar_template": "/user_avatar/forums.foundationdb.org/killertypo/{size}/35_2.png",
        "created_at": "2018-09-24T16:38:04.093Z",
        "cooked": "<p>Howdy - you didn\u2019t happen to mention the storage engine you are utilizing (SSD(2) or Memory) but this is something we at wavefront happen to do quite often.</p>\n<p>We run clusters operating at millions of writes per second and tens of thousands of reads (depending on load)</p>\n<p>We call these operations a Fleet Replacement, as sometimes we need to increase total resources and want to start by dropping a fresh new fleet of hardware that is say 2x as powerful and running a slightly different number of machines.</p>\n<p>Now to what you probably care about <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=6\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"></p>\n<p>While our primary usecase right now is FDB3 (and we are migrating slowly to FDB5 re: <a href=\"https://forums.foundationdb.org/t/how-to-prevent-tlogs-from-overcommitting/695\">How to prevent tlogs from overcommitting</a>) a lot of our techniques for a safe replacement and preventing outages have applied or worked well.</p>\n<p>I\u2019d first ask if you have the ability to temporarily suspend workloads in your cluster? Also what kind of IO throughput do you have? and what kind of storage engine are you utilizing?</p>\n<p>Typically when we are working with clusters that are between 250 -&gt; 400procs we suppress all workloads and enqueue them to be processed later so that we can join a new host into the cluster without worry of the tlogs becoming overwhelmed and our CC wreaking havoc. We then slowly ramp up the enqueued workload while the cluster rebalances and shifts the load (which is much faster on the memory tier vs. ssd tier, and if you are already IO constrained on the SSD tier your workloads rebalancing will actually be quite costly).</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2018-09-24T16:38:04.093Z",
        "reply_count": 1,
        "reply_to_post_number": 1,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 70,
        "readers_count": 69,
        "score": 34.0,
        "yours": false,
        "topic_id": 721,
        "topic_slug": "migrating-from-a-large-cluster-to-another",
        "display_username": "Mike McMahon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/how-to-prevent-tlogs-from-overcommitting/695",
            "internal": true,
            "reflection": false,
            "title": "How to prevent tlogs from overcommitting",
            "clicks": 9
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 16,
          "username": "ashishnm",
          "name": "Ashish Motivala",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/b5e925/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 43,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/migrating-from-a-large-cluster-to-another/721/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2154,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2018-09-24T17:58:57.324Z",
        "cooked": "<p>So good to know this is not only a problem for us <img src=\"https://emoji.discourse-cdn.com/twitter/wink.png?v=6\" title=\":wink:\" class=\"emoji\" alt=\":wink:\"></p>\n<p>We run on SSD, but the Storage engine and TLog should be irrelevant for the specific issue we ran into. It seems that the issue is that with too many processes the coordinators and the CC run into problem. More specifically, the ClusterCoordinator loses a heartbeat window and reelection happens (this then happens ever 10-30 seconds, so we stopped making progress. We ran into this problem when we grew the cluster to ~580 processes. Additionally many clients (probably in the order of 1000) were connected to the cluster as well.</p>\n<p>Stopping load to the cluster is not an option for us (yet). Doing all maintenance online is a hard business requirement for us. Currently we solve the issue by cutting down the number of clients. We also add only one machine at a time and remove an old machine. This means the whole process takes very long and is very painful.</p>\n<p>There\u2019s a knob to change polling frequency for the Cluster Controller. My understanding is, that if we increase this value the coordinators will wait longer before they react to failures but it might help with the issue. We are currently testing this on a non-production cluster.</p>\n<p>How many clients do you typically have connected to an FDB cluster? Did you implement some kind of proxy service for this?</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2018-09-24T17:59:05.895Z",
        "reply_count": 0,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 69,
        "readers_count": 68,
        "score": 33.8,
        "yours": false,
        "topic_id": 721,
        "topic_slug": "migrating-from-a-large-cluster-to-another",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/troubles-scaling-up-the-cluster/751/29",
            "internal": true,
            "reflection": true,
            "title": "Troubles scaling up the cluster",
            "clicks": 1
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 43,
          "username": "killertypo",
          "name": "Mike McMahon",
          "avatar_template": "/user_avatar/forums.foundationdb.org/killertypo/{size}/35_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/migrating-from-a-large-cluster-to-another/721/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2159,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2018-09-24T23:12:45.521Z",
        "cooked": "<p>This is indeed a limitation in the current system. The cluster controller maintains connections with everybody and does some work related to failure monitoring that can end up being saturating when there are a lot of server and/or client processes</p>\n<p>Starting in 5.1, the cluster controller can be configured to run on its own process, which gives a little bit more headroom and makes things a lot more predictable (you don\u2019t have to worry about it sharing a process with another role that\u2019s using a lot of CPU). It doesn\u2019t change the underlying limitation, but it does make things a bit better.</p>\n<p>I think it\u2019s possible to turn down how often other processes are checking in with the cluster controller, which can reduce the load put on it at the cost of increased response times to failures. The relevant knobs in the current code are <code>SERVER_REQUEST_INTERVAL</code> and <code>CLIENT_REQUEST_INTERNAL</code> (<a href=\"https://github.com/apple/foundationdb/blob/a10ac552a5bca9324e815b6b6d16b13f643059b9/flow/Knobs.cpp#L37\">https://github.com/apple/foundationdb/blob/a10ac552a5bca9324e815b6b6d16b13f643059b9/flow/Knobs.cpp#L37</a>). I don\u2019t remember what it\u2019s named in 3.0 releases, as I think it used to exist as only one knob, but hopefully it\u2019s not too hard to find. As a caveat, I don\u2019t think I\u2019ve ever tried changing these knobs, so I can\u2019t guarantee there aren\u2019t any unexpected side-effects.</p>\n<p>As you point out, you can also try to adjust how long a cluster controller is allowed to not respond before the coordinators elect a new one.</p>\n<p>One other option when migrating to a new set of hardware that may or may not be feasible in your situation is to do it piecemeal. You can choose a smaller number of hosts to migrate at one time that doesn\u2019t saturate the cluster controller, and when those finish start another batch. Going this route will probably result in extra recoveries.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2018-09-24T23:13:05.127Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 66,
        "readers_count": 65,
        "score": 28.2,
        "yours": false,
        "topic_id": 721,
        "topic_slug": "migrating-from-a-large-cluster-to-another",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/blob/a10ac552a5bca9324e815b6b6d16b13f643059b9/flow/Knobs.cpp#L37",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/Knobs.cpp at a10ac552a5bca9324e815b6b6d16b13f643059b9 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 6
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/migrating-from-a-large-cluster-to-another/721/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2160,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2018-09-25T01:01:59.945Z",
        "cooked": "<p>Thanks for your answer. I thought we could do stuff like that but we can\u2019t change knobs in production without testing them thoroughly first. Currently we are doing a piecemeal migration. This will take much longer.</p>\n<p>But this will be a problem. The load on our cluster is steadily increasing as we are growing very fast. So we\u2019ll have to find ways to improve this. We do not only add machines to migrate, we also grow the size of the cluster.</p>\n<p>Do you have some pointers on those things:</p>\n<ol>\n<li>How expensive are clients to this compared to fdbserver processes (apart from the load they generate)? My understanding is that they also ping the cluster controller and they also need to communicate with the coordinators, the proxies and the storage nodes.</li>\n<li>My understanding is, that opening a database is quite expensive. The client needs to connect to all coordinators, ask for the leader and then connect to the leader to get the ClientDBInfo. We run fdbcli --exec \u2018status json\u2019 in many places to gather metrics. Do you have any experience that could help us quantify the cost of this?</li>\n</ol>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2018-09-25T01:01:59.945Z",
        "reply_count": 1,
        "reply_to_post_number": 5,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 65,
        "readers_count": 64,
        "score": 18.0,
        "yours": false,
        "topic_id": 721,
        "topic_slug": "migrating-from-a-large-cluster-to-another",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 12,
          "username": "ajbeamon",
          "name": "A.J. Beamon",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/migrating-from-a-large-cluster-to-another/721/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2170,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2018-09-25T21:15:11.999Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"6\" data-topic=\"721\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>How expensive are clients to this compared to fdbserver processes (apart from the load they generate)? My understanding is that they also ping the cluster controller and they also need to communicate with the coordinators, the proxies and the storage nodes.</p>\n</blockquote>\n</aside>\n<p>The clients maintain connections with everyone they talk to, so the processes you named will have some baseline amount of communication with each client. Probably the most expensive bit outside of actual load is going to be the failure monitoring activity that they do with the cluster controller.</p>\n<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"6\" data-topic=\"721\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>My understanding is, that opening a database is quite expensive. The client needs to connect to all coordinators, ask for the leader and then connect to the leader to get the ClientDBInfo. We run fdbcli --exec \u2018status json\u2019 in many places to gather metrics. Do you have any experience that could help us quantify the cost of this?</p>\n</blockquote>\n</aside>\n<p>I\u2019m not actually sure offhand how expensive it is to setup a new connection to the cluster. It does do the things you describe, but I couldn\u2019t quantify how expensive that actually is. I do know that collecting status can be quite costly, so if you are doing this frequently you may experience some trouble. Particularly in larger clusters, status can cause slow tasks that starve other tasks on the process (this is worse in 3.0 because it could be sharing a process with a latency-sensitive role). If you have frequent status calls, this can be also end up utilizing a large percentage of your CPU. For what it\u2019s worth, in 6.0 there is some work to make status calls significantly less costly.</p>\n<p>On the other hand, the calls through fdbcli will end up closing the connections, so there aren\u2019t any of the ongoing client maintenance costs.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2018-09-25T21:15:11.999Z",
        "reply_count": 1,
        "reply_to_post_number": 6,
        "quote_count": 1,
        "incoming_link_count": 6,
        "reads": 63,
        "readers_count": 62,
        "score": 47.6,
        "yours": false,
        "topic_id": 721,
        "topic_slug": "migrating-from-a-large-cluster-to-another",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/migrating-from-a-large-cluster-to-another/721/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2171,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2018-09-25T22:20:46.706Z",
        "cooked": "<p>Thanks for your answer!</p>\n<p>we had issues with <code>status json</code> before. We are considering setting the STATUS_MIN_TIME_BETWEEN_REQUESTS knob to something like 5 seconds to mitigate against this. We also reduced the number of monitoring clients already.</p>\n<p>This obviously will all only work in the short term. Did you ever develop ideas for long-term solutions for this scaling issue? Our production clusters are all growing very quickly and we need to find a way to scale more.</p>\n<p>One obvious thing we can do is reduce the number of clients by using some kind of proxy-solution. But this will only help us so far - we\u2019ll probably also need something that allows us to add more servers. We are currently running tests to figure out where the current scaling limits are (we don\u2019t have numbers yet, but it seems to be somewhere around 1500).</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2018-09-25T22:20:46.706Z",
        "reply_count": 0,
        "reply_to_post_number": 7,
        "quote_count": 0,
        "incoming_link_count": 29,
        "reads": 63,
        "readers_count": 62,
        "score": 157.6,
        "yours": false,
        "topic_id": 721,
        "topic_slug": "migrating-from-a-large-cluster-to-another",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 12,
          "username": "ajbeamon",
          "name": "A.J. Beamon",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/migrating-from-a-large-cluster-to-another/721/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2178,
        "name": "Mike McMahon",
        "username": "killertypo",
        "avatar_template": "/user_avatar/forums.foundationdb.org/killertypo/{size}/35_2.png",
        "created_at": "2018-09-26T21:34:27.713Z",
        "cooked": "<p>what kind of TCP performance tuning have you done to improve the latency and response times of the network. sometimes improving how the underlying OS handles network calls can greatly improve the CC.</p>\n<p>These are our FDB specific sysctl configurations we run on on ubuntu and have had great success in improving our reliability.</p>\n<pre><code>      - { name: net.core.somaxconn, value: 1000 }\n      - { name: net.core.netdev_max_backlog, value: 5000 }\n      - { name: net.core.rmem_max, value: 16777216 }\n      - { name: net.core.wmem_max, value: 16777216 }\n      - { name: net.ipv4.tcp_wmem, value: \"4096 12582912 16777216\" }\n      - { name: net.ipv4.tcp_rmem, value: \"4096 12582912 16777216\" }\n      - { name: net.ipv4.tcp_max_syn_backlog, value: 8096 }\n      - { name: net.ipv4.tcp_slow_start_after_idle, value: 0 }\n      - { name: net.ipv4.tcp_tw_reuse, value: 1 }\n      - { name: net.core.default_qdisc, value: \"fq_codel\" }\n      - { name: net.ipv4.tcp_mtu_probing, value: 1 }\n      - { name: net.ipv4.tcp_tw_recycle, value: 1 }\n</code></pre>\n<p>for instance one of our larger SSD clusters is roughly around 16 nodes w/ 256 procs and 79TB in KV store, we can sustain around 28k writes and 33k reads and add and remove capacity without incident.</p>\n<pre><code>  Read rate              - 28099 Hz\n  Write rate             - 33465 Hz\n</code></pre>\n<p>Our disk configuration and layout though may be drastically different than yours, and we heavily utilize AWS primitives for high speed read caches with high hit rates and LVM raids too improve write throughput.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2018-09-26T21:34:27.713Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 7,
        "reads": 64,
        "readers_count": 63,
        "score": 47.8,
        "yours": false,
        "topic_id": 721,
        "topic_slug": "migrating-from-a-large-cluster-to-another",
        "display_username": "Mike McMahon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/cluster-controller-cpu-utilization-pegged/740/2",
            "internal": true,
            "reflection": true,
            "title": "Cluster Controller CPU Utilization Pegged",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 43,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/migrating-from-a-large-cluster-to-another/721/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2555,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2018-11-05T20:48:29.443Z",
        "cooked": "<p>Reading through the answers, I have a similar one. We have introduced a new servers into the cluster and I would like to move as quickly as possible. We have to distinguished clusters, where on one storage servers are running on just 375GB NVMe disks, while the other one has 3TB of NVMe disks. I wish I could tell the cluster to somehow move the data to the 3TB disks instead of being to even, as I\u2019m planning to dismantle the small ones.</p>\n<p>In last couple of days, I was able to remove around 50 servers, but the last 12 are going incredibly slowly, as it takes them hours to free up even 20GB of space. If I remove a storage server before there is at least 20GB on the most full, the whole cluster goes to halt and things take much longer to recover.</p>\n<p>Anything I can do to help the cluster to understand my intent of removing the small servers? Or anything else I can do to force a mass evacuation of the data between servers?</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2018-11-05T20:48:29.443Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 48,
        "readers_count": 47,
        "score": 14.6,
        "yours": false,
        "topic_id": 721,
        "topic_slug": "migrating-from-a-large-cluster-to-another",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/migrating-from-a-large-cluster-to-another/721/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2556,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2018-11-05T20:52:33.866Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"ThomasJ\" data-post=\"10\" data-topic=\"721\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/48.png\" class=\"avatar\"> ThomasJ:</div>\n<blockquote>\n<p>Anything I can do to help the cluster to understand my intent of removing the small servers? Or anything else I can do to force a mass evacuation of the data between servers?</p>\n</blockquote>\n</aside>\n<p>You can use the <code>exclude</code> command, and point it to the servers that you\u2019d like to remove.  See <a href=\"https://apple.github.io/foundationdb/administration.html#removing-machines-from-a-cluster\">Removing Machines from a Cluster</a>.</p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2018-11-05T20:52:33.866Z",
        "reply_count": 1,
        "reply_to_post_number": 10,
        "quote_count": 1,
        "incoming_link_count": 1,
        "reads": 47,
        "readers_count": 46,
        "score": 19.4,
        "yours": false,
        "topic_id": 721,
        "topic_slug": "migrating-from-a-large-cluster-to-another",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://apple.github.io/foundationdb/administration.html#removing-machines-from-a-cluster",
            "internal": false,
            "reflection": false,
            "title": "Administration \u2014 FoundationDB 5.2",
            "clicks": 7
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/migrating-from-a-large-cluster-to-another/721/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2557,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2018-11-05T20:58:37.076Z",
        "cooked": "<p>I\u2019m aware. But when I try to remove one server from the 12 servers fleet, I get this.</p>\n<p><code>ERROR: This exclude may cause the total free space in the cluster to drop below 10%.</code></p>\n<p>Should I maybe remove all of them at the same time? Or what\u2019s the best way to do this.</p>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2018-11-05T20:58:37.076Z",
        "reply_count": 1,
        "reply_to_post_number": 11,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 46,
        "readers_count": 45,
        "score": 14.2,
        "yours": false,
        "topic_id": 721,
        "topic_slug": "migrating-from-a-large-cluster-to-another",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/migrating-from-a-large-cluster-to-another/721/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2558,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2018-11-05T22:14:38.902Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"ThomasJ\" data-post=\"12\" data-topic=\"721\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/48.png\" class=\"avatar\"> ThomasJ:</div>\n<blockquote>\n<p>Should I maybe remove all of them at the same time? Or what\u2019s the best way to do this.</p>\n</blockquote>\n</aside>\n<p>Assuming you\u2019ve added the processes with the big disks before excluding, you\u2019re probably getting this because the space computation thinks the non-excluded small disks will be too full after the exclude. Specifying them all in the same invocation of <code>exclude</code> should avoid this problem.</p>\n<p>I\u2019ll also mention that the space check is a bit pessimistic about how much free space will remain, and if you think the check isn\u2019t accurately characterizing what the outcome will be, you can skip it by adding the <code>FORCE</code> keyword (e.g. <code>&gt; exclude FORCE &lt;ip&gt; &lt;ip&gt; ...</code>)</p>",
        "post_number": 13,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2018-11-05T22:14:38.902Z",
        "reply_count": 2,
        "reply_to_post_number": 12,
        "quote_count": 1,
        "incoming_link_count": 4,
        "reads": 43,
        "readers_count": 42,
        "score": 38.6,
        "yours": false,
        "topic_id": 721,
        "topic_slug": "migrating-from-a-large-cluster-to-another",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/migrating-from-a-large-cluster-to-another/721/13",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2559,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2018-11-05T22:20:08.474Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"ajbeamon\" data-post=\"13\" data-topic=\"721\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>Specifying them all in the same invocation of <code>exclude</code> should avoid this problem.</p>\n</blockquote>\n</aside>\n<p>Got it. Wasn\u2019t sure if I can exclude them all at the same time. This makes things much easier.</p>\n<aside class=\"quote no-group\" data-username=\"ajbeamon\" data-post=\"13\" data-topic=\"721\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>the space check is a bit pessimistic about how much free space will remain</p>\n</blockquote>\n</aside>\n<p>Yep, found out the <em>hard</em> way.</p>\n<p>Thank you</p>",
        "post_number": 14,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2018-11-05T22:20:08.474Z",
        "reply_count": 0,
        "reply_to_post_number": 13,
        "quote_count": 1,
        "incoming_link_count": 2,
        "reads": 43,
        "readers_count": 42,
        "score": 18.6,
        "yours": false,
        "topic_id": 721,
        "topic_slug": "migrating-from-a-large-cluster-to-another",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/migrating-from-a-large-cluster-to-another/721/14",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2573,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2018-11-06T16:15:24.202Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"ajbeamon\" data-post=\"13\" data-topic=\"721\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>I\u2019ll also mention that the space check is a bit pessimistic about how much free space will remain, and if you think the check isn\u2019t accurately characterizing what the outcome will be, you can skip it by adding the <code>FORCE</code> keyword (e.g. <code>&gt; exclude FORCE &lt;ip&gt; &lt;ip&gt; ...</code> )</p>\n</blockquote>\n</aside>\n<p>Worked like a charm. Took around 12 hours, but it was much faster than doing this manually one by one.</p>",
        "post_number": 15,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2018-11-06T16:15:24.202Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 1,
        "reads": 42,
        "readers_count": 41,
        "score": 13.4,
        "yours": false,
        "topic_id": 721,
        "topic_slug": "migrating-from-a-large-cluster-to-another",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/migrating-from-a-large-cluster-to-another/721/15",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      2146,
      2149,
      2152,
      2154,
      2159,
      2160,
      2170,
      2171,
      2178,
      2555,
      2556,
      2557,
      2558,
      2559,
      2573
    ]
  },
  "timeline_lookup": [
    [
      1,
      2587
    ],
    [
      2,
      2586
    ],
    [
      3,
      2584
    ],
    [
      7,
      2583
    ],
    [
      9,
      2582
    ],
    [
      10,
      2542
    ],
    [
      15,
      2541
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Migrating from a large cluster to another",
  "id": 721,
  "title": "Migrating from a large cluster to another",
  "posts_count": 15,
  "created_at": "2018-09-21T15:41:31.742Z",
  "views": 2418,
  "reply_count": 9,
  "like_count": 0,
  "last_posted_at": "2018-11-06T16:15:24.202Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "migrating-from-a-large-cluster-to-another",
  "category_id": 7,
  "word_count": 2697,
  "deleted_at": null,
  "user_id": 16,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_721",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 15,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 6,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Troubles scaling up the cluster",
      "id": 751,
      "title": "Troubles scaling up the cluster",
      "slug": "troubles-scaling-up-the-cluster",
      "posts_count": 32,
      "reply_count": 26,
      "highest_post_number": 32,
      "image_url": null,
      "created_at": "2018-10-08T03:24:54.004Z",
      "last_posted_at": "2018-11-01T16:26:01.527Z",
      "bumped": true,
      "bumped_at": "2018-11-01T16:26:01.527Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 3747,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 311,
            "username": "ThomasJ",
            "name": "Thomas Johson",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 15,
            "username": "markus.pilman",
            "name": "Markus Pilman",
            "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 255,
            "username": "aqua",
            "name": "Matt Lohier",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/b9bd4f/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Storage server running out of space",
      "id": 1655,
      "title": "Storage server running out of space",
      "slug": "storage-server-running-out-of-space",
      "posts_count": 17,
      "reply_count": 14,
      "highest_post_number": 17,
      "image_url": null,
      "created_at": "2019-09-28T02:44:46.227Z",
      "last_posted_at": "2019-10-02T20:48:03.731Z",
      "bumped": true,
      "bumped_at": "2019-10-02T20:48:03.731Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 3,
      "views": 4053,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 311,
            "username": "ThomasJ",
            "name": "Thomas Johson",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 612,
            "username": "fzhjon",
            "name": "Jon Fu",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/f/9d8465/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Production optimizations",
      "id": 601,
      "title": "Production optimizations",
      "slug": "production-optimizations",
      "posts_count": 21,
      "reply_count": 14,
      "highest_post_number": 21,
      "image_url": null,
      "created_at": "2018-07-30T21:18:56.894Z",
      "last_posted_at": "2018-08-15T04:47:23.743Z",
      "bumped": true,
      "bumped_at": "2018-08-15T04:47:23.743Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 6,
      "views": 6473,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 311,
            "username": "ThomasJ",
            "name": "Thomas Johson",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 255,
            "username": "aqua",
            "name": "Matt Lohier",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/b9bd4f/{size}.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Why doesn&rsquo;t my cluster performance scale when I double the number of machines?",
      "id": 640,
      "title": "Why doesn't my cluster performance scale when I double the number of machines?",
      "slug": "why-doesnt-my-cluster-performance-scale-when-i-double-the-number-of-machines",
      "posts_count": 21,
      "reply_count": 16,
      "highest_post_number": 21,
      "image_url": null,
      "created_at": "2018-08-15T09:26:47.588Z",
      "last_posted_at": "2018-08-17T07:32:00.164Z",
      "bumped": true,
      "bumped_at": "2018-08-17T07:32:00.164Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 3323,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 255,
            "username": "aqua",
            "name": "Matt Lohier",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/b9bd4f/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 68,
            "username": "daverosenthal",
            "name": "Dave Rosenthal",
            "avatar_template": "/user_avatar/forums.foundationdb.org/daverosenthal/{size}/51_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 321,
            "username": "poma",
            "name": "Roman Semenov",
            "avatar_template": "/user_avatar/forums.foundationdb.org/poma/{size}/325_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Segmentation fault error and broken cluster",
      "id": 483,
      "title": "Segmentation fault error and broken cluster",
      "slug": "segmentation-fault-error-and-broken-cluster",
      "posts_count": 17,
      "reply_count": 12,
      "highest_post_number": 17,
      "image_url": null,
      "created_at": "2018-05-31T15:34:28.123Z",
      "last_posted_at": "2018-06-11T17:31:13.656Z",
      "bumped": true,
      "bumped_at": "2018-06-11T17:31:13.656Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 4331,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 211,
            "username": "brk0v",
            "name": "Viacheslav Biriukov",
            "avatar_template": "/user_avatar/forums.foundationdb.org/brk0v/{size}/173_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 156,
            "username": "spullara",
            "name": "Sam Pullara",
            "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
            "trust_level": 2
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 311,
        "username": "ThomasJ",
        "name": "Thomas Johson",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "post_count": 4,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 12,
        "username": "ajbeamon",
        "name": "A.J. Beamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 15,
        "username": "markus.pilman",
        "name": "Markus Pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 16,
        "username": "ashishnm",
        "name": "Ashish Motivala",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/b5e925/{size}.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 43,
        "username": "killertypo",
        "name": "Mike McMahon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/killertypo/{size}/35_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      }
    ],
    "created_by": {
      "id": 16,
      "username": "ashishnm",
      "name": "Ashish Motivala",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/b5e925/{size}.png"
    },
    "last_poster": {
      "id": 311,
      "username": "ThomasJ",
      "name": "Thomas Johson",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png"
    },
    "links": [
      {
        "url": "https://forums.foundationdb.org/t/how-to-prevent-tlogs-from-overcommitting/695",
        "title": "How to prevent tlogs from overcommitting",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 9,
        "user_id": 43,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://apple.github.io/foundationdb/administration.html#removing-machines-from-a-cluster",
        "title": "Administration \u2014 FoundationDB 5.2",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 7,
        "user_id": 13,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/a10ac552a5bca9324e815b6b6d16b13f643059b9/flow/Knobs.cpp#L37",
        "title": "foundationdb/Knobs.cpp at a10ac552a5bca9324e815b6b6d16b13f643059b9 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 6,
        "user_id": 12,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://forums.foundationdb.org/t/troubles-scaling-up-the-cluster/751/29",
        "title": "Troubles scaling up the cluster",
        "internal": true,
        "attachment": false,
        "reflection": true,
        "clicks": 1,
        "user_id": 12,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      }
    ]
  },
  "bookmarks": []
}