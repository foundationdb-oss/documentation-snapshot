{
  "post_stream": {
    "posts": [
      {
        "id": 3421,
        "name": "VISHAL AGGARWAL",
        "username": "vaggarwal",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/v/b3f665/{size}.png",
        "created_at": "2019-02-19T21:32:16.305Z",
        "cooked": "<p>1 M rows write via Mongo client using document layer is very slow comparatively loading it in mongodb database . I got 26 minutes versus 7 minutes</p>\n<p>Here is the document-</p>\n<pre><code class=\"lang-auto\">for(var i = 1; i &amp;lt;= 1000000 ; i++) {\n      db.mycollections.insert({\n          \"_id\" : i,\n          \"item\" : \"canvas\" + i, \n          \"qty\" : 100 + i,\n          \"tags\" : [\"cotton\"],\n          \"title\" : \"How do I create manual workload i.e., Bulk inserts to Collection \",\n          \" Iteration no:\" : i\n      });\n}\n</code></pre>\n<p>Any changes is needed for this to run fast</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2019-02-19T21:47:19.527Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 316,
        "reads": 65,
        "readers_count": 64,
        "score": 1593.0,
        "yours": false,
        "topic_id": 1157,
        "topic_slug": "1-m-rows-write-via-mongo-client-using-document-layer",
        "display_username": "VISHAL AGGARWAL",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 521,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/1-m-rows-write-via-mongo-client-using-document-layer/1157/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 3422,
        "name": "Bhaskar Muppana",
        "username": "mbhaskar",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mbhaskar/{size}/277_2.png",
        "created_at": "2019-02-19T21:52:53.028Z",
        "cooked": "<p>Document Layer creates a separate FoundationDB transaction for each and every request and then commits. This gives strong consistency guarantees for the data. At the same time, each transaction has some overhead, like getting read-version and transaction commit. On top of it, every request needs to get metadata version to make sure metadata hasn\u2019t changed.</p>\n<p>One easy way to get better performance would be using bulk inserts. You can use <code>insert_many()</code> and insert multiple documents in each request. That should help with the performance.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2019-02-19T21:52:53.028Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 63,
        "readers_count": 62,
        "score": 12.6,
        "yours": false,
        "topic_id": 1157,
        "topic_slug": "1-m-rows-write-via-mongo-client-using-document-layer",
        "display_username": "Bhaskar Muppana",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 9,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/1-m-rows-write-via-mongo-client-using-document-layer/1157/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3428,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2019-02-19T23:35:54.364Z",
        "cooked": "<p>An alternative to inserting many documents per transaction would be to do many single-document insert transactions in parallel, which will hide the latency of starting and committing transactions.  You wouldn\u2019t want infinite parallelism, but a pattern where, for example, you dispatch N inserts initially and then dispatch a new insert each time a dispatched insert completes should work well.  I\u2019m not sure what the ideal value of N is, at least hundreds and possibly low thousands.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2019-02-19T23:35:54.364Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 63,
        "readers_count": 62,
        "score": 32.6,
        "yours": false,
        "topic_id": 1157,
        "topic_slug": "1-m-rows-write-via-mongo-client-using-document-layer",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/1-m-rows-write-via-mongo-client-using-document-layer/1157/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3432,
        "name": "VISHAL AGGARWAL",
        "username": "vaggarwal",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/v/b3f665/{size}.png",
        "created_at": "2019-02-20T01:41:31.379Z",
        "cooked": "<p>Thanks for the quick response , Will give it a shot</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2019-02-20T01:41:31.379Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 62,
        "readers_count": 61,
        "score": 22.4,
        "yours": false,
        "topic_id": 1157,
        "topic_slug": "1-m-rows-write-via-mongo-client-using-document-layer",
        "display_username": "VISHAL AGGARWAL",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 521,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/1-m-rows-write-via-mongo-client-using-document-layer/1157/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3435,
        "name": "VISHAL AGGARWAL",
        "username": "vaggarwal",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/v/b3f665/{size}.png",
        "created_at": "2019-02-20T02:09:52.650Z",
        "cooked": "<p>I tried could able to improve write performance but not comparable to loading it in mongodb.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2019-02-20T02:09:52.650Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 61,
        "readers_count": 60,
        "score": 12.2,
        "yours": false,
        "topic_id": 1157,
        "topic_slug": "1-m-rows-write-via-mongo-client-using-document-layer",
        "display_username": "VISHAL AGGARWAL",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 521,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/1-m-rows-write-via-mongo-client-using-document-layer/1157/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3441,
        "name": "Bhaskar Muppana",
        "username": "mbhaskar",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mbhaskar/{size}/277_2.png",
        "created_at": "2019-02-20T18:15:25.412Z",
        "cooked": "<p>It depends on a lot of factors. Some related to your deployment configuration, some related to design traits of Document Layer and in general FoundationDB. I will try to explain top bullets</p>\n<h4>Write concern</h4>\n<p>Write concern you are running with will have a huge impact on MongoDB\u2019s performance and consistency guarantees.</p>\n<ul>\n<li>\n<p>MongoDB: If you don\u2019t specify any, defaults would be <code>{w: 1, j: false}</code>. That config only guarantees in-memory writes on standalone or primary. For stronger consistency, you would need something like <code>{w: majority, j: true}</code>. That would make sure the majority of replicas have your write, persistent on disk. It is still eventual consistency. And in case of failures, your writes could be rollbacked. This is how writes work on standard MongoDB.</p>\n</li>\n<li>\n<p>Document Layer: Document Layer, and in general FoundationDB, goal is to provide strong consistency we are used to in SQL world. Document Layer just ignores the write concern provided by the client. Irrespective of the write concern, writes are always done at full consistency. Once the write is acknowledged back to the client, it is guaranteed that it is persisted on disk and replicated. So, your write is never lost in any kind of failures. To achieve this FoundationDB/Document Layer need to do more work than MongoDB. This makes Document Layer slower than standard MongoDB.</p>\n</li>\n</ul>\n<h4>Concurrency</h4>\n<p>As both MongoDB and FoundationDB are distributed they benefit quite a bit by having more concurrency in your application. As <a class=\"mention\" href=\"/u/steavedhams\">@SteavedHams</a> suggested in his response you could have more parallelism in your test either by adding more threads or even better making the test async (with rate limiter). With the test you have above you are pretty much running one request at a time on Document Layer, which runs one transaction at a time on FDB. So, getting limited by the latency of each transaction. But, you are measuring the throughput, how long it takes me to insert 1M documents. Making your test concurrent will probably help both MongoDB and Document Layer. But more for Document Layer, considering it will help hide the latency.</p>\n<h4>Transactions</h4>\n<p>Document Layer works more like traditional SQL databases when it comes to transaction management - Everything is a transaction. Either you start a transaction from the client and do your requests part of that transaction, or Document Layer starts a transaction for each and every request. Every transaction has some initiation cost of getting the current database version, <code>getReadVersion()</code>, and commit at the end, which persists the changes made in the transaction. As each transaction has this overhead, just like SQL databases, the best way to hide this overhead is to do more in a transaction.</p>\n<ul>\n<li>Implicit transactions: You don\u2019t manage transactions on the client side, Document Layer creating transactions for each MongoDB request. Do more in each request, this is my first suggestion in the previous post.</li>\n<li>Explicit transactions: Manage transactions yourself using <code>beginTransaction</code> and <code>commitTranaction</code> and include more business logic there. These are custom commands only work on Document Layer. Sadly, explicit transactions in Document Layer have some limitations regarding connections. We are rewriting them to be compatible with MongoDB v4.0 transactions.</li>\n</ul>\n<p>If you compare with Document Layer requests or transactions with MongoDB v4.0 transactions, that\u2019s where Document Layer shines a lot. As transactions are primitive operations in FoundationDB.</p>\n<h4>Project maturity</h4>\n<p>Having said all that, there are quite a few improvements which will help to bring down the latency even further down. For example, Document Layer manages metadata for every collection with a version. And every request reads that version to make sure collection metadata hasn\u2019t changed. There are ways we could cut this read from the critical path, reducing latency. This is one example, there are other improvements which will help the performance. The project is now in initial stages. For us, the initial goal was to have a strongly consistent database. We will have performance improvements coming in, to make these numbers better.</p>\n<h4>Finally\u2026</h4>\n<p>To finish this long post, it is fair to say Document Layer is never going to do better if you are measuring the latency of a single write. Even though you are measuring here 1M writes, as they are happening sequentially you are limited by the latency of a single write. Document Layer strengths are better consistency guarantees and has faster transactions, thanks to FoundationDB. As its running on FoundationDB, it inherits point in time backup/restores, fearless DR. To get better performance from Document Layer we will have to follow the same guidelines as FoundationDB applications.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2019-02-20T18:15:50.775Z",
        "reply_count": 2,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 94,
        "reads": 59,
        "readers_count": 58,
        "score": 491.8,
        "yours": false,
        "topic_id": 1157,
        "topic_slug": "1-m-rows-write-via-mongo-client-using-document-layer",
        "display_username": "Bhaskar Muppana",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 9,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/1-m-rows-write-via-mongo-client-using-document-layer/1157/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3443,
        "name": "Ryan Worl",
        "username": "ryanworl",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
        "created_at": "2019-02-20T18:35:11.137Z",
        "cooked": "<p><a class=\"mention\" href=\"/u/mbhaskar\">@mbhaskar</a> is the online schema change / schema caching project public? I\u2019ve familiarized myself pretty thoroughly with the F1 online schema change system and would love to see how you\u2019re doing it</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2019-02-20T18:37:41.401Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 52,
        "readers_count": 51,
        "score": 15.4,
        "yours": false,
        "topic_id": 1157,
        "topic_slug": "1-m-rows-write-via-mongo-client-using-document-layer",
        "display_username": "Ryan Worl",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 81,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/1-m-rows-write-via-mongo-client-using-document-layer/1157/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3445,
        "name": "VISHAL AGGARWAL",
        "username": "vaggarwal",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/v/b3f665/{size}.png",
        "created_at": "2019-02-20T18:49:44.330Z",
        "cooked": "<p>Thanks for detail explanation , At this point I am not working on cluster , It is just a single machine with no  redundancy</p>\n<p>-Vishal</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2019-02-20T18:49:44.330Z",
        "reply_count": 1,
        "reply_to_post_number": 6,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 52,
        "readers_count": 51,
        "score": 15.4,
        "yours": false,
        "topic_id": 1157,
        "topic_slug": "1-m-rows-write-via-mongo-client-using-document-layer",
        "display_username": "VISHAL AGGARWAL",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 9,
          "username": "mbhaskar",
          "name": "Bhaskar Muppana",
          "avatar_template": "/user_avatar/forums.foundationdb.org/mbhaskar/{size}/277_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 521,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/1-m-rows-write-via-mongo-client-using-document-layer/1157/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3454,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-02-20T21:26:24.125Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"ryanworl\" data-post=\"7\" data-topic=\"1157\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ryanworl/48/440_2.png\" class=\"avatar\"> ryanworl:</div>\n<blockquote>\n<p><a class=\"mention\" href=\"/u/mbhaskar\">@mbhaskar</a> is the online schema change / schema caching project public?</p>\n</blockquote>\n</aside>\n<p>At this precise moment, no.  I\u2019ve been harassing <a class=\"mention\" href=\"/u/evan\">@Evan</a> to post his proposal on this to the forums, so hopefully that\u2019ll happen as soon as he stops debugging failed simulation tests. <img src=\"https://emoji.discourse-cdn.com/twitter/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2019-02-20T21:32:57.883Z",
        "reply_count": 0,
        "reply_to_post_number": 7,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 52,
        "readers_count": 51,
        "score": 25.4,
        "yours": false,
        "topic_id": 1157,
        "topic_slug": "1-m-rows-write-via-mongo-client-using-document-layer",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/1-m-rows-write-via-mongo-client-using-document-layer/1157/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3463,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2019-02-20T23:51:44.202Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"vaggarwal\" data-post=\"8\" data-topic=\"1157\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/v/b3f665/48.png\" class=\"avatar\"> vaggarwal:</div>\n<blockquote>\n<p>It is just a single machine with no redundancy</p>\n</blockquote>\n</aside>\n<p>How many fdbserver processes are you running on the machine?</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2019-02-20T23:51:44.202Z",
        "reply_count": 1,
        "reply_to_post_number": 8,
        "quote_count": 1,
        "incoming_link_count": 3,
        "reads": 52,
        "readers_count": 51,
        "score": 30.4,
        "yours": false,
        "topic_id": 1157,
        "topic_slug": "1-m-rows-write-via-mongo-client-using-document-layer",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/1-m-rows-write-via-mongo-client-using-document-layer/1157/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3508,
        "name": "VISHAL AGGARWAL",
        "username": "vaggarwal",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/v/b3f665/{size}.png",
        "created_at": "2019-02-25T19:02:49.392Z",
        "cooked": "<p>Just one fdbserver</p>\n<p>-Vishal</p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2019-02-25T19:02:49.392Z",
        "reply_count": 1,
        "reply_to_post_number": 10,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 44,
        "readers_count": 43,
        "score": 18.8,
        "yours": false,
        "topic_id": 1157,
        "topic_slug": "1-m-rows-write-via-mongo-client-using-document-layer",
        "display_username": "VISHAL AGGARWAL",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 7,
          "username": "SteavedHams",
          "name": "Steve Atherton",
          "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 521,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/1-m-rows-write-via-mongo-client-using-document-layer/1157/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3509,
        "name": "VISHAL AGGARWAL",
        "username": "vaggarwal",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/v/b3f665/{size}.png",
        "created_at": "2019-02-25T19:03:42.952Z",
        "cooked": "<p>Increasing fdbserver will help increase the performance</p>\n<p>-Vishal</p>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2019-02-25T19:03:42.952Z",
        "reply_count": 0,
        "reply_to_post_number": 11,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 43,
        "readers_count": 42,
        "score": 13.6,
        "yours": false,
        "topic_id": 1157,
        "topic_slug": "1-m-rows-write-via-mongo-client-using-document-layer",
        "display_username": "VISHAL AGGARWAL",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 521,
          "username": "vaggarwal",
          "name": "VISHAL AGGARWAL",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/v/b3f665/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 521,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/1-m-rows-write-via-mongo-client-using-document-layer/1157/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4356,
        "name": "Alexandr Erofeev",
        "username": "aaerofeev",
        "avatar_template": "/user_avatar/forums.foundationdb.org/aaerofeev/{size}/582_2.png",
        "created_at": "2019-06-13T13:08:26.134Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"mbhaskar\" data-post=\"6\" data-topic=\"1157\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/mbhaskar/48/277_2.png\" class=\"avatar\"> mbhaskar:</div>\n<blockquote>\n<ul>\n<li>Explicit transactions: Manage transactions yourself using <code>beginTransaction</code> and <code>commitTranaction</code> and include more business logic there. These are custom commands only work on Document Layer. Sadly, explicit transactions in Document Layer have some limitations regarding connections. We are rewriting them to be compatible with MongoDB v4.0 transactions.</li>\n</ul>\n<p>If you compare with Document Layer requests or transactions with MongoDB v4.0 transactions, that\u2019s where Document Layer shines a lot. As transactions are primitive operations in FoundationDB.</p>\n</blockquote>\n</aside>\n<p>Thank you for your work, this is awesome!<br>\nHow can I use \u201cExplicit Transactions\u201d on the mongoAPI side?</p>\n<aside class=\"quote no-group\">\n<blockquote>\n<p>Additionally, the Document Layer has added the following database commands that are not present in MongoDB\u00ae:  <code>beginTransaction</code> , <code>commitTransaction</code> ,  <code>rollbackTransaction</code></p>\n</blockquote>\n</aside>\n<p>I\u2019m trying to find these commands from the readme level document, but did not find anything = (</p>\n<p>How soon will you develop mongodb 4.0 sessions &amp; transactions in the document layer?</p>",
        "post_number": 13,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2019-06-13T13:09:08.325Z",
        "reply_count": 0,
        "reply_to_post_number": 6,
        "quote_count": 1,
        "incoming_link_count": 21,
        "reads": 34,
        "readers_count": 33,
        "score": 111.8,
        "yours": false,
        "topic_id": 1157,
        "topic_slug": "1-m-rows-write-via-mongo-client-using-document-layer",
        "display_username": "Alexandr Erofeev",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 584,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/1-m-rows-write-via-mongo-client-using-document-layer/1157/13",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      3421,
      3422,
      3428,
      3432,
      3435,
      3441,
      3443,
      3445,
      3454,
      3463,
      3508,
      3509,
      4356
    ]
  },
  "timeline_lookup": [
    [
      1,
      2436
    ],
    [
      6,
      2435
    ],
    [
      11,
      2430
    ],
    [
      13,
      2322
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "1 M rows write via Mongo client using document layer",
  "id": 1157,
  "title": "1 M rows write via Mongo client using document layer",
  "posts_count": 13,
  "created_at": "2019-02-19T21:32:16.215Z",
  "views": 2280,
  "reply_count": 6,
  "like_count": 2,
  "last_posted_at": "2019-06-13T13:08:26.134Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "1-m-rows-write-via-mongo-client-using-document-layer",
  "category_id": 14,
  "word_count": 1321,
  "deleted_at": null,
  "user_id": 521,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_1157",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 13,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 6,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Document Layer Performance",
      "id": 1255,
      "title": "Document Layer Performance",
      "slug": "document-layer-performance",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2019-03-25T02:01:43.056Z",
      "last_posted_at": "2019-04-08T20:36:48.678Z",
      "bumped": true,
      "bumped_at": "2019-04-08T20:36:48.678Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 1531,
      "category_id": 11,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 542,
            "username": "jonahwest",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/90db22/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 9,
            "username": "mbhaskar",
            "name": "Bhaskar Muppana",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mbhaskar/{size}/277_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "How to nicely handle Mongo drivers that automatically round-robin?",
      "id": 917,
      "title": "How to nicely handle Mongo drivers that automatically round-robin?",
      "slug": "how-to-nicely-handle-mongo-drivers-that-automatically-round-robin",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2018-11-29T22:51:31.464Z",
      "last_posted_at": "2018-11-29T23:58:48.827Z",
      "bumped": true,
      "bumped_at": "2018-11-29T23:58:48.827Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1668,
      "category_id": 11,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 440,
            "username": "zellsun",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/zellsun/{size}/431_2.png",
            "trust_level": 0
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 9,
            "username": "mbhaskar",
            "name": "Bhaskar Muppana",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mbhaskar/{size}/277_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Need to use mongo api driver against document layer",
      "id": 1206,
      "title": "Need to use mongo api driver against document layer",
      "slug": "need-to-use-mongo-api-driver-against-document-layer",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2019-03-08T00:35:23.096Z",
      "last_posted_at": "2019-03-08T15:31:03.147Z",
      "bumped": true,
      "bumped_at": "2019-03-08T15:31:03.147Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 907,
      "category_id": 11,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 525,
            "username": "samir",
            "name": "Samir",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/ea666f/{size}.png",
            "trust_level": 0
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 9,
            "username": "mbhaskar",
            "name": "Bhaskar Muppana",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mbhaskar/{size}/277_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Announcing FoundationDB Document Layer",
      "id": 914,
      "title": "Announcing FoundationDB Document Layer",
      "slug": "announcing-foundationdb-document-layer",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2018-11-29T20:15:26.902Z",
      "last_posted_at": "2018-11-29T21:22:01.867Z",
      "bumped": true,
      "bumped_at": "2018-11-29T20:15:27.009Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": true,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 5,
      "views": 902,
      "category_id": 6,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest single",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 1,
            "username": "davelester",
            "name": "Dave Lester",
            "avatar_template": "/user_avatar/forums.foundationdb.org/davelester/{size}/1927_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Document layer unexpectedly slow with naive test",
      "id": 1981,
      "title": "Document layer unexpectedly slow with naive test",
      "slug": "document-layer-unexpectedly-slow-with-naive-test",
      "posts_count": 3,
      "reply_count": 1,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2020-02-26T17:17:34.792Z",
      "last_posted_at": "2020-10-04T03:54:46.084Z",
      "bumped": true,
      "bumped_at": "2020-10-04T03:54:46.084Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 847,
      "category_id": 11,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 721,
            "username": "ggilley",
            "name": "Greg Gilley",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/7993a0/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 829,
            "username": "chandraonline",
            "name": "Chandra",
            "avatar_template": "/user_avatar/forums.foundationdb.org/chandraonline/{size}/945_2.png",
            "trust_level": 1
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 521,
        "username": "vaggarwal",
        "name": "VISHAL AGGARWAL",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/v/b3f665/{size}.png",
        "post_count": 6,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 7,
        "username": "SteavedHams",
        "name": "Steve Atherton",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 9,
        "username": "mbhaskar",
        "name": "Bhaskar Muppana",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mbhaskar/{size}/277_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 81,
        "username": "ryanworl",
        "name": "Ryan Worl",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 3
      },
      {
        "id": 584,
        "username": "aaerofeev",
        "name": "Alexandr Erofeev",
        "avatar_template": "/user_avatar/forums.foundationdb.org/aaerofeev/{size}/582_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      }
    ],
    "created_by": {
      "id": 521,
      "username": "vaggarwal",
      "name": "VISHAL AGGARWAL",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/v/b3f665/{size}.png"
    },
    "last_poster": {
      "id": 584,
      "username": "aaerofeev",
      "name": "Alexandr Erofeev",
      "avatar_template": "/user_avatar/forums.foundationdb.org/aaerofeev/{size}/582_2.png"
    }
  },
  "bookmarks": []
}