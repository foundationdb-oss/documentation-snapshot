{
  "post_stream": {
    "posts": [
      {
        "id": 9758,
        "name": "Rajiv M Ranganath",
        "username": "rajivr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "created_at": "2021-07-29T16:11:48.024Z",
        "cooked": "<p>I was wondering if <code>fdb_future_block_until_ready</code> implements the recommended retry logic internally?</p>\n<p>I tried looking at the <a href=\"https://github.com/apple/foundationdb/blob/6.3.13/bindings/go/src/fdb/futures.go#L200-L216\" rel=\"noopener nofollow ugc\">Go API</a>, and it seems like <code>fdb_future_block_until_ready</code> might be implementing retry logic internally (as code path calls <code>fdb_future_get_key</code> immediately after <code>BlockUntilReady</code>).</p>\n<p>In case of <a href=\"https://github.com/apple/foundationdb/blob/6.3.13/bindings/java/src/main/com/apple/foundationdb/NativeFuture.java#L137\" rel=\"noopener nofollow ugc\">Java API</a>, it looks likes it is not making use of <code>Future_blockUntilReady</code>.</p>\n<p>Best,<br>\nRajiv</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2021-07-29T16:11:48.024Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 125,
        "reads": 32,
        "readers_count": 31,
        "score": 631.4,
        "yours": false,
        "topic_id": 2826,
        "topic_slug": "fdb-future-block-until-ready-and-retry-logic",
        "display_username": "Rajiv M Ranganath",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/blob/6.3.13/bindings/go/src/fdb/futures.go#L200-L216",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/futures.go at 6.3.13 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 4
          },
          {
            "url": "https://github.com/apple/foundationdb/blob/6.3.13/bindings/java/src/main/com/apple/foundationdb/NativeFuture.java#L137",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/NativeFuture.java at 6.3.13 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 3
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 946,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fdb-future-block-until-ready-and-retry-logic/2826/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 9760,
        "name": "",
        "username": "andrew.noyes",
        "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
        "created_at": "2021-07-29T18:50:10.012Z",
        "cooked": "<p>I\u2019m not sure what exactly you mean by \u201crecommended retry logic\u201d. <a href=\"https://apple.github.io/foundationdb/api-c.html#c.fdb_future_block_until_ready\" rel=\"noopener nofollow ugc\">fdb_future_block_until_ready</a> doesn\u2019t implement any retry logic though. I think the recommended retry logic is to restart your transaction from the beginning if any operation in your transaction fails with a retriable error. The easiest way to do this is to wait on the future returned by <a href=\"https://apple.github.io/foundationdb/api-c.html#c.fdb_transaction_on_error\" rel=\"noopener nofollow ugc\">fdb_transaction_on_error</a>, which will become ready after an appropriate backoff or fail with an error if the error is not retriable. There is also <a href=\"https://apple.github.io/foundationdb/api-c.html#c.fdb_error_predicate\" rel=\"noopener nofollow ugc\">fdb_error_predicate</a> if you want to implement your own backoff strategy and just want to know if the error is retriable or not (this is a bit of an advanced, use-at-your-own-risk feature).</p>\n<p>Regarding <a href=\"https://apple.github.io/foundationdb/api-c.html#c.fdb_future_block_until_ready\" rel=\"noopener nofollow ugc\">fdb_future_block_until_ready</a>, there are basically two phases of interacting with fdb futures - wait until the future is ready, and then inspect the future to retrieve its value or error status. <a href=\"https://apple.github.io/foundationdb/api-c.html#c.fdb_future_block_until_ready\" rel=\"noopener nofollow ugc\">fdb_future_block_until_ready</a> is just a mechanism for waiting until the future is ready, blocking the current thread until the future is ready to inspect. The other option is to use <a href=\"https://apple.github.io/foundationdb/api-c.html#fdb_future_set_callback\" rel=\"noopener nofollow ugc\">fdb_future_set_callback</a> and register a callback that will be called some time after the future is ready - this just happens to be the method the java bindings use.</p>\n<p>There\u2019s a suite of functions for inspecting the results of futures, depending on the type of value the future holds. <a href=\"https://apple.github.io/foundationdb/api-c.html#fdb_future_get_key\" rel=\"noopener nofollow ugc\">fdb_future_get_key</a> is the mechanism for futures that hold keys. There\u2019s more <code>fdb_future_get_*()</code> functions for other types, e.g. <a href=\"https://apple.github.io/foundationdb/api-c.html#fdb_future_get_keyvalue_array\" rel=\"noopener nofollow ugc\">fdb_future_get_keyvalue_array</a> for obtaining the result of get range operations. Keep in mind that the lifetime of the underlying memory used to store future results is owned by the future itself, so many bindings copy the results into a language-native representation before destroying the future.</p>\n<p>Anyway this is all mostly only relevant for bindings authors or people using the c api directly. Let me know if any part of this is unclear - hope it helps.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2021-07-29T18:50:10.012Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 31,
        "readers_count": 30,
        "score": 16.2,
        "yours": false,
        "topic_id": 2826,
        "topic_slug": "fdb-future-block-until-ready-and-retry-logic",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://apple.github.io/foundationdb/api-c.html#c.fdb_future_block_until_ready",
            "internal": false,
            "reflection": false,
            "title": "C API \u2014 FoundationDB 6.3",
            "clicks": 3
          },
          {
            "url": "https://apple.github.io/foundationdb/api-c.html#c.fdb_transaction_on_error",
            "internal": false,
            "reflection": false,
            "title": "C API \u2014 FoundationDB 6.3",
            "clicks": 2
          },
          {
            "url": "https://apple.github.io/foundationdb/api-c.html#fdb_future_get_key",
            "internal": false,
            "reflection": false,
            "title": "C API \u2014 FoundationDB 6.3",
            "clicks": 0
          },
          {
            "url": "https://apple.github.io/foundationdb/api-c.html#c.fdb_error_predicate",
            "internal": false,
            "reflection": false,
            "title": "C API \u2014 FoundationDB 6.3",
            "clicks": 0
          },
          {
            "url": "https://apple.github.io/foundationdb/api-c.html#fdb_future_set_callback",
            "internal": false,
            "reflection": false,
            "title": "C API \u2014 FoundationDB 6.3",
            "clicks": 0
          },
          {
            "url": "https://apple.github.io/foundationdb/api-c.html#fdb_future_get_keyvalue_array",
            "internal": false,
            "reflection": false,
            "title": "C API \u2014 FoundationDB 6.3",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 14,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fdb-future-block-until-ready-and-retry-logic/2826/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 9769,
        "name": "Rajiv M Ranganath",
        "username": "rajivr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "created_at": "2021-07-30T08:01:47.402Z",
        "cooked": "<p><a class=\"mention\" href=\"/u/andrew.noyes\">@andrew.noyes</a> Firstly, thanks a lot for reply. I really appreciate it! <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>I think I now have slightly better understanding of the design of the Java and Go bindings.</p>\n<p>At a high level it seems transaction API in <a href=\"https://github.com/apple/foundationdb/blob/6.3.13/bindings/java/src/main/com/apple/foundationdb/FDBDatabase.java#L53-L68\" rel=\"noopener nofollow ugc\">Java</a> and <a href=\"https://github.com/apple/foundationdb/blob/6.3.13/bindings/go/src/fdb/database.go#L132-L152\" rel=\"noopener nofollow ugc\">Go</a> operates on a <em>function-like</em> object. FDB futures along with appropriate business logic is composed inside this function-like object.</p>\n<p>If the evaluation of this function-like object fails with a retry-able error, then the function-like object gets re-evaluated using <code>fdb_transaction_on_error</code>. Otherwise either the success value or an error gets returned to the caller.</p>\n<p>Would this be a fair characterization?</p>\n<aside class=\"quote no-group\" data-username=\"andrew.noyes\" data-post=\"2\" data-topic=\"2826\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/andrew.noyes/48/443_2.png\" class=\"avatar\"> andrew.noyes:</div>\n<blockquote>\n<p>Anyway this is all mostly only relevant for bindings authors or people using the c api directly. Let me know if any part of this is unclear - hope it helps.</p>\n</blockquote>\n</aside>\n<p>I am currently exploring how to effectively use FDB Rust bindings along with <a href=\"https://tokio.rs/\" rel=\"noopener nofollow ugc\">Tokio</a>. Hence the questions relating to C APIs. Yes, your reply indeed helped a lot! Thanks again!</p>\n<p>Best,<br>\nRajiv</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2021-07-30T08:01:47.402Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 26,
        "readers_count": 25,
        "score": 10.2,
        "yours": false,
        "topic_id": 2826,
        "topic_slug": "fdb-future-block-until-ready-and-retry-logic",
        "display_username": "Rajiv M Ranganath",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/blob/6.3.13/bindings/go/src/fdb/database.go#L132-L152",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/database.go at 6.3.13 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 2
          },
          {
            "url": "https://github.com/apple/foundationdb/blob/6.3.13/bindings/java/src/main/com/apple/foundationdb/FDBDatabase.java#L53-L68",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/FDBDatabase.java at 6.3.13 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 1
          },
          {
            "url": "https://tokio.rs/",
            "internal": false,
            "reflection": false,
            "title": "Tokio",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 946,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fdb-future-block-until-ready-and-retry-logic/2826/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 9783,
        "name": "",
        "username": "andrew.noyes",
        "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
        "created_at": "2021-08-02T18:06:11.921Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"rajivr\" data-post=\"3\" data-topic=\"2826\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/rajivr/48/1100_2.png\" class=\"avatar\"> rajivr:</div>\n<blockquote>\n<p>Would this be a fair characterization?</p>\n</blockquote>\n</aside>\n<p>Yes this sounds fair. The idiomatic way to execute a transaction in all bindings is to pass a callback (a callback that takes a transaction as an argument) to a function that handles tries - and you\u2019ve linked that \u201cretry loop\u201d function for java and go.</p>\n<aside class=\"quote no-group\" data-username=\"rajivr\" data-post=\"3\" data-topic=\"2826\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/rajivr/48/1100_2.png\" class=\"avatar\"> rajivr:</div>\n<blockquote>\n<p>I am currently exploring how to effectively use FDB Rust bindings along with <a href=\"https://tokio.rs/\" rel=\"noopener nofollow ugc\">Tokio</a>.</p>\n</blockquote>\n</aside>\n<p>I have a (hobby-only) interest in this so I\u2019m happy to help answer questions etc in my hobby time <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2021-08-02T18:06:11.921Z",
        "reply_count": 1,
        "reply_to_post_number": 3,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 22,
        "readers_count": 21,
        "score": 9.4,
        "yours": false,
        "topic_id": 2826,
        "topic_slug": "fdb-future-block-until-ready-and-retry-logic",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 14,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fdb-future-block-until-ready-and-retry-logic/2826/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 9824,
        "name": "Rajiv M Ranganath",
        "username": "rajivr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "created_at": "2021-08-06T06:01:19.364Z",
        "cooked": "<p><a class=\"mention\" href=\"/u/andrew.noyes\">@andrew.noyes</a> I noticed there is a specific pattern in which interfaces <code>ReadTransactionContext</code>, <code>ReadTransaction</code>, <code>TransactionContext</code>, <code>Transaction</code>, and <code>Database</code> are organized in Java and Go bindings.</p>\n<p>Did this organization evolve over time or was there some thought given to this design initially?</p>\n<p>Also <a href=\"https://gist.github.com/rajivr/bd6397a186da0ba72c39214f7a6ebfb9\" rel=\"noopener nofollow ugc\">here</a> is the design of the <code>FdbFuture</code> that I am currently prototyping, and its far from final! <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=10\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"></p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2021-08-06T06:01:19.364Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 22,
        "readers_count": 21,
        "score": 14.4,
        "yours": false,
        "topic_id": 2826,
        "topic_slug": "fdb-future-block-until-ready-and-retry-logic",
        "display_username": "Rajiv M Ranganath",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://gist.github.com/rajivr/bd6397a186da0ba72c39214f7a6ebfb9",
            "internal": false,
            "reflection": false,
            "title": "mod.rs \u00b7 GitHub",
            "clicks": 3
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 14,
          "username": "andrew.noyes",
          "name": "",
          "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 946,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fdb-future-block-until-ready-and-retry-logic/2826/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 9827,
        "name": "",
        "username": "andrew.noyes",
        "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
        "created_at": "2021-08-06T16:24:13.798Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"rajivr\" data-post=\"5\" data-topic=\"2826\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/rajivr/48/1100_2.png\" class=\"avatar\"> rajivr:</div>\n<blockquote>\n<p>Did this organization evolve over time or was there some thought given to this design initially?</p>\n</blockquote>\n</aside>\n<p>I\u2019m not sure I\u2019m the best person to answer that - I think this organization predates my time with foundationdb.</p>\n<aside class=\"quote no-group\" data-username=\"rajivr\" data-post=\"5\" data-topic=\"2826\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/rajivr/48/1100_2.png\" class=\"avatar\"> rajivr:</div>\n<blockquote>\n<p>Also <a href=\"https://gist.github.com/rajivr/bd6397a186da0ba72c39214f7a6ebfb9\" rel=\"noopener nofollow ugc\">here </a> is the design of the <code>FdbFuture</code> that I am currently prototyping, and its far from final! <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n</blockquote>\n</aside>\n<p>I think this is using some rust features I\u2019m not very familiar with but from what I understand it looks like a reasonable way to model a blocking API for futures. A couple of thoughts:</p>\n<ol>\n<li>There are other things you can do with futures that aren\u2019t modeled yet, e.g. cancellation</li>\n<li>I\u2019m not sure exactly what <code>check</code> is doing, but since there are many foundationdb errors that are intended to be handled gracefully/retried, it probably shouldn\u2019t panic. Presumably <code>FdbResult</code> is an enum that can encode an error?</li>\n<li>Is the plan to copy the memory for types with memory owned by futures?</li>\n</ol>\n<p>In case you didn\u2019t see this yet there is also prior art in <a href=\"https://crates.io/crates/foundationdb\" rel=\"noopener nofollow ugc\">https://crates.io/crates/foundationdb</a>. Is that not usable with Tokio?</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2021-08-06T16:24:13.798Z",
        "reply_count": 2,
        "reply_to_post_number": 5,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 21,
        "readers_count": 20,
        "score": 14.2,
        "yours": false,
        "topic_id": 2826,
        "topic_slug": "fdb-future-block-until-ready-and-retry-logic",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://crates.io/crates/foundationdb",
            "internal": false,
            "reflection": false,
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 14,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fdb-future-block-until-ready-and-retry-logic/2826/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 9830,
        "name": "Rajiv M Ranganath",
        "username": "rajivr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "created_at": "2021-08-07T03:22:50.700Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"andrew.noyes\" data-post=\"6\" data-topic=\"2826\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/andrew.noyes/48/443_2.png\" class=\"avatar\"> andrew.noyes:</div>\n<blockquote>\n<ol>\n<li>There are other things you can do with futures that aren\u2019t modeled yet, e.g. cancellation</li>\n</ol>\n</blockquote>\n</aside>\n<p>I\u2019ve tried to model cancellation implicitly using Rust <a href=\"https://gist.github.com/rajivr/bd6397a186da0ba72c39214f7a6ebfb9#file-mod-rs-L59-L68\" rel=\"noopener nofollow ugc\">drop</a> semantics, and used the fact that C API <a href=\"https://apple.github.io/foundationdb/api-c.html#c.fdb_future_destroy\" rel=\"noopener nofollow ugc\"><code>fdb_future_destroy</code></a>, also does cancellation.</p>\n<p>Introducing explicit cancellation would have meant that we would have to maintain cancellation state information in <a href=\"https://gist.github.com/rajivr/bd6397a186da0ba72c39214f7a6ebfb9#file-mod-rs-L21-L25\" rel=\"noopener nofollow ugc\"><code>FdbFuture&lt;T&gt;</code></a>, and it would have also increased the surface area of the API.</p>\n<p>I was wondering if there was a use-case where we would need access to a <code>FdbFuture&lt;T&gt;</code>, that has been cancelled but not destroyed?</p>\n<aside class=\"quote no-group\" data-username=\"andrew.noyes\" data-post=\"6\" data-topic=\"2826\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/andrew.noyes/48/443_2.png\" class=\"avatar\"> andrew.noyes:</div>\n<blockquote>\n<ol start=\"2\">\n<li>I\u2019m not sure exactly what <code>check</code> is doing, but since there are many foundationdb errors that are intended to be handled gracefully/retried, it probably shouldn\u2019t panic. Presumably <code>FdbResult</code> is an enum that can encode an error?</li>\n</ol>\n</blockquote>\n</aside>\n<p><code>check</code> does not panic. <code>check</code> takes a <code>fdb_error_t</code> and returns a <code>FdbResult&lt;T&gt;</code>. It is basically a type synonym.</p>\n<pre><code class=\"lang-auto\">/// Alias for [`Result`]`&lt;T,`[`FdbError`]`&gt;`\n///\n/// [`Result`]: std::result::Result\n/// [`FdbError`]: crate::FdbError\npub type FdbResult&lt;T&gt; = Result&lt;T, FdbError&gt;;\n</code></pre>\n<p><code>check</code> is similar to <a href=\"https://github.com/Clikengo/foundationdb-rs/blob/0.5.0/foundationdb/src/error.rs#L17-L24\" rel=\"noopener nofollow ugc\"><code>eval</code></a>, in the current FoundationDB Rust crate. I used <code>check</code> instead because it is an idiom that is covered in \u201cForeign Functions\u201d chapter in <a href=\"https://www.oreilly.com/library/view/programming-rust-2nd/9781492052586/\" rel=\"noopener nofollow ugc\">Programming Rust</a> book.</p>\n<aside class=\"quote no-group\" data-username=\"andrew.noyes\" data-post=\"6\" data-topic=\"2826\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/andrew.noyes/48/443_2.png\" class=\"avatar\"> andrew.noyes:</div>\n<blockquote>\n<ol start=\"3\">\n<li>Is the plan to copy the memory for types with memory owned by futures?</li>\n</ol>\n</blockquote>\n</aside>\n<p>Yes, in <code>FdbFuture&lt;T&gt;</code>, <code>T</code> must be an owned type (i.e, <code>FdbFuture&lt;T&gt;</code> owns the data that <code>T</code> <em>might</em> contain). In Rust, we can\u2019t explicitly set a trait bound on <code>T</code> to say that it must be an owned type, but that is the idea.</p>\n<p>The <code>join</code> method takes <code>self</code> (instead of the usual <code>&amp;self</code> or <code>&amp;mut self</code>), which transfers the ownership of <code>FdbFuture&lt;T&gt;</code> to the <code>join</code> method. Once <code>join</code> method completes, ownership of <code>T</code> gets transferred to the caller via <code>FdbResult&lt;T&gt;</code> and <code>self: FdbFuture&lt;T&gt;</code> gets dropped, thereby destroying the FDB future.</p>\n<p>The plan is to implement the logic for copying in the <a href=\"https://gist.github.com/rajivr/bd6397a186da0ba72c39214f7a6ebfb9#file-mod-rs-L71\" rel=\"noopener nofollow ugc\"><code>FdbFutureGet::get</code></a> trait implementations for the appropriate types.</p>\n<aside class=\"quote no-group\" data-username=\"andrew.noyes\" data-post=\"6\" data-topic=\"2826\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/andrew.noyes/48/443_2.png\" class=\"avatar\"> andrew.noyes:</div>\n<blockquote>\n<p>In case you didn\u2019t see this yet there is also prior art in <a href=\"https://crates.io/crates/foundationdb\" rel=\"noopener nofollow ugc\">https://crates.io/crates/foundationdb</a>. Is that not usable with Tokio?</p>\n</blockquote>\n</aside>\n<p>Yes, I\u2019ve looked into this crate and also the awesome work done by <a class=\"mention\" href=\"/u/pierrez\">@PierreZ</a>  <a href=\"https://github.com/PierreZ/foundationdb-rs/tree/dev/630\" rel=\"noopener nofollow ugc\">here</a> in order to bring 6.3 support to this crate. This helped me a lot, in order to quickly come up to speed with my current effort.</p>\n<p>As I studied the FoundationDB crate, I realized that there could be an impedance mismatch between how Rust Futures and FDB Futures work. This issue is explained in the section <em>The problem: completion, cancellation and buffer management</em> in this <a href=\"https://without.boats/blog/io-uring/\" rel=\"noopener nofollow ugc\">blog</a> post.</p>\n<p>The current FoundationDB crate is trying to adapt FDB Futures to Rust Future, but I am not sure if the semantics are compatible.</p>\n<p>In the design that I am currently exploring, rather than trying to adapt FDB Futures to Rust Future, my plan is to use Tokio\u2019s blocking <a href=\"https://docs.rs/tokio/1.9.0/tokio/runtime/struct.Builder.html#method.max_blocking_threads\" rel=\"noopener nofollow ugc\">threadpool</a> to manage FDB Futures. From what I understand, under the hood, blocking thread pool is also used by JVM and Go Runtimes.</p>\n<p>The other design goal is that I want the Rust binding APIs to preserve the Java and Go API idioms as much as possible. That way, when I and others develop layers on the Rust, we can easily get inspiration from layers written in other languages. <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2021-08-07T03:22:50.700Z",
        "reply_count": 2,
        "reply_to_post_number": 6,
        "quote_count": 1,
        "incoming_link_count": 2,
        "reads": 19,
        "readers_count": 18,
        "score": 38.8,
        "yours": false,
        "topic_id": 2826,
        "topic_slug": "fdb-future-block-until-ready-and-retry-logic",
        "display_username": "Rajiv M Ranganath",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://without.boats/blog/io-uring/",
            "internal": false,
            "reflection": false,
            "title": "Notes on io-uring - Without boats, dreams dry up",
            "clicks": 1
          },
          {
            "url": "https://github.com/PierreZ/foundationdb-rs/tree/dev/630",
            "internal": false,
            "reflection": false,
            "title": "GitHub - PierreZ/foundationdb-rs at dev/630",
            "clicks": 1
          },
          {
            "url": "https://github.com/Clikengo/foundationdb-rs/blob/0.5.0/foundationdb/src/error.rs#L17-L24",
            "internal": false,
            "reflection": false,
            "title": "foundationdb-rs/error.rs at 0.5.0 \u00b7 Clikengo/foundationdb-rs \u00b7 GitHub",
            "clicks": 0
          },
          {
            "url": "https://gist.github.com/rajivr/bd6397a186da0ba72c39214f7a6ebfb9#file-mod-rs-L59-L68",
            "internal": false,
            "reflection": false,
            "title": "mod.rs \u00b7 GitHub",
            "clicks": 0
          },
          {
            "url": "https://gist.github.com/rajivr/bd6397a186da0ba72c39214f7a6ebfb9#file-mod-rs-L21-L25",
            "internal": false,
            "reflection": false,
            "title": "mod.rs \u00b7 GitHub",
            "clicks": 0
          },
          {
            "url": "https://gist.github.com/rajivr/bd6397a186da0ba72c39214f7a6ebfb9#file-mod-rs-L71",
            "internal": false,
            "reflection": false,
            "title": "mod.rs \u00b7 GitHub",
            "clicks": 0
          },
          {
            "url": "https://docs.rs/tokio/1.9.0/tokio/runtime/struct.Builder.html#method.max_blocking_threads",
            "internal": false,
            "reflection": false,
            "title": "Builder in tokio::runtime - Rust",
            "clicks": 0
          },
          {
            "url": "https://www.oreilly.com/library/view/programming-rust-2nd/9781492052586/",
            "internal": false,
            "reflection": false,
            "title": "Programming Rust, 2nd Edition [Book]",
            "clicks": 0
          },
          {
            "url": "https://apple.github.io/foundationdb/api-c.html#c.fdb_future_destroy",
            "internal": false,
            "reflection": false,
            "title": "C API \u2014 FoundationDB 6.3",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 946,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fdb-future-block-until-ready-and-retry-logic/2826/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 9833,
        "name": "",
        "username": "andrew.noyes",
        "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
        "created_at": "2021-08-09T16:55:13.897Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"rajivr\" data-post=\"7\" data-topic=\"2826\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/rajivr/48/1100_2.png\" class=\"avatar\"> rajivr:</div>\n<blockquote>\n<p>Introducing explicit cancellation would have meant that we would have to maintain cancellation state information in <a href=\"https://gist.github.com/rajivr/bd6397a186da0ba72c39214f7a6ebfb9#file-mod-rs-L21-L25\" rel=\"noopener nofollow ugc\"> <code>FdbFuture&lt;T&gt;</code> </a>, and it would have also increased the surface area of the API.</p>\n<p>I was wondering if there was a use-case where we would need access to a <code>FdbFuture&lt;T&gt;</code> , that has been cancelled but not destroyed?</p>\n</blockquote>\n</aside>\n<p>It\u2019s probably not a very common use case, but in theory you could have several threads waiting on the same future, and if one thread cancels it the other threads should be notified of that. The c api future actually maintains cancellation state internally so you wouldn\u2019t need to maintain it yourself.</p>\n<p>I see you are modeling exclusive ownership of the future though so actually my example use case isn\u2019t a concern.</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2021-08-09T16:55:13.897Z",
        "reply_count": 1,
        "reply_to_post_number": 7,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 11,
        "readers_count": 10,
        "score": 7.2,
        "yours": false,
        "topic_id": 2826,
        "topic_slug": "fdb-future-block-until-ready-and-retry-logic",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 14,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fdb-future-block-until-ready-and-retry-logic/2826/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 9839,
        "name": "Rajiv M Ranganath",
        "username": "rajivr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "created_at": "2021-08-10T08:32:59.768Z",
        "cooked": "<p><a class=\"mention\" href=\"/u/andrew.noyes\">@andrew.noyes</a> Thanks a lot for all the feedback so far. <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=10\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"></p>\n<p>I was wondering if you could please take a look at the retry logic for <a href=\"https://gist.github.com/rajivr/954bf2ab715b3b3bfa7712138dda1948#file-database-rs-L90-L124\" rel=\"noopener nofollow ugc\"><code>&lt;FdbDatabase as TransactionContext&gt;::run</code></a> and <a href=\"https://gist.github.com/rajivr/954bf2ab715b3b3bfa7712138dda1948#file-database-rs-L65-L88\" rel=\"noopener nofollow ugc\"><code>&lt;FdbDatabase as ReadTransactionContext&gt;::read</code></a> methods and let me know if I am implementing the retry logic correctly?</p>\n<p>Unlike Go panic or Java exceptions, in Rust <code>Result</code> type is used to signal errors. Therefore I am forcing the closure to return a <code>FdbResult&lt;T&gt;</code>.</p>\n<p>As I was updating the crate documentation, I noticed in the <a href=\"https://apple.github.io/foundationdb/javadoc/com/apple/foundationdb/Transaction.html\" rel=\"noopener nofollow ugc\"><code>Java API</code></a> it says - \"<em>Note: Client must call commit() and wait on the result on all transactions, even ones that only read\u2026</em>. Would this be relevant to Rust as we don\u2019t have garbage collector?</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2021-08-10T12:28:28.235Z",
        "reply_count": 1,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 10,
        "readers_count": 9,
        "score": 7.0,
        "yours": false,
        "topic_id": 2826,
        "topic_slug": "fdb-future-block-until-ready-and-retry-logic",
        "display_username": "Rajiv M Ranganath",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 3,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://gist.github.com/rajivr/954bf2ab715b3b3bfa7712138dda1948#file-database-rs-L90-L124",
            "internal": false,
            "reflection": false,
            "title": "database.rs \u00b7 GitHub",
            "clicks": 2
          },
          {
            "url": "https://apple.github.io/foundationdb/javadoc/com/apple/foundationdb/Transaction.html",
            "internal": false,
            "reflection": false,
            "title": "Transaction (FoundationDB Java Client API)",
            "clicks": 0
          },
          {
            "url": "https://gist.github.com/rajivr/954bf2ab715b3b3bfa7712138dda1948#file-database-rs-L65-L88",
            "internal": false,
            "reflection": false,
            "title": "database.rs \u00b7 GitHub",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 14,
          "username": "andrew.noyes",
          "name": "",
          "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 946,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fdb-future-block-until-ready-and-retry-logic/2826/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 9841,
        "name": "",
        "username": "andrew.noyes",
        "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
        "created_at": "2021-08-10T15:30:06.467Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"rajivr\" data-post=\"9\" data-topic=\"2826\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/rajivr/48/1100_2.png\" class=\"avatar\"> rajivr:</div>\n<blockquote>\n<p>I was wondering if you could please take a look at the retry logic for <a href=\"https://gist.github.com/rajivr/954bf2ab715b3b3bfa7712138dda1948#file-database-rs-L90-L124\" rel=\"noopener nofollow ugc\"> <code>&lt;FdbDatabase as TransactionContext&gt;::run</code> </a> and <a href=\"https://gist.github.com/rajivr/954bf2ab715b3b3bfa7712138dda1948#file-database-rs-L65-L88\" rel=\"noopener nofollow ugc\"> <code>&lt;FdbDatabase as ReadTransactionContext&gt;::read</code> </a> methods and let me know if I am implementing the retry logic correctly?</p>\n</blockquote>\n</aside>\n<p>Yup, this looks like the standard retry logic.</p>\n<aside class=\"quote no-group\" data-username=\"rajivr\" data-post=\"9\" data-topic=\"2826\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/rajivr/48/1100_2.png\" class=\"avatar\"> rajivr:</div>\n<blockquote>\n<p>As I was updating the crate documentation, I noticed in the <a href=\"https://apple.github.io/foundationdb/javadoc/com/apple/foundationdb/Transaction.html\" rel=\"noopener nofollow ugc\"> <code>Java API</code> </a> it says - \" <em>Note: Client must call commit() and wait on the result on all transactions, even ones that only read\u2026</em> . Would this be relevant to Rust as we don\u2019t have garbage collector?</p>\n</blockquote>\n</aside>\n<p>I\u2019m not sure I fully understand the java bindings recommendation, so maybe I\u2019m not the best person to answer. I think the concern is that read futures don\u2019t e.g. have a reference to the transaction that keeps it alive, and if you destroy the transaction while there are outstanding read futures those can fail with \u201ctransaction_cancelled\u201d. Calling \u201ccommit\u201d and waiting on the result will implicitly wait for all the read futures to complete, so it\u2019s sufficient to avoid this problem. I don\u2019t think there are any concerns with memory safety here. Basically if you think it\u2019s possible that any of the read futures outlive the call to the callback passed to the retry loop, it might make sense to call commit and wait on the result.</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2021-08-10T15:30:06.467Z",
        "reply_count": 1,
        "reply_to_post_number": 9,
        "quote_count": 1,
        "incoming_link_count": 1,
        "reads": 12,
        "readers_count": 11,
        "score": 12.4,
        "yours": false,
        "topic_id": 2826,
        "topic_slug": "fdb-future-block-until-ready-and-retry-logic",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 14,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fdb-future-block-until-ready-and-retry-logic/2826/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 9845,
        "name": "Rajiv M Ranganath",
        "username": "rajivr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "created_at": "2021-08-11T14:07:25.112Z",
        "cooked": "<p>Thanks <a class=\"mention\" href=\"/u/andrew.noyes\">@andrew.noyes</a>. <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=10\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"></p>\n<p>Regarding C APIs <a href=\"https://apple.github.io/foundationdb/api-c.html#c.fdb_future_get_value\" rel=\"noopener nofollow ugc\"><code>fdb_future_get_value</code></a> and <a href=\"https://apple.github.io/foundationdb/api-c.html#c.fdb_transaction_get\" rel=\"noopener nofollow ugc\"><code>fdb_transaction_get</code></a>, could you please confirm if I am understanding the behavior of <code>*out_present</code> correctly?</p>\n<ol>\n<li>\n<p>When the key is absent, then <code>*out_present</code> is zero.</p>\n</li>\n<li>\n<p>When the key is present, but with an empty value, then <code>*out_present</code> is non-zero,  and <code>*out_value_length</code> is zero.</p>\n</li>\n<li>\n<p>When the key is present, but with an non-empty value, then <code>*out_present</code> is non_zero, and <code>*out_value_length</code> is non-zero, along with a valid <code>*out_value</code> (owned by the future)</p>\n</li>\n</ol>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2021-08-11T14:07:25.112Z",
        "reply_count": 1,
        "reply_to_post_number": 10,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 12,
        "readers_count": 11,
        "score": 7.4,
        "yours": false,
        "topic_id": 2826,
        "topic_slug": "fdb-future-block-until-ready-and-retry-logic",
        "display_username": "Rajiv M Ranganath",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://apple.github.io/foundationdb/api-c.html#c.fdb_transaction_get",
            "internal": false,
            "reflection": false,
            "title": "C API \u2014 FoundationDB 6.3",
            "clicks": 2
          },
          {
            "url": "https://apple.github.io/foundationdb/api-c.html#c.fdb_future_get_value",
            "internal": false,
            "reflection": false,
            "title": "C API \u2014 FoundationDB 6.3",
            "clicks": 2
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 14,
          "username": "andrew.noyes",
          "name": "",
          "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 946,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fdb-future-block-until-ready-and-retry-logic/2826/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 9847,
        "name": "",
        "username": "andrew.noyes",
        "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
        "created_at": "2021-08-11T15:19:40.998Z",
        "cooked": "<p>Yup, that\u2019s all correct</p>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2021-08-11T15:19:40.998Z",
        "reply_count": 1,
        "reply_to_post_number": 11,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 11,
        "readers_count": 10,
        "score": 7.2,
        "yours": false,
        "topic_id": 2826,
        "topic_slug": "fdb-future-block-until-ready-and-retry-logic",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 946,
          "username": "rajivr",
          "name": "Rajiv M Ranganath",
          "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 14,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fdb-future-block-until-ready-and-retry-logic/2826/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 9876,
        "name": "Rajiv M Ranganath",
        "username": "rajivr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "created_at": "2021-08-16T13:09:29.108Z",
        "cooked": "<p>Thanks <a class=\"mention\" href=\"/u/andrew.noyes\">@andrew.noyes</a>. There is still some way to go, but <a href=\"https://github.com/rajivr/fdb/blob/wip/fdb/examples/hello_world.rs\" rel=\"noopener nofollow ugc\">here</a> is the initial working <em>hello world</em> implementation. <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<aside class=\"quote no-group quote-modified\" data-username=\"rajivr\" data-post=\"7\" data-topic=\"2826\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/rajivr/48/1100_2.png\" class=\"avatar\"> rajivr:</div>\n<blockquote>\n<aside class=\"quote no-group\" data-username=\"andrew.noyes\" data-post=\"6\" data-topic=\"2826\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/andrew.noyes/48/443_2.png\" class=\"avatar\"> andrew.noyes:</div>\n<blockquote>\n<ol start=\"3\">\n<li>Is the plan to copy the memory for types with memory owned by futures?</li>\n</ol>\n</blockquote>\n</aside>\n<p><code>[...]</code></p>\n<p>The plan is to implement the logic for copying in the <a href=\"https://gist.github.com/rajivr/bd6397a186da0ba72c39214f7a6ebfb9#file-mod-rs-L71\" rel=\"noopener nofollow ugc\"> <code>FdbFutureGet::get</code> </a> trait implementations for the appropriate types.</p>\n</blockquote>\n</aside>\n<p>I can now also share with you an <a href=\"https://github.com/rajivr/fdb/blob/wip/fdb/src/future.rs#L102-L129\" rel=\"noopener nofollow ugc\">example</a> is an of copying memory owned by FDB Future in an implementation of <code>FdbFutureGet::get</code> trait.</p>\n<p>Thanks again for patiently answering my questions. Please do let me know if you have any thoughts/comments.</p>\n<p>I was also wondering if it was possible to use <a href=\"https://apple.github.io/foundationdb/api-error-codes.html\" rel=\"noopener nofollow ugc\">error codes</a> between 100 thru\u2019 999 for the language binding layer?</p>",
        "post_number": 13,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2021-08-16T14:15:32.606Z",
        "reply_count": 1,
        "reply_to_post_number": 12,
        "quote_count": 2,
        "incoming_link_count": 0,
        "reads": 9,
        "readers_count": 8,
        "score": 6.8,
        "yours": false,
        "topic_id": 2826,
        "topic_slug": "fdb-future-block-until-ready-and-retry-logic",
        "display_username": "Rajiv M Ranganath",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://apple.github.io/foundationdb/api-error-codes.html",
            "internal": false,
            "reflection": false,
            "title": "Error Codes \u2014 FoundationDB 6.3",
            "clicks": 2
          },
          {
            "url": "https://github.com/rajivr/fdb/blob/wip/fdb/examples/hello_world.rs",
            "internal": false,
            "reflection": false,
            "title": "fdb/hello_world.rs at wip \u00b7 rajivr/fdb \u00b7 GitHub",
            "clicks": 1
          },
          {
            "url": "https://github.com/rajivr/fdb/blob/wip/fdb/src/future.rs#L102-L129",
            "internal": false,
            "reflection": false,
            "title": "fdb/future.rs at wip \u00b7 rajivr/fdb \u00b7 GitHub",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 14,
          "username": "andrew.noyes",
          "name": "",
          "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 946,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fdb-future-block-until-ready-and-retry-logic/2826/13",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 9878,
        "name": "",
        "username": "andrew.noyes",
        "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
        "created_at": "2021-08-16T18:00:43.486Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"rajivr\" data-post=\"13\" data-topic=\"2826\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/rajivr/48/1100_2.png\" class=\"avatar\"> rajivr:</div>\n<blockquote>\n<p>I was also wondering if it was possible to use <a href=\"https://apple.github.io/foundationdb/api-error-codes.html\" rel=\"noopener nofollow ugc\">error codes </a> between 100 thru\u2019 999 for the language binding layer?</p>\n</blockquote>\n</aside>\n<p>I don\u2019t think there\u2019s any guarantee these won\u2019t be used by fdb in the future - maybe <a class=\"mention\" href=\"/u/ajbeamon\">@ajbeamon</a> knows</p>",
        "post_number": 14,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2021-08-16T18:00:43.486Z",
        "reply_count": 1,
        "reply_to_post_number": 13,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 9,
        "readers_count": 8,
        "score": 6.8,
        "yours": false,
        "topic_id": 2826,
        "topic_slug": "fdb-future-block-until-ready-and-retry-logic",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 14,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fdb-future-block-until-ready-and-retry-logic/2826/14",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 9879,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2021-08-16T21:05:03.441Z",
        "cooked": "<blockquote>\n<p>I don\u2019t think there\u2019s any guarantee these won\u2019t be used by fdb in the future - maybe <a class=\"mention\" href=\"/u/ajbeamon\">@ajbeamon</a> knows</p>\n</blockquote>\n<p>I think you\u2019re right, we haven\u2019t reserved any error codes for external usage as far I know.</p>",
        "post_number": 15,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2021-08-16T21:05:03.441Z",
        "reply_count": 1,
        "reply_to_post_number": 14,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 10,
        "readers_count": 9,
        "score": 7.0,
        "yours": false,
        "topic_id": 2826,
        "topic_slug": "fdb-future-block-until-ready-and-retry-logic",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 14,
          "username": "andrew.noyes",
          "name": "",
          "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fdb-future-block-until-ready-and-retry-logic/2826/15",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 9880,
        "name": "Rajiv M Ranganath",
        "username": "rajivr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "created_at": "2021-08-17T03:35:39.937Z",
        "cooked": "<p>Thanks <a class=\"mention\" href=\"/u/ajbeamon\">@ajbeamon</a> and <a class=\"mention\" href=\"/u/andrew.noyes\">@andrew.noyes</a>.</p>\n<p>There are currently two instances where I\u2019m piggybacking on FDB error codes. One is <a href=\"https://github.com/rajivr/fdb/blob/wip/fdb/src/database/open_database.rs#L22-L28\" rel=\"noopener nofollow ugc\">here</a> and the other is under development.</p>\n<p>Once my bindings work is complete, maybe I could request for a range from upstream.</p>",
        "post_number": 16,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2021-08-17T03:35:40.097Z",
        "reply_count": 0,
        "reply_to_post_number": 15,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 9,
        "readers_count": 8,
        "score": 1.8,
        "yours": false,
        "topic_id": 2826,
        "topic_slug": "fdb-future-block-until-ready-and-retry-logic",
        "display_username": "Rajiv M Ranganath",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/rajivr/fdb/blob/wip/fdb/src/database/open_database.rs#L22-L28",
            "internal": false,
            "reflection": false,
            "title": "fdb/open_database.rs at wip \u00b7 rajivr/fdb \u00b7 GitHub",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 12,
          "username": "ajbeamon",
          "name": "A.J. Beamon",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 946,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": "Automatically removed quote of whole previous post.",
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fdb-future-block-until-ready-and-retry-logic/2826/16",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 9938,
        "name": "Rajiv M Ranganath",
        "username": "rajivr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "created_at": "2021-09-02T13:29:20.517Z",
        "cooked": "<p><a class=\"mention\" href=\"/u/andrew.noyes\">@andrew.noyes</a> I just completed Rust <a href=\"https://github.com/rajivr/fdb/blob/c304e2dbbba2762fc73d5f40fbe50108119e0eea/fdb/src/range.rs#L359-L453\" rel=\"noopener nofollow ugc\">Iterator</a> implementation for range reads.</p>\n<p>This was perhaps one of most tricky API to implement thus far, and I am kind of glad it is done! <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=10\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"></p>\n<p>I\u2019ve currently modeled the <a href=\"https://github.com/rajivr/fdb/blob/c304e2dbbba2762fc73d5f40fbe50108119e0eea/fdb/tests/range_query_test.rs\" rel=\"noopener nofollow ugc\">tests</a> based on <a href=\"https://github.com/apple/foundationdb/blob/master/bindings/java/src/junit/com/apple/foundationdb/RangeQueryTest.java\" rel=\"noopener nofollow ugc\">RangeQueryTest.java</a>.</p>\n<p>I could not find additional unit tests for range reads in other bindings. I was wondering if there are additional tests somewhere else that I can potentially steal ideas from? I also checked Go bindings for tests.</p>",
        "post_number": 17,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2021-09-02T13:29:20.517Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 8,
        "readers_count": 7,
        "score": 1.6,
        "yours": false,
        "topic_id": 2826,
        "topic_slug": "fdb-future-block-until-ready-and-retry-logic",
        "display_username": "Rajiv M Ranganath",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/rajivr/fdb/blob/c304e2dbbba2762fc73d5f40fbe50108119e0eea/fdb/src/range.rs#L359-L453",
            "internal": false,
            "reflection": false,
            "title": "fdb/range.rs at c304e2dbbba2762fc73d5f40fbe50108119e0eea \u00b7 rajivr/fdb \u00b7 GitHub",
            "clicks": 2
          },
          {
            "url": "https://github.com/rajivr/fdb/blob/c304e2dbbba2762fc73d5f40fbe50108119e0eea/fdb/tests/range_query_test.rs",
            "internal": false,
            "reflection": false,
            "title": "fdb/range_query_test.rs at c304e2dbbba2762fc73d5f40fbe50108119e0eea \u00b7 rajivr/fdb \u00b7 GitHub",
            "clicks": 0
          },
          {
            "url": "https://github.com/apple/foundationdb/blob/master/bindings/java/src/junit/com/apple/foundationdb/RangeQueryTest.java",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/RangeQueryTest.java at master \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 946,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fdb-future-block-until-ready-and-retry-logic/2826/17",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      9758,
      9760,
      9769,
      9783,
      9824,
      9827,
      9830,
      9833,
      9839,
      9841,
      9845,
      9847,
      9876,
      9878,
      9879,
      9880,
      9938
    ]
  },
  "timeline_lookup": [
    [
      1,
      1545
    ],
    [
      4,
      1541
    ],
    [
      5,
      1538
    ],
    [
      6,
      1537
    ],
    [
      8,
      1534
    ],
    [
      10,
      1533
    ],
    [
      11,
      1532
    ],
    [
      13,
      1527
    ],
    [
      17,
      1510
    ]
  ],
  "suggested_topics": [],
  "tags": [
    "bindings"
  ],
  "tags_descriptions": {},
  "fancy_title": "`fdb_future_block_until_ready` and retry logic",
  "id": 2826,
  "title": "`fdb_future_block_until_ready` and retry logic",
  "posts_count": 17,
  "created_at": "2021-07-29T16:11:47.961Z",
  "views": 1009,
  "reply_count": 14,
  "like_count": 1,
  "last_posted_at": "2021-09-02T13:29:20.517Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "fdb-future-block-until-ready-and-retry-logic",
  "category_id": 5,
  "word_count": 2888,
  "deleted_at": null,
  "user_id": 946,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_2826",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 17,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 3,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "FoundationDB fdb_future_block_until_ready return before data is ready",
      "id": 2433,
      "title": "FoundationDB fdb_future_block_until_ready return before data is ready",
      "slug": "foundationdb-fdb-future-block-until-ready-return-before-data-is-ready",
      "posts_count": 5,
      "reply_count": 1,
      "highest_post_number": 5,
      "image_url": null,
      "created_at": "2020-11-10T13:27:14.993Z",
      "last_posted_at": "2020-11-11T08:23:12.575Z",
      "bumped": true,
      "bumped_at": "2020-11-11T08:23:12.575Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 555,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 851,
            "username": "dandanogni",
            "name": "dandan ogni",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/bbce88/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 14,
            "username": "andrew.noyes",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Question regarding retry logic and transaction get_versionstamp API",
      "id": 2985,
      "title": "Question regarding retry logic and transaction get_versionstamp API",
      "slug": "question-regarding-retry-logic-and-transaction-get-versionstamp-api",
      "posts_count": 6,
      "reply_count": 3,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2021-11-02T12:02:49.561Z",
      "last_posted_at": "2021-11-07T05:37:25.761Z",
      "bumped": true,
      "bumped_at": "2021-11-07T12:00:37.390Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "bindings"
      ],
      "tags_descriptions": {},
      "like_count": 4,
      "views": 651,
      "category_id": 8,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 946,
            "username": "rajivr",
            "name": "Rajiv M Ranganath",
            "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "What is the life time of key, value and other arguments passed to fdb_transaction_*",
      "id": 516,
      "title": "What is the life time of key, value and other arguments passed to fdb_transaction_*",
      "slug": "what-is-the-life-time-of-key-value-and-other-arguments-passed-to-fdb-transaction",
      "posts_count": 11,
      "reply_count": 4,
      "highest_post_number": 11,
      "image_url": null,
      "created_at": "2018-06-18T18:28:57.904Z",
      "last_posted_at": "2018-07-17T16:11:21.242Z",
      "bumped": true,
      "bumped_at": "2018-07-17T16:11:21.242Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "bindings"
      ],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 2608,
      "category_id": 5,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 308,
            "username": "ananthakumaran",
            "name": "Anantha Kumaran",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ananthakumaran/{size}/526_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 22,
            "username": "dave",
            "name": "David Scherer",
            "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Question regarding WATCH future",
      "id": 3062,
      "title": "Question regarding WATCH future",
      "slug": "question-regarding-watch-future",
      "posts_count": 8,
      "reply_count": 6,
      "highest_post_number": 8,
      "image_url": null,
      "created_at": "2021-12-07T14:34:46.115Z",
      "last_posted_at": "2021-12-10T01:10:12.437Z",
      "bumped": true,
      "bumped_at": "2021-12-10T01:10:12.437Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "bindings"
      ],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 480,
      "category_id": 5,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 946,
            "username": "rajivr",
            "name": "Rajiv M Ranganath",
            "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Indefinite blocking of fdb_future_block_until_ready even though DB is available",
      "id": 1323,
      "title": "Indefinite blocking of fdb_future_block_until_ready even though DB is available",
      "slug": "indefinite-blocking-of-fdb-future-block-until-ready-even-though-db-is-available",
      "posts_count": 3,
      "reply_count": 0,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2019-04-22T12:11:56.933Z",
      "last_posted_at": "2019-04-26T07:06:08.936Z",
      "bumped": true,
      "bumped_at": "2019-04-26T07:06:08.936Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "bindings"
      ],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 956,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 511,
            "username": "sakthivelpvs",
            "name": "Sakthivel",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9dc877/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 946,
        "username": "rajivr",
        "name": "Rajiv M Ranganath",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "post_count": 9,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 14,
        "username": "andrew.noyes",
        "name": "",
        "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
        "post_count": 7,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 12,
        "username": "ajbeamon",
        "name": "A.J. Beamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      }
    ],
    "created_by": {
      "id": 946,
      "username": "rajivr",
      "name": "Rajiv M Ranganath",
      "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png"
    },
    "last_poster": {
      "id": 946,
      "username": "rajivr",
      "name": "Rajiv M Ranganath",
      "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png"
    },
    "links": [
      {
        "url": "https://github.com/apple/foundationdb/blob/6.3.13/bindings/go/src/fdb/futures.go#L200-L216",
        "title": "foundationdb/futures.go at 6.3.13 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 4,
        "user_id": 946,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://gist.github.com/rajivr/bd6397a186da0ba72c39214f7a6ebfb9",
        "title": "mod.rs \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 946,
        "domain": "gist.github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://apple.github.io/foundationdb/api-c.html#c.fdb_future_block_until_ready",
        "title": "C API \u2014 FoundationDB 6.3",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 14,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/6.3.13/bindings/java/src/main/com/apple/foundationdb/NativeFuture.java#L137",
        "title": "foundationdb/NativeFuture.java at 6.3.13 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 946,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://apple.github.io/foundationdb/api-error-codes.html",
        "title": "Error Codes \u2014 FoundationDB 6.3",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 946,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      },
      {
        "url": "https://gist.github.com/rajivr/954bf2ab715b3b3bfa7712138dda1948#file-database-rs-L90-L124",
        "title": "database.rs \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 946,
        "domain": "gist.github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/6.3.13/bindings/go/src/fdb/database.go#L132-L152",
        "title": "foundationdb/database.go at 6.3.13 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 946,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://apple.github.io/foundationdb/api-c.html#c.fdb_future_get_value",
        "title": "C API \u2014 FoundationDB 6.3",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 946,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      },
      {
        "url": "https://apple.github.io/foundationdb/api-c.html#c.fdb_transaction_get",
        "title": "C API \u2014 FoundationDB 6.3",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 946,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      },
      {
        "url": "https://apple.github.io/foundationdb/api-c.html#c.fdb_transaction_on_error",
        "title": "C API \u2014 FoundationDB 6.3",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 14,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      },
      {
        "url": "https://github.com/rajivr/fdb/blob/c304e2dbbba2762fc73d5f40fbe50108119e0eea/fdb/src/range.rs#L359-L453",
        "title": "fdb/range.rs at c304e2dbbba2762fc73d5f40fbe50108119e0eea \u00b7 rajivr/fdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 946,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/PierreZ/foundationdb-rs/tree/dev/630",
        "title": "GitHub - PierreZ/foundationdb-rs at dev/630",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 946,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://without.boats/blog/io-uring/",
        "title": "Notes on io-uring - Without boats, dreams dry up",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 946,
        "domain": "without.boats",
        "root_domain": "without.boats"
      },
      {
        "url": "https://github.com/rajivr/fdb/blob/wip/fdb/examples/hello_world.rs",
        "title": "fdb/hello_world.rs at wip \u00b7 rajivr/fdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 946,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/6.3.13/bindings/java/src/main/com/apple/foundationdb/FDBDatabase.java#L53-L68",
        "title": "foundationdb/FDBDatabase.java at 6.3.13 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 946,
        "domain": "github.com",
        "root_domain": "github.com"
      }
    ]
  },
  "bookmarks": []
}