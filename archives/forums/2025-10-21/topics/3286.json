{
  "post_stream": {
    "posts": [
      {
        "id": 11017,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2022-04-27T18:49:26.459Z",
        "cooked": "<p>(<em>Disclaimer</em>: This is not a well-written post and stuff in here is probably described badly. My main intention is to make people aware of a new feature. Please ask questions if anything is unclear <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"> ).</p>\n<p>At Snowflake we\u2019re currently working on a simple authorization feature. I wanted to announce this here in case others in the community find this useful and want to start preparing to use this (or want to start testing this as soon as we have it code-complete in the <code>main</code> branch).</p>\n<h3>\n<a name=\"current-state-1\" class=\"anchor\" href=\"#current-state-1\"></a>Current State</h3>\n<p>So currently there is almost no security in FDB. However, there is a feature that clients can be authenticated via mTLS. mTLS is, as of today the only way someone can use TLS in FDB. The rationale here is that clients are treated in a binary way: either they are trusted entities and therefore get full access to FDB, or they\u2019re not and therefore can\u2019t establish a connection.</p>\n<h3>\n<a name=\"small-tangent-multi-tenancy-new-71-feature-2\" class=\"anchor\" href=\"#small-tangent-multi-tenancy-new-71-feature-2\"></a>Small Tangent: Multi-tenancy (new 7.1 feature)</h3>\n<p>FDB 7.1 will introduce the concept of <a href=\"https://apple.github.io/foundationdb/tenants.html?highlight=tenant\">tenants</a>. This feature is still in development, but the basic functionality is working (other things, like workload isolation, automatic movement of tenants across clusters, meta-cluster management etc will be added in later versions of FDB).</p>\n<p>A tenant will provide its own transactional subspace. Running transactions that touch multiple tenants is not something we support. Instead they should be thought of as independent databases. So instead of running 10 clusters for 10 applications, we can now run 1 clusters (or more, up to 10, depending on the load requirements).</p>\n<h3>\n<a name=\"authorization-model-3\" class=\"anchor\" href=\"#authorization-model-3\"></a>Authorization Model</h3>\n<p>The feature we\u2019re currently implementing is very simple: instead of all-or-nothing access, a client can be given access to only a limited number of tenants.</p>\n<p>The model we\u2019re using is the following:</p>\n<pre><code class=\"lang-auto\">Client Machine (untrusted) -&gt; Authentication Service -&gt; Application -&gt; FDB\n</code></pre>\n<ol>\n<li>We assume there will be some client (a machine not controlled by the organization that runs the FDB application \u2013 so this could be an iPhone App or some web browser). It will send requests to some service.</li>\n<li>Before anything happens, there will be some authentication service.</li>\n<li>Then the actual application (which runs the FDB client) will receive this request. This machine will then only read/write data of a specific tenant or a small set of tenants (a tenant could be a user or a specific service \u2013 ultimately the application will decide what the meaning of tenant is).</li>\n</ol>\n<p>In this new world, the application will connect to FDB using TLS, but it won\u2019t provide a certificate (so mTLS won\u2019t be a requirement anymore, only FDB \u2192 FDB connections will have to use mTLS). FDB will accept the connection, but it won\u2019t allow the client to do anything useful. That means, by default the client won\u2019t be able to read or write any data.</p>\n<p>If it wants to do anything, it has to send an access token to FDB. This token will basically just contain a list of tenants the client is allowed to access (raw key access will be denied) and this token has to be signed by some private key. FDB will then need to know about the public key (distributing public keys to the FDB nodes will, again, be the responsibility of the user).</p>\n<p>One of the difficulties for using this feature is that the user will have to figure out how to generate the tokens and deliver them to the application. Technically, FDB doesn\u2019t do authorization, it just enforces it. This token can be generated by some service and then passed to the application.</p>\n<h3>\n<a name=\"limitations-4\" class=\"anchor\" href=\"#limitations-4\"></a>Limitations</h3>\n<p>This first implementation will have some limitations:</p>\n<ol>\n<li>There\u2019s nothing that will prevent a replay attack. The only protection against replay attacks is a TTL in the token. So if a token is being leaked, anyone who can make a connection to the FDB cluster will be able to use this token. This has to be addressed later, but for now it\u2019s the responsibility of the application to keep tokens safe.</li>\n<li>There\u2019s a relatively high operational overhead: pubic keys need to be distributed to all FDB hosts. Key rotation has to be solved outside of FDB. In order to create a token, the FDB client library will provide helper functions, but ultimately, most of the burden will be with the user. We don\u2019t plan to change this. We expect most FDB users will already have some infrastructure for these kind of operations.</li>\n<li>Authorization is still very coarse \u2013 instead of a cluster, authorization will simply be on a tenant level. We don\u2019t yet have plans to change this.</li>\n</ol>\n<h3>\n<a name=\"timeline-5\" class=\"anchor\" href=\"#timeline-5\"></a>Timeline</h3>\n<p>We\u2019re planning to release this feature in FDB 7.2 which we hope to release in fall 2022. The code is currently being written and tested. As soon as the APIs are finalized, we will write some documentation so people can test this feature on a prerelease version.</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-04-27T18:49:26.459Z",
        "reply_count": 3,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 462,
        "reads": 69,
        "readers_count": 68,
        "score": 2343.8,
        "yours": false,
        "topic_id": 3286,
        "topic_slug": "authorization-in-fdb",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://apple.github.io/foundationdb/tenants.html?highlight=tenant",
            "internal": false,
            "reflection": false,
            "title": "Tenants \u2014 FoundationDB 7.1",
            "clicks": 19
          },
          {
            "url": "https://forums.foundationdb.org/t/an-fdb-client-connecting-to-multiple-fdb-clusters/3639",
            "internal": true,
            "reflection": true,
            "title": "An fdb client connecting to multiple FDB clusters",
            "clicks": 1
          },
          {
            "url": "https://forums.foundationdb.org/t/an-fdb-client-connecting-to-multiple-fdb-clusters/3639/2",
            "internal": true,
            "reflection": true,
            "title": "An fdb client connecting to multiple FDB clusters",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/authorization-in-fdb/3286/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 11018,
        "name": "Rajiv M Ranganath",
        "username": "rajivr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "created_at": "2022-04-28T01:18:21.175Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"1\" data-topic=\"3286\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>In this new world, the application will connect to FDB using TLS, but it won\u2019t provide a certificate (so mTLS won\u2019t be a requirement anymore, only FDB \u2192 FDB connections will have to use mTLS). FDB will accept the connection, but it won\u2019t allow the client to do anything useful. That means, by default the client won\u2019t be able to read or write any data.</p>\n</blockquote>\n</aside>\n<p>Thanks <a class=\"mention\" href=\"/u/markus.pilman\">@markus.pilman</a> for starting this thread! <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>I am assuming by \u201capplication\u201d here is FDB Client. Regarding <em>mTLS won\u2019t be a requirement anymore</em> - Assuming we have a zero-trust network architecture (i.e., there are no private networks and SPIFFE mTLS and FDB mTLS is used).</p>\n<p>If Application (FDB Client) uses regular TLS (not mTLS), then what would prevent some random host on the Internet from opening a TLS connection to the cluster?</p>\n<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"1\" data-topic=\"3286\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>There\u2019s nothing that will prevent a replay attack. The only protection against replay attacks is a TTL in the token. So if a token is being leaked, anyone who can make a connection to the FDB cluster will be able to use this token. This has to be addressed later, but for now it\u2019s the responsibility of the application to keep tokens safe.</p>\n</blockquote>\n</aside>\n<p>If mTLS is used between Application (FDB Client) and the cluster, then I think it would significantly limit the blast radius of a potential token leak.</p>\n<p>The attacker will not only have to gain access to the token, they will also need the private key material that would identify the Application (FDB Client).</p>\n<p>The impact of any token leak from \u201cClient Machine\u201d would be reduced.</p>\n<p>While we are on the topic of identity/authn/authz, I was wondering if Snowflake considered using SPIFFE standard to replace FDB mTLS?</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-04-28T01:19:39.049Z",
        "reply_count": 2,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 4,
        "reads": 54,
        "readers_count": 53,
        "score": 40.8,
        "yours": false,
        "topic_id": 3286,
        "topic_slug": "authorization-in-fdb",
        "display_username": "Rajiv M Ranganath",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 946,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/authorization-in-fdb/3286/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 11019,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2022-04-28T03:49:18.210Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"rajivr\" data-post=\"2\" data-topic=\"3286\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/rajivr/48/1100_2.png\" class=\"avatar\"> rajivr:</div>\n<blockquote>\n<p>If Application (FDB Client) uses regular TLS (not mTLS), then what would prevent some random host on the Internet from opening a TLS connection to the cluster?</p>\n</blockquote>\n</aside>\n<p>Nothing, but this is not intended to so you can open up an FDB cluster to the world. The use-cases we\u2019re thinking of are a bit more narrow:</p>\n<ol>\n<li>You could have multiple applications within the same company and you want to ensure that they don\u2019t interact with each other. This could, for example, help with compliance. It also reduces the blast radius of potential application bugs to a tenant.</li>\n<li>The machine that runs the application is operated by you, but it runs some untrusted code. Authorization will allow you to limit the blast radius.</li>\n<li>Similar to the point above, you could allow your customers to run some code on machines you own (usually you would sandbox this, but a sandbox might not be 100% secure \u2013 for example due to kernel exploits). If they try to do something malicious, they will only be able to read their own data, but not the data of other tenants.</li>\n</ol>\n<aside class=\"quote no-group\" data-username=\"rajivr\" data-post=\"2\" data-topic=\"3286\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/rajivr/48/1100_2.png\" class=\"avatar\"> rajivr:</div>\n<blockquote>\n<p>If mTLS is used between Application (FDB Client) and the cluster, then I think it would significantly limit the blast radius of a potential token leak.</p>\n</blockquote>\n</aside>\n<p>No, what you\u2019re describing can be achieved much easier by having proper firewall rules. If you want to prevent a machine from connecting to a cluster, it shouldn\u2019t be able to even attempt a connection (this is also true if you use mTLS as this will help you prevent DDoS attacks and the like). Again, opening an FDB cluster to the world is currently a terrible idea and this authorization feature won\u2019t change this (and honestly this might never be a goal, I don\u2019t see reasons why you would want to be able to connect directly to FDB from outside a controlled network).</p>\n<p>This is also why this replay attack might not be an issue for everyone. Because in order to execute this attack, an attacker would need a copy of a token and own a machine that can connect to FDB.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-04-28T03:49:18.210Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 1,
        "incoming_link_count": 1,
        "reads": 43,
        "readers_count": 42,
        "score": 33.6,
        "yours": false,
        "topic_id": 3286,
        "topic_slug": "authorization-in-fdb",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/authorization-in-fdb/3286/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 11021,
        "name": "Rajiv M Ranganath",
        "username": "rajivr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "created_at": "2022-04-28T04:16:19.291Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"3\" data-topic=\"3286\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>Nothing, but this is not intended to so you can open up an FDB cluster to the world.</p>\n</blockquote>\n</aside>\n<p>Thanks for the reply <a class=\"mention\" href=\"/u/markus.pilman\">@markus.pilman</a>. Just to confirm, we do not intend to open our FDB cluster to the world.</p>\n<p>In a zero-trust environment, to a very large extent we would avoid network-segmentation, private VLANs, NAT and firewall rules. Instead workloads will have identity and use mTLS between them. There are still ways of initiating DDoS attacks but the mitigation approach is also different.</p>\n<aside class=\"quote no-group quote-modified\" data-username=\"markus.pilman\" data-post=\"3\" data-topic=\"3286\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<aside class=\"quote no-group\" data-username=\"rajivr\" data-post=\"2\" data-topic=\"3286\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/rajivr/48/1100_2.png\" class=\"avatar\"> rajivr:</div>\n<blockquote>\n<p>If mTLS is used between Application (FDB Client) and the cluster, then I think it would significantly limit the blast radius of a potential token leak.</p>\n</blockquote>\n</aside>\n<p>No, what you\u2019re describing can be achieved much easier by having proper firewall rules. If you want to prevent a machine from connecting to a cluster, it shouldn\u2019t be able to even attempt a connection (this is also true if you use mTLS as this will help you prevent DDoS attacks and the like). Again, opening an FDB cluster to the world is currently a terrible idea and this authorization feature won\u2019t change this (and honestly this might never be a goal, I don\u2019t see reasons why you would want to be able to connect directly to FDB from outside a controlled network).</p>\n</blockquote>\n</aside>\n<p>From a design point of view, if we can preserve the current ability to do mTLS between Application (FDB Client) and the cluster, I think that would be sufficient.</p>\n<p>Being able to do mTLS will allow us to establish identity, authentication and encryption at the network layer between the FDB Client and the cluster. Then on top of that we can use token based authz.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-04-28T04:23:04.284Z",
        "reply_count": 1,
        "reply_to_post_number": 3,
        "quote_count": 2,
        "incoming_link_count": 6,
        "reads": 40,
        "readers_count": 39,
        "score": 43.0,
        "yours": false,
        "topic_id": 3286,
        "topic_slug": "authorization-in-fdb",
        "display_username": "Rajiv M Ranganath",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 946,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/authorization-in-fdb/3286/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 11022,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2022-04-28T05:14:37.983Z",
        "cooked": "<p>I see. So before going into further details I just want to mention that mTLS comes at a cost. mTLS connections are significantly more CPU heavy than non-mutual ones. We don\u2019t know yet how high this overhead is in FDB. But you could reasonably say that you\u2019re willing to pay this cost of course.</p>\n<p>So at a high level, what you need is a way for FDB to differentiate between privileged connections and non-privileged connections. One thing I didn\u2019t explain above is that with a non mTLS connections, clients won\u2019t be able to call certain RPC endpoints (so that they, for example, can\u2019t pretend to be a storage server). So for FDB \u2192 FDB connections (and also management machine \u2192 FDB or provisioning service \u2192 FDB) we can\u2019t use the current token mechanism.</p>\n<p>However, these are solvable problems. Today we already have a solution for this implemented (in the <code>main</code> branch, not in any release): you can pass a set of IP subnets to FDB and then FDB will treat connections from an IP as \u201ctrusted\u201d (so it will have privileged access and can call any RPC endpoint and read and write all data). By default this allow list will be empty and empty is interpreted as \u201cevery IP address is in the allow list\u201d. The main reason we implemented this is because it makes testing much easier (especially simulation testing). So if IP spoofing is impossible in your network, this might be a possibility (although it is not great, because now if you ever need to resize your subnets you need to remember that you potentially have to update the FDB configs on all FDB machines).</p>\n<p>Another possible solution would be to enforce token based access for everyone but also introduce a new token type for full privileged access. The main drawback here is that it makes things like key rotation harder. If an fdbserver process can\u2019t get a token, it won\u2019t be able to join the cluster. If many fdbserver processes don\u2019t get a token (or their tokens expires and the refresh mechanism doesn\u2019t work because some other service has an availability loss) the cluster could potentially become unavailable. However, this might be manageable and this solution probably wouldn\u2019t be too hard to implement.</p>\n<p>To be clear: we don\u2019t plan to get rid of mTLS on clients. In the current design it will just mean that you need an ip allow list so that clients don\u2019t get privileged access if they have a valid certificate.</p>\n<p>Below is a table that shows how FDB decides whether a connection gets privileged access (<span class=\"chcklst-box checked fa fa-check-square-o fa-fw\"></span> means combination will result in a privileged connection, <span class=\"chcklst-box fa fa-square-o fa-fw\"></span> means fdb will enforce token based authorization):</p>\n<div class=\"md-table\">\n<table>\n<thead>\n<tr>\n<th>Mechanisms used on the client</th>\n<th>Allow List Empty</th>\n<th>Client IP in Allow List</th>\n<th>Client IP not in Allow List</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>mTLS</strong></td>\n<td><span class=\"chcklst-box checked fa fa-check-square-o fa-fw\"></span></td>\n<td><span class=\"chcklst-box checked fa fa-check-square-o fa-fw\"></span></td>\n<td><span class=\"chcklst-box fa fa-square-o fa-fw\"></span></td>\n</tr>\n<tr>\n<td><strong>Non-mutual TLS</strong></td>\n<td><span class=\"chcklst-box fa fa-square-o fa-fw\"></span></td>\n<td><span class=\"chcklst-box fa fa-square-o fa-fw\"></span></td>\n<td><span class=\"chcklst-box fa fa-square-o fa-fw\"></span></td>\n</tr>\n<tr>\n<td><strong>TLS diabled</strong></td>\n<td><span class=\"chcklst-box checked fa fa-check-square-o fa-fw\"></span></td>\n<td><span class=\"chcklst-box checked fa fa-check-square-o fa-fw\"></span></td>\n<td><span class=\"chcklst-box fa fa-square-o fa-fw\"></span></td>\n</tr>\n</tbody>\n</table>\n</div><p>Please note that today we only support the combination mTLS &amp; Allow List Empty (as the IP allow list doesn\u2019t exist today). This ensures that if you don\u2019t do anything, the behavior will only change minimally (clients in 7.2 will be able to connect to the FDB cluster without certificates, but they won\u2019t be able to do anything useful).</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-04-28T15:43:11.341Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 11,
        "reads": 39,
        "readers_count": 38,
        "score": 67.8,
        "yours": false,
        "topic_id": 3286,
        "topic_slug": "authorization-in-fdb",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 946,
          "username": "rajivr",
          "name": "Rajiv M Ranganath",
          "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/authorization-in-fdb/3286/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 11026,
        "name": "Rajiv M Ranganath",
        "username": "rajivr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "created_at": "2022-04-29T00:22:04.642Z",
        "cooked": "<p>Thanks again for the detailed reply <a class=\"mention\" href=\"/u/markus.pilman\">@markus.pilman</a> <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"> I really appreciate it.</p>\n<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"5\" data-topic=\"3286\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>So at a high level, what you need is a way for FDB to differentiate between privileged connections and non-privileged connections. One thing I didn\u2019t explain above is that with a non mTLS connections, clients won\u2019t be able to call certain RPC endpoints (so that they, for example, can\u2019t pretend to be a storage server). So for FDB \u2192 FDB connections (and also management machine \u2192 FDB or provisioning service \u2192 FDB) we can\u2019t use the current token mechanism.</p>\n</blockquote>\n</aside>\n<p>Would I be right in understanding a privileged connection would be a connection that has <a href=\"https://apple.github.io/foundationdb/tenants.html#raw-access\" rel=\"noopener nofollow ugc\"><code>RAW_ACCESS</code></a>?</p>\n<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"5\" data-topic=\"3286\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>Another possible solution would be to enforce token based access for everyone but also introduce a new token type for full privileged access.</p>\n</blockquote>\n</aside>\n<p>Instead of \u201cClient IP in Allow List\u201d, which ties the identity of a privileged connection to an IP address, would it be possible to extend the current <a href=\"https://apple.github.io/foundationdb/tls.html#peer-verification\" rel=\"noopener nofollow ugc\">peer verification</a> mechanism so that if the FDB client presents a certificate with a \u201cprivileged\u201d field, <em>only</em> then does the connection becomes privileged?</p>\n<p>From an operational point of view this would mean the entity (operator, provisioning service) would have to make a request to a secrets management tool for a short lived \u201cprivileged\u201d certificate. This request can be logged in the secret management tool and how it is used can be logged in the application (for provisioning service) and terminal logging (for operator).</p>\n<p>\u201cClient IP in Allow List\u201d can still be used to provide additional access control, but not as an identity mechanism. For example if an FDB Client presents a valid \u201cprivileged\u201d certificate, but is not in \u201cClient IP in Allow List\u201d, then the connection does not become privileged. In the event the short lived certificate leaks out of the operator machine or provisioning service machine, the blast radius of that leak would still be restricted.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-04-29T00:32:06.378Z",
        "reply_count": 1,
        "reply_to_post_number": 5,
        "quote_count": 1,
        "incoming_link_count": 3,
        "reads": 37,
        "readers_count": 36,
        "score": 27.4,
        "yours": false,
        "topic_id": 3286,
        "topic_slug": "authorization-in-fdb",
        "display_username": "Rajiv M Ranganath",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://apple.github.io/foundationdb/tls.html#peer-verification",
            "internal": false,
            "reflection": false,
            "title": "Transport Layer Security \u2014 FoundationDB 7.1",
            "clicks": 4
          },
          {
            "url": "https://apple.github.io/foundationdb/tenants.html#raw-access",
            "internal": false,
            "reflection": false,
            "title": "Tenants \u2014 FoundationDB 7.1",
            "clicks": 1
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 946,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/authorization-in-fdb/3286/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 11034,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2022-05-02T15:50:16.792Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"rajivr\" data-post=\"6\" data-topic=\"3286\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/rajivr/48/1100_2.png\" class=\"avatar\"> rajivr:</div>\n<blockquote>\n<p>Would I be right in understanding a privileged connection would be a connection that has <a href=\"https://apple.github.io/foundationdb/tenants.html#raw-access\"> <code>RAW_ACCESS</code> </a>?</p>\n</blockquote>\n</aside>\n<p>Yes, but it\u2019s more than that. The following things will require a privileged connection:</p>\n<ul>\n<li>Joining the cluster as a server (so all <code>fdbserver</code> processes need a privileged connection, but we also want to prevent a client to \u201cpretend\u201d being a server).</li>\n<li>Management operations (like configuration changes, killing servers, running <code>status json</code>,\u2026). So <code>fdbcli</code> will need a certificate.</li>\n<li>Creating and deleting tenants.</li>\n</ul>\n<p>So as you can see, using authorization will probably require some work for most users and it won\u2019t be a feature you can just turn on.</p>\n<aside class=\"quote no-group\" data-username=\"rajivr\" data-post=\"6\" data-topic=\"3286\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/rajivr/48/1100_2.png\" class=\"avatar\"> rajivr:</div>\n<blockquote>\n<p>Instead of \u201cClient IP in Allow List\u201d, which ties the identity of a privileged connection to an IP address, would it be possible to extend the current <a href=\"https://apple.github.io/foundationdb/tls.html#peer-verification\">peer verification </a> mechanism so that if the FDB client presents a certificate with a \u201cprivileged\u201d field, <em>only</em> then does the connection becomes privileged?</p>\n</blockquote>\n</aside>\n<p>Sure. However, it is not something we plan to do right now. However, we do accept PRs <img src=\"https://emoji.discourse-cdn.com/twitter/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"> . Implementing this is probably not too difficult, I would expect that there are two things that require some time:</p>\n<ol>\n<li>Coming up with a good user interface for such a feature. You need to somehow pass the information what to verify to <code>fdbserver</code>. That\u2019s probably not very hard but requires some thought.</li>\n<li>Such a feature would require testing.</li>\n</ol>\n<p>(2) is probably the big one here. So if you want to do this yourself, you probably want to wait until we have more TLS specific testing written (this part is still in the pipeline).</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-05-02T15:50:16.792Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 1,
        "reads": 35,
        "readers_count": 34,
        "score": 17.0,
        "yours": false,
        "topic_id": 3286,
        "topic_slug": "authorization-in-fdb",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/authorization-in-fdb/3286/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 11038,
        "name": "Rajiv M Ranganath",
        "username": "rajivr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "created_at": "2022-05-03T01:07:07.562Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"7\" data-topic=\"3286\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>So as you can see, using authorization will probably require some work for most users and it won\u2019t be a feature you can just turn on.</p>\n</blockquote>\n</aside>\n<p>I see that. Would it be possible to manage \u201cClient IP in Allow List\u201d transaction ally using <a href=\"https://apple.github.io/foundationdb/special-keys.html#management-module\" rel=\"noopener nofollow ugc\">management module</a>? That way, we can boot strap the cluster with a small number of privileged connections and then have a provisioning service adjust this list as cluster changes happen.</p>\n<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"7\" data-topic=\"3286\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>However, we do accept PRs <img src=\"https://emoji.discourse-cdn.com/twitter/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"> .</p>\n</blockquote>\n</aside>\n<p><img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"> Since you mentioned PRs, realistically I think we are about 3 years away from being able to meaningfully contribute to FDB core. We will eventually get there\u2026 slowly and steadily. <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>My immediate focus is around layer development and infrastructure tooling and making sure we have the right building blocks for that. You\u2019ll see most of my contributions to FDB in those areas.</p>\n<p>I think we should have our first production workloads and applications live in about a year. FDB talent is very rare, so it will probably take us another two years to build up the required operational expertise in-house, after which we should be able to start contributing to core.</p>\n<p>I do want to add, I am very grateful to both Snowflake and Apple for FoundationDB and for the emphasis you have in the project for code quality and testing.</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-05-03T01:07:07.562Z",
        "reply_count": 2,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 2,
        "reads": 40,
        "readers_count": 39,
        "score": 43.0,
        "yours": false,
        "topic_id": 3286,
        "topic_slug": "authorization-in-fdb",
        "display_username": "Rajiv M Ranganath",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://apple.github.io/foundationdb/special-keys.html#management-module",
            "internal": false,
            "reflection": false,
            "title": "Special Keys \u2014 FoundationDB 7.1",
            "clicks": 1
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 946,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/authorization-in-fdb/3286/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 11044,
        "name": "Pierre Zemb",
        "username": "PierreZ",
        "avatar_template": "/user_avatar/forums.foundationdb.org/pierrez/{size}/866_2.png",
        "created_at": "2022-05-04T07:39:04.009Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"1\" data-topic=\"3286\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>At Snowflake we\u2019re currently working on a simple authorization feature. I wanted to announce this here in case others in the community find this useful and want to start preparing to use this (or want to start testing this as soon as we have it code-complete in the <code>main</code> branch).</p>\n</blockquote>\n</aside>\n<p>This is a really nice feature, I\u2019m already thinking on how we could leverage this <img src=\"https://emoji.discourse-cdn.com/twitter/smiley.png?v=12\" title=\":smiley:\" class=\"emoji\" alt=\":smiley:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"1\" data-topic=\"3286\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>(other things, like workload isolation, automatic movement of tenants across clusters, meta-cluster management etc will be added in later versions of FDB).</p>\n</blockquote>\n</aside>\n<p>From a layer engineer point-of-view, the tenant is behaving a lot like the directory in a sense that it will generate an <a href=\"https://github.com/apple/foundationdb/blob/main/fdbcli/TenantCommands.actor.cpp#L238-L239\" rel=\"noopener nofollow ugc\">id and a prefix</a>. Because of how HCA works, moving a directory across clusters is not <a href=\"https://forums.foundationdb.org/t/redwood-engine-and-directory-layer/3084/8\">trivial</a>. Do you have some ideas on how automatic movement of tenants across clusters will be implemented?</p>\n<p>Also, I\u2019m wondering if tenants should be automatically <a href=\"https://apple.github.io/foundationdb/transaction-tagging.html?highlight=tags\" rel=\"noopener nofollow ugc\">tagged</a>? <img src=\"https://emoji.discourse-cdn.com/twitter/thinking.png?v=12\" title=\":thinking:\" class=\"emoji\" alt=\":thinking:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>EDIT: Another question: will we be able to import a tenant with a prefix? <img src=\"https://emoji.discourse-cdn.com/twitter/thinking.png?v=12\" title=\":thinking:\" class=\"emoji\" alt=\":thinking:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-05-04T08:11:07.125Z",
        "reply_count": 1,
        "reply_to_post_number": 8,
        "quote_count": 1,
        "incoming_link_count": 9,
        "reads": 37,
        "readers_count": 36,
        "score": 57.4,
        "yours": false,
        "topic_id": 3286,
        "topic_slug": "authorization-in-fdb",
        "display_username": "Pierre Zemb",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://apple.github.io/foundationdb/transaction-tagging.html?highlight=tags",
            "internal": false,
            "reflection": false,
            "title": "Transaction Tagging \u2014 FoundationDB 7.1",
            "clicks": 3
          },
          {
            "url": "https://forums.foundationdb.org/t/redwood-engine-and-directory-layer/3084/8",
            "internal": true,
            "reflection": false,
            "title": "Redwood engine and Directory layer",
            "clicks": 3
          },
          {
            "url": "https://github.com/apple/foundationdb/blob/main/fdbcli/TenantCommands.actor.cpp#L238-L239",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/TenantCommands.actor.cpp at main \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 2
          },
          {
            "url": "https://forums.foundationdb.org/t/when-to-use-multiple-fdb-clusters/4447/2",
            "internal": true,
            "reflection": true,
            "title": "When to use multiple FDB clusters",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 946,
          "username": "rajivr",
          "name": "Rajiv M Ranganath",
          "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 534,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/authorization-in-fdb/3286/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 11053,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2022-05-05T15:34:34.482Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"rajivr\" data-post=\"8\" data-topic=\"3286\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/rajivr/48/1100_2.png\" class=\"avatar\"> rajivr:</div>\n<blockquote>\n<p>I see that. Would it be possible to manage \u201cClient IP in Allow List\u201d transaction ally using <a href=\"https://apple.github.io/foundationdb/special-keys.html#management-module\">management module </a>?</p>\n</blockquote>\n</aside>\n<p>That would introduce a potential security problem. You then also need to keep this API safe somehow (in security the sad reality is that convenient often means not secure <img src=\"https://emoji.discourse-cdn.com/twitter/frowning.png?v=12\" title=\":frowning:\" class=\"emoji\" alt=\":frowning:\" loading=\"lazy\" width=\"20\" height=\"20\"> ).</p>\n<aside class=\"quote no-group\" data-username=\"PierreZ\" data-post=\"9\" data-topic=\"3286\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/pierrez/48/866_2.png\" class=\"avatar\"> PierreZ:</div>\n<blockquote>\n<p>Do you have some ideas on how automatic movement of tenants across clusters will be implemented?</p>\n</blockquote>\n</aside>\n<p>This is planned. This is also one reason why cross-tenant transactions are not possible. The rough plan is to have a management cluster that will act as a discovery server and will automatically load balance tenants across clusters.The goal is that FDBs scaling limit will mostly limit the max size of a tenant, but a meta-cluster can scale almost infinitely large.</p>\n<aside class=\"quote no-group\" data-username=\"PierreZ\" data-post=\"9\" data-topic=\"3286\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/pierrez/48/866_2.png\" class=\"avatar\"> PierreZ:</div>\n<blockquote>\n<p>Also, I\u2019m wondering if tenants should be automatically <a href=\"https://apple.github.io/foundationdb/transaction-tagging.html?highlight=tags\">tagged</a>? <img src=\"https://emoji.discourse-cdn.com/twitter/thinking.png?v=12\" title=\":thinking:\" class=\"emoji\" alt=\":thinking:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n</blockquote>\n</aside>\n<p>Yes I think they are. There\u2019s a whole workload isolation project at Snowflake that tries to address noisy neighbor problems. However, getting this right is a very difficult problem and therefore it will take a while until this is working well.</p>\n<aside class=\"quote no-group\" data-username=\"PierreZ\" data-post=\"9\" data-topic=\"3286\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/pierrez/48/866_2.png\" class=\"avatar\"> PierreZ:</div>\n<blockquote>\n<p>EDIT: Another question: will we be able to import a tenant with a prefix? <img src=\"https://emoji.discourse-cdn.com/twitter/thinking.png?v=12\" title=\":thinking:\" class=\"emoji\" alt=\":thinking:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n</blockquote>\n</aside>\n<p>We currently don\u2019t have plans to do this. A cluster either has to be configures to have tenants enabled or not. You won\u2019t be able to convert from one to another. I realize that this is a huge limitation. It would be possible to solve this but it\u2019s difficult. It requires a complicated dance between FDB and the application if you want to do it online. Therefore we leave it to the application to solve this.</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-05-05T15:34:34.482Z",
        "reply_count": 2,
        "reply_to_post_number": null,
        "quote_count": 2,
        "incoming_link_count": 5,
        "reads": 36,
        "readers_count": 35,
        "score": 42.2,
        "yours": false,
        "topic_id": 3286,
        "topic_slug": "authorization-in-fdb",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/authorization-in-fdb/3286/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 11058,
        "name": "Pierre Zemb",
        "username": "PierreZ",
        "avatar_template": "/user_avatar/forums.foundationdb.org/pierrez/{size}/866_2.png",
        "created_at": "2022-05-05T17:32:10.185Z",
        "cooked": "<p>Thanks for the details <a class=\"mention\" href=\"/u/markus.pilman\">@markus.pilman</a> <img src=\"https://emoji.discourse-cdn.com/twitter/smiley.png?v=12\" title=\":smiley:\" class=\"emoji\" alt=\":smiley:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-05-05T17:32:10.185Z",
        "reply_count": 0,
        "reply_to_post_number": 10,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 29,
        "readers_count": 28,
        "score": 15.8,
        "yours": false,
        "topic_id": 3286,
        "topic_slug": "authorization-in-fdb",
        "display_username": "Pierre Zemb",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 15,
          "username": "markus.pilman",
          "name": "Markus Pilman",
          "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 534,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/authorization-in-fdb/3286/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 11061,
        "name": "Rajiv M Ranganath",
        "username": "rajivr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "created_at": "2022-05-06T02:17:44.780Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"10\" data-topic=\"3286\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>That would introduce a potential security problem. You then also need to keep this API safe somehow (in security the sad reality is that convenient often means not secure <img src=\"https://emoji.discourse-cdn.com/twitter/frowning.png?v=12\" title=\":frowning:\" class=\"emoji\" alt=\":frowning:\" loading=\"lazy\" width=\"20\" height=\"20\"> ).</p>\n</blockquote>\n</aside>\n<p>I can see how expanding the scope can be a potential security problem.</p>\n<p>Over the past few days, as a background process I spent some time thinking about the upcoming design.</p>\n<p>Whenever I try to understand a security design, I try to build up my mental model that separates out the entity, identity, authn, and authz. (<a href=\"https://www.youtube.com/watch?v=Kb56GzQ2pSk\" rel=\"noopener nofollow ugc\">Here</a> is a very short video that explains entity-identity distinction that I use as reference, and go back to often).</p>\n<p>If I am understanding the upcoming design correctly, it looks to me, we have one (possibly two) set (type) of entity at the application level and 3 sets (types) of entities at the cluster level.</p>\n<p>At the application level for the tenant entity, the plan seems to be to use a short-lived access token as its identity.</p>\n<p>One subtle aspect that I realized around the design of tenant identity token is the following.</p>\n<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"1\" data-topic=\"3286\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>This token will basically just contain a list of tenants the client is allowed to access (raw key access will be denied) and this token has to be signed by some private key.</p>\n</blockquote>\n</aside>\n<p>While it is possible for the token to contain just one tenant, there by creating one-to-one mapping between tenant entity and its identity, the design <em>also</em> allows for creating an identity that can map to multiple tenant entities.</p>\n<p>If the intention here is to provide some form of <em>role</em> entity, which can access multiple tenants, that is okay.</p>\n<p>We will probably have to clarify this distinction in the documentation, because the application developer should not be asking for or giving out a role identity token, when their use-case requires them to use tenant identity token.</p>\n<p>When working with a role identity token, we lose information about the entity that assumed this role. So, this information will need to be captured at the token issuance service.</p>\n<p>If possible, I also feel making the token data structure into a dictionary instead of a list will give us more flexibility for future changes.</p>\n<p>At the cluster level it seems to me there are 3 types of entities.</p>\n<ol>\n<li>Unprivileged FDB client</li>\n<li>Privileged Server Process</li>\n<li>Privileged Operator/Orchestration Service</li>\n</ol>\n<p>The identity attribute for \u201cUnprivileged FDB client\u201d entity would be a TLS cert.</p>\n<p>The identity attributes for \u201cPrivileged Server Process\u201d entity would be TLS cert + being in \u201cClient IP in Allow List\u201d</p>\n<p>The identity attributes for \u201cPrivileged Operator/Orchestration Service\u201d entity would also be \"TLS cert + being in \u201cClient IP in Allow List\u201d.</p>\n<p>As you can see from above, because both \u201cPrivileged Server Process\u201d and \u201cPrivileged Operator/Orchestration Service\u201d use the same identity attributes, so there is no proper way to distinguish between them.</p>\n<p>Could you please let me know your thoughts on introducing something like \u201cPrivileged Operator/Orchestration Service IP LIst\u201d? This would allow us to have identity attributes for \u201cPrivileged Operator/Orchestration Service\u201d entities.</p>\n<p>Once we have this list (which hopefully can also be maintained transaction-ally), then only \u201cPrivileged Operator/Orchestration Service\u201d entities can be allowed to make changes to: \u201cPrivileged Operator/Orchestration Service IP LIst\u201d and \u201cClient IP in Allow List\u201d.</p>\n<p>This should allow us to boot strap a cluster with a FDB client in \u201cPrivileged Operator/Orchestration Service IP LIst\u201d, and for day-2 operations, have very tightly controlled set of machines in \u201cPrivileged Operator/Orchestration Service IP LIst\u201d.</p>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2022-05-07T01:50:48.870Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 2,
        "incoming_link_count": 12,
        "reads": 30,
        "readers_count": 29,
        "score": 66.0,
        "yours": false,
        "topic_id": 3286,
        "topic_slug": "authorization-in-fdb",
        "display_username": "Rajiv M Ranganath",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 5,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://www.youtube.com/watch?v=Kb56GzQ2pSk",
            "internal": false,
            "reflection": false,
            "title": "Identity, Authentication + OAuth = OpenID Connect - YouTube",
            "clicks": 4
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 946,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/authorization-in-fdb/3286/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      11017,
      11018,
      11019,
      11021,
      11022,
      11026,
      11034,
      11038,
      11044,
      11053,
      11058,
      11061
    ]
  },
  "timeline_lookup": [
    [
      1,
      1273
    ],
    [
      6,
      1272
    ],
    [
      7,
      1268
    ],
    [
      9,
      1267
    ],
    [
      10,
      1265
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Authorization in FDB",
  "id": 3286,
  "title": "Authorization in FDB",
  "posts_count": 12,
  "created_at": "2022-04-27T18:49:26.379Z",
  "views": 1372,
  "reply_count": 6,
  "like_count": 3,
  "last_posted_at": "2022-05-06T02:17:44.780Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "authorization-in-fdb",
  "category_id": 5,
  "word_count": 4444,
  "deleted_at": null,
  "user_id": 15,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_3286",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 12,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 3,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Proxy layer for securing the cluster",
      "id": 1611,
      "title": "Proxy layer for securing the cluster",
      "slug": "proxy-layer-for-securing-the-cluster",
      "posts_count": 9,
      "reply_count": 6,
      "highest_post_number": 9,
      "image_url": null,
      "created_at": "2019-09-05T17:51:30.374Z",
      "last_posted_at": "2019-09-10T10:05:03.933Z",
      "bumped": true,
      "bumped_at": "2019-09-10T10:05:03.933Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 1930,
      "category_id": 9,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 645,
            "username": "subramaniamr",
            "name": "Subramaniam R",
            "avatar_template": "/user_avatar/forums.foundationdb.org/subramaniamr/{size}/658_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 15,
            "username": "markus.pilman",
            "name": "Markus Pilman",
            "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Introducing the Redis protocol FDB Gateway",
      "id": 1320,
      "title": "Introducing the Redis protocol FDB Gateway",
      "slug": "introducing-the-redis-protocol-fdb-gateway",
      "posts_count": 6,
      "reply_count": 2,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2019-04-19T11:32:36.878Z",
      "last_posted_at": "2019-04-21T09:23:18.501Z",
      "bumped": true,
      "bumped_at": "2019-04-21T09:23:18.501Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 6,
      "views": 3140,
      "category_id": 9,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 451,
            "username": "rnewson",
            "name": "Robert Newson",
            "avatar_template": "/user_avatar/forums.foundationdb.org/rnewson/{size}/502_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Issues with V6.2 TLS Cluster",
      "id": 1904,
      "title": "Issues with V6.2 TLS Cluster",
      "slug": "issues-with-v6-2-tls-cluster",
      "posts_count": 12,
      "reply_count": 8,
      "highest_post_number": 12,
      "image_url": null,
      "created_at": "2020-01-23T17:31:13.342Z",
      "last_posted_at": "2020-01-28T16:35:52.821Z",
      "bumped": true,
      "bumped_at": "2020-01-28T16:35:52.821Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1620,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 643,
            "username": "lehu",
            "name": "Leo Hu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Allowing client APIs to use an &ldquo;in-memory&rdquo; fdb.cluster file?",
      "id": 675,
      "title": "Allowing client APIs to use an \"in-memory\" fdb.cluster file?",
      "slug": "allowing-client-apis-to-use-an-in-memory-fdb-cluster-file",
      "posts_count": 3,
      "reply_count": 1,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2018-08-31T17:20:31.703Z",
      "last_posted_at": "2018-09-01T21:58:12.317Z",
      "bumped": true,
      "bumped_at": "2018-09-01T21:58:12.317Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1755,
      "category_id": 8,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 158,
            "username": "aseipp",
            "name": "Austin Seipp",
            "avatar_template": "/user_avatar/forums.foundationdb.org/aseipp/{size}/124_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Fdb-zk: rough cut of Zookeeper API layer",
      "id": 1278,
      "title": "Fdb-zk: rough cut of Zookeeper API layer",
      "slug": "fdb-zk-rough-cut-of-zookeeper-api-layer",
      "posts_count": 7,
      "reply_count": 3,
      "highest_post_number": 7,
      "image_url": null,
      "created_at": "2019-04-03T02:54:03.579Z",
      "last_posted_at": "2019-04-09T04:13:12.883Z",
      "bumped": true,
      "bumped_at": "2019-04-09T04:13:12.883Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 6,
      "views": 5102,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 113,
            "username": "pH14",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ph14/{size}/92_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 22,
            "username": "dave",
            "name": "David Scherer",
            "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png",
            "trust_level": 1
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 15,
        "username": "markus.pilman",
        "name": "Markus Pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "post_count": 5,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 946,
        "username": "rajivr",
        "name": "Rajiv M Ranganath",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "post_count": 5,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 534,
        "username": "PierreZ",
        "name": "Pierre Zemb",
        "avatar_template": "/user_avatar/forums.foundationdb.org/pierrez/{size}/866_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      }
    ],
    "created_by": {
      "id": 15,
      "username": "markus.pilman",
      "name": "Markus Pilman",
      "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png"
    },
    "last_poster": {
      "id": 946,
      "username": "rajivr",
      "name": "Rajiv M Ranganath",
      "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png"
    },
    "links": [
      {
        "url": "https://apple.github.io/foundationdb/tenants.html?highlight=tenant",
        "title": "Tenants \u2014 FoundationDB 7.1",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 19,
        "user_id": 15,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      },
      {
        "url": "https://apple.github.io/foundationdb/tls.html#peer-verification",
        "title": "Transport Layer Security \u2014 FoundationDB 7.1",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 4,
        "user_id": 946,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      },
      {
        "url": "https://www.youtube.com/watch?v=Kb56GzQ2pSk",
        "title": "Identity, Authentication + OAuth = OpenID Connect - YouTube",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 4,
        "user_id": 946,
        "domain": "www.youtube.com",
        "root_domain": "youtube.com"
      },
      {
        "url": "https://apple.github.io/foundationdb/transaction-tagging.html?highlight=tags",
        "title": "Transaction Tagging \u2014 FoundationDB 7.1",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 534,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      },
      {
        "url": "https://forums.foundationdb.org/t/redwood-engine-and-directory-layer/3084/8",
        "title": "Redwood engine and Directory layer",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 534,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/main/fdbcli/TenantCommands.actor.cpp#L238-L239",
        "title": "foundationdb/TenantCommands.actor.cpp at main \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 534,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://forums.foundationdb.org/t/an-fdb-client-connecting-to-multiple-fdb-clusters/3639",
        "title": "An fdb client connecting to multiple FDB clusters",
        "internal": true,
        "attachment": false,
        "reflection": true,
        "clicks": 1,
        "user_id": 405,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://apple.github.io/foundationdb/tenants.html#raw-access",
        "title": "Tenants \u2014 FoundationDB 7.1",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 946,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      },
      {
        "url": "https://apple.github.io/foundationdb/special-keys.html#management-module",
        "title": "Special Keys \u2014 FoundationDB 7.1",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 946,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      }
    ]
  },
  "bookmarks": []
}