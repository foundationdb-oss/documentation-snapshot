{
  "post_stream": {
    "posts": [
      {
        "id": 13445,
        "name": "BoLee",
        "username": "libo-sober",
        "avatar_template": "/user_avatar/forums.foundationdb.org/libo-sober/{size}/1447_2.png",
        "created_at": "2023-11-01T06:14:32.727Z",
        "cooked": "<p>Hi! I tried to backup the cluster to the S3 storage bucket. Firstly, I successfully backed up all the data to the bucket using full backup.</p>\n<pre><code class=\"lang-auto\">fdbbackup start --cluster-file /etc/foundationdb/fdb.cluster --logdir /fdb-sdbk/log/ --knob_http_request_aws_v4_header=true --knob_http_verbose_level=4 --blob-credentials /credential_files -d \"blobstore://minio_access_key@172.17.12.1:9090/all?bucket=backup&amp;region=un&amp;sc=0\" -w\n</code></pre>\n<p>The backup bucket directory structure is as follows\uff1a</p>\n<pre><code class=\"lang-auto\">backup/\n\u251c\u2500\u2500 backups\n\u2502   \u2514\u2500\u2500 all\n\u2502   \u2514\u2500\u2500 xl.meta\n\u2514\u2500\u2500 data\n\u2514\u2500\u2500 all\n\u251c\u2500\u2500 kvranges\n\u2502   \u2514\u2500\u2500 snapshot.000000000765201137\n\u2502   \u2514\u2500\u2500 0\n\u2502   \u2514\u2500\u2500 range,765245662,1ddebb6945315de5910dcce975a128f9,1048576\n\u2502   \u2514\u2500\u2500 xl.meta\n\u251c\u2500\u2500 logs\n\u2502   \u2514\u2500\u2500 0000\n\u2502   \u2514\u2500\u2500 0000\n\u2502   \u2514\u2500\u2500 log,765201137,785201137,44b4ac739f84aa7768e216b4d6a7dca4,1048576\n\u2502   \u2514\u2500\u2500 xl.meta\n\u2514\u2500\u2500 snapshots\n\u2514\u2500\u2500 snapshot,765245662,765245662,2301\n\u2514\u2500\u2500 xl.meta\n\n14 directories, 4 files\n</code></pre>\n<p>Then write new data to the cluster and use parameter <code>--incremental</code> for incremental backup.</p>\n<pre><code class=\"lang-auto\">fdbbackup start --cluster-file /etc/foundationdb/fdb.cluster --incremental --logdir /fdb-sdbk/log/ --knob_http_request_aws_v4_header=true --knob_http_verbose_level=4 --blob-credentials /credential_files -d \"blobstore://minio_access_key@172.17.12.1:9090/all?bucket=backup&amp;region=un&amp;sc=0\" -w\n</code></pre>\n<p>However, after executing the above command, there were no changes to the backup bucket files and directories.<br>\nWhen I use incremental restore to another cluster, the data also does not exist.</p>\n<pre><code class=\"lang-auto\">fdbrestore start --dest-cluster-file /etc/foundationdb/fdb.cluster --incremental --logdir /fdb-sdbk/log/ --knob_http_request_aws_v4_header=true --knob_http_verbose_level=4 --blob-credentials /credential_files -r \"blobstore://minio_access_key@172.17.12.1:9090/all?bucket=backup&amp;region=un&amp;sc=0\" -w\n</code></pre>\n<p>When I used full restore, it only restored the data from my first full backup, and the incremental backup data was also lost. It does not appear to have been incrementally backed up\uff1f</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 1,
        "updated_at": "2023-11-01T06:14:32.727Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 91,
        "reads": 26,
        "readers_count": 25,
        "score": 460.2,
        "yours": false,
        "topic_id": 4205,
        "topic_slug": "how-incremental-backup-and-recovery-work",
        "display_username": "BoLee",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1175,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-incremental-backup-and-recovery-work/4205/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      }
    ],
    "stream": [
      13445
    ]
  },
  "timeline_lookup": [
    [
      1,
      721
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "How incremental backup and recovery work\uff1f",
  "id": 4205,
  "title": "How incremental backup and recovery work\uff1f",
  "posts_count": 1,
  "created_at": "2023-11-01T06:14:32.660Z",
  "views": 314,
  "reply_count": 0,
  "like_count": 0,
  "last_posted_at": "2023-11-01T06:14:32.727Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "how-incremental-backup-and-recovery-work",
  "category_id": 7,
  "word_count": 258,
  "deleted_at": null,
  "user_id": 1175,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_4205",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 1,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 1,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Backup /restore fdb",
      "id": 1637,
      "title": "Backup /restore fdb",
      "slug": "backup-restore-fdb",
      "posts_count": 22,
      "reply_count": 17,
      "highest_post_number": 22,
      "image_url": null,
      "created_at": "2019-09-19T17:04:18.878Z",
      "last_posted_at": "2019-10-05T04:45:51.663Z",
      "bumped": true,
      "bumped_at": "2019-10-05T04:45:51.663Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 2729,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 604,
            "username": "Minaxi",
            "name": "meenakshi subramanyam",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/m/2bfe46/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "About incremental backup and restore for fdb dr",
      "id": 3287,
      "title": "About incremental backup and restore for fdb dr",
      "slug": "about-incremental-backup-and-restore-for-fdb-dr",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2022-04-28T03:54:14.375Z",
      "last_posted_at": "2022-05-01T02:48:13.892Z",
      "bumped": true,
      "bumped_at": "2022-05-01T02:48:13.892Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 496,
      "category_id": 5,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest single",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 912,
            "username": "xuning97",
            "name": "Ning Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/xuning97/{size}/1051_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Trying to restore a backup from S3",
      "id": 2502,
      "title": "Trying to restore a backup from S3",
      "slug": "trying-to-restore-a-backup-from-s3",
      "posts_count": 3,
      "reply_count": 0,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2020-12-29T14:02:35.489Z",
      "last_posted_at": "2021-01-05T12:58:17.831Z",
      "bumped": true,
      "bumped_at": "2021-01-05T12:58:17.831Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 674,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 872,
            "username": "COran",
            "name": "Carlito",
            "avatar_template": "/user_avatar/forums.foundationdb.org/coran/{size}/1006_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "FoundationDB fdbbackup",
      "id": 1460,
      "title": "FoundationDB fdbbackup",
      "slug": "foundationdb-fdbbackup",
      "posts_count": 7,
      "reply_count": 2,
      "highest_post_number": 7,
      "image_url": null,
      "created_at": "2019-06-17T18:54:47.516Z",
      "last_posted_at": "2019-10-09T03:07:15.974Z",
      "bumped": true,
      "bumped_at": "2019-10-09T03:07:15.974Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 2461,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 579,
            "username": "approachcp",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/f04885/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 581,
            "username": "surprisetalk",
            "name": "Taylor Sarrafian",
            "avatar_template": "/user_avatar/forums.foundationdb.org/surprisetalk/{size}/579_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Fdbrestore: Missing backup data",
      "id": 1510,
      "title": "Fdbrestore: Missing backup data",
      "slug": "fdbrestore-missing-backup-data",
      "posts_count": 4,
      "reply_count": 1,
      "highest_post_number": 4,
      "image_url": null,
      "created_at": "2019-07-07T13:16:16.353Z",
      "last_posted_at": "2019-07-11T00:21:44.351Z",
      "bumped": true,
      "bumped_at": "2019-07-11T00:21:44.351Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 850,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 265,
            "username": "brainfucker",
            "name": "Illarionov Oleg",
            "avatar_template": "/user_avatar/forums.foundationdb.org/brainfucker/{size}/237_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 1175,
        "username": "libo-sober",
        "name": "BoLee",
        "avatar_template": "/user_avatar/forums.foundationdb.org/libo-sober/{size}/1447_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      }
    ],
    "created_by": {
      "id": 1175,
      "username": "libo-sober",
      "name": "BoLee",
      "avatar_template": "/user_avatar/forums.foundationdb.org/libo-sober/{size}/1447_2.png"
    },
    "last_poster": {
      "id": 1175,
      "username": "libo-sober",
      "name": "BoLee",
      "avatar_template": "/user_avatar/forums.foundationdb.org/libo-sober/{size}/1447_2.png"
    }
  },
  "bookmarks": []
}