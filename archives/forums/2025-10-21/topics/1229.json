{
  "post_stream": {
    "posts": [
      {
        "id": 3664,
        "name": "Tony Sun",
        "username": "tonysun83",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/db5fbb/{size}.png",
        "created_at": "2019-03-14T18:34:47.258Z",
        "cooked": "<p>Hi Folks,</p>\n<p>I\u2019m part of a team in Cloudant that\u2019s been researching solutions for a secondary text index that would accompany the primary CouchDb layer. We are using <a href=\"https://github.com/AydinSakar/lucene-layer\" rel=\"nofollow noopener\">https://github.com/AydinSakar/lucene-layer</a> as a basis for this investigation. The aforementioned project uses two approaches to create a layer on top of FDB:</p>\n<ol>\n<li>Write lucene index file segments as binaries in K/V chunks</li>\n<li>Implement a new set of lucene codecs specifically to divide the segment data structures into K/V pairs and store them in FDB</li>\n</ol>\n<p>We modified lucene\u2019s nightly benchmark to find a baseline for approach 2. Note the tests are done locally on a development machine. The first attempt did not work because the benchmark keeps an Index Writer open for the duration of indexing. The lucene-layer codec uses one transaction per index writer and thus for the duration of the indexing. Inevitably, the benchmark hits the 5 second timeout limit per transaction. To get pass this bottleneck, we modified the code to execute db.run(\u2026) for every postings list for every term. As expected, the performance was terrible since we\u2019re doing bulk commits serially. Also was verified by running the java bindings performance tester.</p>\n<p>We ran the same benchmark using only binary chunks (Approach 1), and the results were 10 times faster, but still relatively slow compared to a normal lucene codec -&gt; disk implementation.</p>\n<p>The lucene-layer implementation has some issues that did not allow us to modify the chunk size, so we\u2019re rewriting a bare bones for Approach 1 in an attempt to find an optimum transaction to chunk size. If our implementation is successful and we can see performance near lucene-&gt;disk times, then we\u2019ll consider re-implementing the codec layer to further enhance performance.</p>\n<p>My questions are:</p>\n<ol>\n<li>\n<p>During indexing, and from a fdb-java bindings perspective, we\u2019re basically doing a massive bulk insert on scale. Reading through <a href=\"https://forums.foundationdb.org/t/best-practices-for-bulk-load/422/2\" class=\"inline-onebox\">Best practices for bulk load</a> mentions that \u201cthe client library is single-threaded.\u201d My experimental changes from db.run(\u2026) to db.asyncRun(\u2026) had no performance gains so that supports the idea. Correct me if I\u2019m wrong here, but I don\u2019t think we can randomize the keys in this instance as we need to read the segment data sequentially. Can asyncRun can be used to perform index(bulk inserts) asynchronously?</p>\n</li>\n<li>\n<p>The goal of the investigation is find whether a lucene on fdb solution is feasible. Does anyone see any theoretical and architectural limitations that we\u2019re not accounting for?</p>\n</li>\n</ol>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 7,
        "updated_at": "2019-03-14T18:34:47.258Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 701,
        "reads": 83,
        "readers_count": 82,
        "score": 3598.6,
        "yours": false,
        "topic_id": 1229,
        "topic_slug": "lucene-layer-on-foundationdb",
        "display_username": "Tony Sun",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/AydinSakar/lucene-layer",
            "internal": false,
            "reflection": false,
            "title": "GitHub - AydinSakar/lucene-layer: Lucene on FoundationDB",
            "clicks": 111
          },
          {
            "url": "https://forums.foundationdb.org/t/best-practices-for-bulk-load/422/2",
            "internal": true,
            "reflection": false,
            "title": "Best practices for bulk load",
            "clicks": 4
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 4
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 540,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/lucene-layer-on-foundationdb/1229/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 3713,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-03-21T23:46:41.250Z",
        "cooked": "<aside class=\"quote no-group quote-modified\" data-username=\"tonysun83\" data-post=\"1\" data-topic=\"1229\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/db5fbb/48.png\" class=\"avatar\"> tonysun83:</div>\n<blockquote>\n<ol>\n<li>How should I best bulk-load lucene index file segments?</li>\n</ol>\n</blockquote>\n</aside>\n<p>I would fully expect that calling <code>db.asyncRun()</code> and letting the transaction execute asynchronously in the background should result in better write throughput.  A local test for me shows that running 1000 sequential transactions that set an increasing integer key to a 1KB value takes 9.95s, implying my local fsync() takes ~100ms.  Converting that to run asynchronously on a thread pool causes it to take 1.296s.  So I\u2019m very surprised to hear that converting <code>run</code> to <code>runAsync</code> didn\u2019t help, and I\u2019d suggest taking a second look at the code to make sure you didn\u2019t accidentally re-serialize the writes somehow.  And to be fair, lucene definitely isn\u2019t calling fsync() after each block write, as the sequential series of transactions is doing.</p>\n<p>With \u201cNote the tests are done locally on a development machine\u201d, do you mean that you\u2019re running a benchmark against the default created FoundationDB instance?  As you might have noticed from the numbers above, the performance is terrible.  With the FDB activity going on around Cloudant, is there anyone with a small FDB cluster that you could borrow a subspace on?  Our performance characteristics get much better as soon as one can separate the transaction logs from the storage servers, and being closer to something that resembles a production cluster is generally nice when doing performance work.</p>\n<p>The importance of the single network thread is that after a certain point, you can\u2019t gain more parallelism in issuing requests to FDB by adding more threads within your JVM.  All of your JVM threads will still be submitting requests to the one FDB network thread, and once you saturate the FDB network thread, that\u2019s the maximum throughput you\u2019re going to get.  I would strongly suspect that you aren\u2019t going to saturate the FDB network thread from a single threaded lucene though.  It\u2019s mostly just a thread doing a memcpy and send/recv as far as I\u2019m aware.</p>\n<p>I\u2019d ballpark the \u201coptimum transaction to chunk size\u201d as around 50KB-100KB commits.  Our general advice is to stay under 1MB in total for commits, and FDB will batch transactions together if it can accept more.  I agree that in your use case, you\u2019ll be inserting data sequentially, and that should be okay.  Bulk loading an empty cluster sequentially puts a lot of strain on data distribution to try and carve out sensible shards.</p>\n<p>And tangentially, I\u2019ve taken this opportunity to finally go file an issue to track optimizing shard splitting for sequential insert workloads <a href=\"https://github.com/apple/foundationdb/issues/1322\">#1322</a>.</p>\n<aside class=\"quote no-group\" data-username=\"tonysun83\" data-post=\"1\" data-topic=\"1229\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/db5fbb/48.png\" class=\"avatar\"> tonysun83:</div>\n<blockquote>\n<ol start=\"2\">\n<li>The goal of the investigation is find whether a lucene on fdb solution is feasible. Does anyone see any theoretical and architectural limitations that we\u2019re not accounting for?</li>\n</ol>\n</blockquote>\n</aside>\n<p>Overall, full text indexes backed by FDB seem feasible, but I unfortunately don\u2019t know enough about the particulars of lucene to be able to comment about it specifically.  The <a href=\"https://github.com/FoundationDB/fdb-record-layer\">FoundationDB Record Layer</a> provides a <a href=\"https://javadoc.io/doc/org.foundationdb/fdb-record-layer-core-pb3/2.5.47.0\">full-text index</a> on FDB.  The authors of that would be able to speak to this better than I, so I\u2019ll leave it to <a class=\"mention\" href=\"/u/alloc\">@alloc</a> and <a class=\"mention\" href=\"/u/nathanlws\">@nathanlws</a>.  The former has a <a href=\"https://forums.foundationdb.org/t/understanding-text-index-on-fdb-record-layer/1073/2\">previous post</a> on the subject of the full text indexing that you might find interesting.  The latter you\u2019ll recognize as also the author of the lucene layer you\u2019re using.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 7,
        "updated_at": "2019-03-21T23:46:41.250Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 30,
        "reads": 70,
        "readers_count": 69,
        "score": 209.0,
        "yours": false,
        "topic_id": 1229,
        "topic_slug": "lucene-layer-on-foundationdb",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://javadoc.io/doc/org.foundationdb/fdb-record-layer-core-pb3/2.5.47.0",
            "internal": false,
            "reflection": false,
            "title": "org.foundationdb:fdb-record-layer-core-pb3:2.5.47.0 API Doc :: Javadoc.IO",
            "clicks": 31
          },
          {
            "url": "https://forums.foundationdb.org/t/understanding-text-index-on-fdb-record-layer/1073/2",
            "internal": true,
            "reflection": false,
            "title": "Understanding text index on fdb record layer",
            "clicks": 15
          },
          {
            "url": "https://github.com/FoundationDB/fdb-record-layer",
            "internal": false,
            "reflection": false,
            "title": "GitHub - FoundationDB/fdb-record-layer: A record-oriented store built on FoundationDB",
            "clicks": 13
          },
          {
            "url": "https://github.com/apple/foundationdb/issues/1322",
            "internal": false,
            "reflection": false,
            "title": "Special case shard splitting for sequential insert workloads \u00b7 Issue #1322 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 4
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 3
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/lucene-layer-on-foundationdb/1229/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3744,
        "name": "Tony Sun",
        "username": "tonysun83",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/db5fbb/{size}.png",
        "created_at": "2019-03-25T23:15:00.932Z",
        "cooked": "<p>Appreciate the detailed response, I\u2019m currently testing the new implementation on a 6 machine cluster. I\u2019ll also be testing your parameters that you advised. I\u2019ll update this thread with any important findings.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 7,
        "updated_at": "2019-03-25T23:15:00.932Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 5,
        "reads": 58,
        "readers_count": 57,
        "score": 36.6,
        "yours": false,
        "topic_id": 1229,
        "topic_slug": "lucene-layer-on-foundationdb",
        "display_username": "Tony Sun",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 540,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/lucene-layer-on-foundationdb/1229/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3745,
        "name": "Nathan Williams",
        "username": "nathanlws",
        "avatar_template": "/user_avatar/forums.foundationdb.org/nathanlws/{size}/74_2.png",
        "created_at": "2019-03-26T02:37:28.342Z",
        "cooked": "<p>Unfortunately there\u2019s not much more or promising to say about the Lucene Layer.</p>\n<p>It was a week long experiment on how an integration <em>might</em> look, but otherwise no one who really knew anything about Lucene was involved with it. I\u2019m sure the implementation is rather slow (the mapping is fairly readable vs any emphasis on efficiency, likely has correctness issues (not all tests passed), and hasn\u2019t been updated in 5+ years.</p>\n<p><a class=\"mention\" href=\"/u/mmcm\">@MMcM</a> may be able to shed more light on the Record Layer text support, which is much more recent and actively being maintained.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 7,
        "updated_at": "2019-03-26T02:37:28.342Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 16,
        "reads": 58,
        "readers_count": 57,
        "score": 96.6,
        "yours": false,
        "topic_id": 1229,
        "topic_slug": "lucene-layer-on-foundationdb",
        "display_username": "Nathan Williams",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": true,
        "admin": true,
        "staff": true,
        "user_id": 102,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/lucene-layer-on-foundationdb/1229/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3752,
        "name": "Alec Grieser",
        "username": "alloc",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
        "created_at": "2019-03-26T18:25:01.984Z",
        "cooked": "<p>As to Record Layer\u2019s support for text indexes, most of our docs are I think in the <a href=\"https://javadoc.io/page/org.foundationdb/fdb-record-layer-core/latest/com/apple/foundationdb/record/provider/foundationdb/indexes/TextIndexMaintainer.html\" rel=\"nofollow noopener\"><code>TextIndexMaintainer</code></a>, though it also looks like there are some Javadoc rendering bugs on that page (at least at the current version) that someone should probably fix (and expand upon).</p>\n<p>It has basic search capability with a pluggable serializer. It\u2019s more optimized for maintaining many little text indexes (e.g., maintaining many indexes over relatively small copora instead of a relatively small number of indexes over a very large corpus), so it doesn\u2019t do things like cache results as aggressively as other text search solutions, but it does offer transactional updates with documents inserted into the record store, which is nice. (Note also that updates are likely to conflict, so it\u2019s not super great if you need to support adding a bunch of documents in parallel.)</p>\n<p>I guess I can answer specific questions about the capabilities of the text index if there are more questions.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 7,
        "updated_at": "2019-03-26T18:25:01.984Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 64,
        "reads": 57,
        "readers_count": 56,
        "score": 326.4,
        "yours": false,
        "topic_id": 1229,
        "topic_slug": "lucene-layer-on-foundationdb",
        "display_username": "Alec Grieser",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://javadoc.io/page/org.foundationdb/fdb-record-layer-core/latest/com/apple/foundationdb/record/provider/foundationdb/indexes/TextIndexMaintainer.html",
            "internal": false,
            "reflection": false,
            "clicks": 34
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 102,
          "username": "nathanlws",
          "name": "Nathan Williams",
          "avatar_template": "/user_avatar/forums.foundationdb.org/nathanlws/{size}/74_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 8,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/lucene-layer-on-foundationdb/1229/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8872,
        "name": "Jugaadi",
        "username": "jugaadi",
        "avatar_template": "/user_avatar/forums.foundationdb.org/jugaadi/{size}/477_2.png",
        "created_at": "2020-12-10T23:59:41.041Z",
        "cooked": "<p><a class=\"mention\" href=\"/u/tonysun83\">@tonysun83</a> Were you able to test this layer in production? Any benchmarks available? And would you recommend using fdb as a backend for lucene?</p>\n<p>Thanks.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 7,
        "updated_at": "2020-12-10T23:59:41.041Z",
        "reply_count": 1,
        "reply_to_post_number": 5,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 35,
        "readers_count": 34,
        "score": 12.0,
        "yours": false,
        "topic_id": 1229,
        "topic_slug": "lucene-layer-on-foundationdb",
        "display_username": "Jugaadi",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 8,
          "username": "alloc",
          "name": "Alec Grieser",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 467,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/lucene-layer-on-foundationdb/1229/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8875,
        "name": "Robert Newson",
        "username": "rnewson",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rnewson/{size}/502_2.png",
        "created_at": "2020-12-11T15:27:33.024Z",
        "cooked": "<p>Hi,</p>\n<p>I was one of the authors of this attempt to store Lucene indexes inside FDB, I link to the code below. We\u2019ve not moved forward with this at IBM Cloudant as we did not reach our hoped for performance, but the code is by no means useless.</p>\n<p>It has been some time since I\u2019ve looked (or run!) this code but I hope it hasn\u2019t rotted too far.</p>\n<p>I think fdblucene works as well as it is probably possible to do, in that I don\u2019t think there\u2019s an obvious way to improve performance by an order of magnitude. There might be something in a custom Codec (and there\u2019s a branch in fdblucene where I tried that approach), but the Codec interface assumes it is reading/writing from/to a Directory, and its the file-oriented approach of Directory that is ultimately the performance bottleneck. The other key difficulty is that Lucene indexes are single-writer (an exclusive Lock must be obtained, or corruption is guaranteed).</p>\n<p>I would say, on reflection, that Lucene is best used where you can use its own classes for index storage (NIOFSDirectory and friends). There is an appeal to using FDB for all secondary indexes, but it comes at a price.</p>\n<aside class=\"onebox githubfolder\">\n  <header class=\"source\">\n      <img src=\"https://github.githubassets.com/favicons/favicon.svg\" class=\"site-icon\" width=\"32\" height=\"32\">\n      <a href=\"https://github.com/cloudant-labs/search3-java\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com</a>\n  </header>\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:400/400;\"><img src=\"https://avatars2.githubusercontent.com/u/1815157?s=400&amp;amp;v=4\" class=\"thumbnail\" width=\"400\" height=\"400\"></div>\n\n<h3><a href=\"https://github.com/cloudant-labs/search3-java\" target=\"_blank\" rel=\"noopener nofollow ugc\">cloudant-labs/search3-java</a></h3>\n\n\n  <p><span class=\"label1\">The Java components of the new Search 3 platform. Contribute to cloudant-labs/search3-java development by creating an account on GitHub.</span></p>\n\n  </article>\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n  <div style=\"clear: both\"></div>\n</aside>\n<br>\n<aside class=\"onebox githubfolder\">\n  <header class=\"source\">\n      <img src=\"https://github.githubassets.com/favicons/favicon.svg\" class=\"site-icon\" width=\"32\" height=\"32\">\n      <a href=\"https://github.com/cloudant-labs/search3-erl\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com</a>\n  </header>\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:400/400;\"><img src=\"https://avatars2.githubusercontent.com/u/1815157?s=400&amp;amp;v=4\" class=\"thumbnail\" width=\"400\" height=\"400\"></div>\n\n<h3><a href=\"https://github.com/cloudant-labs/search3-erl\" target=\"_blank\" rel=\"noopener nofollow ugc\">cloudant-labs/search3-erl</a></h3>\n\n\n  <p><span class=\"label1\">The Erlang components of the new Search 3 platform</span></p>\n\n  </article>\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n  <div style=\"clear: both\"></div>\n</aside>\n<br>\n<aside class=\"onebox githubfolder\">\n  <header class=\"source\">\n      <img src=\"https://github.githubassets.com/favicons/favicon.svg\" class=\"site-icon\" width=\"32\" height=\"32\">\n      <a href=\"https://github.com/cloudant-labs/fdblucene\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com</a>\n  </header>\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:400/400;\"><img src=\"https://avatars2.githubusercontent.com/u/1815157?s=400&amp;amp;v=4\" class=\"thumbnail\" width=\"400\" height=\"400\"></div>\n\n<h3><a href=\"https://github.com/cloudant-labs/fdblucene\" target=\"_blank\" rel=\"noopener nofollow ugc\">cloudant-labs/fdblucene</a></h3>\n\n\n  <p><span class=\"label1\">Lucene / FoundationDB integration library. Contribute to cloudant-labs/fdblucene development by creating an account on GitHub.</span></p>\n\n  </article>\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n  <div style=\"clear: both\"></div>\n</aside>\n",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 7,
        "updated_at": "2020-12-11T15:27:33.024Z",
        "reply_count": 0,
        "reply_to_post_number": 6,
        "quote_count": 0,
        "incoming_link_count": 10,
        "reads": 34,
        "readers_count": 33,
        "score": 86.8,
        "yours": false,
        "topic_id": 1229,
        "topic_slug": "lucene-layer-on-foundationdb",
        "display_username": "Robert Newson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/cloudant-labs/fdblucene",
            "internal": false,
            "reflection": false,
            "title": "GitHub - cloudant-labs/fdblucene: Lucene / FoundationDB integration library",
            "clicks": 32
          },
          {
            "url": "https://github.com/cloudant-labs/search3-java",
            "internal": false,
            "reflection": false,
            "title": "GitHub - cloudant-labs/search3-java: The Java components of the new Search 3 platform",
            "clicks": 10
          },
          {
            "url": "https://github.com/cloudant-labs/search3-erl",
            "internal": false,
            "reflection": false,
            "title": "GitHub - cloudant-labs/search3-erl: The Erlang components of the new Search 3 platform",
            "clicks": 5
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 467,
          "username": "jugaadi",
          "name": "Jugaadi",
          "avatar_template": "/user_avatar/forums.foundationdb.org/jugaadi/{size}/477_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 2
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 451,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/lucene-layer-on-foundationdb/1229/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      3664,
      3713,
      3744,
      3745,
      3752,
      8872,
      8875
    ]
  },
  "timeline_lookup": [
    [
      1,
      2413
    ],
    [
      2,
      2406
    ],
    [
      3,
      2402
    ],
    [
      5,
      2401
    ],
    [
      6,
      1776
    ],
    [
      7,
      1775
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Lucene-Layer on FoundationDB",
  "id": 1229,
  "title": "Lucene-Layer on FoundationDB",
  "posts_count": 7,
  "created_at": "2019-03-14T18:34:47.169Z",
  "views": 3502,
  "reply_count": 3,
  "like_count": 9,
  "last_posted_at": "2020-12-11T15:27:33.024Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "lucene-layer-on-foundationdb",
  "category_id": 5,
  "word_count": 1644,
  "deleted_at": null,
  "user_id": 540,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_1229",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 7,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 6,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Clj-foundationdb - Clojure bindings over Java wrapper",
      "id": 393,
      "title": "Clj-foundationdb - Clojure bindings over Java wrapper",
      "slug": "clj-foundationdb-clojure-bindings-over-java-wrapper",
      "posts_count": 6,
      "reply_count": 3,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2018-05-10T09:39:50.001Z",
      "last_posted_at": "2018-05-10T16:00:56.888Z",
      "bumped": true,
      "bumped_at": "2018-05-10T16:00:56.888Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "bindings"
      ],
      "tags_descriptions": {},
      "like_count": 4,
      "views": 1013,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 231,
            "username": "xtreak",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/x/ad7895/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "1 M rows write via Mongo client using document layer",
      "id": 1157,
      "title": "1 M rows write via Mongo client using document layer",
      "slug": "1-m-rows-write-via-mongo-client-using-document-layer",
      "posts_count": 13,
      "reply_count": 6,
      "highest_post_number": 13,
      "image_url": null,
      "created_at": "2019-02-19T21:32:16.215Z",
      "last_posted_at": "2019-06-13T13:08:26.134Z",
      "bumped": true,
      "bumped_at": "2019-06-13T13:08:26.134Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 2280,
      "category_id": 14,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 521,
            "username": "vaggarwal",
            "name": "VISHAL AGGARWAL",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/v/b3f665/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 9,
            "username": "mbhaskar",
            "name": "Bhaskar Muppana",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mbhaskar/{size}/277_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 584,
            "username": "aaerofeev",
            "name": "Alexandr Erofeev",
            "avatar_template": "/user_avatar/forums.foundationdb.org/aaerofeev/{size}/582_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Best way to add an index on already-existing data?",
      "id": 97,
      "title": "Best way to add an index on already-existing data?",
      "slug": "best-way-to-add-an-index-on-already-existing-data",
      "posts_count": 3,
      "reply_count": 0,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2018-04-20T04:59:04.978Z",
      "last_posted_at": "2018-04-21T14:52:02.378Z",
      "bumped": true,
      "bumped_at": "2018-04-21T14:52:02.378Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 3525,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 67,
            "username": "bpartridge",
            "name": "Brenton Partridge",
            "avatar_template": "/user_avatar/forums.foundationdb.org/bpartridge/{size}/50_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 30,
            "username": "wwilson",
            "name": "Will Wilson",
            "avatar_template": "/user_avatar/forums.foundationdb.org/wwilson/{size}/88_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "FoundationDB Bulk Loader tool",
      "id": 122,
      "title": "FoundationDB Bulk Loader tool",
      "slug": "foundationdb-bulk-loader-tool",
      "posts_count": 7,
      "reply_count": 3,
      "highest_post_number": 7,
      "image_url": null,
      "created_at": "2018-04-20T12:09:49.894Z",
      "last_posted_at": "2018-04-21T16:09:44.196Z",
      "bumped": true,
      "bumped_at": "2018-04-21T16:09:44.196Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 4,
      "views": 1279,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 83,
            "username": "fitomad",
            "name": "Adolfo",
            "avatar_template": "/user_avatar/forums.foundationdb.org/fitomad/{size}/57_2.png",
            "trust_level": 0
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 78,
            "username": "pineapple",
            "name": "Brian Haslet",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/p/7993a0/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Best practices for bulk load",
      "id": 422,
      "title": "Best practices for bulk load",
      "slug": "best-practices-for-bulk-load",
      "posts_count": 8,
      "reply_count": 6,
      "highest_post_number": 8,
      "image_url": null,
      "created_at": "2018-05-16T17:25:44.677Z",
      "last_posted_at": "2018-05-25T16:09:06.204Z",
      "bumped": true,
      "bumped_at": "2018-05-25T16:09:06.204Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 5,
      "views": 4449,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 211,
            "username": "brk0v",
            "name": "Viacheslav Biriukov",
            "avatar_template": "/user_avatar/forums.foundationdb.org/brk0v/{size}/173_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 230,
            "username": "umpc",
            "name": "Justin Lowery",
            "avatar_template": "/user_avatar/forums.foundationdb.org/umpc/{size}/203_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 540,
        "username": "tonysun83",
        "name": "Tony Sun",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/db5fbb/{size}.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 8,
        "username": "alloc",
        "name": "Alec Grieser",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 102,
        "username": "nathanlws",
        "name": "Nathan Williams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/nathanlws/{size}/74_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "moderator": true,
        "trust_level": 1
      },
      {
        "id": 451,
        "username": "rnewson",
        "name": "Robert Newson",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rnewson/{size}/502_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 467,
        "username": "jugaadi",
        "name": "Jugaadi",
        "avatar_template": "/user_avatar/forums.foundationdb.org/jugaadi/{size}/477_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      }
    ],
    "created_by": {
      "id": 540,
      "username": "tonysun83",
      "name": "Tony Sun",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/db5fbb/{size}.png"
    },
    "last_poster": {
      "id": 451,
      "username": "rnewson",
      "name": "Robert Newson",
      "avatar_template": "/user_avatar/forums.foundationdb.org/rnewson/{size}/502_2.png"
    },
    "links": [
      {
        "url": "https://github.com/AydinSakar/lucene-layer",
        "title": "GitHub - AydinSakar/lucene-layer: Lucene on FoundationDB",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 111,
        "user_id": 540,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://javadoc.io/page/org.foundationdb/fdb-record-layer-core/latest/com/apple/foundationdb/record/provider/foundationdb/indexes/TextIndexMaintainer.html",
        "title": null,
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 34,
        "user_id": 8,
        "domain": "javadoc.io",
        "root_domain": "javadoc.io"
      },
      {
        "url": "https://github.com/cloudant-labs/fdblucene",
        "title": "GitHub - cloudant-labs/fdblucene: Lucene / FoundationDB integration library",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 32,
        "user_id": 451,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://javadoc.io/doc/org.foundationdb/fdb-record-layer-core-pb3/2.5.47.0",
        "title": "org.foundationdb:fdb-record-layer-core-pb3:2.5.47.0 API Doc :: Javadoc.IO",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 31,
        "user_id": 13,
        "domain": "javadoc.io",
        "root_domain": "javadoc.io"
      },
      {
        "url": "https://forums.foundationdb.org/t/understanding-text-index-on-fdb-record-layer/1073/2",
        "title": "Understanding text index on fdb record layer",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 15,
        "user_id": 13,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://github.com/FoundationDB/fdb-record-layer",
        "title": "GitHub - FoundationDB/fdb-record-layer: A record-oriented store built on FoundationDB",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 13,
        "user_id": 13,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/cloudant-labs/search3-java",
        "title": "GitHub - cloudant-labs/search3-java: The Java components of the new Search 3 platform",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 10,
        "user_id": 451,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/cloudant-labs/search3-erl",
        "title": "GitHub - cloudant-labs/search3-erl: The Erlang components of the new Search 3 platform",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 5,
        "user_id": 451,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://forums.foundationdb.org/t/best-practices-for-bulk-load/422/2",
        "title": "Best practices for bulk load",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 4,
        "user_id": 540,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://github.com/apple/foundationdb/issues/1322",
        "title": "Special case shard splitting for sequential insert workloads \u00b7 Issue #1322 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 4,
        "user_id": 13,
        "domain": "github.com",
        "root_domain": "github.com"
      }
    ]
  },
  "bookmarks": []
}