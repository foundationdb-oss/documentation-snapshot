{
  "post_stream": {
    "posts": [
      {
        "id": 4978,
        "name": "",
        "username": "arob",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/{size}.png",
        "created_at": "2019-08-28T14:29:20.425Z",
        "cooked": "<p>Hi, I have a few questions related to deploying FoundationDB that I wasn\u2019t able to confidently find answers to in the docs. If anyone here is able to help out with any of them, I\u2019d really appreciate it.</p>\n<ol>\n<li>Are there any safety implications to not telling foundationdb how many instances of each process class you want? Or of not assigning process classes to individual processes?<br>\n1a. Assuming it\u2019s purely a performance hit (as suggested but not outright stated by previous threads on this topic and as outlined in <a href=\"https://github.com/apple/foundationdb/issues/552\" rel=\"nofollow noopener\">https://github.com/apple/foundationdb/issues/552</a>), roughly how bad can it get?<br>\n1b. Is there a benefit to specifying the number of instances of each process class that we want even if we can\u2019t assign classes directly to individual processes?<br>\n1c. What happens if the number of processes in the cluster (due to machines being added or removed) is different from the total number of requested process class instances?</li>\n<li>Can the coordinators be on machines that don\u2019t take on any other roles in the cluster?</li>\n<li>If each fdbserver process limits itself to only using one core, can performance problems arise from other processes running on the same machine and potentially using some of that core\u2019s time? I didn\u2019t see anything in the docs about whether fdb does anything to try to reserve that core for itself, or if it entirely relies on the OS scheduler.</li>\n</ol>\n<p>Thanks for what appears to be an awesome database, and with docs that are quite comprehensive for the most part! I\u2019ve just struggled a bit to make sure I correctly understand some of the finer concerns around configuring a cluster.</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-08-28T14:29:20.425Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 311,
        "reads": 86,
        "readers_count": 85,
        "score": 1587.0,
        "yours": false,
        "topic_id": 1600,
        "topic_slug": "process-class-and-machine-sharing-deployment-questions",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/issues/552",
            "internal": false,
            "reflection": false,
            "title": "Storage Server recruitment should consider existing recruited roles \u00b7 Issue #552 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 13
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 642,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/process-class-and-machine-sharing-deployment-questions/1600/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 4981,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-08-28T16:33:06.318Z",
        "cooked": "<p>Before answering any of the questions, I want to define some vocabulary that I\u2019ll be using. A role is a particular job in the cluster that can be assigned to processes, such as the storage server, transaction log, proxies, etc. Processes can take on more than one role.</p>\n<p>A process class is a property of each process which determines its affinity for taking on certain roles. Depending on the class and some other factors, a process may or may not actually be assigned any roles. <span class=\"mention\">@guarav</span> put together a useful matrix for how process roles can be assigned to classes: <a href=\"https://forums.foundationdb.org/t/roles-classes-matrix/1340\" class=\"inline-onebox\">Roles / Classes matrix</a></p>\n<aside class=\"quote no-group\" data-username=\"arob\" data-post=\"1\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/48.png\" class=\"avatar\"> arob:</div>\n<blockquote>\n<ol>\n<li>Are there any safety implications to not telling foundationdb how many instances of each process class you want? Or of not assigning process classes to individual processes?</li>\n</ol>\n</blockquote>\n</aside>\n<p>There shouldn\u2019t be any safety concerns with running your processes with an unspecified class. There also shouldn\u2019t be any safety concern with not specifying your desired number of various roles. The reason to set both is for performance reasons.</p>\n<aside class=\"quote no-group quote-modified\" data-username=\"arob\" data-post=\"1\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/48.png\" class=\"avatar\"> arob:</div>\n<blockquote>\n<p>1a. Assuming it\u2019s purely a performance hit (as suggested but not outright stated by previous threads on this topic and as outlined in <a href=\"https://github.com/apple/foundationdb/issues/552\" class=\"inline-onebox\">Storage Server recruitment should consider existing recruited roles \u00b7 Issue #552 \u00b7 apple/foundationdb \u00b7 GitHub</a>), roughly how bad can it get?</p>\n</blockquote>\n</aside>\n<p>If you don\u2019t set the desired number of various roles, your throughput will be limited to whatever the default  number of each role can handle. If this is enough throughput for you, there shouldn\u2019t be an issue, but if you start running into a bottleneck with one or more of the roles, you\u2019ll need to request more.</p>\n<p>If you don\u2019t set process classes, there are a couple different things that can happen. I believe that one is that you will recruit a storage server on every process, and other roles will be recruited alongside them on the same processes. This means that some of your storage servers will be dedicating some of their CPU resources to other tasks, reducing your storage server capacity. You also could be subjected to various spillover effects if you end up saturating a colocated role. For example, if your read workload is too hot on a storage server that is shared with a proxy, you\u2019ll end up starving the proxy and interfering with the commit path. If your cluster is lightly loaded, I wouldn\u2019t expect this to be a big deal, but otherwise it\u2019s best to avoid a configuration like this.</p>\n<p>Another issue is that when transaction logs and storage servers share a disk, you\u2019ll get suboptimal performance. The two roles have very different disk use patters, with the logs performing frequent small fsyncs, and the storage servers doing lots of reads and less frequent fsyncs. When both are using the same disk, you\u2019ll likely see increased latencies from the interference of the two.</p>\n<p>In both cases, I\u2019m not certain of the magnitude of the performance loss, but I\u2019d recommend doing a performance test if you\u2019re considering a non-trivial cluster with an unset layout. I do know that in the first case, having co-located roles makes things a lot less clear when trying to diagnose issues.</p>\n<aside class=\"quote no-group\" data-username=\"arob\" data-post=\"1\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/48.png\" class=\"avatar\"> arob:</div>\n<blockquote>\n<p>1b. Is there a benefit to specifying the number of instances of each process class that we want even if we can\u2019t assign classes directly to individual processes?</p>\n</blockquote>\n</aside>\n<p>Specifying the number of each role desired is slightly orthogonal to assigning classes to processes for some of the reasons discussed above. Choosing the number decides what capacity the cluster has for work of the given role type, and you\u2019ll need to do this to scale up if your cluster has reached a bottleneck on a role.</p>\n<aside class=\"quote no-group\" data-username=\"arob\" data-post=\"1\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/48.png\" class=\"avatar\"> arob:</div>\n<blockquote>\n<p>1c. What happens if the number of processes in the cluster (due to machines being added or removed) is different from the total number of requested process class instances?</p>\n</blockquote>\n</aside>\n<p>The cluster has a minimum requirement for each role (in some cases, 1). For roles like the transaction log, there is also a requirement that there be enough fault tolerance zones (i.e. separate machines unless configured otherwise). If you don\u2019t meet the minimum requirements, then your cluster will fail to startup and be unavailable. Assuming you meet the minimum requirements, the cluster will recruit as many of each role as it can up to your desired amount while meeting various rules about recruitment.</p>\n<p>There\u2019s another fault tolerance related issues that can arise in some configurations that\u2019s worth mentioning here. If you request N transaction logs and you run N transaction class processes (or probably if you have only N processes of unset class), then your cluster will be at risk of availability loss if one of the transaction log processes fails in a way such that it is repeatedly disconnecting and reconnecting to the cluster. What happens in this case is that each time the process disconnects, it will cause the cluster to go through a recovery, and then when the process rejoins, it will recover again to add back the transaction log. These recoveries can take a few seconds, and if frequent enough you won\u2019t be able to get much done.</p>\n<p>For this reason, it may be of benefit to run 1 or 2 extra processes (depending on your desired fault tolerance) of each non-storage class, preferably on different machines. For example, a good configuration for a triple redundant cluster would be to have N+2 transaction class processes and M+2 stateless processes, where N is the desired number of transaction logs and M is the number of processes running stateless roles such as proxy, resolver, etc.</p>\n<aside class=\"quote no-group\" data-username=\"arob\" data-post=\"1\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/48.png\" class=\"avatar\"> arob:</div>\n<blockquote>\n<p>Can the coordinators be on machines that don\u2019t take on any other roles in the cluster?</p>\n</blockquote>\n</aside>\n<p>Yes, and I think there are two ways to accomplish this. One is to exclude the process that you want to do this to, as a coordinator is the only thing that can run on an excluded process. The better option is to use the <code>coordinator</code> class, which I don\u2019t think is in the matrix above but I believe is only allowed to be a coordinator.</p>\n<aside class=\"quote no-group\" data-username=\"arob\" data-post=\"1\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/48.png\" class=\"avatar\"> arob:</div>\n<blockquote>\n<p>If each fdbserver process limits itself to only using one core, can performance problems arise from other processes running on the same machine and potentially using some of that core\u2019s time? I didn\u2019t see anything in the docs about whether fdb does anything to try to reserve that core for itself, or if it entirely relies on the OS scheduler.</p>\n</blockquote>\n</aside>\n<p>FoundationDB doesn\u2019t attempt to do anything with processor affinity, so it\u2019s up to the OS to decide where processes run. There may be some benefit to trying to configure the affinity, but I\u2019m not sure how much to expect. One thing you may want to be careful about is running too many processes for the number of physical cores on the machine. If you manage to saturate the CPU on the entire machine, you\u2019re likely to get some undesired behavior, such as high latencies or processes being detected as failed, etc.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-08-28T16:33:06.318Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 12,
        "reads": 85,
        "readers_count": 84,
        "score": 91.8,
        "yours": false,
        "topic_id": 1600,
        "topic_slug": "process-class-and-machine-sharing-deployment-questions",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/roles-classes-matrix/1340",
            "internal": true,
            "reflection": false,
            "title": "Roles / Classes matrix",
            "clicks": 45
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/process-class-and-machine-sharing-deployment-questions/1600/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4982,
        "name": "",
        "username": "arob",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/{size}.png",
        "created_at": "2019-08-28T17:17:44.920Z",
        "cooked": "<p>Thank you for the information! In my context it\u2019d be fairly burdensome to have to configure process classes and role counts for multiple clusters of various (changing) sizes, so I would at least like to see if it\u2019s practical to run a cluster without doing so.</p>\n<p>It sounds like I\u2019ll have to just test things out for myself to see the performance impact, which is totally fair. I\u2019ll come back and post what I find for anyone else who\u2019s curious.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-08-28T17:17:44.920Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 66,
        "readers_count": 65,
        "score": 13.0,
        "yours": false,
        "topic_id": 1600,
        "topic_slug": "process-class-and-machine-sharing-deployment-questions",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 642,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/process-class-and-machine-sharing-deployment-questions/1600/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4990,
        "name": "",
        "username": "arob",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/{size}.png",
        "created_at": "2019-08-29T15:35:44.901Z",
        "cooked": "<p>Quick followup to help make the testing easier \u2013 is looking at each process\u2019s XML logs the only way to determine how many instances of each role there are and which roles are being fulfilled by which processes or is there a more centralized way?</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-08-29T15:35:44.901Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 62,
        "readers_count": 61,
        "score": 17.2,
        "yours": false,
        "topic_id": 1600,
        "topic_slug": "process-class-and-machine-sharing-deployment-questions",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 642,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/process-class-and-machine-sharing-deployment-questions/1600/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4991,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-08-29T15:40:30.091Z",
        "cooked": "<p>The easiest way to get this information is from the JSON status document. You can get it from <code>fdbcli</code> by running <code>status json</code> or you can query it from any client by reading the key <code>\\xff\\xff/status/json</code>. Inside this document, there will be an object <code>cluster.processes</code> that maps process IDs to a description of that process. Each object in that map represents a running <code>fdbserver</code> process and will have a field called <code>roles</code> that lists each role assigned to the process. Included in each role object is a field name <code>role</code> which is the name of that role.</p>\n<p>One caveat is that coordinators aren\u2019t included in the roles list until an upcoming release (probably 6.2.3).</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-08-29T15:41:57.344Z",
        "reply_count": 0,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 63,
        "readers_count": 62,
        "score": 32.4,
        "yours": false,
        "topic_id": 1600,
        "topic_slug": "process-class-and-machine-sharing-deployment-questions",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 642,
          "username": "arob",
          "name": "",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/process-class-and-machine-sharing-deployment-questions/1600/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5003,
        "name": "",
        "username": "arob",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/{size}.png",
        "created_at": "2019-09-03T03:53:32.653Z",
        "cooked": "<p>So I did some testing the other day and unexpectedly found that performance was best when I didn\u2019t configure anything. That probably means I did a bad job configuring the cluster, or that my workload was too naive for better role allocation to help, but I still found it surprising.</p>\n<p>I used 10 n2-standard-2 GCE VMs (2 vCPUs and 8GB memory each) with local SSDs. I used ext4 and mounted the disks with <code>-o nobarrier</code>. I ran two fdbserver processes on each VM, and sent load from a separate 16-core machine. I ran a single coordinator process on a separate VM in the same GCE zone.</p>\n<p>The workloads I tried were super simple, just C++ programs using the standard client library that did single-key writes or single-key reads, with very small key and value sizes, ranging from 1 to 8 bytes. I didn\u2019t use any batching of operations; each was done in its own transaction. I had to run multiple load generator processes in order to max out the cluster\u2019s throughput, otherwise the client was the bottleneck. For each configuration of the cluster I tried a handful of numbers of client processes/threads and also tried sending load from multiple client VMs.</p>\n<p>On just a default cluster with no process classes specified, I got 120k-130k single-key writes per second, or about 300k single-key reads per second.</p>\n<p>I then found the 3 processes that were acting as transaction logs, explicitly marked the as the \u201ctransaction\u201d class, and set the other process on those 3 machines to be of the \u201cstateless\u201d class to avoid disk contention. This brought throughput down to roughly 105k writes per second, with reads not meaningfully changing, measuring in around 290k per second.</p>\n<p>I then un-did the explicit setting of process class and tried requesting certain numbers of roles. Here I suspect I messed up - rather than following <a href=\"https://apple.github.io/foundationdb/configuration.html#guidelines-for-setting-process-class\" rel=\"nofollow noopener\">the explanatory text</a> that appears to suggest 10 log servers and 8 stateless processes, I followed the example fdbcli commands and asked for 5 proxies and 8 log servers. Writes dropped to around 100k per second, with reads seemingly unaffected.</p>\n<p>As one last test, I undid the role changes and tried running with just one process per machine. I was surprised to see that reads were mostly unaffected while writes got cut nearly in half. This is odd, since it would seem to suggest that the cluster was more CPU-bound than I/O-bound, but only on writes. That seems like it\u2019s probably related to the fact that isolating transaction logs from storage servers hurt more than it helped, since you\u2019d only expect that to help if disk I/O was mostly saturated. Perhaps larger value sizes would better exhibit the expected change in performance.</p>\n<p>So based on this testing, explicit roles/process classes weren\u2019t a clear win, but it was very limited testing.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-09-03T03:53:32.653Z",
        "reply_count": 2,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 63,
        "readers_count": 62,
        "score": 32.4,
        "yours": false,
        "topic_id": 1600,
        "topic_slug": "process-class-and-machine-sharing-deployment-questions",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://apple.github.io/foundationdb/configuration.html#guidelines-for-setting-process-class",
            "internal": false,
            "reflection": false,
            "title": "Configuration \u2014 FoundationDB 6.1",
            "clicks": 8
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 642,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/process-class-and-machine-sharing-deployment-questions/1600/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5004,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-09-03T16:24:46.228Z",
        "cooked": "<p>One important question here is what the bottleneck was while you were running the tests. If the bottleneck was the storage servers, then a 30% reduction in storage processes may have been more costly than the benefit gained from separating the other roles (though it\u2019s still possible that you pay a latency penalty for not separating the other roles if you are running below saturation). Similarly, increasing the number of logs and proxies on a cluster that was storage bound probably wouldn\u2019t have much benefit, but would have an extra cost in particular when they are being shared with storage servers.</p>\n<aside class=\"quote no-group\" data-username=\"arob\" data-post=\"6\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/48.png\" class=\"avatar\"> arob:</div>\n<blockquote>\n<p>As one last test, I undid the role changes and tried running with just one process per machine. I was surprised to see that reads were mostly unaffected while writes got cut nearly in half. This is odd, since it would seem to suggest that the cluster was more CPU-bound than I/O-bound, but only on writes. That seems like it\u2019s probably related to the fact that isolating transaction logs from storage servers hurt more than it helped, since you\u2019d only expect that to help if disk I/O was mostly saturated. Perhaps larger value sizes would better exhibit the expected change in performance.</p>\n</blockquote>\n</aside>\n<p>Are these read and write tests run separately or concurrently?</p>\n<p>I think there are a few things that could be contributing to this. In addition to the possibility that you are CPU saturated, another is that with half the number of processes, you will end up with a lot more processes sharing roles with storage servers, reducing their effectiveness. In a read-only test, this probably wouldn\u2019t matter as much because reads don\u2019t drive a ton of load to these other processes, but writes would probably have more of an impact.</p>\n<p>The other thing is that the SSD storage engine only has a write queue depth of 1 per process. That means that you may not be able to push your disk to maximum throughput with only one process. See <a href=\"https://forums.foundationdb.org/t/ssd-engine-and-io-queue-depth/1015\" class=\"inline-onebox\">SSD engine and IO queue depth</a> for some additional discussion of this.</p>\n<p>As a further experiment, you could try a configuration with a higher storage to other process ratio. For example, we\u2019ve run some clusters with a 7:1 storage to transaction disk ratio, with 2 storage servers per disk. Stateless processes don\u2019t use the disk and can safely run on the same machine as storage processes as long as you have sufficient CPU resources.</p>\n<p>Also, be a little wary of using vCPU counts to budget for your processes. It\u2019s probably best to have a physical core available for each process, but if you don\u2019t, you\u2019ll want to be careful that you don\u2019t end up saturating the machine CPU, which could have a number of undesirable and potentially confusing effects.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-09-03T16:24:46.228Z",
        "reply_count": 1,
        "reply_to_post_number": 6,
        "quote_count": 1,
        "incoming_link_count": 2,
        "reads": 54,
        "readers_count": 53,
        "score": 25.8,
        "yours": false,
        "topic_id": 1600,
        "topic_slug": "process-class-and-machine-sharing-deployment-questions",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/ssd-engine-and-io-queue-depth/1015",
            "internal": true,
            "reflection": false,
            "title": "SSD engine and IO queue depth",
            "clicks": 6
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/process-class-and-machine-sharing-deployment-questions/1600/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5005,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-09-03T17:12:12.670Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"arob\" data-post=\"6\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/48.png\" class=\"avatar\"> arob:</div>\n<blockquote>\n<p>The workloads I tried were super simple, just C++ programs using the standard client library that did single-key writes or single-key reads, with very small key and value sizes, ranging from 1 to 8 bytes. I didn\u2019t use any batching of operations; each was done in its own transaction.</p>\n</blockquote>\n</aside>\n<p>As the first operation implicitly does a <code>getReadVersion()</code> call if one wasn\u2019t done before, this probably turned into a GetReadVersion benchmark.  Your throughput would then end up dominated by proxy network/CPU rather than transaction log writes or storage server reads.  Which if that\u2019s realistic for you, is fine, just important to be intentional about.</p>\n<aside class=\"quote no-group\" data-username=\"arob\" data-post=\"6\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/48.png\" class=\"avatar\"> arob:</div>\n<blockquote>\n<p>I then found the 3 processes that were acting as transaction logs, explicitly marked the as the \u201ctransaction\u201d class, and set the other process on those 3 machines to be of the \u201cstateless\u201d class to avoid disk contention. This brought throughput down to roughly 105k writes per second, with reads not meaningfully changing, measuring in around 290k per second.</p>\n</blockquote>\n</aside>\n<p>This would then cause/imply that your first cluster was running 3 transaction logs and 3 proxies?</p>\n<aside class=\"quote no-group\" data-username=\"arob\" data-post=\"6\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/48.png\" class=\"avatar\"> arob:</div>\n<blockquote>\n<p>I then un-did the explicit setting of process class and tried requesting certain numbers of roles. Here I suspect I messed up - rather than following <a href=\"https://apple.github.io/foundationdb/configuration.html#guidelines-for-setting-process-class\">the explanatory text</a> that appears to suggest 10 log servers and 8 stateless processes, I followed the example fdbcli commands and asked for 5 proxies and 8 log servers. Writes dropped to around 100k per second, with reads seemingly unaffected.</p>\n</blockquote>\n</aside>\n<p>Which would then recruit 8 logs and 5 proxies.  I think you effectively actually benchmarked <code>proxies=3 logs=3</code> vs <code>proxies=5 logs=8</code> for your workload.</p>\n<p>That suggested configuration completely ignores any mention of the total number of processes in a cluster\u2026 running 10 logs with 10 processes is going to be overkill, since 10 logs can write faster than 10 storage servers, so you\u2019ll end up limited by the latter in a long write-heavy test.</p>\n<aside class=\"quote no-group\" data-username=\"arob\" data-post=\"6\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/48.png\" class=\"avatar\"> arob:</div>\n<blockquote>\n<p>As one last test, I undid the role changes and tried running with just one process per machine. I was surprised to see that reads were mostly unaffected while writes got cut nearly in half.</p>\n</blockquote>\n</aside>\n<p>If you were still in <code>proxies=5 logs=8</code> configuration, you would have just put a proxy, log, and storage server on a majority of your processes.  Proxy operations are prioritized higher than transaction log or storage server operations, so maybe this makes sense, but I am a little surprised at your results.</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-09-03T17:12:29.116Z",
        "reply_count": 2,
        "reply_to_post_number": 6,
        "quote_count": 1,
        "incoming_link_count": 1,
        "reads": 51,
        "readers_count": 50,
        "score": 25.2,
        "yours": false,
        "topic_id": 1600,
        "topic_slug": "process-class-and-machine-sharing-deployment-questions",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/process-class-and-machine-sharing-deployment-questions/1600/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5006,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-09-03T17:53:56.346Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"alexmiller\" data-post=\"8\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/alexmiller/48/326_2.png\" class=\"avatar\"> alexmiller:</div>\n<blockquote>\n<p>As the first operation implicitly does a <code>getReadVersion()</code> call if one wasn\u2019t done before, this probably turned into a GetReadVersion benchmark.</p>\n</blockquote>\n</aside>\n<p>That\u2019s an interesting observation. For the first test with explicitly set transaction and stateless processes, you might expect that separating the proxies would make things better in this regard, though because there were only 3 stateless processes the proxies had to be paired up with the other stateless roles rather than the storage nodes they were paired up with before. It\u2019s plausible that the result of that could be worse, and running more stateless processes should help.</p>\n<p>As for the second test where proxies was configured to 5, that itself shouldn\u2019t have resulted in a decrease in throughput if we were bound on the proxies, but maybe the simultaneous increase in logs meant that the proxies were tripling up with logs and storage, and as a result they had less total capacity than with 3. You could try a proxies=5 logs=3 config, which seems like it should be better than proxies=3 logs=3 for handling GRV requests.</p>\n<p>It\u2019s hard to say for certain here what the bottleneck was without some additional details from the cluster during the test. Unless you specifically want to test the number of transactions you can start, though, the best bet is probably to increase the number of operations per transaction and eliminate that as a potential issue.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-09-03T17:53:56.346Z",
        "reply_count": 0,
        "reply_to_post_number": 8,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 47,
        "readers_count": 46,
        "score": 9.4,
        "yours": false,
        "topic_id": 1600,
        "topic_slug": "process-class-and-machine-sharing-deployment-questions",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/process-class-and-machine-sharing-deployment-questions/1600/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5007,
        "name": "",
        "username": "arob",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/{size}.png",
        "created_at": "2019-09-03T18:30:52.566Z",
        "cooked": "<p>Thanks for the feedback and insights, AJ and Alex! It\u2019s really helpful.</p>\n<p>I should probably do some additional testing with larger values and multiple operations per transaction, but I\u2019m not sure how soon I\u2019ll have the time do so. Hopefully this week.</p>\n<aside class=\"quote no-group\" data-username=\"ajbeamon\" data-post=\"7\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>One important question here is what the bottleneck was while you were running the tests.</p>\n</blockquote>\n</aside>\n<p>I was a bit unsure of this because none of the cluster\u2019s resources were fully utilized according to <code>fdbcli status</code>. CPU was most heavily utilized, but mostly under 50%, with a couple of processes sometimes getting up into the 60-70% range on certain workloads.</p>\n<p>When I cut the number of processes in half to just one per machine, then CPU pretty clearly became the bottleneck according to the numbers in <code>fdbcli status</code></p>\n<aside class=\"quote no-group\" data-username=\"ajbeamon\" data-post=\"7\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>Are these read and write tests run separately or concurrently?</p>\n</blockquote>\n</aside>\n<p>Separately. I didn\u2019t do any mixed workloads.</p>\n<aside class=\"quote no-group\" data-username=\"ajbeamon\" data-post=\"7\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>The other thing is that the SSD storage engine only has a write queue depth of 1 per process. That means that you may not be able to push your disk to maximum throughput with only one process. See <a href=\"https://forums.foundationdb.org/t/ssd-engine-and-io-queue-depth/1015\">SSD engine and IO queue depth</a> for some additional discussion of this.</p>\n</blockquote>\n</aside>\n<p>Ah, very interesting. Thanks for calling that out.</p>\n<aside class=\"quote no-group\" data-username=\"alexmiller\" data-post=\"8\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/alexmiller/48/326_2.png\" class=\"avatar\"> alexmiller:</div>\n<blockquote>\n<p>As the first operation implicitly does a <code>getReadVersion()</code> call if one wasn\u2019t done before, this probably turned into a GetReadVersion benchmark. Your throughput would then end up dominated by proxy network/CPU rather than transaction log writes or storage server reads. Which if that\u2019s realistic for you, is fine, just important to be intentional about.</p>\n</blockquote>\n</aside>\n<p>Also very good to know. I should probably do some additional testing with larger values and multiple operations per transaction. Does <code>GetReadVersion</code> performance scale up with the number of proxy processes?</p>\n<aside class=\"quote no-group\" data-username=\"alexmiller\" data-post=\"8\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/alexmiller/48/326_2.png\" class=\"avatar\"> alexmiller:</div>\n<blockquote>\n<p>This would then cause/imply that your first cluster was running 3 transaction logs and 3 proxies?</p>\n</blockquote>\n</aside>\n<p>Yes.</p>\n<aside class=\"quote no-group\" data-username=\"alexmiller\" data-post=\"8\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/alexmiller/48/326_2.png\" class=\"avatar\"> alexmiller:</div>\n<blockquote>\n<p>Which would then recruit 8 logs and 5 proxies. I think you effectively actually benchmarked <code>proxies=3 logs=3</code> vs <code>proxies=5 logs=8</code> for your workload.</p>\n</blockquote>\n</aside>\n<p>Yes. That\u2019s on me for taking docs literally rather than trying to formulate better numbers, but the lack of any specific guidance around how many of each role should be in clusters of different sizes makes it very tough for anyone who isn\u2019t seasoned in running the system to come up with a good balance.</p>\n<aside class=\"quote no-group\" data-username=\"alexmiller\" data-post=\"8\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/alexmiller/48/326_2.png\" class=\"avatar\"> alexmiller:</div>\n<blockquote>\n<p>If you were still in <code>proxies=5 logs=8</code> configuration, you would have just put a proxy, log, and storage server on a majority of your processes. Proxy operations are prioritized higher than transaction log or storage server operations, so maybe this makes sense, but I am a little surprised at your results.</p>\n</blockquote>\n</aside>\n<p>No, I undid the role changes before going down to one process per machine.</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-09-03T18:30:52.566Z",
        "reply_count": 2,
        "reply_to_post_number": 7,
        "quote_count": 2,
        "incoming_link_count": 3,
        "reads": 44,
        "readers_count": 43,
        "score": 33.8,
        "yours": false,
        "topic_id": 1600,
        "topic_slug": "process-class-and-machine-sharing-deployment-questions",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 642,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/process-class-and-machine-sharing-deployment-questions/1600/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5008,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-09-03T18:41:01.110Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"arob\" data-post=\"10\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/48.png\" class=\"avatar\"> arob:</div>\n<blockquote>\n<p>I was a bit unsure of this because none of the cluster\u2019s resources were fully utilized according to <code>fdbcli status</code> . CPU was most heavily utilized, but mostly under 50%, with a couple of processes sometimes getting up into the 60-70% range on certain workloads.</p>\n</blockquote>\n</aside>\n<p>It\u2019s possible you ran into machine CPU issues with only 1 physical core available. You can also check things like the queue sizes on the storage servers and transaction logs to see if you are getting a backlog of work (only applicable if you are doing writes). Seeing something like that could narrow down where the problem is.</p>\n<aside class=\"quote no-group\" data-username=\"arob\" data-post=\"10\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/48.png\" class=\"avatar\"> arob:</div>\n<blockquote>\n<p>Does <code>GetReadVersion</code> performance scale up with the number of proxy processes?</p>\n</blockquote>\n</aside>\n<p>Yes, you should be able to get more read versions if you have more proxies, subject to some of the issues I described such as where more roles are running alongside the proxies, etc.</p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-09-03T18:41:01.110Z",
        "reply_count": 0,
        "reply_to_post_number": 10,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 36,
        "readers_count": 35,
        "score": 7.2,
        "yours": false,
        "topic_id": 1600,
        "topic_slug": "process-class-and-machine-sharing-deployment-questions",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/process-class-and-machine-sharing-deployment-questions/1600/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5009,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-09-03T18:45:20.386Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"arob\" data-post=\"10\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/48.png\" class=\"avatar\"> arob:</div>\n<blockquote>\n<p>Also very good to know. I should probably do some additional testing with larger values and multiple operations per transaction. Does <code>GetReadVersion</code> performance scale up with the number of proxy processes?</p>\n</blockquote>\n</aside>\n<p>Sort of?  It involves one proxy collecting answers from all other proxies, so adding more proxies doesn\u2019t provide linear scaling.  There\u2019s some inflection point where adding more proxies will only hurt, but we\u2019re in the low enough numbers here that I\u2019d expect offering more CPU/network would be a net benefit even if it requires another message to be sent.<br>\nAggressive batching is done both client-side and within the proxy, so it should work out that a higher GRV-per-second target causes that latency to be higher, but should still be possible.</p>\n<p>However, someone did <a href=\"https://forums.foundationdb.org/t/how-to-scale-foundation-db-reads/1108\">some benchmarking before</a> that made it look like proxy-side GRV batching might be broken at saturation, so I\u2019m not feeling overly confident about that.</p>\n<aside class=\"quote no-group quote-modified\" data-username=\"arob\" data-post=\"10\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/48.png\" class=\"avatar\"> arob:</div>\n<blockquote>\n<blockquote>\n<p>If you were still in <code>proxies=5 logs=8</code> configuration, you would have just put a proxy, log, and storage server on a majority of your processes. Proxy operations are prioritized higher than transaction log or storage server operations, so maybe this makes sense, but I am a little surprised at your results.</p>\n</blockquote>\n<p>No, I undid the role changes before going down to one process per machine.</p>\n</blockquote>\n</aside>\n<p>Configuration and role settings are two separate things.  Once you\u2019ve explicitly configured your database via <code>fdbcli&gt; configure logs=8 proxies=5</code>, then that setting will stick as your preference regardless of how you change around process classes.</p>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-09-03T18:45:20.386Z",
        "reply_count": 1,
        "reply_to_post_number": 10,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 39,
        "readers_count": 38,
        "score": 12.8,
        "yours": false,
        "topic_id": 1600,
        "topic_slug": "process-class-and-machine-sharing-deployment-questions",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/how-to-scale-foundation-db-reads/1108",
            "internal": true,
            "reflection": false,
            "title": "How to scale foundation db reads",
            "clicks": 8
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/process-class-and-machine-sharing-deployment-questions/1600/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5010,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-09-03T19:01:17.628Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"alexmiller\" data-post=\"12\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/alexmiller/48/326_2.png\" class=\"avatar\"> alexmiller:</div>\n<blockquote>\n<p>Configuration and role settings are two separate things. Once you\u2019ve explicitly configured your database via <code>fdbcli&gt; configure logs=8 proxies=5</code> , then that setting will stick as your preference regardless of how you change around process classes.</p>\n</blockquote>\n</aside>\n<p>My understanding is that both the single process per machine configuration and the two per machine, logs=8 proxies=5 configuration were done with unset process classes. Is that correct?</p>",
        "post_number": 13,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-09-03T19:01:17.628Z",
        "reply_count": 1,
        "reply_to_post_number": 12,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 36,
        "readers_count": 35,
        "score": 12.2,
        "yours": false,
        "topic_id": 1600,
        "topic_slug": "process-class-and-machine-sharing-deployment-questions",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/process-class-and-machine-sharing-deployment-questions/1600/13",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5011,
        "name": "",
        "username": "arob",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/{size}.png",
        "created_at": "2019-09-03T19:17:16.564Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"ajbeamon\" data-post=\"13\" data-topic=\"1600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>My understanding is that both the single process per machine configuration and the two per machine, logs=8 proxies=5 configuration were done with unset process classes. Is that correct?</p>\n</blockquote>\n</aside>\n<p>I\u2019m sorry, apparently I was wrong about this. I thought that\u2019s what I did, but taking a second look at my saved status output it looks like I failed to set those back down to their defaults, so that there were still 8 logs and 5 proxies when I was running with only 10 processes (one on each VM).</p>",
        "post_number": 14,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-09-03T19:17:16.564Z",
        "reply_count": 1,
        "reply_to_post_number": 13,
        "quote_count": 1,
        "incoming_link_count": 1,
        "reads": 36,
        "readers_count": 35,
        "score": 17.2,
        "yours": false,
        "topic_id": 1600,
        "topic_slug": "process-class-and-machine-sharing-deployment-questions",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 642,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/process-class-and-machine-sharing-deployment-questions/1600/14",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5012,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-09-03T19:18:17.709Z",
        "cooked": "<p>Was this with unset process class?</p>",
        "post_number": 15,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-09-03T19:18:17.709Z",
        "reply_count": 1,
        "reply_to_post_number": 14,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 34,
        "readers_count": 33,
        "score": 11.8,
        "yours": false,
        "topic_id": 1600,
        "topic_slug": "process-class-and-machine-sharing-deployment-questions",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 642,
          "username": "arob",
          "name": "",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/process-class-and-machine-sharing-deployment-questions/1600/15",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5013,
        "name": "",
        "username": "arob",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/{size}.png",
        "created_at": "2019-09-03T19:26:35.853Z",
        "cooked": "<p>Yes, process classes were all unset.</p>",
        "post_number": 16,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-09-03T19:26:35.853Z",
        "reply_count": 0,
        "reply_to_post_number": 15,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 34,
        "readers_count": 33,
        "score": 6.8,
        "yours": false,
        "topic_id": 1600,
        "topic_slug": "process-class-and-machine-sharing-deployment-questions",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 12,
          "username": "ajbeamon",
          "name": "A.J. Beamon",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 642,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/process-class-and-machine-sharing-deployment-questions/1600/16",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      4978,
      4981,
      4982,
      4990,
      4991,
      5003,
      5004,
      5005,
      5006,
      5007,
      5008,
      5009,
      5010,
      5011,
      5012,
      5013
    ]
  },
  "timeline_lookup": [
    [
      1,
      2246
    ],
    [
      4,
      2245
    ],
    [
      6,
      2241
    ],
    [
      7,
      2240
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Process class and machine sharing deployment questions",
  "id": 1600,
  "title": "Process class and machine sharing deployment questions",
  "posts_count": 16,
  "created_at": "2019-08-28T14:29:20.326Z",
  "views": 2619,
  "reply_count": 11,
  "like_count": 3,
  "last_posted_at": "2019-09-03T19:26:35.853Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "process-class-and-machine-sharing-deployment-questions",
  "category_id": 7,
  "word_count": 4638,
  "deleted_at": null,
  "user_id": 642,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_1600",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 16,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 3,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Cluster tuning cookbook",
      "id": 520,
      "title": "Cluster tuning cookbook",
      "slug": "cluster-tuning-cookbook",
      "posts_count": 27,
      "reply_count": 19,
      "highest_post_number": 27,
      "image_url": null,
      "created_at": "2018-06-19T14:35:25.802Z",
      "last_posted_at": "2019-02-01T12:38:24.733Z",
      "bumped": true,
      "bumped_at": "2019-02-01T12:38:24.733Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 12,
      "views": 8885,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 310,
            "username": "shamatar",
            "name": "Alexander",
            "avatar_template": "/user_avatar/forums.foundationdb.org/shamatar/{size}/315_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 41,
            "username": "amirouche",
            "name": "Amirouche",
            "avatar_template": "/user_avatar/forums.foundationdb.org/amirouche/{size}/1911_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 502,
            "username": "nikolas.ioannou",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/n/5daacb/{size}.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Production optimizations",
      "id": 601,
      "title": "Production optimizations",
      "slug": "production-optimizations",
      "posts_count": 21,
      "reply_count": 14,
      "highest_post_number": 21,
      "image_url": null,
      "created_at": "2018-07-30T21:18:56.894Z",
      "last_posted_at": "2018-08-15T04:47:23.743Z",
      "bumped": true,
      "bumped_at": "2018-08-15T04:47:23.743Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 6,
      "views": 6473,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 311,
            "username": "ThomasJ",
            "name": "Thomas Johson",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 255,
            "username": "aqua",
            "name": "Matt Lohier",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/b9bd4f/{size}.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Why doesn&rsquo;t my cluster performance scale when I double the number of machines?",
      "id": 640,
      "title": "Why doesn't my cluster performance scale when I double the number of machines?",
      "slug": "why-doesnt-my-cluster-performance-scale-when-i-double-the-number-of-machines",
      "posts_count": 21,
      "reply_count": 16,
      "highest_post_number": 21,
      "image_url": null,
      "created_at": "2018-08-15T09:26:47.588Z",
      "last_posted_at": "2018-08-17T07:32:00.164Z",
      "bumped": true,
      "bumped_at": "2018-08-17T07:32:00.164Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 3323,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 255,
            "username": "aqua",
            "name": "Matt Lohier",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/b9bd4f/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 68,
            "username": "daverosenthal",
            "name": "Dave Rosenthal",
            "avatar_template": "/user_avatar/forums.foundationdb.org/daverosenthal/{size}/51_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 321,
            "username": "poma",
            "name": "Roman Semenov",
            "avatar_template": "/user_avatar/forums.foundationdb.org/poma/{size}/325_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "We have some machines and cpu and a little ssd",
      "id": 1532,
      "title": "We have some machines and cpu and a little ssd",
      "slug": "we-have-some-machines-and-cpu-and-a-little-ssd",
      "posts_count": 6,
      "reply_count": 4,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2019-07-22T13:53:58.839Z",
      "last_posted_at": "2019-07-23T18:05:38.232Z",
      "bumped": true,
      "bumped_at": "2019-07-23T18:05:38.232Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 778,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 520,
            "username": "Vasilii",
            "name": "Vasiliy Popkov",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/v/258eb7/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 15,
            "username": "markus.pilman",
            "name": "Markus Pilman",
            "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "WARNING: A single process is both a transaction log and a storage server",
      "id": 1580,
      "title": "WARNING: A single process is both a transaction log and a storage server",
      "slug": "warning-a-single-process-is-both-a-transaction-log-and-a-storage-server",
      "posts_count": 17,
      "reply_count": 14,
      "highest_post_number": 17,
      "image_url": null,
      "created_at": "2019-08-11T17:20:33.378Z",
      "last_posted_at": "2019-08-13T20:43:59.991Z",
      "bumped": true,
      "bumped_at": "2019-08-13T20:43:59.991Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 6,
      "views": 1783,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 311,
            "username": "ThomasJ",
            "name": "Thomas Johson",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 15,
            "username": "markus.pilman",
            "name": "Markus Pilman",
            "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 642,
        "username": "arob",
        "name": "",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/{size}.png",
        "post_count": 7,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 12,
        "username": "ajbeamon",
        "name": "A.J. Beamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "post_count": 7,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      }
    ],
    "created_by": {
      "id": 642,
      "username": "arob",
      "name": "",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/{size}.png"
    },
    "last_poster": {
      "id": 642,
      "username": "arob",
      "name": "",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/{size}.png"
    },
    "links": [
      {
        "url": "https://forums.foundationdb.org/t/roles-classes-matrix/1340",
        "title": "Roles / Classes matrix",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 45,
        "user_id": 12,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://github.com/apple/foundationdb/issues/552",
        "title": "Storage Server recruitment should consider existing recruited roles \u00b7 Issue #552 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 13,
        "user_id": 642,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://apple.github.io/foundationdb/configuration.html#guidelines-for-setting-process-class",
        "title": "Configuration \u2014 FoundationDB 6.1",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 8,
        "user_id": 642,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      },
      {
        "url": "https://forums.foundationdb.org/t/how-to-scale-foundation-db-reads/1108",
        "title": "How to scale foundation db reads",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 8,
        "user_id": 13,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://forums.foundationdb.org/t/ssd-engine-and-io-queue-depth/1015",
        "title": "SSD engine and IO queue depth",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 6,
        "user_id": 12,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      }
    ]
  },
  "bookmarks": []
}