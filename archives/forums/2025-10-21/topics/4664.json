{
  "post_stream": {
    "posts": [
      {
        "id": 14460,
        "name": "Sam Weaver",
        "username": "swr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/swr/{size}/1643_2.png",
        "created_at": "2024-10-16T15:38:08.124Z",
        "cooked": "<p>After I restart a machine running FoundationDB, (restarting <code>fdbmonitor</code> via systemd,) the total free memory on the machine increases. What causes fresh FDB processes to use less memory than FDB processes running for a long time?</p>\n<p>Is there an optimization that caches frequently used data in memory while FDB is running?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2024-10-16T15:38:08.124Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 14,
        "reads": 17,
        "readers_count": 16,
        "score": 73.4,
        "yours": false,
        "topic_id": 4664,
        "topic_slug": "after-restarting-foundationdb-the-new-processes-use-less-memory-why",
        "display_username": "Sam Weaver",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1309,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/after-restarting-foundationdb-the-new-processes-use-less-memory-why/4664/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 14464,
        "name": "",
        "username": "Imperatorx",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/i/d2c977/{size}.png",
        "created_at": "2024-10-18T20:35:58.750Z",
        "cooked": "<p>Mostly the disk cache (page cache), see <code>cache-memory</code> in <code>foundationdb.conf</code>.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2024-10-18T20:35:58.750Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 15,
        "readers_count": 14,
        "score": 18.0,
        "yours": false,
        "topic_id": 4664,
        "topic_slug": "after-restarting-foundationdb-the-new-processes-use-less-memory-why",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 164,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/after-restarting-foundationdb-the-new-processes-use-less-memory-why/4664/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 14469,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2024-10-21T18:51:08.875Z",
        "cooked": "<p>Some memory used by FDB is not released back to the OS but rather kept internally and reused.  This causes its memory footprint to increase over size because each time the workload requires a high highest amount of short lived memory usage some of that memory will be of the internally-reusable type I mentioned above.</p>\n<p>In particular, the \u201cStorage Queue\u201d size in Storage Servers includes the MVCC data structure which holds mutations not yet written to disk.  It is normally small in the healthy case but if the workload is generating a high write rate to the Storage Server or if the Storage Server falls behind then the Storage Queue will grow up to ~2GB.  Once the Storage Server catches up, the memory used by this state will still be part of the process and will be used again when the MVCC structure grows.</p>\n<p>There are also some smaller in-memory data structures which grow over time or can grow/shrink based on the workload leaving some memory slack.</p>\n<p>The page cache (for non <code>memory-*</code> storage engines) will grow to the configured size at whatever speed your workload accesses data and then it will remain there, evicting pages as needed for new read/write operations.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2024-10-21T18:51:08.875Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 15,
        "readers_count": 14,
        "score": 23.0,
        "yours": false,
        "topic_id": 4664,
        "topic_slug": "after-restarting-foundationdb-the-new-processes-use-less-memory-why",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/after-restarting-foundationdb-the-new-processes-use-less-memory-why/4664/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      14460,
      14464,
      14469
    ]
  },
  "timeline_lookup": [
    [
      1,
      370
    ],
    [
      2,
      368
    ],
    [
      3,
      365
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "After restarting FoundationDB, the new processes use less memory. Why?",
  "id": 4664,
  "title": "After restarting FoundationDB, the new processes use less memory. Why?",
  "posts_count": 3,
  "created_at": "2024-10-16T15:38:08.078Z",
  "views": 88,
  "reply_count": 0,
  "like_count": 2,
  "last_posted_at": "2024-10-21T18:51:08.875Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "after-restarting-foundationdb-the-new-processes-use-less-memory-why",
  "category_id": 17,
  "word_count": 269,
  "deleted_at": null,
  "user_id": 1309,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_4664",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 3,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 3,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Constrained RAM in an application development environment",
      "id": 347,
      "title": "Constrained RAM in an application development environment",
      "slug": "constrained-ram-in-an-application-development-environment",
      "posts_count": 4,
      "reply_count": 0,
      "highest_post_number": 4,
      "image_url": null,
      "created_at": "2018-05-04T19:00:59.341Z",
      "last_posted_at": "2018-12-28T16:56:52.931Z",
      "bumped": true,
      "bumped_at": "2018-12-28T16:56:52.931Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 6,
      "views": 1262,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 227,
            "username": "jweir",
            "name": "John Weir",
            "avatar_template": "/user_avatar/forums.foundationdb.org/jweir/{size}/196_2.png",
            "trust_level": 0
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 22,
            "username": "dave",
            "name": "David Scherer",
            "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 118,
            "username": "abdullin",
            "name": "Rinat Abdullin",
            "avatar_template": "/user_avatar/forums.foundationdb.org/abdullin/{size}/83_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Some Clarification on Storage Engine and Disk/IO",
      "id": 1453,
      "title": "Some Clarification on Storage Engine and Disk/IO",
      "slug": "some-clarification-on-storage-engine-and-disk-io",
      "posts_count": 13,
      "reply_count": 8,
      "highest_post_number": 13,
      "image_url": null,
      "created_at": "2019-06-13T18:18:46.358Z",
      "last_posted_at": "2019-07-23T06:20:18.977Z",
      "bumped": true,
      "bumped_at": "2019-07-23T06:20:18.977Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 2341,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 594,
            "username": "zhuyi29",
            "name": "Zoe",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/z/edb3f5/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Mac version of FoundationDB seems unhealthy",
      "id": 624,
      "title": "Mac version of FoundationDB seems unhealthy",
      "slug": "mac-version-of-foundationdb-seems-unhealthy",
      "posts_count": 5,
      "reply_count": 2,
      "highest_post_number": 5,
      "image_url": null,
      "created_at": "2018-08-09T01:54:43.781Z",
      "last_posted_at": "2018-08-09T14:27:32.729Z",
      "bumped": true,
      "bumped_at": "2018-08-09T14:27:32.729Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1806,
      "category_id": 5,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 349,
            "username": "knaversr",
            "name": "rob rodgers",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/k/82dd89/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "FoundationDB RAM requirements",
      "id": 1646,
      "title": "FoundationDB RAM requirements",
      "slug": "foundationdb-ram-requirements",
      "posts_count": 3,
      "reply_count": 0,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2019-09-23T20:18:31.261Z",
      "last_posted_at": "2019-09-24T20:43:40.869Z",
      "bumped": true,
      "bumped_at": "2019-09-24T20:43:40.869Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 2036,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 654,
            "username": "lfmunoz",
            "name": "Luis",
            "avatar_template": "/user_avatar/forums.foundationdb.org/lfmunoz/{size}/1109_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Memory leak in C API?",
      "id": 554,
      "title": "Memory leak in C API?",
      "slug": "memory-leak-in-c-api",
      "posts_count": 5,
      "reply_count": 1,
      "highest_post_number": 5,
      "image_url": null,
      "created_at": "2018-07-09T10:54:23.376Z",
      "last_posted_at": "2018-07-10T12:55:14.679Z",
      "bumped": true,
      "bumped_at": "2018-07-10T12:55:14.679Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 1120,
      "category_id": 5,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 319,
            "username": "kirilltitov",
            "name": "Kirill Titov",
            "avatar_template": "/user_avatar/forums.foundationdb.org/kirilltitov/{size}/328_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 7,
        "username": "SteavedHams",
        "name": "Steve Atherton",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 164,
        "username": "Imperatorx",
        "name": "",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/i/d2c977/{size}.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 1309,
        "username": "swr",
        "name": "Sam Weaver",
        "avatar_template": "/user_avatar/forums.foundationdb.org/swr/{size}/1643_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      }
    ],
    "created_by": {
      "id": 1309,
      "username": "swr",
      "name": "Sam Weaver",
      "avatar_template": "/user_avatar/forums.foundationdb.org/swr/{size}/1643_2.png"
    },
    "last_poster": {
      "id": 7,
      "username": "SteavedHams",
      "name": "Steve Atherton",
      "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png"
    }
  },
  "bookmarks": []
}