{
  "post_stream": {
    "posts": [
      {
        "id": 6378,
        "name": "Malthe Borch",
        "username": "malthe",
        "avatar_template": "/user_avatar/forums.foundationdb.org/malthe/{size}/794_2.png",
        "created_at": "2020-03-01T07:31:18.116Z",
        "cooked": "<p>Most of the transactional usage patterns in FoundationDB require multiple round-trips, for example having idempotent transactions by first <a href=\"https://apple.github.io/foundationdb/developer-guide.html#id=developer-guide-unknown-results\" rel=\"nofollow noopener\">checking for the presence of a key</a>.</p>\n<p>That is, any transactional logic that depends on reading data and which isn\u2019t baked into an atomic op, needs to transfer that data out to a client, using bandwidth and increasing latency.</p>\n<p>Are stored procedures on the road map as a solution to this \u2013 for example using a WASM-based ABI?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-03-01T07:31:18.116Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 186,
        "reads": 54,
        "readers_count": 53,
        "score": 942.8,
        "yours": false,
        "topic_id": 1993,
        "topic_slug": "stored-procedures",
        "display_username": "Malthe Borch",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://apple.github.io/foundationdb/developer-guide.html#id=developer-guide-unknown-results",
            "internal": false,
            "reflection": false,
            "title": "Developer Guide \u2014 FoundationDB 6.2",
            "clicks": 7
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 736,
        "hidden": false,
        "trust_level": 0,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/stored-procedures/1993/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 6379,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2020-03-01T09:50:03.267Z",
        "cooked": "<p>As FoundationDB is a distributed database, I\u2019m not sure having support for stored procedures would realistically result in the gain that you\u2019re hoping for.  The next question would be where is the stored procedure executed and where is the data that it needs to access?  If the process executing the stored procedure needs to go across the network to fetch data, then that likely gives approximately the same costs as having a client do the round trips instead.</p>\n<p>One could instead look at this as adopting a Calvin/Fauna-like model, where one could commit a transaction to execute.  When a storage server goes to apply the transaction to disk, it executes it, and then writes the result.  This would have the same restriction that read and write sets would need to be pre-declared, which complicates index usage.  I\u2019d also be highly concerned from an operational perspective about stalling the write loop of one storage server while waiting for reads from a different storage server.  I don\u2019t think that we\u2019re likely to go in this direction anytime soon.</p>\n<p>For the specific case of wishing to execute a read operation that only requires data from on shard (or is independently parallelizable across multiple shards), there was pushdown predicates <a href=\"https://github.com/apple/foundationdb/wiki/FoundationDB-Release-7.0-Planning\">on the roadmap</a>, but work on them stalled due other priorities cutting in. Thus, unlike what the roadmap says, they won\u2019t be in 7.0.  The idea would be that with this feature, one would be able to push down e.g. \u201ccount the number of keys between X and Y\u201d, and the aggregation for that could be executed on the storage server.</p>\n<p>Ideally we could offer an API that allows passing in a program, but there\u2019s a few constraints that we have on the language and execution environment.</p>\n<ol>\n<li>Evaluating a user program must be hard limited to a small execution time (let\u2019s say 1 microsecond), or must be able to pause execution and yield to the event loop every ~1 microsecond.</li>\n<li>User-provided code must either provably terminate, or be deterministically timed out/halted if it runs too long.  We need to make sure that sending <code>while(1) {}</code> as pushdown program doesn\u2019t allow one client to kill the database.</li>\n<li>The execution engine must be secure.  RPCing arbitrary code is generally a security hazard, so great attention must be given to this point.</li>\n<li>The execution engine must be able call into and return from user provided code with low overhead.  One of the major performance wins would be if one could remove inspecting subtrees of a B-Tree during a range read for a pushed down operation, but doing so would involve repeatedly calling into the execution engine in a performance-sensitive loop.</li>\n</ol>\n<p>In a quick search I had done before, I couldn\u2019t find anything that seemed to satisfy all of these requirements well.  LLVM IR would fail at (1), (2) and (3), I think.  WASM would fail at (1), (2), and (4), I think.  If you\u2019re aware of anything that can hit all 4 points to a good degree, I\u2019d love to hear.</p>\n<p>If we had the above, allowing custom atomic ops would potentially also become feasible, which could potentially address your request if what you\u2019re reading and writing is the same (one) key.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-03-01T09:58:29.861Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 155,
        "reads": 54,
        "readers_count": 53,
        "score": 800.8,
        "yours": false,
        "topic_id": 1993,
        "topic_slug": "stored-procedures",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/wiki/FoundationDB-Release-7.0-Planning",
            "internal": false,
            "reflection": false,
            "title": "FoundationDB Release 7.0 Planning \u00b7 apple/foundationdb Wiki \u00b7 GitHub",
            "clicks": 14
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/stored-procedures/1993/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6381,
        "name": "Malthe Borch",
        "username": "malthe",
        "avatar_template": "/user_avatar/forums.foundationdb.org/malthe/{size}/794_2.png",
        "created_at": "2020-03-01T10:35:32.929Z",
        "cooked": "<p>I don\u2019t know about the internals enough to tell whether this could be implemented without a read potentially stalling the write loop.</p>\n<p>The semantics would be the same whether the transaction was executed via a stored procedure or through an API client, but there would be a \u201chappy path\u201d when a transaction (stored procedure) can be completed without going across the network to fetch data.</p>\n<p>In terms of what sort of program might constitute a stored procedure:</p>\n<ol>\n<li>The WASM code would either naturally yield (requiring for example a network fetch operation) or it would either complete in a reasonable amount of time or it would not \u2013 in which case we\u2019d have to kill the thread.</li>\n<li>In terms of computing resources in the complete system, having an infinite loop in the storage layer or in a client program is perhaps not all that different. In both cases, someone or something needs to react. In practical terms, the stored procedure in question might be quarantined or subject to rate-limiting to ensure that a single bug won\u2019t bring down the whole system.</li>\n<li>I think WASM being supported by major browsers show that it\u2019s a rather secure execution model. In addition, presumably WASM code in this scenario would be trusted on the same terms as an API client is.</li>\n<li>In the browser, WASM code calls in and out of \u201csystem code\u201d all the time, e.g. to modify DOM elements or make asynchronous network calls. The devil might be in the details of course.</li>\n</ol>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-03-01T10:35:32.929Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 49,
        "readers_count": 48,
        "score": 14.8,
        "yours": false,
        "topic_id": 1993,
        "topic_slug": "stored-procedures",
        "display_username": "Malthe Borch",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 736,
        "hidden": false,
        "trust_level": 0,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/stored-procedures/1993/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6395,
        "name": "Meng Xu",
        "username": "mengxu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
        "created_at": "2020-03-02T20:43:44.087Z",
        "cooked": "<p><a class=\"mention\" href=\"/u/malthe\">@malthe</a> I\u2019m curious what application (in production) do you want to implement that can not be achieved with the current system (due to performance issue) and have to use stored procedure?</p>\n<p>A side though about the discussion above:<br>\nThe network latency for the web app. is WAN latency; while the client to DB latency is typically within DC because the client here is more like the micro service backend.</p>\n<p>The network latency difference in these two scenarios can be huge and affect the ROI of implementing store procedures.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-03-02T20:43:44.087Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 46,
        "readers_count": 45,
        "score": 29.2,
        "yours": false,
        "topic_id": 1993,
        "topic_slug": "stored-procedures",
        "display_username": "Meng Xu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 337,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/stored-procedures/1993/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6400,
        "name": "Malthe Borch",
        "username": "malthe",
        "avatar_template": "/user_avatar/forums.foundationdb.org/malthe/{size}/794_2.png",
        "created_at": "2020-03-03T07:50:43.484Z",
        "cooked": "<p><a class=\"mention\" href=\"/u/mengxu\">@mengxu</a> well this is hardly a new idea, see for example <a href=\"https://blogs.apache.org/hbase/entry/coprocessor_introduction\" rel=\"nofollow noopener\">introduction on coprocessing</a> which talks about this functionality in HBase and drawing inspiration from BigTable. Having predicate pushdown is also on the roadmap.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-03-03T07:50:43.484Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 45,
        "readers_count": 44,
        "score": 29.0,
        "yours": false,
        "topic_id": 1993,
        "topic_slug": "stored-procedures",
        "display_username": "Malthe Borch",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://blogs.apache.org/hbase/entry/coprocessor_introduction",
            "internal": false,
            "reflection": false,
            "title": "Coprocessor Introduction : Apache HBase",
            "clicks": 9
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 337,
          "username": "mengxu",
          "name": "Meng Xu",
          "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 736,
        "hidden": false,
        "trust_level": 0,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/stored-procedures/1993/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6405,
        "name": "Meng Xu",
        "username": "mengxu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
        "created_at": "2020-03-03T17:18:55.742Z",
        "cooked": "<p>I\u2019m sorry. I guess I didn\u2019t express myself well in my last post.</p>\n<p>Let me try to be more straightforward.</p>\n<p>I understood the general motivation of stored procedures.<br>\nI\u2019m curious:</p>\n<ol>\n<li>Are you running some production system that has used stored procedure and considering to migrate it to FDB? or</li>\n<li>Are you exploring which system uses the stored procedures and spring discussion on this topic for good? But there is no production system in the near future that will use stored procedures.</li>\n</ol>\n<p>I think this can also help developers prioritize features.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-03-03T17:18:55.742Z",
        "reply_count": 0,
        "reply_to_post_number": 5,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 43,
        "readers_count": 42,
        "score": 23.6,
        "yours": false,
        "topic_id": 1993,
        "topic_slug": "stored-procedures",
        "display_username": "Meng Xu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 736,
          "username": "malthe",
          "name": "Malthe Borch",
          "avatar_template": "/user_avatar/forums.foundationdb.org/malthe/{size}/794_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 337,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/stored-procedures/1993/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6894,
        "name": "",
        "username": "stevenicolai",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/278dde/{size}.png",
        "created_at": "2020-05-04T22:23:03.135Z",
        "cooked": "<p>Have you looked at eBPF?  It\u2019s the Linux kernel extension VM, designed to run user code in the kernel.  The kernel has similar requirements to your 1-4, so the design would be interesting to you.</p>\n<p>There is an apache licensed implementation called uBPF.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-05-04T22:23:03.135Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 30,
        "readers_count": 29,
        "score": 16.0,
        "yours": false,
        "topic_id": 1993,
        "topic_slug": "stored-procedures",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 762,
        "hidden": false,
        "trust_level": 0,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/stored-procedures/1993/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6895,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2020-05-04T22:31:19.250Z",
        "cooked": "<p>I have!  eBPF is my personally preferred direction to go, and I had also found uBPF.  It indeed looks like a great project to use as a starting point, is Apache2 and thus license compatible, it has both an x86_64 JIT and an interpreter fallback for other platforms, and lets one re-use the whole eBPF toolchain.</p>\n<p>My only point of concern is that the kernel does a good amount of the termination verification, which I don\u2019t believe had been ported to uBPF.  So while it theoretically satisfies (2), I\u2019m concerned that it wouldn\u2019t in practice (until/unless verification gets added to uBPF).</p>\n<p>It also wouldn\u2019t be the most user-friendly, as one would have to write C for every pushdown operation one wishes to do, and then compile and load that as eBPF.  I\u2019ve seen some nice python/go tooling around making this easy, but it\u2019d still be quite a jump for someone writing a python/java/go/etc. layer.</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-05-04T22:31:19.250Z",
        "reply_count": 1,
        "reply_to_post_number": 7,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 31,
        "readers_count": 30,
        "score": 11.2,
        "yours": false,
        "topic_id": 1993,
        "topic_slug": "stored-procedures",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 762,
          "username": "stevenicolai",
          "name": "",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/278dde/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/stored-procedures/1993/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6898,
        "name": "",
        "username": "stevenicolai",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/278dde/{size}.png",
        "created_at": "2020-05-05T02:45:42.407Z",
        "cooked": "<p>The verification in the kernel has specific tests for the data that is being accessed like packet buffers.  FoundationDB would likely need that for things like data buffer access.  So even if there was a verifier in uBPF, it would likely need to be extended.  Creating an extensible verifier framework that is easy for clients to extend is an interesting problem.</p>\n<p><a href=\"https://www.kernel.org/doc/Documentation/networking/filter.txt\" rel=\"nofollow noopener\">https://www.kernel.org/doc/Documentation/networking/filter.txt</a> has a nice description of the verifier towards the end.  FoundationDB usage would have a different set of states to track than the kernel.</p>\n<p>ideally, the user wouldn\u2019t write the eBPF programs for predicates, the client libraries would mostly do that.  The record layer could do that in the query planner.</p>\n<p>The threat model for FoundationDB is somewhat different than the kernel threat model.  Ideally, FoundationDB has an authentication step in front of submitting a request to the database, in the kernel that is more wide open.  The authors of the client applications are likely working collaboratively.  The threat is more mistakes and bugs vs malicious intent.  It may also be that FoundationDB doesn\u2019t need all of the VM features in eBPF to push predicates, that might simplify the verifier, by disallowing certain instructions vs verifying them.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2020-05-05T02:45:42.407Z",
        "reply_count": 0,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 5,
        "reads": 26,
        "readers_count": 25,
        "score": 75.2,
        "yours": false,
        "topic_id": 1993,
        "topic_slug": "stored-procedures",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://www.kernel.org/doc/Documentation/networking/filter.txt",
            "internal": false,
            "reflection": false,
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 762,
        "hidden": false,
        "trust_level": 0,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/stored-procedures/1993/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      6378,
      6379,
      6381,
      6395,
      6400,
      6405,
      6894,
      6895,
      6898
    ]
  },
  "timeline_lookup": [
    [
      1,
      2061
    ],
    [
      3,
      2060
    ],
    [
      4,
      2059
    ],
    [
      6,
      2058
    ],
    [
      7,
      1996
    ]
  ],
  "suggested_topics": [],
  "tags": [
    "performance"
  ],
  "tags_descriptions": {},
  "fancy_title": "Stored procedures",
  "id": 1993,
  "title": "Stored procedures",
  "posts_count": 9,
  "created_at": "2020-03-01T07:31:17.958Z",
  "views": 1745,
  "reply_count": 5,
  "like_count": 2,
  "last_posted_at": "2020-05-05T02:45:42.407Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "stored-procedures",
  "category_id": 9,
  "word_count": 1567,
  "deleted_at": null,
  "user_id": 736,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_1993",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 9,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 4,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "JanusGraph FoundationDB storage adapter",
      "id": 286,
      "title": "JanusGraph FoundationDB storage adapter",
      "slug": "janusgraph-foundationdb-storage-adapter",
      "posts_count": 4,
      "reply_count": 0,
      "highest_post_number": 4,
      "image_url": null,
      "created_at": "2018-04-26T22:29:18.204Z",
      "last_posted_at": "2018-04-27T20:10:43.943Z",
      "bumped": true,
      "bumped_at": "2018-04-27T20:10:43.943Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 6,
      "views": 3792,
      "category_id": 9,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 191,
            "username": "twilmes",
            "name": "Ted Wilmes",
            "avatar_template": "/user_avatar/forums.foundationdb.org/twilmes/{size}/552_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 30,
            "username": "wwilson",
            "name": "Will Wilson",
            "avatar_template": "/user_avatar/forums.foundationdb.org/wwilson/{size}/88_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 4,
            "username": "bbc",
            "name": "Ben Collins",
            "avatar_template": "/user_avatar/forums.foundationdb.org/bbc/{size}/4_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Feature Request: Predicate pushdown",
      "id": 954,
      "title": "Feature Request: Predicate pushdown",
      "slug": "feature-request-predicate-pushdown",
      "posts_count": 8,
      "reply_count": 3,
      "highest_post_number": 8,
      "image_url": null,
      "created_at": "2018-12-12T17:32:10.909Z",
      "last_posted_at": "2019-04-08T13:18:45.867Z",
      "bumped": true,
      "bumped_at": "2019-04-08T13:18:45.867Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 1940,
      "category_id": 8,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 499,
            "username": "garrensmith",
            "name": "Garren Smith",
            "avatar_template": "/user_avatar/forums.foundationdb.org/garrensmith/{size}/494_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "FDB over other databases for small to large sites",
      "id": 247,
      "title": "FDB over other databases for small to large sites",
      "slug": "fdb-over-other-databases-for-small-to-large-sites",
      "posts_count": 3,
      "reply_count": 0,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2018-04-24T17:01:49.234Z",
      "last_posted_at": "2018-04-25T09:37:04.247Z",
      "bumped": true,
      "bumped_at": "2018-04-25T09:37:04.247Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 3,
      "views": 2882,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 131,
            "username": "proyb",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/p/76d3ee/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 9,
            "username": "mbhaskar",
            "name": "Bhaskar Muppana",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mbhaskar/{size}/277_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 41,
            "username": "amirouche",
            "name": "Amirouche",
            "avatar_template": "/user_avatar/forums.foundationdb.org/amirouche/{size}/1911_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "FoundationDB for embedded use",
      "id": 221,
      "title": "FoundationDB for embedded use",
      "slug": "foundationdb-for-embedded-use",
      "posts_count": 6,
      "reply_count": 3,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2018-04-23T15:37:04.218Z",
      "last_posted_at": "2018-04-24T14:43:25.652Z",
      "bumped": true,
      "bumped_at": "2018-04-24T14:43:25.652Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 3290,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 151,
            "username": "eric",
            "name": "Eric S.",
            "avatar_template": "/user_avatar/forums.foundationdb.org/eric/{size}/128_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 22,
            "username": "dave",
            "name": "David Scherer",
            "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Coprocessors or modules",
      "id": 183,
      "title": "Coprocessors or modules",
      "slug": "coprocessors-or-modules",
      "posts_count": 11,
      "reply_count": 5,
      "highest_post_number": 11,
      "image_url": null,
      "created_at": "2018-04-21T17:04:48.883Z",
      "last_posted_at": "2018-04-24T03:27:19.187Z",
      "bumped": true,
      "bumped_at": "2018-04-24T03:27:19.187Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 2354,
      "category_id": 8,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 39,
            "username": "ddorian43",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ddorian43/{size}/91_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 30,
            "username": "wwilson",
            "name": "Will Wilson",
            "avatar_template": "/user_avatar/forums.foundationdb.org/wwilson/{size}/88_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 38,
            "username": "panghy",
            "name": "Clement Pang",
            "avatar_template": "/user_avatar/forums.foundationdb.org/panghy/{size}/19_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 22,
            "username": "dave",
            "name": "David Scherer",
            "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png",
            "trust_level": 1
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 736,
        "username": "malthe",
        "name": "Malthe Borch",
        "avatar_template": "/user_avatar/forums.foundationdb.org/malthe/{size}/794_2.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 0
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 337,
        "username": "mengxu",
        "name": "Meng Xu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 762,
        "username": "stevenicolai",
        "name": "",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/278dde/{size}.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 0
      }
    ],
    "created_by": {
      "id": 736,
      "username": "malthe",
      "name": "Malthe Borch",
      "avatar_template": "/user_avatar/forums.foundationdb.org/malthe/{size}/794_2.png"
    },
    "last_poster": {
      "id": 762,
      "username": "stevenicolai",
      "name": "",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/278dde/{size}.png"
    },
    "links": [
      {
        "url": "https://github.com/apple/foundationdb/wiki/FoundationDB-Release-7.0-Planning",
        "title": "FoundationDB Release 7.0 Planning \u00b7 apple/foundationdb Wiki \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 14,
        "user_id": 13,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://blogs.apache.org/hbase/entry/coprocessor_introduction",
        "title": "Coprocessor Introduction : Apache HBase",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 9,
        "user_id": 736,
        "domain": "blogs.apache.org",
        "root_domain": "apache.org"
      },
      {
        "url": "https://apple.github.io/foundationdb/developer-guide.html#id=developer-guide-unknown-results",
        "title": "Developer Guide \u2014 FoundationDB 6.2",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 7,
        "user_id": 736,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      }
    ]
  },
  "bookmarks": []
}