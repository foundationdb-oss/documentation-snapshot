{
  "post_stream": {
    "posts": [
      {
        "id": 14287,
        "name": "Nikita Lapkov",
        "username": "laplab",
        "avatar_template": "/user_avatar/forums.foundationdb.org/laplab/{size}/1839_2.png",
        "created_at": "2024-08-03T13:52:40.897Z",
        "cooked": "<p>Paper on RecordLayer states:</p>\n<blockquote>\n<p>If needed, moving a tenant is as simple as copying the appropriate range of data to another cluster\u2026</p>\n</blockquote>\n<p>This, however, doesn\u2019t seem simple at all. If I have a subspace that is actively used by RecordLayer and I want to move it to another cluster, I need to be really careful to:</p>\n<ul>\n<li>Not introduce downtime</li>\n<li>Not loose any data in the process</li>\n</ul>\n<p>Is there any recommended way of performing this operation?</p>\n<p>The only solution which comes to mind at the moment is:</p>\n<ul>\n<li>Create a version index on data I want to move</li>\n<li>Start initial copying of the data over to another cluster</li>\n<li>Once the copying is complete, traverse the version index in the ascending order to copy any records that got updated/added/deleted during the initial copying</li>\n<li>Once the copying is more or less caught up, perform a hard switch. During this hard switch, all operations on the subspace are blocked while we copy the last few items left in the version index. Then, we redirect all operations to the new cluster</li>\n</ul>\n<p>This is extremely complex and error prone process, so maybe there is a better way that I am missing. Keep in mind that I only need to move a single subspace, not the entire cluster (which is what DR seems to be focused on).</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 1,
        "updated_at": "2024-08-03T13:52:40.897Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 9,
        "reads": 16,
        "readers_count": 15,
        "score": 48.2,
        "yours": false,
        "topic_id": 4576,
        "topic_slug": "how-to-move-a-subspace-to-another-cluster",
        "display_username": "Nikita Lapkov",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1452,
        "hidden": false,
        "trust_level": 0,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-move-a-subspace-to-another-cluster/4576/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      }
    ],
    "stream": [
      14287
    ]
  },
  "timeline_lookup": [
    [
      1,
      444
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "How to move a subspace to another cluster",
  "id": 4576,
  "title": "How to move a subspace to another cluster",
  "posts_count": 1,
  "created_at": "2024-08-03T13:52:40.838Z",
  "views": 64,
  "reply_count": 0,
  "like_count": 0,
  "last_posted_at": "2024-08-03T13:52:40.897Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "how-to-move-a-subspace-to-another-cluster",
  "category_id": 7,
  "word_count": 222,
  "deleted_at": null,
  "user_id": 1452,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_4576",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 1,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 1,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "R/w performance impact and replicas consistency while moving data",
      "id": 567,
      "title": "R/w performance impact and replicas consistency while moving data",
      "slug": "r-w-performance-impact-and-replicas-consistency-while-moving-data",
      "posts_count": 1,
      "reply_count": 0,
      "highest_post_number": 1,
      "image_url": null,
      "created_at": "2018-07-13T06:23:02.381Z",
      "last_posted_at": "2018-07-13T06:23:02.474Z",
      "bumped": true,
      "bumped_at": "2018-07-13T06:23:02.474Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 499,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest single",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 327,
            "username": "zhanghuan",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/z/5fc32e/{size}.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "DR streaming and locking only a range of keys",
      "id": 542,
      "title": "DR streaming and locking only a range of keys",
      "slug": "dr-streaming-and-locking-only-a-range-of-keys",
      "posts_count": 4,
      "reply_count": 2,
      "highest_post_number": 4,
      "image_url": null,
      "created_at": "2018-07-03T21:55:24.419Z",
      "last_posted_at": "2018-07-11T08:04:22.484Z",
      "bumped": true,
      "bumped_at": "2018-07-11T08:04:22.484Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1484,
      "category_id": 8,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 318,
            "username": "amv",
            "name": "Antti V\u00e4h\u00e4kotam\u00e4ki",
            "avatar_template": "/user_avatar/forums.foundationdb.org/amv/{size}/318_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Suspend data replication?",
      "id": 1551,
      "title": "Suspend data replication?",
      "slug": "suspend-data-replication",
      "posts_count": 3,
      "reply_count": 1,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2019-07-31T06:01:46.816Z",
      "last_posted_at": "2019-08-01T09:57:00.593Z",
      "bumped": true,
      "bumped_at": "2019-08-01T09:57:00.593Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 397,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 629,
            "username": "Sraw",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/a88e57/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Migrating from a large cluster to another",
      "id": 721,
      "title": "Migrating from a large cluster to another",
      "slug": "migrating-from-a-large-cluster-to-another",
      "posts_count": 15,
      "reply_count": 9,
      "highest_post_number": 15,
      "image_url": null,
      "created_at": "2018-09-21T15:41:31.742Z",
      "last_posted_at": "2018-11-06T16:15:24.202Z",
      "bumped": true,
      "bumped_at": "2018-11-06T16:15:24.202Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 2418,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 16,
            "username": "ashishnm",
            "name": "Ashish Motivala",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/b5e925/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 15,
            "username": "markus.pilman",
            "name": "Markus Pilman",
            "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 43,
            "username": "killertypo",
            "name": "Mike McMahon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/killertypo/{size}/35_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 311,
            "username": "ThomasJ",
            "name": "Thomas Johson",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Constant Data Movement",
      "id": 1011,
      "title": "Constant Data Movement",
      "slug": "constant-data-movement",
      "posts_count": 3,
      "reply_count": 0,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2019-01-13T17:58:43.798Z",
      "last_posted_at": "2019-01-14T22:58:20.167Z",
      "bumped": true,
      "bumped_at": "2019-01-14T22:58:20.167Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 604,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 38,
            "username": "panghy",
            "name": "Clement Pang",
            "avatar_template": "/user_avatar/forums.foundationdb.org/panghy/{size}/19_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 1452,
        "username": "laplab",
        "name": "Nikita Lapkov",
        "avatar_template": "/user_avatar/forums.foundationdb.org/laplab/{size}/1839_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 0
      }
    ],
    "created_by": {
      "id": 1452,
      "username": "laplab",
      "name": "Nikita Lapkov",
      "avatar_template": "/user_avatar/forums.foundationdb.org/laplab/{size}/1839_2.png"
    },
    "last_poster": {
      "id": 1452,
      "username": "laplab",
      "name": "Nikita Lapkov",
      "avatar_template": "/user_avatar/forums.foundationdb.org/laplab/{size}/1839_2.png"
    }
  },
  "bookmarks": []
}