{
  "post_stream": {
    "posts": [
      {
        "id": 6372,
        "name": "John Brownlee",
        "username": "john_brownlee",
        "avatar_template": "/user_avatar/forums.foundationdb.org/john_brownlee/{size}/22_2.png",
        "created_at": "2020-02-28T15:37:14.513Z",
        "cooked": "<p>Over time, the Kubernetes Operator will accumulate technical debt. Paying down this technical debt will sometimes require backward incompatible changes, like removing deprecated fields or dropping support for old versions of FoundationDB. We have to balance our desire to pay down this technical debt must be weighed against the need for stability in the tools that people are using to manage production deployments. To achieve that balance, I propose the following process for evolving the Kubernetes Operator. Most of the changes described here would only take effect once we reach version 1.0, but the process of transitioning between major versions will be available for transitioning from 0.x to 1.0.</p>\n<p>We will version the Kubernetes operator using SemVer (major.minor.patch). Backward incompatible changes will only be introduced in a new major version of the operator. Some of the possible backwards incompatible changes are:</p>\n<ul>\n<li>Dropping support for old versions of FDB</li>\n<li>Dropping support for old versions of Kubernetes</li>\n<li>Removing deprecated fields from the cluster resource</li>\n<li>Changing the default values when fields are omitted in the spec</li>\n</ul>\n<p>Minor or patch versions of the operator may introduce behavior changes that break people\u2019s usage of it, but in general we will try to introduce feature flags to control that kind of change. This should allow people to opt in to new behavior, and make sure that we have an opportunity to merge something into a release while limiting the risks of problems with new features.</p>\n<p>There will be at least 12 months between each major version. This should ensure that the work of supporting a new major version doesn\u2019t create a continuous drain on people running the operator, while also limiting how much technical debt we will accrue between major versions.</p>\n<p>If we need to remove a field from the cluster resource, we will release a new version of the CRD. If we need to add a field to the cluster resource, we will do that without changing the CRD version. We will develop a tool for people to scan their clusters for any use of deprecated fields in preparation for a major upgrade.</p>\n<p>A new major version of the operator will support at least the following versions of FDB:</p>\n<ul>\n<li>All patches for the most recent minor version of FDB</li>\n<li>The most recent patch for the second-most recent minor version of FDB</li>\n</ul>\n<p>We may also retain support for older versions of FDB, depending on what is required to retain that support.</p>\n<p>Once a major version is released, bug fixes for older versions of the operator will be offered on a case-by-case basis.</p>\n<p>The supported versions of FDB, Kubernetes, and the CRD for each major version of the operator will be documented in a <a href=\"https://github.com/FoundationDB/fdb-kubernetes-operator/blob/master/docs/compatibility.md\">version compatibility guide</a> in the operator documentation.</p>\n<p>Does this sound like a reasonable upgrade story?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 4,
        "updated_at": "2020-02-28T15:37:14.513Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 171,
        "reads": 42,
        "readers_count": 41,
        "score": 898.4,
        "yours": false,
        "topic_id": 1990,
        "topic_slug": "versioning-for-the-kubernetes-operator",
        "display_username": "John Brownlee",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/FoundationDB/fdb-kubernetes-operator/blob/master/docs/compatibility.md",
            "internal": false,
            "reflection": false,
            "title": "fdb-kubernetes-operator/compatibility.md at master \u00b7 FoundationDB/fdb-kubernetes-operator \u00b7 GitHub",
            "clicks": 16
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 2
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 3,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/versioning-for-the-kubernetes-operator/1990/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 7386,
        "name": "Robert Collins",
        "username": "rbtcollins",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rbtcollins/{size}/941_2.png",
        "created_at": "2020-06-17T21:51:39.463Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"john_brownlee\" data-post=\"1\" data-topic=\"1990\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/john_brownlee/48/22_2.png\" class=\"avatar\"> john_brownlee:</div>\n<blockquote>\n<p>Does this sound like a reasonable upgrade story?</p>\n</blockquote>\n</aside>\n<p>Broadly yes; though I can suggest a couple of tweaks.</p>\n<ul>\n<li>\n<p>rather than scanning for deprecated fields, offer a tool to read in version N of the CRD and output version N+1 in undeprecated form. For instance, the volumeSize + storageClass can be upgraded to a volumeClaimTemplate by generating one in the processes hash under \u2018general\u2019 with only those fields populated; or if that is already filled, discarding those keys. The logic to do this already exists in the operator, by definition, so this should be a low-effort task - particularly if we refactor the operators code to upgrade on parsing rather than upgrading on evaluating, the way it does now.</p>\n</li>\n<li>\n<p>support FDB versions according to the FDB support policy; if there isn\u2019t one - perhaps that should be a lemma that is solved first? Something along the lines of \u2018if FDB is still taking patches for a branch and publishing binaries, the operator should support it\u2019 is what I\u2019m thinking.</p>\n</li>\n</ul>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 4,
        "updated_at": "2020-06-17T21:51:39.463Z",
        "reply_count": 1,
        "reply_to_post_number": 1,
        "quote_count": 1,
        "incoming_link_count": 1,
        "reads": 25,
        "readers_count": 24,
        "score": 15.0,
        "yours": false,
        "topic_id": 1990,
        "topic_slug": "versioning-for-the-kubernetes-operator",
        "display_username": "Robert Collins",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 765,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/versioning-for-the-kubernetes-operator/1990/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7458,
        "name": "John Brownlee",
        "username": "john_brownlee",
        "avatar_template": "/user_avatar/forums.foundationdb.org/john_brownlee/{size}/22_2.png",
        "created_at": "2020-06-24T20:19:11.008Z",
        "cooked": "<p>I think that giving a proposed replacement spec seems like a reasonable course. We\u2019re pretty close to being at a point where the operator never updates the cluster spec, so at that point we should be able to have a single action for rewriting deprecated fields and then have the rest of the reconciliation read that without a risk of introducing conflicts with the spec as the user has written it.</p>\n<p>I think in the long term we would want the operator to follow the same support model that the main project supports, and it\u2019s worth discussing how to codify that. The operator may have reason to move more quickly in dropping older versions, since the Kubernetes solution is evolving more rapidly, and there are going to be features in FDB that dramatically change how we run things (e.g. supporting DNS names in cluster files, and the RPC layer). Hopefully it will be less painful with the operator, since it automates a decent chunk of the work of doing upgrades.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 4,
        "updated_at": "2020-06-24T20:19:11.008Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 7,
        "reads": 19,
        "readers_count": 18,
        "score": 58.8,
        "yours": false,
        "topic_id": 1990,
        "topic_slug": "versioning-for-the-kubernetes-operator",
        "display_username": "John Brownlee",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 765,
          "username": "rbtcollins",
          "name": "Robert Collins",
          "avatar_template": "/user_avatar/forums.foundationdb.org/rbtcollins/{size}/941_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 3,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/versioning-for-the-kubernetes-operator/1990/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7497,
        "name": "Robert Collins",
        "username": "rbtcollins",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rbtcollins/{size}/941_2.png",
        "created_at": "2020-07-03T09:22:22.933Z",
        "cooked": "<p>I can certainly see the pressure to move faster right now, but in my experience longer term the exact same pressures that keep folk on older versions will still apply in K8s environments: the fleet management aspect is managed - yes, but the client upgrades in all the things using fdb, the workload testing, confidence building, testing of replacements for deprecated features etc - these don\u2019t go away.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 4,
        "updated_at": "2020-07-03T09:22:22.933Z",
        "reply_count": 0,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 16,
        "readers_count": 15,
        "score": 8.2,
        "yours": false,
        "topic_id": 1990,
        "topic_slug": "versioning-for-the-kubernetes-operator",
        "display_username": "Robert Collins",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 3,
          "username": "john_brownlee",
          "name": "John Brownlee",
          "avatar_template": "/user_avatar/forums.foundationdb.org/john_brownlee/{size}/22_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 765,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/versioning-for-the-kubernetes-operator/1990/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      6372,
      7386,
      7458,
      7497
    ]
  },
  "timeline_lookup": [
    [
      1,
      2062
    ],
    [
      2,
      1952
    ],
    [
      3,
      1945
    ],
    [
      4,
      1937
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Versioning for the Kubernetes Operator",
  "id": 1990,
  "title": "Versioning for the Kubernetes Operator",
  "posts_count": 4,
  "created_at": "2020-02-28T15:37:14.453Z",
  "views": 1190,
  "reply_count": 3,
  "like_count": 3,
  "last_posted_at": "2020-07-03T09:22:22.933Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "versioning-for-the-kubernetes-operator",
  "category_id": 15,
  "word_count": 900,
  "deleted_at": null,
  "user_id": 3,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_1990",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 4,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 2,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Operator 1.0 release",
      "id": 3203,
      "title": "Operator 1.0 release",
      "slug": "operator-1-0-release",
      "posts_count": 1,
      "reply_count": 0,
      "highest_post_number": 1,
      "image_url": null,
      "created_at": "2022-03-10T08:00:49.664Z",
      "last_posted_at": "2022-03-10T08:00:49.725Z",
      "bumped": true,
      "bumped_at": "2022-03-10T08:00:49.725Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 6,
      "views": 497,
      "category_id": 16,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest single",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 849,
            "username": "johscheuer",
            "name": "Johannes Scheuermann",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "What&rsquo;s the compatible version of foundationdb server and operator version?",
      "id": 3415,
      "title": "What's the compatible version of foundationdb server and operator version?",
      "slug": "whats-the-compatible-version-of-foundationdb-server-and-operator-version",
      "posts_count": 6,
      "reply_count": 4,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2022-07-01T04:36:19.768Z",
      "last_posted_at": "2022-07-05T07:23:33.906Z",
      "bumped": true,
      "bumped_at": "2022-07-05T07:23:33.906Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 482,
      "category_id": 16,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 1029,
            "username": "liuyan",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/839c29/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 849,
            "username": "johscheuer",
            "name": "Johannes Scheuermann",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Planned Operator 2.0 release",
      "id": 4181,
      "title": "Planned Operator 2.0 release",
      "slug": "planned-operator-2-0-release",
      "posts_count": 1,
      "reply_count": 0,
      "highest_post_number": 1,
      "image_url": null,
      "created_at": "2023-10-11T06:51:46.413Z",
      "last_posted_at": "2023-10-11T06:51:46.502Z",
      "bumped": true,
      "bumped_at": "2023-10-11T06:51:46.502Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 3,
      "views": 321,
      "category_id": 16,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest single",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 849,
            "username": "johscheuer",
            "name": "Johannes Scheuermann",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "FDB Kubernetes Operator upgrade documentation",
      "id": 3833,
      "title": "FDB Kubernetes Operator upgrade documentation",
      "slug": "fdb-kubernetes-operator-upgrade-documentation",
      "posts_count": 1,
      "reply_count": 0,
      "highest_post_number": 1,
      "image_url": null,
      "created_at": "2023-02-24T07:47:03.628Z",
      "last_posted_at": "2023-02-24T07:47:03.691Z",
      "bumped": true,
      "bumped_at": "2023-02-24T07:47:03.691Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "operator"
      ],
      "tags_descriptions": {},
      "like_count": 3,
      "views": 438,
      "category_id": 16,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest single",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 849,
            "username": "johscheuer",
            "name": "Johannes Scheuermann",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Upgrading Kubernetes version on GKE nodepool",
      "id": 2454,
      "title": "Upgrading Kubernetes version on GKE nodepool",
      "slug": "upgrading-kubernetes-version-on-gke-nodepool",
      "posts_count": 1,
      "reply_count": 0,
      "highest_post_number": 1,
      "image_url": null,
      "created_at": "2020-11-26T22:19:56.389Z",
      "last_posted_at": "2020-11-26T22:19:56.452Z",
      "bumped": true,
      "bumped_at": "2020-11-26T22:23:17.244Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "operator"
      ],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 528,
      "category_id": 16,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest single",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 744,
            "username": "v-pap",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png",
            "trust_level": 1
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 3,
        "username": "john_brownlee",
        "name": "John Brownlee",
        "avatar_template": "/user_avatar/forums.foundationdb.org/john_brownlee/{size}/22_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 765,
        "username": "rbtcollins",
        "name": "Robert Collins",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rbtcollins/{size}/941_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      }
    ],
    "created_by": {
      "id": 3,
      "username": "john_brownlee",
      "name": "John Brownlee",
      "avatar_template": "/user_avatar/forums.foundationdb.org/john_brownlee/{size}/22_2.png"
    },
    "last_poster": {
      "id": 765,
      "username": "rbtcollins",
      "name": "Robert Collins",
      "avatar_template": "/user_avatar/forums.foundationdb.org/rbtcollins/{size}/941_2.png"
    },
    "links": [
      {
        "url": "https://github.com/FoundationDB/fdb-kubernetes-operator/blob/master/docs/compatibility.md",
        "title": "fdb-kubernetes-operator/compatibility.md at master \u00b7 FoundationDB/fdb-kubernetes-operator \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 16,
        "user_id": 3,
        "domain": "github.com",
        "root_domain": "github.com"
      }
    ]
  },
  "bookmarks": []
}