{
  "post_stream": {
    "posts": [
      {
        "id": 8928,
        "name": "Leo Hu",
        "username": "lehu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
        "created_at": "2021-01-12T20:38:10.693Z",
        "cooked": "<p>We have a fdb cluster with 3-DC/2-region configuration built upon a secured Kubernetes env.  K8s host OS is required to have timely (monthly) patching/upgrading to keep it secure. The host OS patching needs to reboot the K8s nodes of the fdb pods, thus affecting the fdb cluster.</p>\n<p>We\u2019d like to make a DC <strong>offline</strong>, so that K8s Os patching can be done more freely without the concern of affecting fdb cluster on the DC. Let\u2019s say we make DC1 offline by switching primary DC to DC3 and setting usable_regions=1.</p>\n<p>When I bring up DC1 <strong>online</strong> (by setting usable_regions=2), fdb will do a <strong>full resync</strong> between DC3 and DC1, even when DC1 is offline for a few mins. The full resync takes 10+ hours in our case.</p>\n<p>We\u2019d desire an <strong>incremental</strong> resync, meaning keeping the original data at DC1 and only resync what\u2019s changed since DC1 was offline, assuming the changes are still in Tx logs. That would be much faster for us.</p>\n<p>Can you confirm if an <strong>incremental</strong> resync is possible? Thanks.</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2021-01-12T20:38:10.693Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 31,
        "reads": 19,
        "readers_count": 18,
        "score": 158.8,
        "yours": false,
        "topic_id": 2508,
        "topic_slug": "full-vs-incremental-resync-when-usable-regions-config-is-changed",
        "display_username": "Leo Hu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 643,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/full-vs-incremental-resync-when-usable-regions-config-is-changed/2508/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 8933,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2021-01-13T20:24:52.708Z",
        "cooked": "<p>Yes, just make the DC that will remain up the primary, and don\u2019t reduce <code>usable_regions</code> before you take the kubernetes pods offline.  It will look to FDB like the secondary region went offline, and it will start buffering all changes on the transaction logs, and replay them on the secondary when it comes back online.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2021-01-13T20:24:52.708Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 18,
        "readers_count": 17,
        "score": 8.6,
        "yours": false,
        "topic_id": 2508,
        "topic_slug": "full-vs-incremental-resync-when-usable-regions-config-is-changed",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/full-vs-incremental-resync-when-usable-regions-config-is-changed/2508/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8935,
        "name": "Leo Hu",
        "username": "lehu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
        "created_at": "2021-01-14T05:26:07.765Z",
        "cooked": "<p>That\u2019s interesting. We\u2019ll try it. We build the cluster upon Kubernetes. One way to simulate a pod as down is to replace the pod\u2019s FDB Docker image by a dummy image, so that fdb cluster cannot communicate to it. Then revert back to fdb image to bring it up. We will test this approach. Thanks, Alex.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2021-01-14T05:26:07.765Z",
        "reply_count": 0,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 14,
        "readers_count": 13,
        "score": 12.8,
        "yours": false,
        "topic_id": 2508,
        "topic_slug": "full-vs-incremental-resync-when-usable-regions-config-is-changed",
        "display_username": "Leo Hu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 643,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/full-vs-incremental-resync-when-usable-regions-config-is-changed/2508/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      8928,
      8933,
      8935
    ]
  },
  "timeline_lookup": [
    [
      1,
      1743
    ],
    [
      2,
      1742
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Full vs. incremental resync when usable_regions config is changed",
  "id": 2508,
  "title": "Full vs. incremental resync when usable_regions config is changed",
  "posts_count": 3,
  "created_at": "2021-01-12T20:38:10.598Z",
  "views": 561,
  "reply_count": 1,
  "like_count": 0,
  "last_posted_at": "2021-01-14T05:26:07.765Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "full-vs-incremental-resync-when-usable-regions-config-is-changed",
  "category_id": 17,
  "word_count": 297,
  "deleted_at": null,
  "user_id": 643,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_2508",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 3,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 2,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Region failover: the criteria for auto failover and incremental/full refresh",
      "id": 3031,
      "title": "Region failover: the criteria for auto failover and incremental/full refresh",
      "slug": "region-failover-the-criteria-for-auto-failover-and-incremental-full-refresh",
      "posts_count": 1,
      "reply_count": 0,
      "highest_post_number": 1,
      "image_url": null,
      "created_at": "2021-11-23T20:58:48.381Z",
      "last_posted_at": "2021-11-23T20:58:48.444Z",
      "bumped": true,
      "bumped_at": "2021-11-23T20:58:48.444Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 453,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest single",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 643,
            "username": "lehu",
            "name": "Leo Hu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Simulating FDB data center failure",
      "id": 1790,
      "title": "Simulating FDB data center failure",
      "slug": "simulating-fdb-data-center-failure",
      "posts_count": 5,
      "reply_count": 2,
      "highest_post_number": 5,
      "image_url": null,
      "created_at": "2019-11-27T00:51:36.820Z",
      "last_posted_at": "2019-12-09T22:25:12.268Z",
      "bumped": true,
      "bumped_at": "2019-12-09T22:25:12.268Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 977,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 550,
            "username": "ntrhieu89",
            "name": "Hieu Nguyen",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ntrhieu89/{size}/587_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "2 region 3 DC config issue",
      "id": 1348,
      "title": "2 region 3 DC config issue",
      "slug": "2-region-3-dc-config-issue",
      "posts_count": 6,
      "reply_count": 3,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2019-05-03T22:09:10.156Z",
      "last_posted_at": "2019-05-04T06:48:23.605Z",
      "bumped": true,
      "bumped_at": "2019-05-04T06:48:23.605Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 2446,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 577,
            "username": "binzhangebay",
            "name": "binzhang",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/b/6a8cbe/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Swap the roles of DC2 and DC3 in a 2-region, 3-DC cluster",
      "id": 2139,
      "title": "Swap the roles of DC2 and DC3 in a 2-region, 3-DC cluster",
      "slug": "swap-the-roles-of-dc2-and-dc3-in-a-2-region-3-dc-cluster",
      "posts_count": 1,
      "reply_count": 0,
      "highest_post_number": 1,
      "image_url": null,
      "created_at": "2020-05-28T22:10:30.185Z",
      "last_posted_at": "2020-05-28T22:10:30.309Z",
      "bumped": true,
      "bumped_at": "2020-05-28T22:10:30.309Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 474,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest single",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 643,
            "username": "lehu",
            "name": "Leo Hu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Fault Tolerance changes from &ldquo;2 machines&rdquo; to &ldquo;0 machines (2 without data loss)&rdquo;",
      "id": 1408,
      "title": "Fault Tolerance changes from \"2 machines\" to \"0 machines (2 without data loss)\"",
      "slug": "fault-tolerance-changes-from-2-machines-to-0-machines-2-without-data-loss",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2019-05-30T00:40:05.914Z",
      "last_posted_at": "2019-06-05T23:05:50.387Z",
      "bumped": true,
      "bumped_at": "2019-06-05T23:05:50.387Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 574,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 577,
            "username": "binzhangebay",
            "name": "binzhang",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/b/6a8cbe/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 643,
        "username": "lehu",
        "name": "Leo Hu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      }
    ],
    "created_by": {
      "id": 643,
      "username": "lehu",
      "name": "Leo Hu",
      "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png"
    },
    "last_poster": {
      "id": 643,
      "username": "lehu",
      "name": "Leo Hu",
      "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png"
    }
  },
  "bookmarks": []
}