{
  "post_stream": {
    "posts": [
      {
        "id": 5303,
        "name": "Paul J  Davis",
        "username": "davisp",
        "avatar_template": "/user_avatar/forums.foundationdb.org/davisp/{size}/570_2.png",
        "created_at": "2019-10-09T18:30:44.254Z",
        "cooked": "<p>I\u2019m not 100% sure if this is a bug or not but figured I\u2019d leave a note. I\u2019ve got a test cluster that was accidentally reconfigured to have a single fdbserver per node due to some chef mishaps. While debugging what had happened I discovered one of the nodes had the entire set of proceses in the pre-single-fdbserver config still in the cluster.</p>\n<p>Out of curiosity I <code>touch</code>'ed <code>/etc/foundationdb/foundationdb.conf</code> to see if maybe Chef had done something odd that prevented fdbmonitor from noticing the new config file. However, after touching foundationdb.conf, fdbmonitor logged that it was deconfiguring each of the expected processes to match the new config, yet none of the excess fdbserver processes have been stopped and are still part of the cluster.</p>\n<p>Also to be clear, we\u2019re being particularly brutal when we apply new test configurations. These are generally accompanied by <code>rm -rf $data_dir</code> type operations as we reset a test cluster for benchmarking. It just surprised me enough to make a note.</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 4,
        "updated_at": "2019-10-09T18:31:09.698Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 72,
        "reads": 32,
        "readers_count": 31,
        "score": 366.4,
        "yours": false,
        "topic_id": 1674,
        "topic_slug": "fdbmonitor-configuration-reload-not-stopping-old-fdbserver-processes",
        "display_username": "Paul J  Davis",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 576,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fdbmonitor-configuration-reload-not-stopping-old-fdbserver-processes/1674/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 5304,
        "name": "Paul J  Davis",
        "username": "davisp",
        "avatar_template": "/user_avatar/forums.foundationdb.org/davisp/{size}/570_2.png",
        "created_at": "2019-10-09T19:15:43.316Z",
        "cooked": "<p>This turns out to be more of a confusing documentation issue. Our configs set <code>kill_on_configuration_change = false</code> which apparently means \u201cdon\u2019t kill fdbserver processes\u201d. Setting it to true causes fdbmonitor to actually kill child processes.</p>\n<p>The current documentation reads:</p>\n<blockquote>\n<p>If kill_on_configuration_change parameter is unset or set to true in foundationdb.conf then fdbmonitor will restart on changes automatically. If this parameter is set to false it will not restart on changes.</p>\n</blockquote>\n<p>Which I took to mean, fdbmonitor itself would restart and rely on a daemon supervision system to restart the whole process tree. Instead it appears to actually mean:</p>\n<blockquote>\n<p>If  <code>kill_on_configuration_change</code>  parameter is unset or set to  <code>true</code>  in foundationdb.conf then fdbmonitor will restart fdbserver processes on configuration changes automatically. If this parameter is set to  <code>false</code>  it will not restart any fdbserver processes on configuration changes.</p>\n</blockquote>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 4,
        "updated_at": "2019-10-09T19:15:43.316Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 32,
        "readers_count": 31,
        "score": 11.4,
        "yours": false,
        "topic_id": 1674,
        "topic_slug": "fdbmonitor-configuration-reload-not-stopping-old-fdbserver-processes",
        "display_username": "Paul J  Davis",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 576,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fdbmonitor-configuration-reload-not-stopping-old-fdbserver-processes/1674/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5309,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-10-09T20:28:50.838Z",
        "cooked": "<p>Ah yes, your observation is correct (although the managed processes need not be <code>fdbserver</code> specifically), and I can see why the current documentation is confusing. If you\u2019re interested in filing a PR clarifying the docs, that would be great. Or if you\u2019d prefer, I can update it.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 4,
        "updated_at": "2019-10-09T20:28:50.838Z",
        "reply_count": 0,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 25,
        "readers_count": 24,
        "score": 5.0,
        "yours": false,
        "topic_id": 1674,
        "topic_slug": "fdbmonitor-configuration-reload-not-stopping-old-fdbserver-processes",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 576,
          "username": "davisp",
          "name": "Paul J  Davis",
          "avatar_template": "/user_avatar/forums.foundationdb.org/davisp/{size}/570_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fdbmonitor-configuration-reload-not-stopping-old-fdbserver-processes/1674/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5353,
        "name": "Paul J  Davis",
        "username": "davisp",
        "avatar_template": "/user_avatar/forums.foundationdb.org/davisp/{size}/570_2.png",
        "created_at": "2019-10-16T17:46:40.574Z",
        "cooked": "<p>I\u2019ll file a PR to learn how the docs work.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 4,
        "updated_at": "2019-10-16T17:46:40.574Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 22,
        "readers_count": 21,
        "score": 4.4,
        "yours": false,
        "topic_id": 1674,
        "topic_slug": "fdbmonitor-configuration-reload-not-stopping-old-fdbserver-processes",
        "display_username": "Paul J  Davis",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 576,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fdbmonitor-configuration-reload-not-stopping-old-fdbserver-processes/1674/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      5303,
      5304,
      5309,
      5353
    ]
  },
  "timeline_lookup": [
    [
      1,
      2204
    ],
    [
      4,
      2197
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Fdbmonitor configuration reload not stopping old fdbserver processes",
  "id": 1674,
  "title": "Fdbmonitor configuration reload not stopping old fdbserver processes",
  "posts_count": 4,
  "created_at": "2019-10-09T18:30:44.191Z",
  "views": 568,
  "reply_count": 1,
  "like_count": 0,
  "last_posted_at": "2019-10-16T17:46:40.574Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "fdbmonitor-configuration-reload-not-stopping-old-fdbserver-processes",
  "category_id": 7,
  "word_count": 374,
  "deleted_at": null,
  "user_id": 576,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_1674",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 4,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 2,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "How to prevent fdbcli from monitoring the connfile?",
      "id": 747,
      "title": "How to prevent fdbcli from monitoring the connfile?",
      "slug": "how-to-prevent-fdbcli-from-monitoring-the-connfile",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2018-10-06T01:55:20.444Z",
      "last_posted_at": "2018-10-08T16:27:34.392Z",
      "bumped": true,
      "bumped_at": "2018-10-08T16:27:34.392Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1386,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 44,
            "username": "cespare",
            "name": "Caleb Spare",
            "avatar_template": "/user_avatar/forums.foundationdb.org/cespare/{size}/36_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Why fdb monitor is needed in foundationdb and what it&rsquo;s purpose?",
      "id": 1379,
      "title": "Why fdb monitor is needed in foundationdb and what it's purpose?",
      "slug": "why-fdb-monitor-is-needed-in-foundationdb-and-what-its-purpose",
      "posts_count": 8,
      "reply_count": 4,
      "highest_post_number": 8,
      "image_url": null,
      "created_at": "2019-05-20T09:14:16.256Z",
      "last_posted_at": "2019-05-24T03:17:57.043Z",
      "bumped": true,
      "bumped_at": "2019-05-24T03:17:57.043Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 3,
      "views": 1202,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 587,
            "username": "pragawaran",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/p/f07891/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 545,
            "username": "rishabh",
            "name": "Rishabh",
            "avatar_template": "/user_avatar/forums.foundationdb.org/rishabh/{size}/540_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Fdbmonitor starting identical copies of itself instead of fdbserver process (5.2.5, RHEL)",
      "id": 545,
      "title": "Fdbmonitor starting identical copies of itself instead of fdbserver process (5.2.5, RHEL)",
      "slug": "fdbmonitor-starting-identical-copies-of-itself-instead-of-fdbserver-process-5-2-5-rhel",
      "posts_count": 4,
      "reply_count": 1,
      "highest_post_number": 4,
      "image_url": "https://global.discourse-cdn.com/foundationdb/optimized/1X/4e8a1b5f4248f69a18d6ca69f2134a3c1159f498_2_1024x428.jpg",
      "created_at": "2018-07-04T16:09:40.511Z",
      "last_posted_at": "2018-07-05T15:52:08.139Z",
      "bumped": true,
      "bumped_at": "2018-07-17T21:31:35.082Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 842,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 22,
            "username": "dave",
            "name": "David Scherer",
            "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "How are &lsquo;contributing_workers&rsquo; computed?",
      "id": 360,
      "title": "How are 'contributing_workers' computed?",
      "slug": "how-are-contributing-workers-computed",
      "posts_count": 20,
      "reply_count": 13,
      "highest_post_number": 20,
      "image_url": null,
      "created_at": "2018-05-07T00:53:18.538Z",
      "last_posted_at": "2018-05-12T07:19:34.562Z",
      "bumped": true,
      "bumped_at": "2018-05-12T07:19:34.562Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 6,
      "views": 1986,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 236,
            "username": "marctrem",
            "name": "Marc-Andr\u00e9 Tremblay",
            "avatar_template": "/user_avatar/forums.foundationdb.org/marctrem/{size}/208_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 54,
            "username": "Evan",
            "name": "Evan Tschannen",
            "avatar_template": "/user_avatar/forums.foundationdb.org/evan/{size}/104_2.png",
            "moderator": true,
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 156,
            "username": "spullara",
            "name": "Sam Pullara",
            "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 247,
            "username": "Chr1st0ph",
            "name": "Chr1st0ph",
            "avatar_template": "/user_avatar/forums.foundationdb.org/chr1st0ph/{size}/353_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 118,
            "username": "abdullin",
            "name": "Rinat Abdullin",
            "avatar_template": "/user_avatar/forums.foundationdb.org/abdullin/{size}/83_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Problem with upgrade to 6.2.15 from 6.1.x version",
      "id": 2017,
      "title": "Problem with upgrade to 6.2.15 from 6.1.x version",
      "slug": "problem-with-upgrade-to-6-2-15-from-6-1-x-version",
      "posts_count": 4,
      "reply_count": 1,
      "highest_post_number": 4,
      "image_url": null,
      "created_at": "2020-03-21T01:35:42.497Z",
      "last_posted_at": "2020-03-30T22:22:19.133Z",
      "bumped": true,
      "bumped_at": "2020-03-30T22:22:19.133Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 666,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 742,
            "username": "kentwang929",
            "name": "Chung Kang Wang",
            "avatar_template": "/user_avatar/forums.foundationdb.org/kentwang929/{size}/799_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 576,
        "username": "davisp",
        "name": "Paul J  Davis",
        "avatar_template": "/user_avatar/forums.foundationdb.org/davisp/{size}/570_2.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 12,
        "username": "ajbeamon",
        "name": "A.J. Beamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      }
    ],
    "created_by": {
      "id": 576,
      "username": "davisp",
      "name": "Paul J  Davis",
      "avatar_template": "/user_avatar/forums.foundationdb.org/davisp/{size}/570_2.png"
    },
    "last_poster": {
      "id": 576,
      "username": "davisp",
      "name": "Paul J  Davis",
      "avatar_template": "/user_avatar/forums.foundationdb.org/davisp/{size}/570_2.png"
    }
  },
  "bookmarks": []
}