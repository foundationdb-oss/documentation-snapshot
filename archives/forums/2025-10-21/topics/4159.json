{
  "post_stream": {
    "posts": [
      {
        "id": 13295,
        "name": "Lars Hagen",
        "username": "larshagen",
        "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png",
        "created_at": "2023-09-20T07:36:35.274Z",
        "cooked": "<p>We are trying to run backups directly to Google Cloud Storage (GCS) from our FDB cluster. We are running on 7.1.39, which should have all the necessary compatibility fixes, but it is still failing TLS verification, complaining that the cert for <code>storage.googleapis.com</code> is self-signed.</p>\n<p>We have tried running with <code>Check.Valid=0</code>, and then the backup runs successfully, so we are certain TLS is the only issue. The cluster we are backing up from is not running with TLS internally. We have tried downloading root certs from Google, concatenating it in a file and pointing to it with <code>FDB_TLS_CA_FILE</code>, but that has not helped. We have also tried creating a certificate for FDB, and populating <code>FDB_TLS_KEY_FILE,FDB_TLS_CA_FILE,FDB_TLS_CERTIFICATE_FILE</code>, but that did not help (even when combining FDB CA with Google CA in CA file).</p>\n<p>Examining the cert from <code>storage.googleapis.com</code> with openssl, I am fairly certain that it is not self-signed, and that FDB is mistaken for some reason.</p>\n<p>Any help would be appreciated.</p>\n<pre><code class=\"lang-auto\">&lt;Event Severity=\"20\" Time=\"1695126371.137127\" DateTime=\"2023-09-19T12:26:11Z\" Type=\"TLSPolicyFailure\" ID=\"0000000000000000\" SuppressedEventCount=\"0\" Reason=\"preverification failed\" VerifyError=\"self signed certificate\" ThreadID=\"17885686041784278561\" Machine=\"10.52.7.175:213\" LogGroup=\"default\" ClientDescription=\"primary-7.1.39-17885686041784278561\" /&gt;\n&lt;Event Severity=\"20\" Time=\"1695126371.137127\" DateTime=\"2023-09-19T12:26:11Z\" Type=\"N2_ConnectHandshakeError\" ID=\"4ccee7736a127f57\" SuppressedEventCount=\"0\" ErrorCode=\"337047686\" Message=\"certificate verify failed (SSL routines, tls_process_server_certificate)\" WhichMeans=\"error:1416F086:SSL routines:tls_process_server_certificate:certificate verify failed\" ThreadID=\"17885686041784278561\" Machine=\"10.52.7.175:213\" LogGroup=\"default\" ClientDescription=\"primary-7.1.39-17885686041784278561\" /&gt;\n&lt;Event Severity=\"20\" Time=\"1695126371.137127\" DateTime=\"2023-09-19T12:26:11Z\" Type=\"S3BlobStoreEndpointRequestFailedRetryable\" ID=\"0000000000000000\" Error=\"connection_failed\" ErrorDescription=\"Network connection failed\" ErrorCode=\"1026\" SuppressedEventCount=\"0\" ConnectionEstablished=\"0\" RemoteHost=\"storage.googleapis.com\" Verb=\"HEAD\" Resource=\"/cognitedata-greenfield-foundationdb-backup\" ThisTry=\"1\" RetryDelay=\"2\" ThreadID=\"17885686041784278561\" Machine=\"10.52.7.175:213\" LogGroup=\"default\" ClientDescription=\"primary-7.1.39-17885686041784278561\" /&gt;\n&lt;Event Severity=\"20\" Time=\"1695126373.147324\" DateTime=\"2023-09-19T12:26:13Z\" Type=\"TLSPolicyFailure\" ID=\"0000000000000000\" SuppressedEventCount=\"0\" Reason=\"preverification failed\" VerifyError=\"self signed certificate\" ThreadID=\"17885686041784278561\" Machine=\"10.52.7.175:213\" LogGroup=\"default\" ClientDescription=\"primary-7.1.39-17885686041784278561\" /&gt;\n&lt;Event Severity=\"20\" Time=\"1695126373.147324\" DateTime=\"2023-09-19T12:26:13Z\" Type=\"N2_ConnectHandshakeError\" ID=\"a2ede36bc2b4133f\" SuppressedEventCount=\"0\" ErrorCode=\"337047686\" Message=\"certificate verify failed (SSL routines, tls_process_server_certificate)\" WhichMeans=\"error:1416F086:SSL routines:tls_process_server_certificate:certificate verify failed\" ThreadID=\"17885686041784278561\" Machine=\"10.52.7.175:213\" LogGroup=\"default\" ClientDescription=\"primary-7.1.39-17885686041784278561\" /&gt;\n&lt;Event Severity=\"20\" Time=\"1695126377.157543\" DateTime=\"2023-09-19T12:26:17Z\" Type=\"TLSPolicyFailure\" ID=\"0000000000000000\" SuppressedEventCount=\"0\" Reason=\"preverification failed\" VerifyError=\"self signed certificate\" ThreadID=\"17885686041784278561\" Machine=\"10.52.7.175:213\" LogGroup=\"default\" ClientDescription=\"primary-7.1.39-17885686041784278561\" /&gt;\n&lt;Event Severity=\"20\" Time=\"1695126377.157543\" DateTime=\"2023-09-19T12:26:17Z\" Type=\"N2_ConnectHandshakeError\" ID=\"92f8fc9ca4e98b67\" SuppressedEventCount=\"0\" ErrorCode=\"337047686\" Message=\"certificate verify failed (SSL routines, tls_process_server_certificate)\" WhichMeans=\"error:1416F086:SSL routines:tls_process_server_certificate:certificate verify failed\" ThreadID=\"17885686041784278561\" Machine=\"10.52.7.175:213\" LogGroup=\"default\" ClientDescription=\"primary-7.1.39-17885686041784278561\" /&gt;\n&lt;Event Severity=\"20\" Time=\"1695126385.175072\" DateTime=\"2023-09-19T12:26:25Z\" Type=\"TLSPolicyFailure\" ID=\"0000000000000000\" SuppressedEventCount=\"0\" Reason=\"preverification failed\" VerifyError=\"self signed certificate\" ThreadID=\"17885686041784278561\" Machine=\"10.52.7.175:213\" LogGroup=\"default\" ClientDescription=\"primary-7.1.39-17885686041784278561\" /&gt;\n&lt;Event Severity=\"20\" Time=\"1695126385.175072\" DateTime=\"2023-09-19T12:26:25Z\" Type=\"N2_ConnectHandshakeError\" ID=\"1e37e11865b22d65\" SuppressedEventCount=\"0\" ErrorCode=\"337047686\" Message=\"certificate verify failed (SSL routines, tls_process_server_certificate)\" WhichMeans=\"error:1416F086:SSL routines:tls_process_server_certificate:certificate verify failed\" ThreadID=\"17885686041784278561\" Machine=\"10.52.7.175:213\" LogGroup=\"default\" ClientDescription=\"primary-7.1.39-17885686041784278561\" /&gt;\n&lt;Event Severity=\"40\" ErrorKind=\"Unset\" Time=\"1695126401.103105\" DateTime=\"2023-09-19T12:26:41Z\" Type=\"StopAfterError\" ID=\"0000000000000000\" Error=\"backup_error\" ErrorDescription=\"Backup error\" ErrorCode=\"2300\" ThreadID=\"17885686041784278561\" Backtrace=\"addr2line -e fdbbackup.debug -p -C -f -i 0x113f7c8 0x113dffb 0x113e201 0x619b21 0x619d59 0x656a70 0x635d25 0x6364cc 0x656a70 0x64380f 0x6441ab 0x656a70 0x7fc3b1 0x8696cc 0x656a70 0x60ea6f 0x10c69a8 0xafe832 0x5f2f4a 0x7ff0fb88b555\" Machine=\"10.52.7.175:213\" LogGroup=\"default\" ClientDescription=\"primary-7.1.39-17885686041784278561\" /&gt;\n</code></pre>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2023-09-20T07:36:35.274Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 81,
        "reads": 19,
        "readers_count": 18,
        "score": 378.8,
        "yours": false,
        "topic_id": 4159,
        "topic_slug": "backup-to-gcs-failing-tls-preverification",
        "display_username": "Lars Hagen",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 724,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-to-gcs-failing-tls-preverification/4159/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 13298,
        "name": "Johannes Scheuermann",
        "username": "johscheuer",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
        "created_at": "2023-09-20T08:58:51.813Z",
        "cooked": "<blockquote>\n<p>We have tried downloading root certs from Google, concatenating it in a file and pointing to it with <code>FDB_TLS_CA_FILE</code> , but that has not helped.</p>\n</blockquote>\n<p>Have you tried to connect with openssl and the new CA file to GCS? FDB requires the full CA cert chain when connecting to a TLS service. If you are able to connect to the storage API with <code>curl</code> and the default certificate chains on your host/container, you could try to point <code>FDB_TLS_CA_FILE</code> to the chain (given that your cluster is running without TLS).</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2023-09-20T08:58:51.813Z",
        "reply_count": 2,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 7,
        "reads": 19,
        "readers_count": 18,
        "score": 48.8,
        "yours": false,
        "topic_id": 4159,
        "topic_slug": "backup-to-gcs-failing-tls-preverification",
        "display_username": "Johannes Scheuermann",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 849,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-to-gcs-failing-tls-preverification/4159/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13299,
        "name": "Lars Hagen",
        "username": "larshagen",
        "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png",
        "created_at": "2023-09-20T11:10:01.904Z",
        "cooked": "<p>Steps taken to verify:</p>\n<pre><code class=\"lang-auto\">echo | openssl s_client -showcerts -servername \"storage.googleapis.com\" -connect \"storage.googleapis.com:443\" 2&gt;/dev/null\n</code></pre>\n<p>Store the direct certificate in <code>cert.crt</code> and the rest of the chain in <code>ca-chain.crt</code>.<br>\nRun verification with openssl</p>\n<pre><code class=\"lang-auto\">openssl verify -CAfile ./ca-chain.crt ./cert.pem   \n</code></pre>\n<p>This returned an error:</p>\n<pre><code class=\"lang-auto\">C = US, O = Google Trust Services LLC, CN = GTS Root R1\nerror 2 at 2 depth lookup: unable to get issuer certificate\nerror ./cert.pem: verification failed\n</code></pre>\n<p>After some digging, I found that the ca file was missing a root cert from GlobalSign. After adding it, I got</p>\n<pre><code class=\"lang-auto\">./cert.pem: OK\n</code></pre>\n<p>Rerunning <code>fdbbackup</code> with <code> --tls_ca_file ca-chain.crt</code>, I got the same verification error.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2023-09-20T11:10:01.904Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 10,
        "reads": 19,
        "readers_count": 18,
        "score": 58.8,
        "yours": false,
        "topic_id": 4159,
        "topic_slug": "backup-to-gcs-failing-tls-preverification",
        "display_username": "Lars Hagen",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 849,
          "username": "johscheuer",
          "name": "Johannes Scheuermann",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 724,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-to-gcs-failing-tls-preverification/4159/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13320,
        "name": "Lars Hagen",
        "username": "larshagen",
        "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png",
        "created_at": "2023-09-22T07:37:27.071Z",
        "cooked": "<p>So, in short, FDB fails verification even when the full chain can be verified by openssl.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2023-09-22T07:37:27.071Z",
        "reply_count": 1,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 17,
        "readers_count": 16,
        "score": 8.4,
        "yours": false,
        "topic_id": 4159,
        "topic_slug": "backup-to-gcs-failing-tls-preverification",
        "display_username": "Lars Hagen",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 724,
          "username": "larshagen",
          "name": "Lars Hagen",
          "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 724,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-to-gcs-failing-tls-preverification/4159/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13325,
        "name": "Johannes Scheuermann",
        "username": "johscheuer",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
        "created_at": "2023-09-25T08:55:39.096Z",
        "cooked": "<blockquote>\n<p>So, in short, FDB fails verification even when the full chain can be verified by openssl.</p>\n</blockquote>\n<p>Are you able to share your full chain for GCS? It might be that openssl itself is more tolerant than FDB. Have you tried to let FDB use the default host CA chain?</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2023-09-25T08:55:39.096Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 16,
        "readers_count": 15,
        "score": 8.2,
        "yours": false,
        "topic_id": 4159,
        "topic_slug": "backup-to-gcs-failing-tls-preverification",
        "display_username": "Johannes Scheuermann",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 724,
          "username": "larshagen",
          "name": "Lars Hagen",
          "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 849,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-to-gcs-failing-tls-preverification/4159/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13326,
        "name": "Lars Hagen",
        "username": "larshagen",
        "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png",
        "created_at": "2023-09-25T08:58:45.746Z",
        "cooked": "<p>cert.crt:</p>\n<pre><code class=\"lang-auto\">-----BEGIN CERTIFICATE-----\nMIIEljCCA36gAwIBAgIQKe5Vu9vzeskSF/rMvrgUIDANBgkqhkiG9w0BAQsFADBG\nMQswCQYDVQQGEwJVUzEiMCAGA1UEChMZR29vZ2xlIFRydXN0IFNlcnZpY2VzIExM\nQzETMBEGA1UEAxMKR1RTIENBIDFDMzAeFw0yMzA4MTQwODI1MDlaFw0yMzExMDYw\nODI1MDhaMCExHzAdBgNVBAMTFnN0b3JhZ2UuZ29vZ2xlYXBpcy5jb20wWTATBgcq\nhkjOPQIBBggqhkjOPQMBBwNCAARRhrnR3yF4RIO44LQ55HTVd9qlNvfHSYx6JoEs\nXjLPw6eiD7i/fKMcNDhF51Qi47206lvN2w3xGG4iANI15AWJo4ICbjCCAmowDgYD\nVR0PAQH/BAQDAgeAMBMGA1UdJQQMMAoGCCsGAQUFBwMBMAwGA1UdEwEB/wQCMAAw\nHQYDVR0OBBYEFPQeKzSKEfsAnfwJP6cKlSZ5Od8gMB8GA1UdIwQYMBaAFIp0f6+F\nze6VzT2c0OJGFPNxNR0nMGoGCCsGAQUFBwEBBF4wXDAnBggrBgEFBQcwAYYbaHR0\ncDovL29jc3AucGtpLmdvb2cvZ3RzMWMzMDEGCCsGAQUFBzAChiVodHRwOi8vcGtp\nLmdvb2cvcmVwby9jZXJ0cy9ndHMxYzMuZGVyMCEGA1UdEQQaMBiCFnN0b3JhZ2Uu\nZ29vZ2xlYXBpcy5jb20wIQYDVR0gBBowGDAIBgZngQwBAgEwDAYKKwYBBAHWeQIF\nAzA8BgNVHR8ENTAzMDGgL6AthitodHRwOi8vY3Jscy5wa2kuZ29vZy9ndHMxYzMv\nUXFGeGJpOU00OGMuY3JsMIIBAwYKKwYBBAHWeQIEAgSB9ASB8QDvAHUArfe++nz/\nEMiLnT2cHj4YarRnKV3PsQwkyoWGNOvcgooAAAGJ810SpQAABAMARjBEAiAYYZcH\nBglKWaRZZwHmSyivFL7R9mfQ3aTTQW3m82NKMQIgcjvSOUpxSu8mV2yQXWO6qpQQ\nXnTCsnfbglNhUSfYo3MAdgB6MoxU2LcttiDqOOBSHumEFnAyE4VNO9IrwTpXo1Lr\nUgAAAYnzXRKpAAAEAwBHMEUCIHhWO7OWbwV12jAhZ0tU8reCe/TRr/N5rCUfbnvj\nRmgDAiEA+87j3l2GNS1KM/KntN1Fvga7yBmrRIaZgNOZ2YrTvV8wDQYJKoZIhvcN\nAQELBQADggEBAJXYtoC6tsqm2dBSzT6s58nyi+pbAe9i229mVrRoyLWSNuhzff4C\ndncA0AqivaeiDvjGWP1U0UtT9VAbf4XzFsv6QjKL6kI1rKHXCNjGYzELeeAXl5DL\nwnGQTdhoMuHotNF5p+hZpzk9tAAvyZk+WeKdrjDQoBptGznZ5dE6NdgEL82u+TnD\n7UI1cgJB6c7xPHnJ5s7QKAUyA9lf4ZFiCllVSbVgMU92WQKbExy8FEzHPlzYxWBB\nFM4dMXxNbGA1ltOzR4W4FIASZ0m8Oce38HogWXOc6cbX61CubqiKczQZ/6WtIUWF\nkes3Q2vdrL64S6lsrNQ5nfqaDV8Dc2CK2rE=\n-----END CERTIFICATE-----\n</code></pre>\n<p>ca-chain.crt</p>\n<pre><code class=\"lang-auto\">-----BEGIN CERTIFICATE-----\nMIIFljCCA36gAwIBAgINAgO8U1lrNMcY9QFQZjANBgkqhkiG9w0BAQsFADBHMQsw\nCQYDVQQGEwJVUzEiMCAGA1UEChMZR29vZ2xlIFRydXN0IFNlcnZpY2VzIExMQzEU\nMBIGA1UEAxMLR1RTIFJvb3QgUjEwHhcNMjAwODEzMDAwMDQyWhcNMjcwOTMwMDAw\nMDQyWjBGMQswCQYDVQQGEwJVUzEiMCAGA1UEChMZR29vZ2xlIFRydXN0IFNlcnZp\nY2VzIExMQzETMBEGA1UEAxMKR1RTIENBIDFDMzCCASIwDQYJKoZIhvcNAQEBBQAD\nggEPADCCAQoCggEBAPWI3+dijB43+DdCkH9sh9D7ZYIl/ejLa6T/belaI+KZ9hzp\nkgOZE3wJCor6QtZeViSqejOEH9Hpabu5dOxXTGZok3c3VVP+ORBNtzS7XyV3NzsX\nlOo85Z3VvMO0Q+sup0fvsEQRY9i0QYXdQTBIkxu/t/bgRQIh4JZCF8/ZK2VWNAcm\nBA2o/X3KLu/qSHw3TT8An4Pf73WELnlXXPxXbhqW//yMmqaZviXZf5YsBvcRKgKA\ngOtjGDxQSYflispfGStZloEAoPtR28p3CwvJlk/vcEnHXG0g/Zm0tOLKLnf9LdwL\ntmsTDIwZKxeWmLnwi/agJ7u2441Rj72ux5uxiZ0CAwEAAaOCAYAwggF8MA4GA1Ud\nDwEB/wQEAwIBhjAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwEgYDVR0T\nAQH/BAgwBgEB/wIBADAdBgNVHQ4EFgQUinR/r4XN7pXNPZzQ4kYU83E1HScwHwYD\nVR0jBBgwFoAU5K8rJnEaK0gnhS9SZizv8IkTcT4waAYIKwYBBQUHAQEEXDBaMCYG\nCCsGAQUFBzABhhpodHRwOi8vb2NzcC5wa2kuZ29vZy9ndHNyMTAwBggrBgEFBQcw\nAoYkaHR0cDovL3BraS5nb29nL3JlcG8vY2VydHMvZ3RzcjEuZGVyMDQGA1UdHwQt\nMCswKaAnoCWGI2h0dHA6Ly9jcmwucGtpLmdvb2cvZ3RzcjEvZ3RzcjEuY3JsMFcG\nA1UdIARQME4wOAYKKwYBBAHWeQIFAzAqMCgGCCsGAQUFBwIBFhxodHRwczovL3Br\naS5nb29nL3JlcG9zaXRvcnkvMAgGBmeBDAECATAIBgZngQwBAgIwDQYJKoZIhvcN\nAQELBQADggIBAIl9rCBcDDy+mqhXlRu0rvqrpXJxtDaV/d9AEQNMwkYUuxQkq/BQ\ncSLbrcRuf8/xam/IgxvYzolfh2yHuKkMo5uhYpSTld9brmYZCwKWnvy15xBpPnrL\nRklfRuFBsdeYTWU0AIAaP0+fbH9JAIFTQaSSIYKCGvGjRFsqUBITTcFTNvNCCK9U\n+o53UxtkOCcXCb1YyRt8OS1b887U7ZfbFAO/CVMkH8IMBHmYJvJh8VNS/UKMG2Yr\nPxWhu//2m+OBmgEGcYk1KCTd4b3rGS3hSMs9WYNRtHTGnXzGsYZbr8w0xNPM1IER\nlQCh9BIiAfq0g3GvjLeMcySsN1PCAJA/Ef5c7TaUEDu9Ka7ixzpiO2xj2YC/WXGs\nYye5TBeg2vZzFb8q3o/zpWwygTMD0IZRcZk0upONXbVRWPeyk+gB9lm+cZv9TSjO\nz23HFtz30dZGm6fKa+l3D/2gthsjgx0QGtkJAITgRNOidSOzNIb2ILCkXhAd4FJG\nAJ2xDx8hcFH1mt0G/FX0Kw4zd8NLQsLxdxP8c4CU6x+7Nz/OAipmsHMdMqUybDKw\njuDEI/9bfU1lcKwrmz3O2+BtjjKAvpafkmO8l7tdufThcV4q5O8DIrGKZTqPwJNl\n1IXNDw9bg1kWRxYtnCQ6yICmJhSFm/Y3m6xv+cXDBlHz4n/FsRC6UfTd\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMIIFYjCCBEqgAwIBAgIQd70NbNs2+RrqIQ/E8FjTDTANBgkqhkiG9w0BAQsFADBX\nMQswCQYDVQQGEwJCRTEZMBcGA1UEChMQR2xvYmFsU2lnbiBudi1zYTEQMA4GA1UE\nCxMHUm9vdCBDQTEbMBkGA1UEAxMSR2xvYmFsU2lnbiBSb290IENBMB4XDTIwMDYx\nOTAwMDA0MloXDTI4MDEyODAwMDA0MlowRzELMAkGA1UEBhMCVVMxIjAgBgNVBAoT\nGUdvb2dsZSBUcnVzdCBTZXJ2aWNlcyBMTEMxFDASBgNVBAMTC0dUUyBSb290IFIx\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAthECix7joXebO9y/lD63\nladAPKH9gvl9MgaCcfb2jH/76Nu8ai6Xl6OMS/kr9rH5zoQdsfnFl97vufKj6bwS\niV6nqlKr+CMny6SxnGPb15l+8Ape62im9MZaRw1NEDPjTrETo8gYbEvs/AmQ351k\nKSUjB6G00j0uYODP0gmHu81I8E3CwnqIiru6z1kZ1q+PsAewnjHxgsHA3y6mbWwZ\nDrXYfiYaRQM9sHmklCitD38m5agI/pboPGiUU+6DOogrFZYJsuB6jC511pzrp1Zk\nj5ZPaK49l8KEj8C8QMALXL32h7M1bKwYUH+E4EzNktMg6TO8UpmvMrUpsyUqtEj5\ncuHKZPfmghCN6J3Cioj6OGaK/GP5Afl4/Xtcd/p2h/rs37EOeZVXtL0m79YB0esW\nCruOC7XFxYpVq9Os6pFLKcwZpDIlTirxZUTQAs6qzkm06p98g7BAe+dDq6dso499\niYH6TKX/1Y7DzkvgtdizjkXPdsDtQCv9Uw+wp9U7DbGKogPeMa3Md+pvez7W35Ei\nEua++tgy/BBjFFFy3l3WFpO9KWgz7zpm7AeKJt8T11dleCfeXkkUAKIAf5qoIbap\nsZWwpbkNFhHax2xIPEDgfg1azVY80ZcFuctL7TlLnMQ/0lUTbiSw1nH69MG6zO0b\n9f6BQdgAmD06yK56mDcYBZUCAwEAAaOCATgwggE0MA4GA1UdDwEB/wQEAwIBhjAP\nBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBTkrysmcRorSCeFL1JmLO/wiRNxPjAf\nBgNVHSMEGDAWgBRge2YaRQ2XyolQL30EzTSo//z9SzBgBggrBgEFBQcBAQRUMFIw\nJQYIKwYBBQUHMAGGGWh0dHA6Ly9vY3NwLnBraS5nb29nL2dzcjEwKQYIKwYBBQUH\nMAKGHWh0dHA6Ly9wa2kuZ29vZy9nc3IxL2dzcjEuY3J0MDIGA1UdHwQrMCkwJ6Al\noCOGIWh0dHA6Ly9jcmwucGtpLmdvb2cvZ3NyMS9nc3IxLmNybDA7BgNVHSAENDAy\nMAgGBmeBDAECATAIBgZngQwBAgIwDQYLKwYBBAHWeQIFAwIwDQYLKwYBBAHWeQIF\nAwMwDQYJKoZIhvcNAQELBQADggEBADSkHrEoo9C0dhemMXoh6dFSPsjbdBZBiLg9\nNR3t5P+T4Vxfq7vqfM/b5A3Ri1fyJm9bvhdGaJQ3b2t6yMAYN/olUazsaL+yyEn9\nWprKASOshIArAoyZl+tJaox118fessmXn1hIVw41oeQa1v1vg4Fv74zPl6/AhSrw\n9U5pCZEt4Wi4wStz6dTZ/CLANx8LZh1J7QJVj2fhMtfTJr9w4z30Z209fOU0iOMy\n+qduBmpvvYuR7hZL6Dupszfnw0Skfths18dG9ZKb59UhvmaSGZRVbNQpsg3BZlvi\nd0lIKO2d1xozclOzgjXPYovJJIultzkMu34qQb9Sz/yilrbCgj8=\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMIIDdTCCAl2gAwIBAgILAgAAAAAA1ni3lAUwDQYJKoZIhvcNAQEEBQAwVzELMAkG\nA1UEBhMCQkUxGTAXBgNVBAoTEEdsb2JhbFNpZ24gbnYtc2ExEDAOBgNVBAsTB1Jv\nb3QgQ0ExGzAZBgNVBAMTEkdsb2JhbFNpZ24gUm9vdCBDQTAeFw05ODA5MDExMjAw\nMDBaFw0xNDAxMjgxMjAwMDBaMFcxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9i\nYWxTaWduIG52LXNhMRAwDgYDVQQLEwdSb290IENBMRswGQYDVQQDExJHbG9iYWxT\naWduIFJvb3QgQ0EwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDaDuaZ\njc6j40+Kfvvxi4Mla+pIH/EqsLmVEQS98GPR4mdmzxzdzxtIK+6NiY6arymAZavp\nxy0Sy6scTHAHoT0KMM0VjU/43dSMUBUc71DuxC73/OlS8pF94G3VNTCOXkNz8kHp\n1Wrjsok6Vjk4bwY8iGlbKk3Fp1S4bInMm/k8yuX9ifUSPJJ4ltbcdG6TRGHRjcdG\nsnUOhugZitVtbNV4FpWi6cgKOOvyJBNPc1STE4U6G7weNLWLBYy5d4ux2x8gkasJ\nU26Qzns3dLlwR5EiUWMWea6xrkEmCMgZK9FGqkjWZCrXgzT/LCrBbBlDSgeF59N8\n9iFo7+ryUp9/k5DPAgMBAAGjQjBAMA4GA1UdDwEB/wQEAwIABjAdBgNVHQ4EFgQU\nYHtmGkUNl8qJUC99BM00qP/8/UswDwYDVR0TAQH/BAUwAwEB/zANBgkqhkiG9w0B\nAQQFAAOCAQEArqqf/LfSyx9fOSkoGJ40yWxPbxrwZKJwSk8ThptgKJ7ogUmYfQq7\n5bCdPTbbjwVR/wkxKh/diXeeDy5slQTthsu0AD+EAk2AaioteAuubyuig0SDH81Q\ngkwkr733pbTIWg/050deSY43lv6aiAU62cDbKYfmGZZHpzqmjIs8d/5GY6dT2iHR\nrH5Jokvmw2dZL7OKDrssvamqQnw1wdh/1acxOk5jQzmvCLBhNIzTmKlDNPYPhyk7\nncJWWJh3w/cbrPad+D6qp1RF8PX51TFl/mtYnHGzHtdS6jIX/EBgHcl5JLL2bP2o\nZg6C3ZjL2sJETy6ge/L3ayx2EYRGinij4w==\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMIIDdTCCAl2gAwIBAgILBAAAAAABFUtaw5QwDQYJKoZIhvcNAQEFBQAwVzELMAkG\nA1UEBhMCQkUxGTAXBgNVBAoTEEdsb2JhbFNpZ24gbnYtc2ExEDAOBgNVBAsTB1Jv\nb3QgQ0ExGzAZBgNVBAMTEkdsb2JhbFNpZ24gUm9vdCBDQTAeFw05ODA5MDExMjAw\nMDBaFw0yODAxMjgxMjAwMDBaMFcxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9i\nYWxTaWduIG52LXNhMRAwDgYDVQQLEwdSb290IENBMRswGQYDVQQDExJHbG9iYWxT\naWduIFJvb3QgQ0EwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDaDuaZ\njc6j40+Kfvvxi4Mla+pIH/EqsLmVEQS98GPR4mdmzxzdzxtIK+6NiY6arymAZavp\nxy0Sy6scTHAHoT0KMM0VjU/43dSMUBUc71DuxC73/OlS8pF94G3VNTCOXkNz8kHp\n1Wrjsok6Vjk4bwY8iGlbKk3Fp1S4bInMm/k8yuX9ifUSPJJ4ltbcdG6TRGHRjcdG\nsnUOhugZitVtbNV4FpWi6cgKOOvyJBNPc1STE4U6G7weNLWLBYy5d4ux2x8gkasJ\nU26Qzns3dLlwR5EiUWMWea6xrkEmCMgZK9FGqkjWZCrXgzT/LCrBbBlDSgeF59N8\n9iFo7+ryUp9/k5DPAgMBAAGjQjBAMA4GA1UdDwEB/wQEAwIBBjAPBgNVHRMBAf8E\nBTADAQH/MB0GA1UdDgQWBBRge2YaRQ2XyolQL30EzTSo//z9SzANBgkqhkiG9w0B\nAQUFAAOCAQEA1nPnfE920I2/7LqivjTFKDK1fPxsnCwrvQmeU79rXqoRSLblCKOz\nyj1hTdNGCbM+w6DjY1Ub8rrvrTnhQ7k4o+YviiY776BQVvnGCv04zcQLcFGUl5gE\n38NflNUVyRRBnMRddWQVDf9VMOyGj/8N7yy5Y0b2qvzfvGn9LhJIZJrglfCm7ymP\nAbEVtQwdpf5pLGkkeB6zpxxxyU7KyJesF12KwvhHhm4qxFYxldBniYUr+WymXUad\nDKqC5JlR3XC321Y9YeRq4VzW9v493kHMB65jUr9TU/Qr6cf9tveCX4XSQRjbgbME\nHMUfpIBvFSDJ3gyICh3WZlXi/EjJKSZp4A==\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMIIDdTCCAl2gAwIBAgILBAAAAAABFUtaw5QwDQYJKoZIhvcNAQEFBQAwVzELMAkG\nA1UEBhMCQkUxGTAXBgNVBAoTEEdsb2JhbFNpZ24gbnYtc2ExEDAOBgNVBAsTB1Jv\nb3QgQ0ExGzAZBgNVBAMTEkdsb2JhbFNpZ24gUm9vdCBDQTAeFw05ODA5MDExMjAw\nMDBaFw0yODAxMjgxMjAwMDBaMFcxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9i\nYWxTaWduIG52LXNhMRAwDgYDVQQLEwdSb290IENBMRswGQYDVQQDExJHbG9iYWxT\naWduIFJvb3QgQ0EwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDaDuaZ\njc6j40+Kfvvxi4Mla+pIH/EqsLmVEQS98GPR4mdmzxzdzxtIK+6NiY6arymAZavp\nxy0Sy6scTHAHoT0KMM0VjU/43dSMUBUc71DuxC73/OlS8pF94G3VNTCOXkNz8kHp\n1Wrjsok6Vjk4bwY8iGlbKk3Fp1S4bInMm/k8yuX9ifUSPJJ4ltbcdG6TRGHRjcdG\nsnUOhugZitVtbNV4FpWi6cgKOOvyJBNPc1STE4U6G7weNLWLBYy5d4ux2x8gkasJ\nU26Qzns3dLlwR5EiUWMWea6xrkEmCMgZK9FGqkjWZCrXgzT/LCrBbBlDSgeF59N8\n9iFo7+ryUp9/k5DPAgMBAAGjQjBAMA4GA1UdDwEB/wQEAwIBBjAPBgNVHRMBAf8E\nBTADAQH/MB0GA1UdDgQWBBRge2YaRQ2XyolQL30EzTSo//z9SzANBgkqhkiG9w0B\nAQUFAAOCAQEA1nPnfE920I2/7LqivjTFKDK1fPxsnCwrvQmeU79rXqoRSLblCKOz\nyj1hTdNGCbM+w6DjY1Ub8rrvrTnhQ7k4o+YviiY776BQVvnGCv04zcQLcFGUl5gE\n38NflNUVyRRBnMRddWQVDf9VMOyGj/8N7yy5Y0b2qvzfvGn9LhJIZJrglfCm7ymP\nAbEVtQwdpf5pLGkkeB6zpxxxYu7KyJesF12KwvhHhm4qxFYxldBniYUr+WymXUad\nDKqC5JlR3XC321Y9YeRq4VzW9v493kHMB65jUr9TU/Qr6cf9tveCX4XSQRjbgbME\nHMUfpIBvFSDJ3gyICh3WZlXi/EjJKSZp4A==\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMIIC6DCCAlGgAwIBAgIJAPBr4r6shQxeMA0GCSqGSIb3DQEBBQUAMFcxCzAJBgNV\nBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWduIG52LXNhMRAwDgYDVQQLEwdSb290\nIENBMRswGQYDVQQDExJHbG9iYWxTaWduIFJvb3QgQ0EwHhcNMTMwNjA0MjA1NDE4\nWhcNMjMwNjAyMjA1NDE4WjBXMQswCQYDVQQGEwJCRTEZMBcGA1UEChMQR2xvYmFs\nU2lnbiBudi1zYTEQMA4GA1UECxMHUm9vdCBDQTEbMBkGA1UEAxMSR2xvYmFsU2ln\nbiBSb290IENBMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDg55m6XhSNLxB0\n4lp3GDpLjMAeF6tPao2Mj87SUci8Qwx9toWszM28ibLNshvGqKvGao4o5JnUgsDZ\nRQDlzHzMST1B6Veg4xbcr9jh2sBYDopydG+NO22PhR6yM76wewWxtCRSfhdeSzEX\n3pF5ippi75006Y1Df1X4fojI97wdIwIDAQABo4G7MIG4MB0GA1UdDgQWBBRNm3Lf\nBzkCLwams3kvTbTbmwo6ZjCBiAYDVR0jBIGAMH6AFE2bct8HOQIvBqazeS9NtNub\nCjpmoVukWTBXMQswCQYDVQQGEwJCRTEZMBcGA1UEChMQR2xvYmFsU2lnbiBudi1z\nYTEQMA4GA1UECxMHUm9vdCBDQTEbMBkGA1UEAxMSR2xvYmFsU2lnbiBSb290IENB\nggkA8GvivqyFDF4wDAYDVR0TBAUwAwEB/zANBgkqhkiG9w0BAQUFAAOBgQChN7d4\nDJ952inrDBDMqThF1GtFKdePCPoWePN5P+J6e+WWjXcqaczA3YT3zyY1ARWFGTry\nh7KYNgEvKdG6ZHp+LFpJUeDWEa31Yw7+lkNTWrFHL10N8PQ0HT2MK4ictIeyNPsN\njE1I//XMQbjEEIWNOFRlawM8m2I0l5E+1C3DMg==\n-----END CERTIFICATE-----\n</code></pre>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2023-09-25T08:58:45.746Z",
        "reply_count": 1,
        "reply_to_post_number": 5,
        "quote_count": 0,
        "incoming_link_count": 11,
        "reads": 16,
        "readers_count": 15,
        "score": 63.2,
        "yours": false,
        "topic_id": 4159,
        "topic_slug": "backup-to-gcs-failing-tls-preverification",
        "display_username": "Lars Hagen",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 849,
          "username": "johscheuer",
          "name": "Johannes Scheuermann",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 724,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-to-gcs-failing-tls-preverification/4159/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13347,
        "name": "Lars Hagen",
        "username": "larshagen",
        "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png",
        "created_at": "2023-09-30T08:21:48.124Z",
        "cooked": "<p><a class=\"mention\" href=\"/u/johscheuer\">@johscheuer</a> If you have time to try running fdbbackup with these certs, it would be much appreciated.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2023-09-30T08:21:48.124Z",
        "reply_count": 0,
        "reply_to_post_number": 6,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 16,
        "readers_count": 15,
        "score": 3.2,
        "yours": false,
        "topic_id": 4159,
        "topic_slug": "backup-to-gcs-failing-tls-preverification",
        "display_username": "Lars Hagen",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 724,
          "username": "larshagen",
          "name": "Lars Hagen",
          "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 724,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-to-gcs-failing-tls-preverification/4159/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 14665,
        "name": "James Williams",
        "username": "jamesreprise",
        "avatar_template": "/user_avatar/forums.foundationdb.org/jamesreprise/{size}/1854_2.png",
        "created_at": "2025-01-15T15:06:32.200Z",
        "cooked": "<p>I\u2019m also facing this issue.</p>\n<p>A minimum reproducible for the issue is as follows for FoundationDB 7.3.37. All of these commands are run on EC2 instance running Amazon Linux 2023 in eu-west-2.</p>\n<p>I\u2019ve found that just a single, self-signed certificate is sufficient to connect to S3 - \u2018Amazon Root CA 1\u2019 expiring January 17 2038 (found at <a href=\"https://www.amazontrust.com/repository/AmazonRootCA1.pem\" rel=\"noopener nofollow ugc\">https://www.amazontrust.com/repository/AmazonRootCA1.pem</a>)</p>\n<pre data-code-wrap=\"bash\"><code class=\"lang-bash\">FDB_TLS_CA_FILE=AmazonRootCA1.pem fdbbackup describe \\\n  -d blobstore://&lt;AWS_ACCESS_KEY&gt;@s3.eu-central-1.amazonaws.com/&lt;BACKUP_NAME&gt;?bucket=&lt;BUCKET_NAME&gt;\n\n[...]\nRestorable: true\nPartitioned logs: false\n[...]\n</code></pre>\n<p>This succeeds, despite the fact that the chain when connecting to \u2018<a href=\"http://s3.eu-central-1.amazonaws.com\" rel=\"noopener nofollow ugc\">s3.eu-central-1.amazonaws.com</a>\u2019 looks like so:</p>\n<pre data-code-wrap=\"bash\"><code class=\"lang-bash\">[root@ ~]# openssl s_client -connect s3.eu-central-1.amazonaws.com:443\n[...]\nCertificate chain\n 0 s:CN = *.s3.eu-central-1.amazonaws.com\n   i:C = US, O = Amazon, CN = Amazon RSA 2048 M01\n   a:PKEY: rsaEncryption, 2048 (bit); sigalg: RSA-SHA256\n   v:NotBefore: Nov 13 00:00:00 2024 GMT; NotAfter: Nov 11 23:59:59 2025 GMT\n 1 s:C = US, O = Amazon, CN = Amazon RSA 2048 M01\n   i:C = US, O = Amazon, CN = Amazon Root CA 1\n   a:PKEY: rsaEncryption, 2048 (bit); sigalg: RSA-SHA256\n   v:NotBefore: Aug 23 22:21:28 2022 GMT; NotAfter: Aug 23 22:21:28 2030 GMT\n 2 s:C = US, O = Amazon, CN = Amazon Root CA 1\n   i:C = US, ST = Arizona, L = Scottsdale, O = \"Starfield Technologies, Inc.\", CN = Starfield Services Root Certificate Authority - G2\n   a:PKEY: rsaEncryption, 2048 (bit); sigalg: RSA-SHA256\n   v:NotBefore: May 25 12:00:00 2015 GMT; NotAfter: Dec 31 01:00:00 2037 GMT\n 3 s:C = US, ST = Arizona, L = Scottsdale, O = \"Starfield Technologies, Inc.\", CN = Starfield Services Root Certificate Authority - G2\n   i:C = US, O = \"Starfield Technologies, Inc.\", OU = Starfield Class 2 Certification Authority\n   a:PKEY: rsaEncryption, 2048 (bit); sigalg: RSA-SHA256\n   v:NotBefore: Sep  2 00:00:00 2009 GMT; NotAfter: Jun 28 17:39:16 2034 GMT\n</code></pre>\n<p>So it seems that FDB does NOT require the full certificate chain when connecting.</p>\n<p>For reference, I\u2019ve tested the negative case and it fails as expected. If I supply \u2018GTS Root R1\u2019 expiring June 22 2036 (found at <a href=\"https://i.pki.goog/r1.pem\" rel=\"noopener nofollow ugc\">https://i.pki.goog/r1.pem</a>), it fails as expected as this CA is not anywhere in the chain for <code>s3.eu-central-1.amazonaws.com</code>. See the command and the errors.</p>\n<pre data-code-wrap=\"bash\"><code class=\"lang-bash\">FDB_TLS_CA_FILE=gts-root-r1.pem fdbbackup describe \\\n  -d blobstore://&lt;AWS_ACCESS_KEY&gt;@s3.eu-central-1.amazonaws.com/&lt;BACKUP_NAME&gt;?bucket=&lt;BUCKET_NAME&gt;\n</code></pre>\n<pre data-code-wrap=\"xml\"><code class=\"lang-xml\">&lt;Event Severity=\"20\" Time=\"1736950738.455323\" DateTime=\"2025-01-15T14:18:58Z\" Type=\"TLSPolicyFailure\" ID=\"0000000000000000\" SuppressedEventCount=\"0\" Reason=\"preverification failed\" VerifyError=\"unable to get local issuer certificate\" ThreadID=\"10946202708076983502\" LogGroup=\"\" /&gt;\n&lt;Event Severity=\"20\" Time=\"1736950738.455323\" DateTime=\"2025-01-15T14:18:58Z\" Type=\"N2_ConnectHandshakeError\" ID=\"887d16759e6b9c32\" ErrorCode=\"337047686\" Message=\"certificate verify failed (SSL routines, tls_process_server_certificate)\" WhichMeans=\"error:1416F086:SSL routines:tls_process_server_certificate:certificate verify failed\" ThreadID=\"10946202708076983502\" LogGroup=\"\" /&gt;\n</code></pre>\n<p>I\u2019ve also attempted to use the default certificate chain as suggested by <a class=\"mention\" href=\"/u/johscheuer\">@johscheuer</a>. This works for S3, but not for Google Cloud Storage.</p>\n<pre data-code-wrap=\"bash\"><code class=\"lang-bash\">[root@ ~]# openssl version -d\nOPENSSLDIR: \"/etc/pki/tls\"\n\n[root@ ~]# wc -l /etc/pki/tls/certs/ca-bundle.crt\n3915 /etc/pki/tls/certs/ca-bundle.crt\n\n[root@ ~]# FDB_TLS_CA_FILE=/etc/pki/tls/certs/ca-bundle.crt fdbbackup describe \\\n  -d blobstore://&lt;ACCESS_KEY&gt;@s3.eu-central-1.amazonaws.com/&lt;BACKUP_NAME&gt;?bucket=&lt;BUCKET_NAME&gt;\n[...]\nRestorable: true\nPartitioned logs: false\n[...]\n\n[root@ ~]# FDB_TLS_CA_FILE=/etc/pki/tls/certs/ca-bundle.crt fdbbackup describe -d \"blobstore://&lt;ACCESS_KEY&gt;@storage.googleapis.com/&lt;BACKUP_NAME&gt;?bucket=&lt;BUCKET_NAME&gt;&amp;region=&lt;BUCKET_REGION_NAME&gt;\" --knob_resolve_prefer_ipv4_addr=1 --knob_http_verbose_level=4 --knob_http_request_aws_v4_header=true\nERROR: Network connection failed\nFatal Error: Network connection failed\n</code></pre>\n<p>The failure logs are identical to <a class=\"mention\" href=\"/u/larshagen\">@larshagen</a>\u2019s.</p>\n<pre data-code-wrap=\"xml\"><code class=\"lang-xml\">&lt;Event Severity=\"20\" Time=\"1736951324.626108\" DateTime=\"2025-01-15T14:28:44Z\" Type=\"TLSPolicyFailure\" ID=\"0000000000000000\" SuppressedEventCount=\"0\" Reason=\"preverification failed\" VerifyError=\"self signed certificate\" ThreadID=\"977878255095166814\" LogGroup=\"\" /&gt;\n&lt;Event Severity=\"20\" Time=\"1736951324.626108\" DateTime=\"2025-01-15T14:28:44Z\" Type=\"N2_ConnectHandshakeError\" ID=\"7e545e1c25d9a3be\" ErrorCode=\"337047686\" Message=\"certificate verify failed (SSL routines, tls_process_server_certificate)\" WhichMeans=\"error:1416F086:SSL routines:tls_process_server_certificate:certificate verify failed\" ThreadID=\"977878255095166814\" LogGroup=\"\" /&gt;\n</code></pre>\n<p>Adding \u2018&amp;sc=0\u2019 to the URL like so:</p>\n<pre><code class=\"lang-auto\">blobstore://&lt;ACCESS_KEY&gt;@storage.googleapis.com/&lt;BACKUP_NAME&gt;?bucket=&lt;BUCKET_NAME&gt;&amp;region=&lt;BUCKET_REGION_NAME&gt;&amp;sc=0\n</code></pre>\n<p>Succeeds. However, I don\u2019t want to send my keys over the internet unencrypted.</p>\n<p>I\u2019ve tried using openssl to connect to \u2018<a href=\"http://storage.googleapis.com\" rel=\"noopener nofollow ugc\">storage.googleapis.com</a>\u2019 directly, and this works just fine.</p>\n<pre data-code-wrap=\"bash\"><code class=\"lang-bash\">[root@ ~]# openssl s_client -no-CApath -CAfile /etc/pki/tls/certs/ca-bundle.crt -connect storage.googleapis.com:443 -verify_return_error\nCONNECTED(00000003)\n[...]\nVerify return code: 0 (ok)\n</code></pre>\n<p>For fun, we can also try some other domains to see who we CAN connect to! As we\u2019re still at the TLS stage, it can only help to illuminate us as to who we may and may not connect to using the system root certificate store using FoundationDB.</p>\n<p>\u2018<a href=\"http://disney.com\" rel=\"noopener nofollow ugc\">disney.com</a>\u2019:</p>\n<pre><code class=\"lang-auto\">[root@ ~]# FDB_TLS_CA_FILE=/etc/pki/tls/certs/ca-bundle.crt fdbbackup describe -d \"blobstore://&lt;ACCESS_KEY&gt;@disney.com/&lt;BACKUP_NAME&gt;?bucket=&lt;BUCKET_NAME&gt;&amp;region=&lt;BUCKET_REGION_NAME&gt;\" --knob_resolve_prefer_ipv4_addr=1 --knob_http_verbose_level=4 --knob_http_request_aws_v4_header=true\n</code></pre>\n<pre data-code-wrap=\"xml\"><code class=\"lang-xml\">&lt;Event Severity=\"10\" Time=\"1736951756.342401\" DateTime=\"2025-01-15T14:35:56Z\" Type=\"S3BlobStoreEndpointNewConnectionSuccess\" ID=\"0000000000000000\" SuppressedEventCount=\"0\" RemoteEndpoint=\"130.211.198.204:443:tls(fromHostname)\" ExpiresIn=\"120\" Proxy=\"\" ThreadID=\"15557844396177594054\" LogGroup=\"\" /&gt;\n</code></pre>\n<p>Same as above, but \u2018<a href=\"http://forums.foundationdb.org\">forums.foundationdb.org</a>\u2019 instead.</p>\n<pre data-code-wrap=\"xml\"><code class=\"lang-xml\">&lt;Event Severity=\"10\" Time=\"1736951899.166071\" DateTime=\"2025-01-15T14:38:19Z\" Type=\"S3BlobStoreEndpointNewConnectionSuccess\" ID=\"0000000000000000\" SuppressedEventCount=\"0\" RemoteEndpoint=\"184.105.99.43:443:tls(fromHostname)\" ExpiresIn=\"120\" Proxy=\"\" ThreadID=\"11171483904373147865\" LogGroup=\"\" /&gt;\n</code></pre>\n<p>Unfortunately, neither Disney nor this forum are where I want to back up to.</p>\n<p>Testing additional Google and Google-adjacent domains such as \u2018<a href=\"http://google.com\" rel=\"noopener nofollow ugc\">google.com</a>\u2019 and \u2018<a href=\"http://android.com\" rel=\"noopener nofollow ugc\">android.com</a>\u2019 in the same way as above yield the same errors as for \u2018<a href=\"http://storage.googleapis.com\" rel=\"noopener nofollow ugc\">storage.googleapis.com</a>\u2019. I suppose Google has their TLS configured across all their domains in such a way that is incompatible with how FoundationDB is performing handshakes.</p>\n<p>Using ssllabs (<a href=\"https://www.ssllabs.com/ssltest\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">SSL Server Test (Powered by Qualys SSL Labs)</a>) I\u2019ve attempted to narrow down some differentiating factor between Google\u2019s TLS and everyone else. I\u2019ve considered:</p>\n<ul>\n<li>TLS versions</li>\n<li>The sending of multiple certificate (chains)</li>\n<li>The presence of non-RSA2048-keyed certificates</li>\n</ul>\n<p>but I have not found one yet.</p>\n<p>I\u2019ve also tested this against the latest versions of FoundationDB 7.1 &amp; 7.3 on my laptop running macOS 15.2 and see the same behaviour.</p>\n<p>If you have any ideas, please let me know!</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2025-01-15T15:11:34.384Z",
        "reply_count": 0,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 9,
        "reads": 11,
        "readers_count": 10,
        "score": 47.2,
        "yours": false,
        "topic_id": 4159,
        "topic_slug": "backup-to-gcs-failing-tls-preverification",
        "display_username": "James Williams",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://i.pki.goog/r1.pem",
            "internal": false,
            "reflection": false,
            "clicks": 0
          },
          {
            "url": "http://forums.foundationdb.org",
            "internal": true,
            "reflection": false,
            "clicks": 0
          },
          {
            "url": "https://www.amazontrust.com/repository/AmazonRootCA1.pem",
            "internal": false,
            "reflection": false,
            "clicks": 0
          },
          {
            "url": "https://www.ssllabs.com/ssltest",
            "internal": false,
            "reflection": false,
            "title": "SSL Server Test (Powered by Qualys SSL Labs)",
            "clicks": 0
          },
          {
            "url": "http://android.com",
            "internal": false,
            "reflection": false,
            "title": "Android | Do More With Google on Android Phones & Devices",
            "clicks": 0
          },
          {
            "url": "http://google.com",
            "internal": false,
            "reflection": false,
            "title": "Google",
            "clicks": 0
          },
          {
            "url": "http://storage.googleapis.com",
            "internal": false,
            "reflection": false,
            "clicks": 0
          },
          {
            "url": "http://s3.eu-central-1.amazonaws.com",
            "internal": false,
            "reflection": false,
            "title": "Amazon S3 - Cloud Object Storage - AWS",
            "clicks": 0
          },
          {
            "url": "http://disney.com",
            "internal": false,
            "reflection": false,
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 849,
          "username": "johscheuer",
          "name": "Johannes Scheuermann",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1468,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-to-gcs-failing-tls-preverification/4159/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 15327,
        "name": "Evgeny",
        "username": "evkuzin",
        "avatar_template": "/user_avatar/forums.foundationdb.org/evkuzin/{size}/2027_2.png",
        "created_at": "2025-09-11T15:40:41.915Z",
        "cooked": "<p>We have the same issue and I believe the bug is here:</p>\n<aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/apple/foundationdb/blob/main/flow/Net2.actor.cpp#L1903\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/apple/foundationdb/blob/main/flow/Net2.actor.cpp#L1903\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com/apple/foundationdb</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/apple/foundationdb/blob/main/flow/Net2.actor.cpp#L1903\" target=\"_blank\" rel=\"noopener nofollow ugc\">flow/Net2.actor.cpp</a></h4>\n\n<div class=\"git-blob-info\">\n  <a href=\"https://github.com/apple/foundationdb/blob/main/flow/Net2.actor.cpp#L1903\" rel=\"noopener nofollow ugc\"><code>main</code></a>\n</div>\n\n\n\n    <pre class=\"onebox\"><code class=\"lang-cpp\">\n      <ol class=\"start lines\" start=\"1893\" style=\"counter-reset: li-counter 1892 ;\">\n          <li>\tPromiseTask* p = new PromiseTask(std::move(signal));</li>\n          <li>\tif (taskQueue.addReadyThreadSafe(isOnMainThread(), taskID, p)) {</li>\n          <li>\t\treactor.wake();</li>\n          <li>\t}</li>\n          <li>}</li>\n          <li></li>\n          <li>THREAD_HANDLE Net2::startThread(THREAD_FUNC_RETURN (*func)(void*), void* arg, int stackSize, const char* name) {</li>\n          <li>\treturn ::startThread(func, arg, stackSize, name);</li>\n          <li>}</li>\n          <li></li>\n          <li class=\"selected\">Future&lt;Reference&lt;IConnection&gt;&gt; Net2::connect(NetworkAddress toAddr, tcp::socket* existingSocket) {</li>\n          <li>\tif (toAddr.isTLS()) {</li>\n          <li>\t\tinitTLS(ETLSInitState::CONNECT);</li>\n          <li>\t\treturn SSLConnection::connect(&amp;this-&gt;reactor.ios, this-&gt;sslContextVar.get(), toAddr, existingSocket);</li>\n          <li>\t}</li>\n          <li></li>\n          <li>\tif (tlsConfig.getDisablePlainTextConnection()) {</li>\n          <li>\t\tTraceEvent(SevError, \"PlainTextConnectionDisabled\").detail(\"toAddr\", toAddr);</li>\n          <li>\t\tthrow connection_failed();</li>\n          <li>\t}</li>\n          <li></li>\n      </ol>\n    </code></pre>\n\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>The thing is that connect never take into account that some tls servers can have SNI, and this is what google using. If you hit google bucket with openssl without a servername it will give you a self signed certificate. So to solve that code has to be patched <img src=\"https://emoji.discourse-cdn.com/twitter/person_shrugging.png?v=14\" title=\":person_shrugging:\" class=\"emoji\" alt=\":person_shrugging:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2025-09-11T15:40:41.915Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 7,
        "readers_count": 6,
        "score": 1.4,
        "yours": false,
        "topic_id": 4159,
        "topic_slug": "backup-to-gcs-failing-tls-preverification",
        "display_username": "Evgeny",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/blob/main/flow/Net2.actor.cpp#L1903",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/flow/Net2.actor.cpp at main \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1601,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-to-gcs-failing-tls-preverification/4159/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 15328,
        "name": "Evgeny",
        "username": "evkuzin",
        "avatar_template": "/user_avatar/forums.foundationdb.org/evkuzin/{size}/2027_2.png",
        "created_at": "2025-09-11T17:11:55.490Z",
        "cooked": "<p>Something like this might work</p>\n<aside class=\"onebox githubpullrequest\" data-onebox-src=\"https://github.com/apple/foundationdb/pull/12366\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/apple/foundationdb/pull/12366\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com/apple/foundationdb</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\" data-github-private-repo=\"false\">\n\n\n\n    <div class=\"github-icon-container\" title=\"Pull Request\">\n      <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 12 16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z\"></path></svg>\n    </div>\n\n  <div class=\"github-info-container\">\n\n\n\n      <h4>\n        <a href=\"https://github.com/apple/foundationdb/pull/12366\" target=\"_blank\" rel=\"noopener nofollow ugc\">Fix TLS SNI (Server Name Indication) support for hostname-based connections</a>\n      </h4>\n\n    <div class=\"branches\">\n      <code>release-7.3</code> \u2190 <code>evkuzin:sni_fix</code>\n    </div>\n\n      <div class=\"github-info\">\n        <div class=\"date\">\n          opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2025-09-11\" data-time=\"18:24:46\" data-timezone=\"UTC\">06:24PM - 11 Sep 25 UTC</span>\n        </div>\n\n        <div class=\"user\">\n          <a href=\"https://github.com/evkuzin\" target=\"_blank\" rel=\"noopener nofollow ugc\">\n            <img alt=\"\" src=\"https://global.discourse-cdn.com/foundationdb/original/2X/9/94474c18db0768baccb99f69fc08e94be83fb4fe.jpeg\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\" data-dominant-color=\"503B41\">\n            evkuzin\n          </a>\n        </div>\n\n        <div class=\"lines\" title=\"1 commits changed 3 files with 75 additions and 0 deletions\">\n          <a href=\"https://github.com/apple/foundationdb/pull/12366/files\" target=\"_blank\" rel=\"noopener nofollow ugc\">\n            <span class=\"added\">+75</span>\n            <span class=\"removed\">-0</span>\n          </a>\n        </div>\n      </div>\n  </div>\n</div>\n\n  <div class=\"github-row\">\n    <p class=\"github-body-container\">Problem\nFoundationDB's network layer was not properly setting Server Name Indic<span class=\"show-more-container\"><a href=\"https://github.com/apple/foundationdb/pull/12366\" target=\"_blank\" rel=\"noopener nofollow ugc\" class=\"show-more\">\u2026</a></span><span class=\"excerpt hidden\">ation (SNI) when making TLS connections to hostnames that require SNI for proper certificate selection. This caused failures when connecting to services like Google Cloud Storage, which returns a dummy self-signed certificate when SNI is not provided.\n\nSymptoms:\n\nBackup agent fails with \"VerifyError\": \"self signed certificate\" when connecting to storage.googleapis.com\nTLS handshake errors: \"certificate verify failed\"\nNetwork captures showed TLS Client Hello without SNI extension\n\nRoot Cause: The connection flow resolved hostnames to IP addresses early in the process but lost the original hostname string needed for SNI. When `INetworkConnections::connect(host, service, isTLS)` was called:\n- `resolveTCPEndpoint()]` resolved hostname to IP addresses\n- One IP was selected and `addr.fromHostname = true` was set\n- The original hostname string was discarded\n- `connectExternal(addr)` was called with only the IP address\n- During TLS handshake, no SNI was set because the hostname was lost\n\nSolution\nModified the network connection chain to preserve hostname information for SNI\n\nTesting\nVerification Methods:\n\nNetwork capture: tshark -Y \"tls.handshake.extensions_server_name\" confirms SNI is now sent in TLS Client Hello\nTrace logs: Added SSLConnectionWithHostname and SSLSetSNI events for debugging\nReal-world test: Backup agent connecting to storage.googleapis.com now sends proper SNI\n\n\n- [x] The PR has a description, explaining both the problem and the solution.\n- [x] The description mentions which forms of testing were done and the testing seems reasonable.\n- [x] Every function/class/actor that was touched is reasonably well documented.</span></p>\n  </div>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2025-09-11T18:27:27.778Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 7,
        "readers_count": 6,
        "score": 1.4,
        "yours": false,
        "topic_id": 4159,
        "topic_slug": "backup-to-gcs-failing-tls-preverification",
        "display_username": "Evgeny",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/pull/12366",
            "internal": false,
            "reflection": false,
            "title": "Fix TLS SNI (Server Name Indication) support for hostname-based connections by evkuzin \u00b7 Pull Request #12366 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1601,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-to-gcs-failing-tls-preverification/4159/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      13295,
      13298,
      13299,
      13320,
      13325,
      13326,
      13347,
      14665,
      15327,
      15328
    ]
  },
  "timeline_lookup": [
    [
      1,
      763
    ],
    [
      3,
      762
    ],
    [
      4,
      761
    ],
    [
      5,
      758
    ],
    [
      7,
      753
    ],
    [
      8,
      279
    ],
    [
      9,
      40
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Backup to GCS failing TLS preverification",
  "id": 4159,
  "title": "Backup to GCS failing TLS preverification",
  "posts_count": 10,
  "created_at": "2023-09-20T07:36:35.127Z",
  "views": 415,
  "reply_count": 6,
  "like_count": 0,
  "last_posted_at": "2025-09-11T17:11:55.490Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "backup-to-gcs-failing-tls-preverification",
  "category_id": 7,
  "word_count": 2465,
  "deleted_at": null,
  "user_id": 724,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_4159",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 10,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 4,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Set up fdb to use TLS failure with N2_ConnectError",
      "id": 3020,
      "title": "Set up fdb to use TLS failure with N2_ConnectError",
      "slug": "set-up-fdb-to-use-tls-failure-with-n2-connecterror",
      "posts_count": 9,
      "reply_count": 3,
      "highest_post_number": 9,
      "image_url": null,
      "created_at": "2021-11-19T08:38:17.530Z",
      "last_posted_at": "2021-11-23T00:53:27.886Z",
      "bumped": true,
      "bumped_at": "2021-11-23T05:48:39.795Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 1054,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 1029,
            "username": "liuyan",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/839c29/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "`fdbbackup` with TLS not working",
      "id": 3323,
      "title": "`fdbbackup` with TLS not working",
      "slug": "fdbbackup-with-tls-not-working",
      "posts_count": 7,
      "reply_count": 5,
      "highest_post_number": 7,
      "image_url": null,
      "created_at": "2022-05-16T07:04:49.403Z",
      "last_posted_at": "2022-05-18T08:01:59.240Z",
      "bumped": true,
      "bumped_at": "2022-05-18T08:01:59.240Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 597,
      "category_id": 16,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 970,
            "username": "mason",
            "name": "mason",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mason/{size}/1145_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 849,
            "username": "johscheuer",
            "name": "Johannes Scheuermann",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "(Solved) Correct setup of TLS for FoundationDB",
      "id": 1037,
      "title": "(Solved) Correct setup of TLS for FoundationDB",
      "slug": "solved-correct-setup-of-tls-for-foundationdb",
      "posts_count": 8,
      "reply_count": 3,
      "highest_post_number": 8,
      "image_url": null,
      "created_at": "2019-01-18T13:14:34.597Z",
      "last_posted_at": "2020-12-03T19:46:59.291Z",
      "bumped": true,
      "bumped_at": "2020-12-03T19:46:59.291Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 3516,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 483,
            "username": "Smerity",
            "name": "Stephen Merity",
            "avatar_template": "/user_avatar/forums.foundationdb.org/smerity/{size}/482_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 120,
            "username": "josephg",
            "name": "Seph Gentle",
            "avatar_template": "/user_avatar/forums.foundationdb.org/josephg/{size}/84_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 790,
            "username": "shubham4060",
            "name": "Shubham",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/0ea827/{size}.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "&ldquo;backup failure: Could not create backup container: Operation timed out&rdquo; with version 6.3.9",
      "id": 2703,
      "title": "\"backup failure: Could not create backup container: Operation timed out\" with version 6.3.9",
      "slug": "backup-failure-could-not-create-backup-container-operation-timed-out-with-version-6-3-9",
      "posts_count": 7,
      "reply_count": 1,
      "highest_post_number": 7,
      "image_url": null,
      "created_at": "2021-05-17T11:07:44.747Z",
      "last_posted_at": "2022-01-05T11:17:46.398Z",
      "bumped": true,
      "bumped_at": "2022-01-05T15:04:16.923Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1224,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 865,
            "username": "manish-2014",
            "name": "Manish Sharan",
            "avatar_template": "/user_avatar/forums.foundationdb.org/manish-2014/{size}/1002_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 14,
            "username": "andrew.noyes",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 949,
            "username": "DenisBY",
            "name": "Denis",
            "avatar_template": "/user_avatar/forums.foundationdb.org/denisby/{size}/1104_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Issues with V6.2 TLS Cluster",
      "id": 1904,
      "title": "Issues with V6.2 TLS Cluster",
      "slug": "issues-with-v6-2-tls-cluster",
      "posts_count": 12,
      "reply_count": 8,
      "highest_post_number": 12,
      "image_url": null,
      "created_at": "2020-01-23T17:31:13.342Z",
      "last_posted_at": "2020-01-28T16:35:52.821Z",
      "bumped": true,
      "bumped_at": "2020-01-28T16:35:52.821Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1620,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 643,
            "username": "lehu",
            "name": "Leo Hu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 724,
        "username": "larshagen",
        "name": "Lars Hagen",
        "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png",
        "post_count": 5,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 849,
        "username": "johscheuer",
        "name": "Johannes Scheuermann",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 1601,
        "username": "evkuzin",
        "name": "Evgeny",
        "avatar_template": "/user_avatar/forums.foundationdb.org/evkuzin/{size}/2027_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 1468,
        "username": "jamesreprise",
        "name": "James Williams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/jamesreprise/{size}/1854_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      }
    ],
    "created_by": {
      "id": 724,
      "username": "larshagen",
      "name": "Lars Hagen",
      "avatar_template": "/user_avatar/forums.foundationdb.org/larshagen/{size}/776_2.png"
    },
    "last_poster": {
      "id": 1601,
      "username": "evkuzin",
      "name": "Evgeny",
      "avatar_template": "/user_avatar/forums.foundationdb.org/evkuzin/{size}/2027_2.png"
    }
  },
  "bookmarks": []
}