{
  "post_stream": {
    "posts": [
      {
        "id": 7324,
        "name": "Chaoguang",
        "username": "zjuLcg",
        "avatar_template": "/user_avatar/forums.foundationdb.org/zjulcg/{size}/652_2.png",
        "created_at": "2020-06-12T18:30:51.134Z",
        "cooked": "<p>At present, we introduce an error called <code>special_keys_cross_module_read</code> when your <code>getRange</code> touches more than one module.<br>\nI am thinking we can use <code>ResultResultRef</code>'s fields <code>readToBegin</code>, <code>readThroughEnd</code> to make the call more smooth without an error.<br>\nAt present, <code>readToBegin</code>, <code>readThroughEnd</code> are only set to be <code>true</code> if you read to <code>\\xff\\xff</code> or <code>\\xff\\xff\\xff\\xff</code>, respectively, which rarely happen since you will always get the <code>special_keys_cross_module_read</code> first, since, by default, your module is only a range like <code>\\xff\\xff/transaction/, \\xff\\xff/transaction0</code>.</p>\n<p>Instead, we can omit the error when key selectors go outside the module\u2019s boundaries and just set <code>readToBegin</code>, <code>readThroughEnd</code> as reference for user to know whether his calls crossed the module.<br>\nIf he wants cross-module results, he can set the transaction option <code>SPECIAL_KEY_SPACE_RELAXED</code> to achieve.</p>\n<p>A potential use case is when you want to use key selectors that are potentially cross-module.<br>\nFor example, <code>getRange(firstLessOrEqual(\"\\xff\\xff/transaction/read_conflict_range/foo), &lt;end_key&gt;)</code> will throw <code>special_keys_cross_module_read</code> if there are no read conflict ranges\u2019 begin keys  &lt;= <code>foo</code>.<br>\nThis is a little bit not easy to use, since, by intuition, the user needs to deal with the error which he does not have a good idea how to deal with when he\u2019s writing the code. If he wants to avoid this error, he can only use key selectors conservatively, which loses some flexibility.<br>\nInstead, we can just set <code>readToBegin=true</code> and return the result. Then the user knows there is no such begin keys&lt;=<code>foo</code>.</p>\n<p>The implementation is straightforward to change so we only need to care which one is better to use.</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-06-12T18:39:11.247Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 63,
        "reads": 19,
        "readers_count": 18,
        "score": 333.8,
        "yours": false,
        "topic_id": 2177,
        "topic_slug": "thoughts-on-cross-module-read-error-in-special-key-space",
        "display_username": "Chaoguang",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 561,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/thoughts-on-cross-module-read-error-in-special-key-space/2177/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 7325,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2020-06-12T18:43:09.141Z",
        "cooked": "<p>I think I like this idea - basically this would mean that each subspace/module will be treated like its own little database unless <code>SPECIAL_KEY_SPACE_RELAXED</code> has been set.</p>\n<p>I didn\u2019t think of this before, but this would actually give us quite a nice semantics</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-06-12T18:43:09.141Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 18,
        "readers_count": 17,
        "score": 8.6,
        "yours": false,
        "topic_id": 2177,
        "topic_slug": "thoughts-on-cross-module-read-error-in-special-key-space",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/thoughts-on-cross-module-read-error-in-special-key-space/2177/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7326,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2020-06-12T18:47:34.532Z",
        "cooked": "<p>I think this makes sense when resolving key selectors if the base keys all lie within a single module. If you specify keys that aren\u2019t contained within a module, then I\u2019m not sure what the best choice is. In particular, the precedent for this in other parts of the key-space is that it would be an error to specify base keys outside of the legal key-space, but key selectors that start within the legal space would clamp to the bounds of that space.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-06-12T18:47:34.532Z",
        "reply_count": 2,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 16,
        "readers_count": 15,
        "score": 13.2,
        "yours": false,
        "topic_id": 2177,
        "topic_slug": "thoughts-on-cross-module-read-error-in-special-key-space",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/thoughts-on-cross-module-read-error-in-special-key-space/2177/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7327,
        "name": "",
        "username": "andrew.noyes",
        "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
        "created_at": "2020-06-12T18:48:08.251Z",
        "cooked": "<p>One problem here is that <code>readToBegin</code> and <code>readThroughEnd</code> aren\u2019t actually exposed through the c bindings: <a href=\"https://github.com/apple/foundationdb/blob/a167bf344e87946376f6e02243e37c831c7f7299/bindings/c/fdb_c.cpp#L253\" rel=\"nofollow noopener\">https://github.com/apple/foundationdb/blob/a167bf344e87946376f6e02243e37c831c7f7299/bindings/c/fdb_c.cpp#L253</a>. Maybe they should be exposed.<br>\nI think this sort of thing makes sense generally for using subspaces for multitenancy. The current c api doesn\u2019t really afford it though. Maybe we could add \u201cboundaries\u201d to the read range api, and consider a read as readThroughEnd if it crosses the right boundary, and readToBegin if it crosses the left boundary. Then you could get key selector semantics as if it\u2019s truly isolated from other subspaces.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-06-12T18:48:23.350Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 16,
        "readers_count": 15,
        "score": 8.2,
        "yours": false,
        "topic_id": 2177,
        "topic_slug": "thoughts-on-cross-module-read-error-in-special-key-space",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/blob/a167bf344e87946376f6e02243e37c831c7f7299/bindings/c/fdb_c.cpp#L253",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/fdb_c.cpp at a167bf344e87946376f6e02243e37c831c7f7299 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 14,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/thoughts-on-cross-module-read-error-in-special-key-space/2177/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7328,
        "name": "Chaoguang",
        "username": "zjuLcg",
        "avatar_template": "/user_avatar/forums.foundationdb.org/zjulcg/{size}/652_2.png",
        "created_at": "2020-06-12T18:50:51.098Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"2\" data-topic=\"2177\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>basically this would mean that each subspace/module will be treated like its own little database unless <code>SPECIAL_KEY_SPACE_RELAXED</code> has been set.</p>\n</blockquote>\n</aside>\n<p>Yeah, this is what I mean. Thanks for a concise summary.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-06-12T18:51:02.883Z",
        "reply_count": 0,
        "reply_to_post_number": 2,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 15,
        "readers_count": 14,
        "score": 3.0,
        "yours": false,
        "topic_id": 2177,
        "topic_slug": "thoughts-on-cross-module-read-error-in-special-key-space",
        "display_username": "Chaoguang",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 561,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/thoughts-on-cross-module-read-error-in-special-key-space/2177/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7329,
        "name": "Chaoguang",
        "username": "zjuLcg",
        "avatar_template": "/user_avatar/forums.foundationdb.org/zjulcg/{size}/652_2.png",
        "created_at": "2020-06-12T19:01:09.792Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"ajbeamon\" data-post=\"3\" data-topic=\"2177\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>If you specify keys that aren\u2019t contained within a module, then I\u2019m not sure what the best choice is.</p>\n</blockquote>\n</aside>\n<p>I see what you mean here.<br>\nThe difference in special keyspace compared to the general keyspace is that we do not know what is the legal keyspace until we get the base keys in key selectors. The module of the base key is the legal key-space to read (with SPECIAL_KEY_SPACE_RELAXED not set by default). So to be clear, I think we always hold the condition <code>resolving key selectors if the base keys all lie within a single module</code> in cases I describe here.<br>\nFor cases you have begin key selector and end key selector having different base keys in two modules, it will still throw the <code>special_keys_cross_module_read</code> error.<br>\nI think the idea is to achieve like you described here, <code>key selectors that start within the legal space would clamp to the bounds of that space.</code></p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-06-12T19:05:14.656Z",
        "reply_count": 0,
        "reply_to_post_number": 3,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 15,
        "readers_count": 14,
        "score": 3.0,
        "yours": false,
        "topic_id": 2177,
        "topic_slug": "thoughts-on-cross-module-read-error-in-special-key-space",
        "display_username": "Chaoguang",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 3,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 561,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/thoughts-on-cross-module-read-error-in-special-key-space/2177/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7330,
        "name": "Chaoguang",
        "username": "zjuLcg",
        "avatar_template": "/user_avatar/forums.foundationdb.org/zjulcg/{size}/652_2.png",
        "created_at": "2020-06-12T19:13:26.896Z",
        "cooked": "<p>Ah, I do not know they are omitted in c bindings. Maybe we can add it?<br>\nHa, I see what you mean.<br>\nHaving some concept like <code>boundaries</code> in range read should be quite useful, though I think there is some effort to add it into the existing general get range code.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-06-12T20:13:07.975Z",
        "reply_count": 0,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 13,
        "readers_count": 12,
        "score": 2.6,
        "yours": false,
        "topic_id": 2177,
        "topic_slug": "thoughts-on-cross-module-read-error-in-special-key-space",
        "display_username": "Chaoguang",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 14,
          "username": "andrew.noyes",
          "name": "",
          "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 561,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/thoughts-on-cross-module-read-error-in-special-key-space/2177/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7331,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2020-06-12T19:42:38.777Z",
        "cooked": "<p>I\u2019m not sure it\u2019s strictly necessary that you have these fields at the C level. At least, it probably isn\u2019t a blocker to implementing this feature, even though maybe there could be valid uses of having that information.</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-06-12T19:42:38.777Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 13,
        "readers_count": 12,
        "score": 7.6,
        "yours": false,
        "topic_id": 2177,
        "topic_slug": "thoughts-on-cross-module-read-error-in-special-key-space",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/thoughts-on-cross-module-read-error-in-special-key-space/2177/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7332,
        "name": "Chaoguang",
        "username": "zjuLcg",
        "avatar_template": "/user_avatar/forums.foundationdb.org/zjulcg/{size}/652_2.png",
        "created_at": "2020-06-12T20:10:41.564Z",
        "cooked": "<p>Yeah, it is not necessarily needed to have it in c api to implement it. I will first implement it and create an issue about adding those two fields in c-api, which can be discussed separately.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-06-12T20:16:36.313Z",
        "reply_count": 0,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 12,
        "readers_count": 11,
        "score": 2.4,
        "yours": false,
        "topic_id": 2177,
        "topic_slug": "thoughts-on-cross-module-read-error-in-special-key-space",
        "display_username": "Chaoguang",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 12,
          "username": "ajbeamon",
          "name": "A.J. Beamon",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 561,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/thoughts-on-cross-module-read-error-in-special-key-space/2177/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7343,
        "name": "Meng Xu",
        "username": "mengxu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
        "created_at": "2020-06-14T00:01:02.542Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"ajbeamon\" data-post=\"3\" data-topic=\"2177\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>the precedent for this in other parts of the key-space is that it would be an error to specify base keys outside of the legal key-space</p>\n</blockquote>\n</aside>\n<p>Do you have a reference to the precedent?</p>\n<p>I\u2019m wondering when the error gets thrown, will it still return the result that fall within the legal key space?</p>\n<p>For example, say, legal key space is [m, x); the begin key selector\u2019s base key is b; the end key is n. Will the precedent code still return the result in [m, n)?</p>\n<hr>\n<p>The proposal here seems allows the result in [m, n) to return.<br>\n<a class=\"mention\" href=\"/u/zjulcg\">@zjuLcg</a> Does the proposal throw the error <code>special_keys_cross_module_read</code> in the above example?</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-06-14T00:01:02.542Z",
        "reply_count": 2,
        "reply_to_post_number": 3,
        "quote_count": 1,
        "incoming_link_count": 52,
        "reads": 14,
        "readers_count": 13,
        "score": 272.8,
        "yours": false,
        "topic_id": 2177,
        "topic_slug": "thoughts-on-cross-module-read-error-in-special-key-space",
        "display_username": "Meng Xu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 337,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/thoughts-on-cross-module-read-error-in-special-key-space/2177/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7344,
        "name": "Chaoguang",
        "username": "zjuLcg",
        "avatar_template": "/user_avatar/forums.foundationdb.org/zjulcg/{size}/652_2.png",
        "created_at": "2020-06-14T04:22:06.179Z",
        "cooked": "<p>For this example, it will throw the <code>special_keys_cross_module_read</code> error. My proposal is for begin keys and end keys with two base keys belong to the same module, then by default(<code>SPECIAL_KEY_SPACE_RELAXED</code> is not set), we treat the <code>getRange</code> only happens in this module\u2019s range, which means even your key selector resolves outside the range, we still return the result and set <code>readToBegin</code> or <code>readThroughEnd</code> as true for reference.</p>\n<p>More context:<br>\nMy original post is not clear and looks like I cannot update now. This more should be more clear.<br>\nThe goal is like Markus said, \u201cEach module is treated like its own little keyspace by default\u201d.<br>\nThere are two cases:</p>\n<ol>\n<li>base keys of the begin key selector and the end key selector belong to different modules</li>\n<li>they belong to same module, but one or two of them will touch the module\u2019s boundary during resolution</li>\n</ol>\n<p>The current implementation will throw <code>special_keys_cross_module_read</code> in both cases. The proposal is to make the second one legal and set  <code>readToBegin</code> or <code>readThroughEnd</code> as reference.</p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-06-14T06:18:27.607Z",
        "reply_count": 1,
        "reply_to_post_number": 10,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 14,
        "readers_count": 13,
        "score": 22.8,
        "yours": false,
        "topic_id": 2177,
        "topic_slug": "thoughts-on-cross-module-read-error-in-special-key-space",
        "display_username": "Chaoguang",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 337,
          "username": "mengxu",
          "name": "Meng Xu",
          "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 561,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/thoughts-on-cross-module-read-error-in-special-key-space/2177/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7345,
        "name": "Chaoguang",
        "username": "zjuLcg",
        "avatar_template": "/user_avatar/forums.foundationdb.org/zjulcg/{size}/652_2.png",
        "created_at": "2020-06-14T04:31:14.883Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"mengxu\" data-post=\"10\" data-topic=\"2177\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/mengxu/48/893_2.png\" class=\"avatar\"> mengxu:</div>\n<blockquote>\n<p>Do you have a reference to the precedent?</p>\n<p>I\u2019m wondering when the error gets thrown, will it still return the result that fall within the legal key space?</p>\n<p>For example, say, legal key space is [m, x); the begin key selector\u2019s base key is b; the end key is n. Will the precedent code still return the result in [m, n)?</p>\n</blockquote>\n</aside>\n<p>IIUC, the precedent here means the normalKeys(\u201c\u201d to \u201c\\xff\u201d) and the systemKeys(\u201c\\xff\u201d to \u201c\\xff\\xff\u201d). By default(<code>read_system_keys</code> is disabled), if any of your two base keys is in systemKeys, it throws the error <code>key_outside_legal_range</code>. Once your two base keys are in normalKeys, the results will clamp to the boundary of normalKeys and will never throw this <code>key_outside_legal_range</code> error, which in other words, the key resolution only happens in the normal key space.</p>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-06-14T04:35:27.250Z",
        "reply_count": 0,
        "reply_to_post_number": 10,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 14,
        "readers_count": 13,
        "score": 17.8,
        "yours": false,
        "topic_id": 2177,
        "topic_slug": "thoughts-on-cross-module-read-error-in-special-key-space",
        "display_username": "Chaoguang",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 561,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/thoughts-on-cross-module-read-error-in-special-key-space/2177/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7346,
        "name": "Meng Xu",
        "username": "mengxu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
        "created_at": "2020-06-14T06:16:41.296Z",
        "cooked": "<p>Ah-ha, this description is crystal clear. Thanks for that!</p>\n<p>Looking forward to your PR.</p>\n<p>BTW, remember to add the semantics definition of this extension (feature) in the document in your PR. <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=9\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"></p>",
        "post_number": 13,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-06-14T06:16:41.296Z",
        "reply_count": 0,
        "reply_to_post_number": 11,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 12,
        "readers_count": 11,
        "score": 17.4,
        "yours": false,
        "topic_id": 2177,
        "topic_slug": "thoughts-on-cross-module-read-error-in-special-key-space",
        "display_username": "Meng Xu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 561,
          "username": "zjuLcg",
          "name": "Chaoguang",
          "avatar_template": "/user_avatar/forums.foundationdb.org/zjulcg/{size}/652_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 337,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/thoughts-on-cross-module-read-error-in-special-key-space/2177/13",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      7324,
      7325,
      7326,
      7327,
      7328,
      7329,
      7330,
      7331,
      7332,
      7343,
      7344,
      7345,
      7346
    ]
  },
  "timeline_lookup": [
    [
      1,
      1957
    ],
    [
      10,
      1956
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Thoughts on cross module read error in special-key-space",
  "id": 2177,
  "title": "Thoughts on cross module read error in special-key-space",
  "posts_count": 13,
  "created_at": "2020-06-12T18:30:51.066Z",
  "views": 1178,
  "reply_count": 8,
  "like_count": 4,
  "last_posted_at": "2020-06-14T06:16:41.296Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "thoughts-on-cross-module-read-error-in-special-key-space",
  "category_id": 8,
  "word_count": 1306,
  "deleted_at": null,
  "user_id": 561,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_2177",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 13,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 5,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Versioning of special key space",
      "id": 2068,
      "title": "Versioning of special key space",
      "slug": "versioning-of-special-key-space",
      "posts_count": 62,
      "reply_count": 45,
      "highest_post_number": 62,
      "image_url": null,
      "created_at": "2020-04-15T16:53:38.751Z",
      "last_posted_at": "2020-04-20T19:05:34.342Z",
      "bumped": true,
      "bumped_at": "2020-04-20T19:05:34.342Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 13,
      "views": 2599,
      "category_id": 5,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 561,
            "username": "zjuLcg",
            "name": "Chaoguang",
            "avatar_template": "/user_avatar/forums.foundationdb.org/zjulcg/{size}/652_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 758,
            "username": "TWarszawski",
            "name": "Todd Warszawski",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/3ec8ea/{size}.png",
            "trust_level": 0
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 708,
            "username": "gabikliot",
            "name": "Gabriel Kliot",
            "avatar_template": "/user_avatar/forums.foundationdb.org/gabikliot/{size}/749_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Unable to use conflicting keys special keyspace with Go bindings",
      "id": 3097,
      "title": "Unable to use conflicting keys special keyspace with Go bindings",
      "slug": "unable-to-use-conflicting-keys-special-keyspace-with-go-bindings",
      "posts_count": 7,
      "reply_count": 2,
      "highest_post_number": 7,
      "image_url": null,
      "created_at": "2022-01-03T22:06:19.984Z",
      "last_posted_at": "2022-01-04T21:40:06.796Z",
      "bumped": true,
      "bumped_at": "2022-01-04T21:40:06.796Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "bindings"
      ],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 827,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 810,
            "username": "amanda",
            "name": "Amanda",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/67e7ee/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 173,
            "username": "jkominek",
            "name": "Jay Kominek",
            "avatar_template": "/user_avatar/forums.foundationdb.org/jkominek/{size}/140_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 1037,
            "username": "leonliao",
            "name": "Leonliao",
            "avatar_template": "/user_avatar/forums.foundationdb.org/leonliao/{size}/1244_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 14,
            "username": "andrew.noyes",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Range-reading all key-values",
      "id": 1647,
      "title": "Range-reading all key-values",
      "slug": "range-reading-all-key-values",
      "posts_count": 3,
      "reply_count": 1,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2019-09-23T22:11:27.790Z",
      "last_posted_at": "2019-09-23T22:28:35.915Z",
      "bumped": true,
      "bumped_at": "2019-09-23T22:28:35.915Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 2097,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 517,
            "username": "janderland",
            "name": "Jon Anderson",
            "avatar_template": "/user_avatar/forums.foundationdb.org/janderland/{size}/517_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Use KeySelector.firstGreaterThan or just skip one KeyValue during iteration?",
      "id": 378,
      "title": "Use KeySelector.firstGreaterThan or just skip one KeyValue during iteration?",
      "slug": "use-keyselector-firstgreaterthan-or-just-skip-one-keyvalue-during-iteration",
      "posts_count": 14,
      "reply_count": 7,
      "highest_post_number": 14,
      "image_url": null,
      "created_at": "2018-05-08T07:52:22.261Z",
      "last_posted_at": "2018-05-12T00:34:14.837Z",
      "bumped": true,
      "bumped_at": "2018-05-12T00:34:14.837Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 3,
      "views": 1929,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 244,
            "username": "notxcain",
            "name": "Denis",
            "avatar_template": "/user_avatar/forums.foundationdb.org/notxcain/{size}/213_2.png",
            "trust_level": 0
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 38,
            "username": "panghy",
            "name": "Clement Pang",
            "avatar_template": "/user_avatar/forums.foundationdb.org/panghy/{size}/19_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 22,
            "username": "dave",
            "name": "David Scherer",
            "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Is it possible to fetch two different keys using &ldquo;fdb_transaction_get_range&rdquo; API in C program",
      "id": 1388,
      "title": "Is it possible to fetch two different keys using \"fdb_transaction_get_range\" API in C program",
      "slug": "is-it-possible-to-fetch-two-different-keys-using-fdb-transaction-get-range-api-in-c-program",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2019-05-23T08:14:07.379Z",
      "last_posted_at": "2019-05-23T15:43:55.444Z",
      "bumped": true,
      "bumped_at": "2019-05-23T15:43:55.444Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "bindings"
      ],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 591,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 511,
            "username": "sakthivelpvs",
            "name": "Sakthivel",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9dc877/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 561,
        "username": "zjuLcg",
        "name": "Chaoguang",
        "avatar_template": "/user_avatar/forums.foundationdb.org/zjulcg/{size}/652_2.png",
        "post_count": 7,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 12,
        "username": "ajbeamon",
        "name": "A.J. Beamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 337,
        "username": "mengxu",
        "name": "Meng Xu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 14,
        "username": "andrew.noyes",
        "name": "",
        "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 15,
        "username": "markus.pilman",
        "name": "Markus Pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      }
    ],
    "created_by": {
      "id": 561,
      "username": "zjuLcg",
      "name": "Chaoguang",
      "avatar_template": "/user_avatar/forums.foundationdb.org/zjulcg/{size}/652_2.png"
    },
    "last_poster": {
      "id": 337,
      "username": "mengxu",
      "name": "Meng Xu",
      "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png"
    }
  },
  "bookmarks": []
}