{
  "post_stream": {
    "posts": [
      {
        "id": 4625,
        "name": "Meai1",
        "username": "Meai1",
        "avatar_template": "/user_avatar/forums.foundationdb.org/meai1/{size}/541_2.png",
        "created_at": "2019-07-10T07:07:29.153Z",
        "cooked": "<p>I have a fresh database with \u2018configure new single ssd\u2019. I start with 4 processes in foundationdb.conf. Then I remove 3 of them. Result of 'status \u2019 is now:</p>\n<pre><code>Locking coordination state. Verify that a majority of coordination server\nprocesses are active.\n\n  127.0.0.1:4500  (reachable)\n</code></pre>\n<p>The database doesnt work anymore and does not seem to ever recover.<br>\nIt does work again after I do \u2018configure single ssd\u2019 again, but why is that necessary when it works fine to remove 2 or 1 process but not 3. There is no indication of what is wrong here.<br>\nI think this must be a case of some internal statistics that are causing conflicts, I heard about process classes<br>\nIs there a way to show the roles/classes in the status output for processes?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2019-07-10T07:08:28.090Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 634,
        "reads": 92,
        "readers_count": 91,
        "score": 3188.4,
        "yours": false,
        "topic_id": 1512,
        "topic_slug": "locking-coordination-state-after-process-removal",
        "display_username": "Meai1",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 410,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/locking-coordination-state-after-process-removal/1512/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 4626,
        "name": "Ryan Worl",
        "username": "ryanworl",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
        "created_at": "2019-07-10T13:39:21.979Z",
        "cooked": "<p>A majority of coordinators must be available for the database to be available. By removing three processes from a four process cluster there is no way for a majority to be available.</p>\n<p>Running <code>fdbcli --exec \"status details\"</code> will show you where your coordinators are and if they are reachable or not.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2019-07-10T13:39:21.979Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 91,
        "readers_count": 90,
        "score": 33.2,
        "yours": false,
        "topic_id": 1512,
        "topic_slug": "locking-coordination-state-after-process-removal",
        "display_username": "Ryan Worl",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 81,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/locking-coordination-state-after-process-removal/1512/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4628,
        "name": "Meai1",
        "username": "Meai1",
        "avatar_template": "/user_avatar/forums.foundationdb.org/meai1/{size}/541_2.png",
        "created_at": "2019-07-10T15:24:45.805Z",
        "cooked": "<p>There were only 4 processes and the first one, the 4500 coordinator is still available. So that\u2019s my point, it shows the same as what I already posted above. In my opinion it makes no sense that the cluster is erroring out in this case. 1 out of 1 processes is still a coordinator, it should work fine. It also doesnt answer my question about how to see which of the processes are log servers, coordinators or something else.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2019-07-10T15:25:51.111Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 91,
        "readers_count": 90,
        "score": 38.2,
        "yours": false,
        "topic_id": 1512,
        "topic_slug": "locking-coordination-state-after-process-removal",
        "display_username": "Meai1",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 81,
          "username": "ryanworl",
          "name": "Ryan Worl",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 410,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/locking-coordination-state-after-process-removal/1512/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4632,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-07-10T23:09:18.647Z",
        "cooked": "<p><code>fdbcli&gt; status json</code> includes the process class settings and role recruitments.</p>\n<p>See <a href=\"https://pastebin.com/kj5XCNPM\" rel=\"nofollow noopener\">https://pastebin.com/kj5XCNPM</a> (from <a href=\"https://forums.foundationdb.org/t/are-spikes-of-500ms-maxrowreadlatency-normal/1508/4\" class=\"inline-onebox\">Are spikes of 500ms+ MaxRowReadLatency normal?</a>) for an example.</p>\n<pre><code class=\"lang-auto\">            \"54a7a3995096944c1ecb563e81ff61d9\" : {\n                \"class_source\" : \"command_line\",\n                \"class_type\" : \"storage\",\n                [snip]\n                \"roles\" : [\n                    {\n                        \"role\" : \"storage\",\n                        [snip]\n                    }\n                ],\n            },\n</code></pre>\n<p>If you remove <code>Replication Factor</code> machines or more from a cluster without excluding them first, and waiting for the exclude to finish, then you\u2019re going to break your cluster, because there\u2019s data (including system metadata) that will be permanently missing.</p>\n<p>The recovery step of <code>locking_coordinated_state</code> also waits for the previous generation of TLogs to come back, so that we can read out the system metadata.  As you\u2019ve removed &gt;=<code>Replication Factor</code> number of machines, that\u2019s never going to finish.</p>\n<p>(I\u2019ve also been confused by this naming, so maybe we should go rename this step sometime\u2026)</p>\n<p>I\u2019m confused though that <code>fdbcli&gt; configure single ssd</code> shouldn\u2019t bring you back to a working cluster.  Running <code>fdbcli&gt; configure new single ssd</code> and thus throwing away the previous database might?  Did you happen to elide the <code>new</code> by accident when posting, or should I go think harder?</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2019-07-10T23:09:39.675Z",
        "reply_count": 1,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 89,
        "readers_count": 88,
        "score": 37.8,
        "yours": false,
        "topic_id": 1512,
        "topic_slug": "locking-coordination-state-after-process-removal",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/are-spikes-of-500ms-maxrowreadlatency-normal/1508/4",
            "internal": true,
            "reflection": false,
            "title": "Are spikes of 500ms+ MaxRowReadLatency normal?",
            "clicks": 3
          },
          {
            "url": "https://pastebin.com/kj5XCNPM",
            "internal": false,
            "reflection": false,
            "title": "{ \"client\" : { \"cluster_file\" : { \"path\" : \"/etc/foun - Pastebin.com",
            "clicks": 3
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 410,
          "username": "Meai1",
          "name": "Meai1",
          "avatar_template": "/user_avatar/forums.foundationdb.org/meai1/{size}/541_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/locking-coordination-state-after-process-removal/1512/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4639,
        "name": "Meai1",
        "username": "Meai1",
        "avatar_template": "/user_avatar/forums.foundationdb.org/meai1/{size}/541_2.png",
        "created_at": "2019-07-11T06:16:39.431Z",
        "cooked": "<blockquote>\n<p>If you remove  <code>Replication Factor</code>  machines or more from a cluster without excluding them first, and waiting for the exclude to finish, then you\u2019re going to break your cluster, because there\u2019s data (including system metadata) that will be permanently missing.</p>\n</blockquote>\n<p>I didnt remove any machines, I removed processes! Because when looking at the docs, I dont see how \u201c1 machine 1 process\u201d suddenly shouldnt be a workable state just because I temporarily increase the amount of processes and then remove them again.<br>\nIn my understanding I dont have any replication here to begin with. If I am violating something then it is invisible to me and the docs dont mention it.</p>\n<p>I dont see any indication that I\u2019m violating something called a \u2018Replication Factor\u2019 when reading this: <a href=\"https://apple.github.io/foundationdb/configuration.html#single-datacenter-modes\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Configuration \u2014 FoundationDB 7.1</a></p>\n<blockquote>\n<p>I\u2019m confused though that  <code>fdbcli&gt; configure single ssd</code>  shouldn\u2019t bring you back to a working cluster. Running  <code>fdbcli&gt; configure new single ssd</code>  and thus throwing away the previous database might? Did you happen to elide the  <code>new</code>  by accident when posting, or should I go think harder?</p>\n</blockquote>\n<p>well today I tried it again and now it seems completely arbitrary to me. Sometimes it locks up even if I just remove 1 of 4 processes. Sometimes only when I remove 2. It definitely always happen when I remove 3 at the same time.</p>\n<p>I made two videos to show the behavior: (at first it seems fine, processes just say \u201cno metrics available\u201d but seconds later the whole thing goes into error mode)<br>\n<a href=\"https://webm.red/Fyct\" class=\"onebox\" target=\"_blank\" rel=\"noopener nofollow ugc\">https://webm.red/Fyct</a></p>\n<p>second video I cant believe that it\u2019s working again at first but then I try removing 2 at the same time and it goes into error mode again:<br>\n<a href=\"https://webm.red/u80p\" class=\"onebox\" target=\"_blank\" rel=\"noopener nofollow ugc\">https://webm.red/u80p</a></p>\n<p>I cant replicate the behavior of the \u2018configure single ssd\u2019 thing again, I do believe that it happened just like I said.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2019-07-11T06:17:17.222Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 15,
        "reads": 85,
        "readers_count": 84,
        "score": 97.0,
        "yours": false,
        "topic_id": 1512,
        "topic_slug": "locking-coordination-state-after-process-removal",
        "display_username": "Meai1",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://webm.red/Fyct",
            "internal": false,
            "reflection": false,
            "title": "webm.red - Free and Secure Webm Hosting",
            "clicks": 3
          },
          {
            "url": "https://apple.github.io/foundationdb/configuration.html#single-datacenter-modes",
            "internal": false,
            "reflection": false,
            "title": "Configuration \u2014 FoundationDB 6.1",
            "clicks": 3
          },
          {
            "url": "https://webm.red/u80p",
            "internal": false,
            "reflection": false,
            "title": "webm.red - Free and Secure Webm Hosting",
            "clicks": 2
          },
          {
            "url": "https://forums.foundationdb.org/t/ideal-setup-for-fault-tolerance-3-in-triple-mode/1520/2",
            "internal": true,
            "reflection": true,
            "title": "Ideal setup for Fault Tolerance = 3 in Triple mode",
            "clicks": 1
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 410,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/locking-coordination-state-after-process-removal/1512/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4640,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-07-11T06:43:34.731Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"Meai1\" data-post=\"5\" data-topic=\"1512\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/meai1/48/541_2.png\" class=\"avatar\"> Meai1:</div>\n<blockquote>\n<p>I didnt remove any machines, I removed processes! Because when looking at the docs, I dont see how \u201c1 machine 1 process\u201d suddenly shouldnt be a workable state just because I temporarily increase the amount of processes and then remove them again.</p>\n</blockquote>\n</aside>\n<p>Hm.  That\u2019s a fair point.  Let me give you more context to explain why it\u2019s described this way, but I do see your point that this is confusing for the case of <code>single</code> replication.</p>\n<p><code>single</code>, <code>double</code>, and <code>triple</code> ask FDB to spread 1, 2, of 3 copies of your data across \u201czones\u201d, where a zone is however you wish to define your failure domain.  The zone is settable on the command line via <code>--zone_id</code>.</p>\n<p>If you don\u2019t provide a zone, the default is that a machine is a failure domain.  This is coordinated via fdbserver opening a shared memory segment (<code>/dev/shm/fdbserver</code>, IIRC) and generates a random UUID and stashes it in the shared memory file.  Future fdbserver processes will open the same file, and then see the UUID, and use that as its zone.  Thus, all fdbserver processes will agree on a zoneId, and thus present themselves as one failure domain, and FDB will appropriately not place all three copies of triple replicated data on the same machine.</p>\n<p>Tangentially but notably, if one uses docker, then it\u2019s likely that the /dev/shm/fdbserver file won\u2019t be shared across your fdbserver instances, and one might actually trick FDB into putting multiple copies of data in one failure domain.</p>\n<p>When using <code>single</code> replication, you\u2019re only storing one copy of each piece of data.  On-disk storage is tied to a process.  This replication is important, because if one removes a process with <code>double</code> or <code>triple</code>, FDB can make another copy of the data from the copy that still remained in some other process.  As you\u2019re running with <code>single</code> replication, if you remove a process, there\u2019s no other place that FDB can go to re-replicate it.  Thus, FDB must instead wait for an fdbserver process to reappear that can offer the missing data.</p>\n<p>Adding processes to a cluster will allow data distribution to redistribute data to the new processes.  Once data is assigned to these processes, removing them will cause a problem due to everything described above.</p>\n<hr>\n<p>If in the docs, I change it to:</p>\n<div class=\"md-table\">\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th>single</th>\n<th>double</th>\n<th>triple</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Best for</td>\n<td></td>\n<td>1-2 machines</td>\n<td>3-4 machines</td>\n<td>5+ machines</td>\n</tr>\n<tr>\n<td>Replication</td>\n<td></td>\n<td>1 copy</td>\n<td>2 copy</td>\n<td>3 copy</td>\n</tr>\n<tr>\n<td># live machines to make progress</td>\n<td></td>\n<td>1</td>\n<td>2</td>\n<td>3</td>\n</tr>\n<tr>\n<td>Minimum # of machines for fault tolerance</td>\n<td></td>\n<td>impossible</td>\n<td>3</td>\n<td>4</td>\n</tr>\n<tr>\n<td>Ideal # of coordination servers</td>\n<td></td>\n<td>1</td>\n<td>3</td>\n<td>5</td>\n</tr>\n<tr>\n<td># simultaneous failures after which data may be lost</td>\n<td></td>\n<td>any <strong>process</strong></td>\n<td>2+ machines</td>\n<td>3+ machines</td>\n</tr>\n</tbody>\n</table>\n</div><p>Would that have made this clearer?</p>\n<hr>\n<aside class=\"quote no-group\" data-username=\"Meai1\" data-post=\"5\" data-topic=\"1512\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/meai1/48/541_2.png\" class=\"avatar\"> Meai1:</div>\n<blockquote>\n<p>well today I tried it again and now it seems completely arbitrary to me. Sometimes it locks up even if I just remove 1 of 4 processes. Sometimes only when I remove 2. It definitely always happen when I remove 3 at the same time.</p>\n</blockquote>\n</aside>\n<p>It\u2019s possible that with an effectively empty database, there won\u2019t be shards of data to assign to all four of the processes.  Or, the processes were added and removed quick enough that redistributing data to them didn\u2019t yet complete.  If you kill/remove one of the processes that was assigned any data, then you would indeed break your database.  If you kill a process that didn\u2019t have any assigned data and also wasn\u2019t the transaction log, then it sounds quite plausible to me that the database will actually recover and run.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2019-07-11T06:43:34.731Z",
        "reply_count": 1,
        "reply_to_post_number": 5,
        "quote_count": 1,
        "incoming_link_count": 9,
        "reads": 79,
        "readers_count": 78,
        "score": 65.8,
        "yours": false,
        "topic_id": 1512,
        "topic_slug": "locking-coordination-state-after-process-removal",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/locking-coordination-state-after-process-removal/1512/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4641,
        "name": "Meai1",
        "username": "Meai1",
        "avatar_template": "/user_avatar/forums.foundationdb.org/meai1/{size}/541_2.png",
        "created_at": "2019-07-11T07:13:07.699Z",
        "cooked": "<p>I would change \u2018#\u2019 to \u2018nr\u2019 because # is a python comment in my mind first. Also another thing that is confusing is that it says Replication: 1 copy. To me that sounds like it does replicate\u2026 one time. So I end up with 2 instances of data, one of which would be a copy of the real data.<br>\nIn my opinion to be crystal clear you have to remove the word \u2018replication\u2019 and just say \u2018total nr of copies\u2019 instead. Because replication in my mind strongly implies that it RE-did something. So it took something that exists and did something on top of that. So that would mean that 1 replicated copy means that I have 2 total copies of data. I know this is probably better understood by database people who work with this terminology all day but in my opinion it\u2019s very misleading and unnecessarily forces me to think about what the author actually means here.<br>\nI also dont understand this advice that single ssd is \u201cbest for\u201d 1-2 machines. Are the docs trying to tell me that I dont need fault tolerance? I can just rely on my disk never failing? I dont understand what is being advised here, it seems contrary to popular advice elsewhere on the internet to always have backups. Do you advise therefore that I use the fdbbackup tool instead as long as I have less than 3 machines?<br>\nYes the last line is definitely clearer when you say any process.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2019-07-11T07:15:19.909Z",
        "reply_count": 1,
        "reply_to_post_number": 6,
        "quote_count": 0,
        "incoming_link_count": 7,
        "reads": 73,
        "readers_count": 72,
        "score": 54.6,
        "yours": false,
        "topic_id": 1512,
        "topic_slug": "locking-coordination-state-after-process-removal",
        "display_username": "Meai1",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 410,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/locking-coordination-state-after-process-removal/1512/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4643,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-07-11T09:56:41.581Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"Meai1\" data-post=\"7\" data-topic=\"1512\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/meai1/48/541_2.png\" class=\"avatar\"> Meai1:</div>\n<blockquote>\n<p>I also dont understand this advice that single ssd is \u201cbest for\u201d 1-2 machines.</p>\n</blockquote>\n</aside>\n<p>If you have one machine, then running <code>double</code> will result in a broken cluster, as FDB won\u2019t have a place to put a second copy.  If you have two machines, then running <code>double</code> will give you two copies, but if once machine dies we\u2019re back in the previous case of having a broken cluster because there\u2019s no place to put a new second copy.  You need at least three machines for <code>double</code> to actually mean that FDB can tolerate the failure of one machine.  Similarly, <code>triple</code> is only useful for 5 or more machines.  I agree the documentation could be more explicit in explaining this.</p>\n<p>Thanks, I greatly appreciate the explanations of what the docs are communicating to you.  I\u2019ve filed <a href=\"https://github.com/apple/foundationdb/issues/1829\">a GitHub issue</a> to make sure we don\u2019t forget to do the suggested documentation updates. It\u2019s rather difficult for me to temporarily forget the years of immersion in database speak. <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>Replication, and Multi-Region or <code>fdbdr</code>, gives additional availability guarantees, but don\u2019t protect against unintended modifications to the database.  Backups are generally advisable to protect against application bugs, while also providing a way out from horrific unavailability events.</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2019-07-11T09:56:41.581Z",
        "reply_count": 0,
        "reply_to_post_number": 7,
        "quote_count": 1,
        "incoming_link_count": 10,
        "reads": 73,
        "readers_count": 72,
        "score": 64.6,
        "yours": false,
        "topic_id": 1512,
        "topic_slug": "locking-coordination-state-after-process-removal",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/issues/1829",
            "internal": false,
            "reflection": false,
            "title": "Clarify replication configuration documentation \u00b7 Issue #1829 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 5
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/locking-coordination-state-after-process-removal/1512/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      4625,
      4626,
      4628,
      4632,
      4639,
      4640,
      4641,
      4643
    ]
  },
  "timeline_lookup": [
    [
      1,
      2296
    ],
    [
      2,
      2295
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "&lsquo;Locking coordination&rsquo; state after process removal",
  "id": 1512,
  "title": "'Locking coordination' state after process removal",
  "posts_count": 8,
  "created_at": "2019-07-10T07:07:29.075Z",
  "views": 2124,
  "reply_count": 6,
  "like_count": 0,
  "last_posted_at": "2019-07-11T09:56:41.581Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "locking-coordination-state-after-process-removal",
  "category_id": 7,
  "word_count": 1866,
  "deleted_at": null,
  "user_id": 410,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_1512",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 8,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 3,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Can I remove a process?",
      "id": 1428,
      "title": "Can I remove a process?",
      "slug": "can-i-remove-a-process",
      "posts_count": 9,
      "reply_count": 4,
      "highest_post_number": 9,
      "image_url": null,
      "created_at": "2019-06-05T23:13:44.635Z",
      "last_posted_at": "2019-06-18T14:05:53.063Z",
      "bumped": true,
      "bumped_at": "2019-06-18T14:05:53.063Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 2178,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 594,
            "username": "zhuyi29",
            "name": "Zoe",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/z/edb3f5/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 511,
            "username": "sakthivelpvs",
            "name": "Sakthivel",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9dc877/{size}.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "How to remove process from test server",
      "id": 2667,
      "title": "How to remove process from test server",
      "slug": "how-to-remove-process-from-test-server",
      "posts_count": 6,
      "reply_count": 4,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2021-04-19T10:05:05.923Z",
      "last_posted_at": "2021-04-19T21:59:47.115Z",
      "bumped": true,
      "bumped_at": "2021-04-19T21:59:47.115Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 834,
      "category_id": 17,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 927,
            "username": "peter",
            "name": "Peter Zeller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/peter/{size}/1064_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Locking coordination state. Verify that a majority of coordinattion server process are active. Single machine",
      "id": 2560,
      "title": "Locking coordination state. Verify that a majority of coordinattion server process are active. Single machine",
      "slug": "locking-coordination-state-verify-that-a-majority-of-coordinattion-server-process-are-active-single-machine",
      "posts_count": 5,
      "reply_count": 2,
      "highest_post_number": 5,
      "image_url": null,
      "created_at": "2021-02-16T23:20:12.154Z",
      "last_posted_at": "2021-03-08T20:52:08.046Z",
      "bumped": true,
      "bumped_at": "2021-03-08T20:52:08.046Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1182,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 885,
            "username": "jds",
            "name": "JD S",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/b19c9b/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 448,
            "username": "dongxinEric",
            "name": "Xin Dong",
            "avatar_template": "/user_avatar/forums.foundationdb.org/dongxineric/{size}/434_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 14,
            "username": "andrew.noyes",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "How are &lsquo;contributing_workers&rsquo; computed?",
      "id": 360,
      "title": "How are 'contributing_workers' computed?",
      "slug": "how-are-contributing-workers-computed",
      "posts_count": 20,
      "reply_count": 13,
      "highest_post_number": 20,
      "image_url": null,
      "created_at": "2018-05-07T00:53:18.538Z",
      "last_posted_at": "2018-05-12T07:19:34.562Z",
      "bumped": true,
      "bumped_at": "2018-05-12T07:19:34.562Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 6,
      "views": 1986,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 236,
            "username": "marctrem",
            "name": "Marc-Andr\u00e9 Tremblay",
            "avatar_template": "/user_avatar/forums.foundationdb.org/marctrem/{size}/208_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 54,
            "username": "Evan",
            "name": "Evan Tschannen",
            "avatar_template": "/user_avatar/forums.foundationdb.org/evan/{size}/104_2.png",
            "moderator": true,
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 156,
            "username": "spullara",
            "name": "Sam Pullara",
            "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 247,
            "username": "Chr1st0ph",
            "name": "Chr1st0ph",
            "avatar_template": "/user_avatar/forums.foundationdb.org/chr1st0ph/{size}/353_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 118,
            "username": "abdullin",
            "name": "Rinat Abdullin",
            "avatar_template": "/user_avatar/forums.foundationdb.org/abdullin/{size}/83_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "FoundationDB processes - 2 (less 0 excluded; 1 with errors)",
      "id": 2008,
      "title": "FoundationDB processes - 2 (less 0 excluded; 1 with errors)",
      "slug": "foundationdb-processes-2-less-0-excluded-1-with-errors",
      "posts_count": 8,
      "reply_count": 8,
      "highest_post_number": 10,
      "image_url": null,
      "created_at": "2020-03-13T03:55:51.229Z",
      "last_posted_at": "2020-03-13T05:57:38.007Z",
      "bumped": true,
      "bumped_at": "2020-03-13T05:57:38.007Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 895,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 718,
            "username": "Cliicy",
            "name": "Dragon",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/c/47e85d/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 410,
        "username": "Meai1",
        "name": "Meai1",
        "avatar_template": "/user_avatar/forums.foundationdb.org/meai1/{size}/541_2.png",
        "post_count": 4,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 81,
        "username": "ryanworl",
        "name": "Ryan Worl",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 3
      }
    ],
    "created_by": {
      "id": 410,
      "username": "Meai1",
      "name": "Meai1",
      "avatar_template": "/user_avatar/forums.foundationdb.org/meai1/{size}/541_2.png"
    },
    "last_poster": {
      "id": 13,
      "username": "alexmiller",
      "name": "Alex Miller",
      "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
    },
    "links": [
      {
        "url": "https://github.com/apple/foundationdb/issues/1829",
        "title": "Clarify replication configuration documentation \u00b7 Issue #1829 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 5,
        "user_id": 13,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://forums.foundationdb.org/t/are-spikes-of-500ms-maxrowreadlatency-normal/1508/4",
        "title": "Are spikes of 500ms+ MaxRowReadLatency normal?",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 13,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://apple.github.io/foundationdb/configuration.html#single-datacenter-modes",
        "title": "Configuration \u2014 FoundationDB 6.1",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 410,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      },
      {
        "url": "https://pastebin.com/kj5XCNPM",
        "title": "{ \"client\" : { \"cluster_file\" : { \"path\" : \"/etc/foun - Pastebin.com",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 13,
        "domain": "pastebin.com",
        "root_domain": "pastebin.com"
      },
      {
        "url": "https://webm.red/Fyct",
        "title": "webm.red - Free and Secure Webm Hosting",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 410,
        "domain": "webm.red",
        "root_domain": "webm.red"
      },
      {
        "url": "https://webm.red/u80p",
        "title": "webm.red - Free and Secure Webm Hosting",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 410,
        "domain": "webm.red",
        "root_domain": "webm.red"
      },
      {
        "url": "https://forums.foundationdb.org/t/ideal-setup-for-fault-tolerance-3-in-triple-mode/1520/2",
        "title": "Ideal setup for Fault Tolerance = 3 in Triple mode",
        "internal": true,
        "attachment": false,
        "reflection": true,
        "clicks": 1,
        "user_id": 13,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      }
    ]
  },
  "bookmarks": []
}