{
  "post_stream": {
    "posts": [
      {
        "id": 3876,
        "name": "Hieu Nguyen",
        "username": "ntrhieu89",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ntrhieu89/{size}/587_2.png",
        "created_at": "2019-04-10T08:50:34.624Z",
        "cooked": "<p>Hi,</p>\n<p>I am using FoundationDB for my application. In my use case, the application frequently issues range queries that return thousands, even tens of thousands of key-value pairs.</p>\n<p>I notice that there are two ways to execute a range query: 1) using <code>tx.getRange().asList().get()</code> to get all key-value pairs at once or 2) using <code>tx.getRange().iterator()</code> to get the key-value pairs iteratively. Below is my Java code:</p>\n<p><strong>Using asList()</strong></p>\n<pre><code class=\"lang-java\">private void execNonAsync(Database db, Range range, int expect) throws ExecutionException, InterruptedException {\n    Transaction tx = db.createTransaction();\n    List&lt;KeyValue&gt; kvs = tx.getRange(range).asList().get();\n    for (KeyValue kv: kvs) {\n        kv.getKey();\n        kv.getValue();\n    }\n    tx.commit().get();\n    tx.close();\n}\n</code></pre>\n<p><strong>Using iterator()</strong></p>\n<pre><code class=\"lang-java\">private void execAsync(Database db, Range range, int expect) throws ExecutionException, InterruptedException {\n    Transaction tx = db.createTransaction();\n    AsyncIterator&lt;KeyValue&gt; iter = tx.getRange(range).iterator();\n    while (iter.hasNext()) {\n        KeyValue kv = iter.next();\n        kv.getKey();\n        kv.getValue();\n    }\n    tx.commit().get();\n    tx.close();\n}\n</code></pre>\n<p>I run a microbenchmark program to measure the latencies of both ways. Below is the result (in milliseconds). My conclusion is <code>asList()</code> provides remarkably lower latency comparing with <code>iterator()</code>. The difference increases when the range size (the number of key-value pairs returned) increases.</p>\n<pre><code class=\"lang-auto\">Range Size      Using asList()      Using iterator()\n1               1.213090            1.241620          \n10              1.237670            1.920940\n20              1.299140            1.966210\n50              1.386290            2.400080\n100             1.515270            2.947490\n1000            3.316320            6.013990\n</code></pre>\n<p>The results are gathered with 1 one node FDB and another node that runs my benchmark Java program. The database has 100k keys in total (each key is 8-byte length, each value is 100-byte length) and each query is run repeatedly 100k times.</p>\n<p>My questions are:</p>\n<ol>\n<li>\n<p>Is it because <code>asList()</code> gets all key-value pairs in one call to FDB and <code>iterator()</code> uses multiple calls (equal to the number of fetched key-value pairs) in an async manner that causes the latency difference? If not, what is the explanation of the higher latency?</p>\n</li>\n<li>\n<p>I want to go with <code>iterator()</code> for my application because with this way the application does not hold all key-value pairs in memory and it can process the data as soon as some key-value pairs are available. My major concern is the high latency of the current <code>iterator()</code>. Are there some tunings or configurations that reduce its latency? Ideally, I expect the latency of <code>iterator()</code> should not be much lower than <code>asList()</code> when the range size increases.</p>\n</li>\n</ol>\n<p>This is the link for the full code of my benchmark.<br>\n<a href=\"http://collabedit.com/xdwbk\" class=\"onebox\" target=\"_blank\" rel=\"nofollow noopener\">http://collabedit.com/xdwbk</a></p>\n<p>Any bits of help/recommendations would be helpful. Thanks!</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2019-04-10T09:21:31.097Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 579,
        "reads": 69,
        "readers_count": 68,
        "score": 2923.8,
        "yours": false,
        "topic_id": 1291,
        "topic_slug": "latency-of-range-queries-that-return-large-number-of-key-value-pairs",
        "display_username": "Hieu Nguyen",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 7,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "http://collabedit.com/xdwbk",
            "internal": false,
            "reflection": false,
            "clicks": 5
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 550,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/latency-of-range-queries-that-return-large-number-of-key-value-pairs/1291/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 3882,
        "name": "gaurav",
        "username": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "created_at": "2019-04-10T12:15:42.284Z",
        "cooked": "<p>If I recall correctly, asList() issues the range request with option \u2018WantAll\u2019, which will prioritize fetching the data in as few server roundtrips as possible. This could explain the difference in time. However, asList() method would require you to have enough memory available to hold all the values in the requested range.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2019-04-10T12:15:42.284Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 61,
        "readers_count": 60,
        "score": 32.2,
        "yours": false,
        "topic_id": 1291,
        "topic_slug": "latency-of-range-queries-that-return-large-number-of-key-value-pairs",
        "display_username": "gaurav",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 166,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/latency-of-range-queries-that-return-large-number-of-key-value-pairs/1291/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3885,
        "name": "Hieu Nguyen",
        "username": "ntrhieu89",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ntrhieu89/{size}/587_2.png",
        "created_at": "2019-04-10T16:54:47.770Z",
        "cooked": "<p>If I uses iterator() to retrieve N keys, the number of roundtrips to the server (not counting the request to get the read version) is N or less? Does iterator() also pre-fetch data? I think the latency should be reduced if iterator() also fetch the data in batch, let\u2019s say, 10 keys at a time for them to be available locally. If it already does so, can this number (10) be configurable somehow?</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2019-04-10T16:54:47.770Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 61,
        "readers_count": 60,
        "score": 37.2,
        "yours": false,
        "topic_id": 1291,
        "topic_slug": "latency-of-range-queries-that-return-large-number-of-key-value-pairs",
        "display_username": "Hieu Nguyen",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 166,
          "username": "gaurav",
          "name": "gaurav",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 550,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/latency-of-range-queries-that-return-large-number-of-key-value-pairs/1291/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3888,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-04-10T17:58:08.102Z",
        "cooked": "<p>The way that range queries work is that they request results in batches from the cluster using a byte limit determined by your <a href=\"https://apple.github.io/foundationdb/javadoc/com/apple/foundationdb/StreamingMode.html\" rel=\"nofollow noopener\">streaming mode</a>. The default streaming mode for the iterator is one that starts at a low byte limit and gradually increases (called <code>ITERATOR</code>), while calling <code>asList</code> uses <code>WANT_ALL</code> or <code>EXACT</code>, depending on whether you specify a row limit. If it has to do enough requests, the iterator mode would eventually reach the same byte limit as <code>WANT_ALL</code>, so a sufficiently large range should hopefully take a similar amount of time between the two queries in relative terms.</p>\n<p>If you use the <code>WANT_ALL</code> streaming mode in your iterator example, I would expect the times to be similar.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2019-04-10T17:58:08.102Z",
        "reply_count": 1,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 60,
        "readers_count": 59,
        "score": 32.0,
        "yours": false,
        "topic_id": 1291,
        "topic_slug": "latency-of-range-queries-that-return-large-number-of-key-value-pairs",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://apple.github.io/foundationdb/javadoc/com/apple/foundationdb/StreamingMode.html",
            "internal": false,
            "reflection": false,
            "title": "StreamingMode (FoundationDB Java Client API)",
            "clicks": 15
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 550,
          "username": "ntrhieu89",
          "name": "Hieu Nguyen",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ntrhieu89/{size}/587_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/latency-of-range-queries-that-return-large-number-of-key-value-pairs/1291/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3907,
        "name": "Hieu Nguyen",
        "username": "ntrhieu89",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ntrhieu89/{size}/587_2.png",
        "created_at": "2019-04-11T17:16:19.728Z",
        "cooked": "<p>I tried with the stream mode and you are right, the latency dropped when I used a different StreamMode than <code>ITERATOR</code>. Thank you very much!</p>\n<p>Do you have more details on the differences between these stream modes? I traced the Java code but it seems that the parameter is passed to be processed in the C library. For example:</p>\n<ol>\n<li>What is the fetch chunk size of each stream modes (<code>SMALL</code>, <code>MEDIUM</code>, <code>LARGE</code>, <code>SERIAL</code>, <code>ITERATOR</code>)?</li>\n<li>What are the differences between <code>LARGE</code> and <code>SERIAL</code>?</li>\n<li>If I select <code>WANT_ALL</code>, does it get all data in one call or does it still fetches data in chunks? If it still fetches data in chunks, is the chunk size larger than <code>LARGE</code> mode?</li>\n</ol>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2019-04-11T17:17:04.962Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 24,
        "reads": 55,
        "readers_count": 54,
        "score": 136.0,
        "yours": false,
        "topic_id": 1291,
        "topic_slug": "latency-of-range-queries-that-return-large-number-of-key-value-pairs",
        "display_username": "Hieu Nguyen",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 12,
          "username": "ajbeamon",
          "name": "A.J. Beamon",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 550,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/latency-of-range-queries-that-return-large-number-of-key-value-pairs/1291/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3908,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-04-11T18:26:46.813Z",
        "cooked": "<p>You can see the values in this array, with the iterator progression right below it:</p>\n<aside class=\"onebox githubblob\">\n  <header class=\"source\">\n      <a href=\"https://github.com/apple/foundationdb/blob/cd5c9d91fad2c52066f1aa25d7a87672da316408/bindings/c/fdb_c.cpp#L460\" target=\"_blank\" rel=\"nofollow noopener\">github.com</a>\n  </header>\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/apple/foundationdb/blob/cd5c9d91fad2c52066f1aa25d7a87672da316408/bindings/c/fdb_c.cpp#L460\" target=\"_blank\" rel=\"nofollow noopener\">apple/foundationdb/blob/cd5c9d91fad2c52066f1aa25d7a87672da316408/bindings/c/fdb_c.cpp#L460</a></h4>\n<pre class=\"onebox\"><code class=\"lang-cpp\"><ol class=\"start lines\" start=\"450\" style=\"counter-reset: li-counter 449 ;\">\n<li>\t\tlimit = CLIENT_KNOBS-&gt;ROW_LIMIT_UNLIMITED;</li>\n<li>\tif (!target_bytes)</li>\n<li>\t\ttarget_bytes = CLIENT_KNOBS-&gt;BYTE_LIMIT_UNLIMITED;</li>\n<li>\n</li>\n<li>\t/* Unlimited/unlimited with mode _EXACT isn't permitted */</li>\n<li>\tif (limit == CLIENT_KNOBS-&gt;ROW_LIMIT_UNLIMITED &amp;&amp; target_bytes == CLIENT_KNOBS-&gt;BYTE_LIMIT_UNLIMITED &amp;&amp; mode == FDB_STREAMING_MODE_EXACT)</li>\n<li>\t\treturn TSAV_ERROR(Standalone&lt;RangeResultRef&gt;, exact_mode_without_limits);</li>\n<li>\n</li>\n<li>\t/* _ITERATOR mode maps to one of the known streaming modes</li>\n<li>\t   depending on iteration */</li>\n<li class=\"selected\">\tstatic const int mode_bytes_array[] = {CLIENT_KNOBS-&gt;BYTE_LIMIT_UNLIMITED, 256, 1000, 4096, 80000};</li>\n<li>\n</li>\n<li>\t/* The progression used for FDB_STREAMING_MODE_ITERATOR.</li>\n<li>\t   Goes from small -&gt; medium -&gt; large.  Then 1.5 * previous until serial. */</li>\n<li>\tstatic const int iteration_progression[] = { 256, 1000, 4096, 6144, 9216, 13824, 20736, 31104, 46656, 69984, 80000 };</li>\n<li>\n</li>\n<li>\t/* length(iteration_progression) */</li>\n<li>\tstatic const int max_iteration = sizeof(iteration_progression) / sizeof(int);</li>\n<li>\n</li>\n<li>\tif(mode == FDB_STREAMING_MODE_WANT_ALL)</li>\n<li>\t\tmode = FDB_STREAMING_MODE_SERIAL;</li>\n</ol></code></pre>\n\n\n  </article>\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>Small is 256, medium is 1000, large is 4096, and serial/want_all are 80000.</p>\n<p>Only exact does the query in one go.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2019-04-11T18:26:46.813Z",
        "reply_count": 1,
        "reply_to_post_number": 5,
        "quote_count": 0,
        "incoming_link_count": 29,
        "reads": 54,
        "readers_count": 53,
        "score": 160.8,
        "yours": false,
        "topic_id": 1291,
        "topic_slug": "latency-of-range-queries-that-return-large-number-of-key-value-pairs",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/blob/cd5c9d91fad2c52066f1aa25d7a87672da316408/bindings/c/fdb_c.cpp#L460",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/fdb_c.cpp at cd5c9d91fad2c52066f1aa25d7a87672da316408 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 15
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 550,
          "username": "ntrhieu89",
          "name": "Hieu Nguyen",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ntrhieu89/{size}/587_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/latency-of-range-queries-that-return-large-number-of-key-value-pairs/1291/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3909,
        "name": "Hieu Nguyen",
        "username": "ntrhieu89",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ntrhieu89/{size}/587_2.png",
        "created_at": "2019-04-11T18:42:48.841Z",
        "cooked": "<p><a class=\"mention\" href=\"/u/ajbeamon\">@ajbeamon</a> Thank you so much! I will play around with these parameters and share with you if I have some interesting results.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2019-04-11T18:42:48.841Z",
        "reply_count": 1,
        "reply_to_post_number": 6,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 48,
        "readers_count": 47,
        "score": 29.6,
        "yours": false,
        "topic_id": 1291,
        "topic_slug": "latency-of-range-queries-that-return-large-number-of-key-value-pairs",
        "display_username": "Hieu Nguyen",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 12,
          "username": "ajbeamon",
          "name": "A.J. Beamon",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 550,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/latency-of-range-queries-that-return-large-number-of-key-value-pairs/1291/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3911,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-04-11T21:52:17.113Z",
        "cooked": "<p>I had also filed <a href=\"https://github.com/apple/foundationdb/issues/1454\" rel=\"nofollow noopener\">Add to the Java docs a .asList() vs .iterator() comparison</a> because you\u2019re not the first person I\u2019ve seen be confused by this and benchmark it.  If you do enough playing around to have all the content that we should add to the docs on this subject anyway, it\u2019d be wonderful for that to turn into a PR. <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=6\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"></p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2019-04-11T21:52:17.113Z",
        "reply_count": 1,
        "reply_to_post_number": 7,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 46,
        "readers_count": 45,
        "score": 29.2,
        "yours": false,
        "topic_id": 1291,
        "topic_slug": "latency-of-range-queries-that-return-large-number-of-key-value-pairs",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/issues/1454",
            "internal": false,
            "reflection": false,
            "title": "Add to the Java docs a .asList() vs .iterator() comparison \u00b7 Issue #1454 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 22
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 550,
          "username": "ntrhieu89",
          "name": "Hieu Nguyen",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ntrhieu89/{size}/587_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/latency-of-range-queries-that-return-large-number-of-key-value-pairs/1291/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3914,
        "name": "Alec Grieser",
        "username": "alloc",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
        "created_at": "2019-04-11T23:36:32.183Z",
        "cooked": "<p>I guess the other thing to bench mark would be time to first byte. In theory, one should get better performance if one needs to, for example, pipeline asynchronous tasks (one per result back from the get range query) if one uses the iterator than if one uses <code>asList</code>.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2019-04-11T23:36:32.183Z",
        "reply_count": 0,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 46,
        "readers_count": 45,
        "score": 14.2,
        "yours": false,
        "topic_id": 1291,
        "topic_slug": "latency-of-range-queries-that-return-large-number-of-key-value-pairs",
        "display_username": "Alec Grieser",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 8,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/latency-of-range-queries-that-return-large-number-of-key-value-pairs/1291/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 12937,
        "name": "Swatej",
        "username": "swatej",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/0ea827/{size}.png",
        "created_at": "2023-06-13T18:07:51.074Z",
        "cooked": "<p>Can we manual change the byte size instead of using STREAMING MODES? Let\u2019s say instead of streaming mode=small, I want chunk size to be 9000 bytes. Can I do that?</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2023-06-13T18:07:51.074Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 21,
        "readers_count": 20,
        "score": 9.2,
        "yours": false,
        "topic_id": 1291,
        "topic_slug": "latency-of-range-queries-that-return-large-number-of-key-value-pairs",
        "display_username": "Swatej",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1271,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/latency-of-range-queries-that-return-large-number-of-key-value-pairs/1291/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      3876,
      3882,
      3885,
      3888,
      3907,
      3908,
      3909,
      3911,
      3914,
      12937
    ]
  },
  "timeline_lookup": [
    [
      1,
      2387
    ],
    [
      2,
      2386
    ],
    [
      5,
      2385
    ],
    [
      10,
      861
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Latency of range queries that return large number of key-value pairs",
  "id": 1291,
  "title": "Latency of range queries that return large number of key-value pairs",
  "posts_count": 10,
  "created_at": "2019-04-10T08:50:34.502Z",
  "views": 2107,
  "reply_count": 7,
  "like_count": 2,
  "last_posted_at": "2023-06-13T18:07:51.074Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "latency-of-range-queries-that-return-large-number-of-key-value-pairs",
  "category_id": 7,
  "word_count": 1035,
  "deleted_at": null,
  "user_id": 550,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_1291",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 10,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 6,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Scanning a large range with Locality API hangs",
      "id": 2183,
      "title": "Scanning a large range with Locality API hangs",
      "slug": "scanning-a-large-range-with-locality-api-hangs",
      "posts_count": 13,
      "reply_count": 10,
      "highest_post_number": 13,
      "image_url": null,
      "created_at": "2020-06-15T13:08:44.375Z",
      "last_posted_at": "2020-08-12T17:02:10.244Z",
      "bumped": true,
      "bumped_at": "2020-08-12T17:02:10.244Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1961,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 711,
            "username": "osamarin",
            "name": "Oleg Samarin",
            "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 799,
            "username": "SarthakGhosh16",
            "name": "Sarthak Ghosh16",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/ba9def/{size}.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Why can I only range read 2857 keys?",
      "id": 1517,
      "title": "Why can I only range read 2857 keys?",
      "slug": "why-can-i-only-range-read-2857-keys",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2019-07-13T06:06:58.493Z",
      "last_posted_at": "2019-07-13T19:32:13.906Z",
      "bumped": true,
      "bumped_at": "2019-07-13T19:32:13.906Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 634,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 542,
            "username": "jonahwest",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/90db22/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Is That Possible to Force Prefetching on AsyncIterators at FDB Client?",
      "id": 2434,
      "title": "Is That Possible to Force Prefetching on AsyncIterators at FDB Client?",
      "slug": "is-that-possible-to-force-prefetching-on-asynciterators-at-fdb-client",
      "posts_count": 3,
      "reply_count": 1,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2020-11-12T10:24:46.625Z",
      "last_posted_at": "2020-11-16T17:39:48.396Z",
      "bumped": true,
      "bumped_at": "2020-11-16T17:39:48.396Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "bindings",
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 737,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 531,
            "username": "jltz",
            "name": "Jun Li",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/c0e974/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 156,
            "username": "spullara",
            "name": "Sam Pullara",
            "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Missing API for getting just the count of a key range?",
      "id": 444,
      "title": "Missing API for getting just the count of a key range?",
      "slug": "missing-api-for-getting-just-the-count-of-a-key-range",
      "posts_count": 14,
      "reply_count": 9,
      "highest_post_number": 14,
      "image_url": null,
      "created_at": "2018-05-21T09:23:36.938Z",
      "last_posted_at": "2018-09-10T16:25:03.060Z",
      "bumped": true,
      "bumped_at": "2018-09-10T16:25:03.060Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 4,
      "views": 3599,
      "category_id": 8,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 208,
            "username": "cloudspeech",
            "name": "Cloudspeech",
            "avatar_template": "/user_avatar/forums.foundationdb.org/cloudspeech/{size}/330_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 31,
            "username": "dicklacara",
            "name": "Richard Applebaum",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/8797f3/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 173,
            "username": "jkominek",
            "name": "Jay Kominek",
            "avatar_template": "/user_avatar/forums.foundationdb.org/jkominek/{size}/140_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "How does FDB execute multiple getRange requests in parallel?",
      "id": 1316,
      "title": "How does FDB execute multiple getRange requests in parallel?",
      "slug": "how-does-fdb-execute-multiple-getrange-requests-in-parallel",
      "posts_count": 6,
      "reply_count": 4,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2019-04-18T01:34:17.414Z",
      "last_posted_at": "2019-04-21T04:35:24.749Z",
      "bumped": true,
      "bumped_at": "2019-04-21T04:35:24.749Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 1690,
      "category_id": 5,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 567,
            "username": "kunren",
            "name": "Kun Ren",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/k/f475e1/{size}.png",
            "trust_level": 0
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 15,
            "username": "markus.pilman",
            "name": "Markus Pilman",
            "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 550,
        "username": "ntrhieu89",
        "name": "Hieu Nguyen",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ntrhieu89/{size}/587_2.png",
        "post_count": 4,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 12,
        "username": "ajbeamon",
        "name": "A.J. Beamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 8,
        "username": "alloc",
        "name": "Alec Grieser",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 166,
        "username": "gaurav",
        "name": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 3
      },
      {
        "id": 1271,
        "username": "swatej",
        "name": "Swatej",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/0ea827/{size}.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      }
    ],
    "created_by": {
      "id": 550,
      "username": "ntrhieu89",
      "name": "Hieu Nguyen",
      "avatar_template": "/user_avatar/forums.foundationdb.org/ntrhieu89/{size}/587_2.png"
    },
    "last_poster": {
      "id": 1271,
      "username": "swatej",
      "name": "Swatej",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/0ea827/{size}.png"
    },
    "links": [
      {
        "url": "https://github.com/apple/foundationdb/issues/1454",
        "title": "Add to the Java docs a .asList() vs .iterator() comparison \u00b7 Issue #1454 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 22,
        "user_id": 13,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://apple.github.io/foundationdb/javadoc/com/apple/foundationdb/StreamingMode.html",
        "title": "StreamingMode (FoundationDB Java Client API)",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 15,
        "user_id": 12,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/cd5c9d91fad2c52066f1aa25d7a87672da316408/bindings/c/fdb_c.cpp#L460",
        "title": "foundationdb/fdb_c.cpp at cd5c9d91fad2c52066f1aa25d7a87672da316408 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 15,
        "user_id": 12,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "http://collabedit.com/xdwbk",
        "title": null,
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 5,
        "user_id": 550,
        "domain": "collabedit.com",
        "root_domain": "collabedit.com"
      }
    ]
  },
  "bookmarks": []
}