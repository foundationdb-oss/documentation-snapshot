{
  "post_stream": {
    "posts": [
      {
        "id": 15357,
        "name": "",
        "username": "tiantian",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/ba8739/{size}.png",
        "created_at": "2025-09-22T08:07:04.234Z",
        "cooked": "<p>The cluster consists of 35 nodes, each with 2 CPU cores and 8 GB of memory. Each node runs one <code>fdbserver</code>. Among them, there are 18 storage processes, 4 transaction processes, 1 <code>grv_proxy</code>, 3 <code>commit_proxies</code>, and 3 coordinator nodes; the rest are set to 1 process each. The database is initialized with triple replication, the storage engine is <code>ssd-redwood-1</code>, and each node\u2019s configuration file was initialized as follows.</p>\n<pre><code class=\"lang-auto\">[fdbmonitor]\nuser = foundationdb\ngroup = foundationdb\n[general]\nrestart_delay = 60\ncluster_file  = /etc/foundationdb/fdb.cluster\n[fdbserver]\ncommand        = /usr/sbin/fdbserver\npublic_address = ${SELF_IP}:${FDB_PORT}\nlisten_address = 0.0.0.0:${FDB_PORT}\ndatadir        = /data0/foundationdb/data/${FDB_PORT}\nlogdir         = /data0/foundationdb/log\nmemory         = 7GiB\ncache-memory  =  4GiB\nlogsize = 10MiB\nmaxlogssize = 100MiB\nmemory-vsize = 0\nlocality-zoneid = ${CNP_ZONE}-${SELF_IP}\nlocality-data-hall = ${CNP_REGION}\nio-trust-seconds = 20\n[fdbserver.${FDB_PORT}]\nclass = ${FDB_CLASS_DEFAULT}During the YCSB benchmark, the key size was set to 128 and the value size to 1024. There were 3 clients, and each client ran the following workload:\n</code></pre>\n<p>During the YCSB benchmark, the key size was set to 128 and the value size to 1024. There were 3 clients, and each client ran the following workload:</p>\n<pre><code class=\"lang-auto\">FDB_CLUSTER_FILE=`pwd`/conf/154.cluster\nTEST_DIR=`pwd`\nnohup bin/ycsb.sh run foundationdb -s \\\n  -P workloads/workloada \\\n  -p table=usertable \\\n  -p recordcount=20000000 \\\n  -p insertstart=0 \\\n  -p operationcount=20000000 \\\n  -p insertorder=ordered \\\n  -p insertproportion=1 -p readproportion=0 -p updateproportion=0 -p scanproportion=0 \\\n  -p zeropadding=124 \\\n  -p fieldcount=1 -p fieldlength=1024 \\\n  -p foundationdb.apiversion=520 \\\n  -p foundationdb.clusterfile=\"$FDB_CLUSTER_FILE\" \\\n  -p measurementtype=hdrhistogram \\\n  -p hdrhistogram.percentiles=95,99,99.9,99.99 \\\n  -threads 1000 &gt; $TEST_DIR/write154.log 2&gt;&amp;1 &amp;\n</code></pre>\n<pre><code class=\"lang-auto\">FDB_CLUSTER_FILE=`pwd`/conf/154.cluster\nTEST_DIR=`pwd`\nnohup bin/ycsb.sh run foundationdb -s \\\n  -P workloads/workloada \\\n  -p table=usertable \\\n  -p recordcount=20000000 \\\n  -p insertstart=0 \\\n  -p operationcount=20000000 \\\n  -p scanproportion=1 -p readproportion=0 -p updateproportion=0 -p insertproportion=0 \\\n  -p requestdistribution=uniform \\\n  -p maxscanlength=100 \\\n  -p scanlengthdistribution=uniform \\\n  -p zeropadding=124 \\\n  -p fieldcount=1 \\\n  -p readallfields=true \\\n  -p foundationdb.apiversion=520 \\\n  -p foundationdb.clusterfile=$FDB_CLUSTER_FILE \\\n  -p measurementtype=hdrhistogram \\\n  -p hdrhistogram.percentiles=95,99,99.9,99.99 \\\n  -threads 1000 &gt; $TEST_DIR/read154.log 2&gt;&amp;1 &amp;\n</code></pre>\n<p>The benchmark results are shown below. Why is it that neither adding more storage processes nor adding more <code>grv_proxies</code> achieves the linear scaling shown in the official documentation? How should I configure the system to improve throughput, and which role should I expand for testing?</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://global.discourse-cdn.com/foundationdb/original/2X/5/5ef4621b124cabb2438e73692f56cc407c33e3d3.png\" data-download-href=\"/uploads/short-url/dy0tc15qCv9nkgxMnZ8i2VFQ7uz.png?dl=1\" title=\"20250922160020126\" rel=\"noopener nofollow ugc\"><img src=\"https://global.discourse-cdn.com/foundationdb/optimized/2X/5/5ef4621b124cabb2438e73692f56cc407c33e3d3_2_690x448.png\" alt=\"20250922160020126\" data-base62-sha1=\"dy0tc15qCv9nkgxMnZ8i2VFQ7uz\" width=\"690\" height=\"448\" srcset=\"https://global.discourse-cdn.com/foundationdb/optimized/2X/5/5ef4621b124cabb2438e73692f56cc407c33e3d3_2_690x448.png, https://global.discourse-cdn.com/foundationdb/optimized/2X/5/5ef4621b124cabb2438e73692f56cc407c33e3d3_2_1035x672.png 1.5x, https://global.discourse-cdn.com/foundationdb/optimized/2X/5/5ef4621b124cabb2438e73692f56cc407c33e3d3_2_1380x896.png 2x\" data-dominant-color=\"F7F8F8\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">20250922160020126</span><span class=\"informations\">1580\u00d71028 166 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2025-09-22T08:07:04.234Z",
        "reply_count": 2,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 10,
        "reads": 27,
        "readers_count": 26,
        "score": 20.2,
        "yours": false,
        "topic_id": 5086,
        "topic_slug": "we-used-ycsb-to-benchmark-foundationdb-but-the-performance-did-not-show-linear-scaling",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1611,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/we-used-ycsb-to-benchmark-foundationdb-but-the-performance-did-not-show-linear-scaling/5086/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 15360,
        "name": "Michael Stack",
        "username": "saintstack",
        "avatar_template": "/user_avatar/forums.foundationdb.org/saintstack/{size}/1844_2.png",
        "created_at": "2025-09-23T03:11:58.271Z",
        "cooked": "<aside class=\"quote no-group quote-modified\" data-username=\"tiantian\" data-post=\"1\" data-topic=\"5086\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/ba8739/48.png\" class=\"avatar\"> tiantian:</div>\n<blockquote>\n<p>\u2026</p>\n<pre><code class=\"lang-auto\">FDB_CLUSTER_FILE=`pwd`/conf/154.cluster\nTEST_DIR=`pwd`\nnohup bin/ycsb.sh run foundationdb -s \\\n  -P workloads/workloada \\\n  -p table=usertable \\\n  -p recordcount=20000000 \\\n  -p insertstart=0 \\\n  -p operationcount=20000000 \\\n  -p scanproportion=1 -p readproportion=0 -p updateproportion=0 -p insertproportion=0 \\\n  -p requestdistribution=uniform \\\n  -p maxscanlength=100 \\\n  -p scanlengthdistribution=uniform \\\n  -p zeropadding=124 \\\n  -p fieldcount=1 \\\n  -p readallfields=true \\\n  -p foundationdb.apiversion=520 \\\n  -p foundationdb.clusterfile=$FDB_CLUSTER_FILE \\\n  -p measurementtype=hdrhistogram \\\n  -p hdrhistogram.percentiles=95,99,99.9,99.99 \\\n  -threads 1000 &gt; $TEST_DIR/read154.log 2&gt;&amp;1 &amp;\n</code></pre>\n<p>The benchmark results are shown below. Why is it that neither adding more storage processes nor adding more <code>grv_proxies</code> achieves the linear scaling shown in the official documentation? How should I configure the system to improve throughput, and which role should I expand for testing?</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://global.discourse-cdn.com/foundationdb/original/2X/5/5ef4621b124cabb2438e73692f56cc407c33e3d3.png\" data-download-href=\"/uploads/short-url/dy0tc15qCv9nkgxMnZ8i2VFQ7uz.png?dl=1\" title=\"20250922160020126\" rel=\"noopener nofollow ugc\"><img src=\"https://global.discourse-cdn.com/foundationdb/optimized/2X/5/5ef4621b124cabb2438e73692f56cc407c33e3d3_2_690x448.png\" alt=\"20250922160020126\" data-base62-sha1=\"dy0tc15qCv9nkgxMnZ8i2VFQ7uz\" width=\"690\" height=\"448\" srcset=\"https://global.discourse-cdn.com/foundationdb/optimized/2X/5/5ef4621b124cabb2438e73692f56cc407c33e3d3_2_690x448.png, https://global.discourse-cdn.com/foundationdb/optimized/2X/5/5ef4621b124cabb2438e73692f56cc407c33e3d3_2_1035x672.png 1.5x, https://global.discourse-cdn.com/foundationdb/optimized/2X/5/5ef4621b124cabb2438e73692f56cc407c33e3d3_2_1380x896.png 2x\" data-dominant-color=\"F7F8F8\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">20250922160020126</span><span class=\"informations\">1580\u00d71028 166 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</blockquote>\n</aside>\n<p>Hello:</p>\n<p>Can you add a pointer to the \u2018official documentation\u2019 you refer to please? I see QPS rises w/ client count (if I read that right). 1000 threads seems like a lot in a single java process. Perhaps try with less (How much heap was the client running with?  Are the clients using any CPU?).  Any metrics on FDB processes you want to share or observations on how the cluster is doing while under load?</p>\n<p>Thank you,<br>\nS</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2025-09-23T03:11:58.271Z",
        "reply_count": 2,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 1,
        "reads": 25,
        "readers_count": 24,
        "score": 19.8,
        "yours": false,
        "topic_id": 5086,
        "topic_slug": "we-used-ycsb-to-benchmark-foundationdb-but-the-performance-did-not-show-linear-scaling",
        "display_username": "Michael Stack",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1456,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/we-used-ycsb-to-benchmark-foundationdb-but-the-performance-did-not-show-linear-scaling/5086/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 15361,
        "name": "Jacksen",
        "username": "jacksen",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/ea666f/{size}.png",
        "created_at": "2025-09-23T05:51:26.699Z",
        "cooked": "<p>Worth testing with more clients</p>\n<p>The FoundationDB client network thread is quite limited regarding throughput which results in all kinds of issues, like p99 spikes</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2025-09-23T05:51:26.699Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 23,
        "readers_count": 22,
        "score": 19.4,
        "yours": false,
        "topic_id": 5086,
        "topic_slug": "we-used-ycsb-to-benchmark-foundationdb-but-the-performance-did-not-show-linear-scaling",
        "display_username": "Jacksen",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1590,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/we-used-ycsb-to-benchmark-foundationdb-but-the-performance-did-not-show-linear-scaling/5086/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 15363,
        "name": "",
        "username": "tiantian",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/ba8739/{size}.png",
        "created_at": "2025-09-24T07:19:39.246Z",
        "cooked": "<p>Hello, the official benchmark link is as follows: <a href=\"https://apple.github.io/foundationdb/performance.html\" rel=\"noopener nofollow ugc\">https://apple.github.io/foundationdb/performance.html</a>. Each client was running on a separate machine, independent of the cluster machines.</p>\n<p>Subsequently, we modified the cluster configuration to 100 storage processes, 10 transaction processes, 10 GRV proxies, 10 commit proxies, and 3 coordinator nodes. We conducted YCSB stress tests with the same 3 clients and 1,000 threads, but the cluster performance did not increase with the addition of more roles\u2014it remained roughly the same as the data shown in the table.</p>\n<p>Later, we scaled the client size to 30, with each client running 10 YCSB programs for testing. The read-write mix was 7:3, and the highest QPS achieved was 1.8 million per second.</p>\n<p>Regarding the cluster load, we parsed the files obtained from the \u201cstatus json\u201d and derived a series of cluster metrics. However, there are too many metrics to analyze easily. Could you please advise which metrics we should focus on in this situation?</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2025-09-24T07:19:39.246Z",
        "reply_count": 0,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 22,
        "readers_count": 21,
        "score": 4.2,
        "yours": false,
        "topic_id": 5086,
        "topic_slug": "we-used-ycsb-to-benchmark-foundationdb-but-the-performance-did-not-show-linear-scaling",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://apple.github.io/foundationdb/performance.html",
            "internal": false,
            "reflection": false,
            "title": "Performance \u2014 FoundationDB ON documentation",
            "clicks": 4
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 1456,
          "username": "saintstack",
          "name": "Michael Stack",
          "avatar_template": "/user_avatar/forums.foundationdb.org/saintstack/{size}/1844_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1611,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/we-used-ycsb-to-benchmark-foundationdb-but-the-performance-did-not-show-linear-scaling/5086/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 15364,
        "name": "",
        "username": "tiantian",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/ba8739/{size}.png",
        "created_at": "2025-09-24T07:28:30.469Z",
        "cooked": "<p>We scaled the client size to 20, with each client running 10 YCSB programs for testing under a 7:3 read-write mix. The peak QPS reached 1.75 million per second. After further scaling the client size to 30, the QPS reached 1.872 million per second, with a P99 latency around 250 ms.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2025-09-24T07:28:30.469Z",
        "reply_count": 0,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 20,
        "readers_count": 19,
        "score": 3.8,
        "yours": false,
        "topic_id": 5086,
        "topic_slug": "we-used-ycsb-to-benchmark-foundationdb-but-the-performance-did-not-show-linear-scaling",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 1590,
          "username": "jacksen",
          "name": "Jacksen",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/ea666f/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1611,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/we-used-ycsb-to-benchmark-foundationdb-but-the-performance-did-not-show-linear-scaling/5086/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 15368,
        "name": "",
        "username": "tiantian",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/ba8739/{size}.png",
        "created_at": "2025-09-25T02:05:53.012Z",
        "cooked": "<p>Hello, we specified process classes in the .conf file, which would assume different roles, preventing a single node from assuming multiple roles. We then increased the number of specific roles for benchmarking. However, we encountered a problem. After scaling up the stoarge nodes to 1,000, the transaction count to 50, the resolution count to 10, the grv-proxy count to 50, the commit-proxy count to 50, and the stateless count to 10, the status displayed the following message for ten hours without changing, with the disk space used continuously increasing:</p>\n<pre><code class=\"lang-auto\">fdb&gt; status\n\nUsing cluster file `/etc/foundationdb/fdb.cluster'.\n\nConfiguration:\n  Redundancy mode        - triple\n  Storage engine         - ssd-2\n  Log engine             - ssd-2\n  Encryption at-rest     - disabled\n  Coordinators           - 5\n  Desired Commit Proxies - 50\n  Desired GRV Proxies    - 50\n  Desired Resolvers      - 10\n  Desired Logs           - 50\n  Usable Regions         - 1\n\nCluster:\n  FoundationDB processes - 1170\n  Zones                  - 1170\n  Machines               - 1170\n  Memory availability    - 7.0 GB per process on machine with least available\n  Fault Tolerance        - 2 zones\n  Server time            - 09/25/25 09:56:14\n\nData:\n  Replication health     - (Re)initializing automatic data distribution\n  Moving data            - unknown (initializing)\n  Sum of key-value sizes - unknown\n  Disk space used        - 1.317 TB\n</code></pre>\n<p>After checking the \u201cstatus json\u201d, I found that data_distributor frequently switches between stateless processes, and the CPU usage is almost always above 90%. What is causing this problem? How can I solve this problem and restore the database to a healthy state?</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2025-09-25T02:05:53.012Z",
        "reply_count": 0,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 21,
        "readers_count": 20,
        "score": 4.0,
        "yours": false,
        "topic_id": 5086,
        "topic_slug": "we-used-ycsb-to-benchmark-foundationdb-but-the-performance-did-not-show-linear-scaling",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 1456,
          "username": "saintstack",
          "name": "Michael Stack",
          "avatar_template": "/user_avatar/forums.foundationdb.org/saintstack/{size}/1844_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1611,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/we-used-ycsb-to-benchmark-foundationdb-but-the-performance-did-not-show-linear-scaling/5086/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 15371,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2025-09-25T23:12:12.366Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"tiantian\" data-post=\"1\" data-topic=\"5086\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/ba8739/48.png\" class=\"avatar\"> tiantian:</div>\n<blockquote>\n<p><code>memory         = 7GiB</code></p>\n</blockquote>\n</aside>\n<p>I\u2019m a little suspicious that since you lowered the memory ceiling from the recommended 8GB to 7GB, your data distributor is probably OOMing itself because all the memory tuning knobs within FDB are set assuming 8GB available per process.  I\u2019d suggest sticking with the 8GB, and if you find that you need to feed it more than 8GB for it to stop OOMing that\u2019s worth filing a bug over.</p>\n<p>Also note that desired != actual.  It\u2019d be good to double check from status json how many of which roles were actually recruited based upon your cluster.</p>\n<p>I\u2019d also expect that you\u2019d need to run more clients than transaction subsystem processes.  Do check your client FDB Network Thread CPU utilization, and either change your YCSB tester to use <code>client_threads_per_version</code> to run multiple FDB network threads (and then round-robin requests across multiple database objects, or partition threads to databases, or something), or just run more YCSB testers that are set to run less QPS per client.</p>\n<p>Also be aware that YCSB testing for FoundationDB will be less representative of real workloads than it might be for other key-value stores.  FoundationDB has a higher fixed cost for starting a transaction as part of the GetReadVersion call, and YCSB implementations typically do one read or one write per transaction.</p>\n<p>I\u2019d make sure that you can first get something that looks like a reasonable saturation and throughput on a small cluster to figure out the about right ratio of log:storage, grv/commit proxies, and number of clients for your benchmark, and then scale up at full multiples.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2025-09-25T23:12:12.366Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 1,
        "reads": 20,
        "readers_count": 19,
        "score": 23.8,
        "yours": false,
        "topic_id": 5086,
        "topic_slug": "we-used-ycsb-to-benchmark-foundationdb-but-the-performance-did-not-show-linear-scaling",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/we-used-ycsb-to-benchmark-foundationdb-but-the-performance-did-not-show-linear-scaling/5086/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 15378,
        "name": "",
        "username": "simenl",
        "avatar_template": "/user_avatar/forums.foundationdb.org/simenl/{size}/1671_2.png",
        "created_at": "2025-10-03T13:56:12.555Z",
        "cooked": "<p>Have you tried with <code>insertorder=hashed</code>?</p>\n<p>I am taking a guess here:</p>\n<pre><code class=\"lang-auto\">-p insertorder=ordered\n</code></pre>\n<p>Would cause the key-value pairs to be written ordered by the key, likely causing all writes to hit the same storage processes. I.e. the write load would not be evenly distributed across the processes.</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2025-10-03T13:56:12.555Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 16,
        "readers_count": 15,
        "score": 7.8,
        "yours": false,
        "topic_id": 5086,
        "topic_slug": "we-used-ycsb-to-benchmark-foundationdb-but-the-performance-did-not-show-linear-scaling",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 715,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/we-used-ycsb-to-benchmark-foundationdb-but-the-performance-did-not-show-linear-scaling/5086/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 15388,
        "name": "",
        "username": "tiantian",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/ba8739/{size}.png",
        "created_at": "2025-10-11T09:10:12.439Z",
        "cooked": "<p>Yes, we have tried using <code>insertorder=hashed</code>, but the performance was basically the same \u2014 we didn\u2019t observe any significant improvement compared to the default setting.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2025-10-11T09:10:12.439Z",
        "reply_count": 0,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 11,
        "readers_count": 10,
        "score": 1.8,
        "yours": false,
        "topic_id": 5086,
        "topic_slug": "we-used-ycsb-to-benchmark-foundationdb-but-the-performance-did-not-show-linear-scaling",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 715,
          "username": "simenl",
          "name": "",
          "avatar_template": "/user_avatar/forums.foundationdb.org/simenl/{size}/1671_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1611,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/we-used-ycsb-to-benchmark-foundationdb-but-the-performance-did-not-show-linear-scaling/5086/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      15357,
      15360,
      15361,
      15363,
      15364,
      15368,
      15371,
      15378,
      15388
    ]
  },
  "timeline_lookup": [
    [
      1,
      30
    ],
    [
      2,
      29
    ],
    [
      4,
      28
    ],
    [
      6,
      27
    ],
    [
      7,
      26
    ],
    [
      8,
      18
    ],
    [
      9,
      11
    ]
  ],
  "suggested_topics": [],
  "tags": [
    "performance",
    "operator"
  ],
  "tags_descriptions": {},
  "fancy_title": "We used YCSB to benchmark FoundationDB, but the performance did not show linear scaling",
  "id": 5086,
  "title": "We used YCSB to benchmark FoundationDB, but the performance did not show linear scaling",
  "posts_count": 9,
  "created_at": "2025-09-22T08:07:04.180Z",
  "views": 178,
  "reply_count": 4,
  "like_count": 1,
  "last_posted_at": "2025-10-11T09:10:12.439Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "we-used-ycsb-to-benchmark-foundationdb-but-the-performance-did-not-show-linear-scaling",
  "category_id": 5,
  "word_count": 1475,
  "deleted_at": null,
  "user_id": 1611,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": "https://global.discourse-cdn.com/foundationdb/optimized/2X/5/5ef4621b124cabb2438e73692f56cc407c33e3d3_2_1024x666.png",
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_5086",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 9,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 2,
  "participant_count": 5,
  "show_read_indicator": false,
  "thumbnails": [
    {
      "max_width": null,
      "max_height": null,
      "width": 1580,
      "height": 1028,
      "url": "https://global.discourse-cdn.com/foundationdb/original/2X/5/5ef4621b124cabb2438e73692f56cc407c33e3d3.png"
    },
    {
      "max_width": 1024,
      "max_height": 1024,
      "width": 1024,
      "height": 666,
      "url": "https://global.discourse-cdn.com/foundationdb/optimized/2X/5/5ef4621b124cabb2438e73692f56cc407c33e3d3_2_1024x666.png"
    }
  ],
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "We used YCSB to benchmark FoundationDB, but the performance results did not show linear scaling",
      "id": 5085,
      "title": "We used YCSB to benchmark FoundationDB, but the performance results did not show linear scaling",
      "slug": "we-used-ycsb-to-benchmark-foundationdb-but-the-performance-results-did-not-show-linear-scaling",
      "posts_count": 4,
      "reply_count": 2,
      "highest_post_number": 4,
      "image_url": "https://global.discourse-cdn.com/foundationdb/optimized/2X/5/5ef4621b124cabb2438e73692f56cc407c33e3d3_2_1024x666.png",
      "created_at": "2025-09-22T08:01:44.295Z",
      "last_posted_at": "2025-09-25T04:29:56.705Z",
      "bumped": true,
      "bumped_at": "2025-09-25T04:29:56.705Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance",
        "operator"
      ],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 96,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 1611,
            "username": "tiantian",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/ba8739/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 38,
            "username": "panghy",
            "name": "Clement Pang",
            "avatar_template": "/user_avatar/forums.foundationdb.org/panghy/{size}/19_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Why doesn&rsquo;t my cluster performance scale when I double the number of machines?",
      "id": 640,
      "title": "Why doesn't my cluster performance scale when I double the number of machines?",
      "slug": "why-doesnt-my-cluster-performance-scale-when-i-double-the-number-of-machines",
      "posts_count": 21,
      "reply_count": 16,
      "highest_post_number": 21,
      "image_url": null,
      "created_at": "2018-08-15T09:26:47.588Z",
      "last_posted_at": "2018-08-17T07:32:00.164Z",
      "bumped": true,
      "bumped_at": "2018-08-17T07:32:00.164Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 3323,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 255,
            "username": "aqua",
            "name": "Matt Lohier",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/b9bd4f/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 68,
            "username": "daverosenthal",
            "name": "Dave Rosenthal",
            "avatar_template": "/user_avatar/forums.foundationdb.org/daverosenthal/{size}/51_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 321,
            "username": "poma",
            "name": "Roman Semenov",
            "avatar_template": "/user_avatar/forums.foundationdb.org/poma/{size}/325_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Benchmarking FoundationDB on AWS",
      "id": 410,
      "title": "Benchmarking FoundationDB on AWS",
      "slug": "benchmarking-foundationdb-on-aws",
      "posts_count": 19,
      "reply_count": 12,
      "highest_post_number": 19,
      "image_url": null,
      "created_at": "2018-05-14T09:55:57.604Z",
      "last_posted_at": "2018-10-30T16:01:15.283Z",
      "bumped": true,
      "bumped_at": "2018-10-30T16:01:15.283Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 9035,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 118,
            "username": "abdullin",
            "name": "Rinat Abdullin",
            "avatar_template": "/user_avatar/forums.foundationdb.org/abdullin/{size}/83_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 257,
            "username": "cih.y2k",
            "name": "cih.y2k",
            "avatar_template": "/user_avatar/forums.foundationdb.org/cih.y2k/{size}/423_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 369,
            "username": "ricky.saltzer",
            "name": "Ricky Saltzer",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/r/f17d59/{size}.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Cluster tuning cookbook",
      "id": 520,
      "title": "Cluster tuning cookbook",
      "slug": "cluster-tuning-cookbook",
      "posts_count": 27,
      "reply_count": 19,
      "highest_post_number": 27,
      "image_url": null,
      "created_at": "2018-06-19T14:35:25.802Z",
      "last_posted_at": "2019-02-01T12:38:24.733Z",
      "bumped": true,
      "bumped_at": "2019-02-01T12:38:24.733Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 12,
      "views": 8885,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 310,
            "username": "shamatar",
            "name": "Alexander",
            "avatar_template": "/user_avatar/forums.foundationdb.org/shamatar/{size}/315_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 41,
            "username": "amirouche",
            "name": "Amirouche",
            "avatar_template": "/user_avatar/forums.foundationdb.org/amirouche/{size}/1911_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 502,
            "username": "nikolas.ioannou",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/n/5daacb/{size}.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Scalability performance benchmark",
      "id": 1261,
      "title": "Scalability performance benchmark",
      "slug": "scalability-performance-benchmark",
      "posts_count": 7,
      "reply_count": 3,
      "highest_post_number": 7,
      "image_url": null,
      "created_at": "2019-03-26T15:55:52.863Z",
      "last_posted_at": "2019-03-27T00:44:37.163Z",
      "bumped": true,
      "bumped_at": "2019-03-27T00:44:37.163Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 6,
      "views": 2633,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 549,
            "username": "nitins64",
            "name": "Nitin Sharma",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/n/7993a0/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 1611,
        "username": "tiantian",
        "name": "",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/ba8739/{size}.png",
        "post_count": 5,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 715,
        "username": "simenl",
        "name": "",
        "avatar_template": "/user_avatar/forums.foundationdb.org/simenl/{size}/1671_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 1456,
        "username": "saintstack",
        "name": "Michael Stack",
        "avatar_template": "/user_avatar/forums.foundationdb.org/saintstack/{size}/1844_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 1590,
        "username": "jacksen",
        "name": "Jacksen",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/ea666f/{size}.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      }
    ],
    "created_by": {
      "id": 1611,
      "username": "tiantian",
      "name": "",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/ba8739/{size}.png"
    },
    "last_poster": {
      "id": 1611,
      "username": "tiantian",
      "name": "",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/ba8739/{size}.png"
    },
    "links": [
      {
        "url": "https://apple.github.io/foundationdb/performance.html",
        "title": "Performance \u2014 FoundationDB ON documentation",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 4,
        "user_id": 1611,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      }
    ]
  },
  "bookmarks": []
}