{
  "post_stream": {
    "posts": [
      {
        "id": 8064,
        "name": "Mohammad Roohitavaf",
        "username": "roohitavaf",
        "avatar_template": "/user_avatar/forums.foundationdb.org/roohitavaf/{size}/1026_2.png",
        "created_at": "2020-10-12T05:42:44.163Z",
        "cooked": "<p>Hi,</p>\n<p>I have a question regarding the read version. I appreciate it if you help me understand.</p>\n<p>For read-write transactions, why we need to get the Read Version and why the database must return values with version no greater than the read version? I know this is for isolation, i.e., to make sure the transaction is reading the databases at a point in time defined by the read version. However, if the database does not return the most recent version while there is such a version, then the transaction is guaranteed to be aborted at the conflict checking time.</p>\n<p>For example: suppose I have version 6 and 4 for a key. A transaction is assigned read version 5. When the client wants to read the key, the database returns version 4, as 6 is greater than 5. But by doing so, we know for sure the transaction will be aborted at the commit time because this transaction will be assigned a commit timestamp larger than any previously committed transaction, i.e. larger than 6 e.g. 7. So now we have a version with a timestamp less than 7 that is not read by the transaction. Thus, conflict checking will abort it.</p>\n<p>Shouldn\u2019t the client just read the most recent version that we have for each key? We shouldn\u2019t worry about reading an inconsistent view; If there is any conflict, that\u2019s fine, as the conflict checking will abort the transaction. On the other hand, if deliberately don\u2019t return the most recent version, we guarantee that the transaction will abort.</p>\n<p>Thanks</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-10-12T05:42:44.163Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 604,
        "reads": 71,
        "readers_count": 70,
        "score": 3034.2,
        "yours": false,
        "topic_id": 2386,
        "topic_slug": "why-read-version-is-necessary-for-read-write-transactions",
        "display_username": "Mohammad Roohitavaf",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 805,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-read-version-is-necessary-for-read-write-transactions/2386/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 8066,
        "name": "gaurav",
        "username": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "created_at": "2020-10-12T12:50:50.302Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"roohitavaf\" data-post=\"1\" data-topic=\"2386\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/roohitavaf/48/1026_2.png\" class=\"avatar\"> roohitavaf:</div>\n<blockquote>\n<p>However, if the database does not return the most recent version while there is such a version, then the transaction is guaranteed to be aborted at the conflict checking time</p>\n</blockquote>\n</aside>\n<p>This is not true - a conflict occurs only if some key (or a key range) actually read in your transaction has undergone a change between getting the read-version and the commit. Db guarantees a readversion &gt; any version already committed versions.</p>\n<aside class=\"quote no-group\" data-username=\"roohitavaf\" data-post=\"1\" data-topic=\"2386\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/roohitavaf/48/1026_2.png\" class=\"avatar\"> roohitavaf:</div>\n<blockquote>\n<p>suppose I have version 6 and 4 for a key. A transaction is assigned read version 5. When the client wants to read the key, the database returns version 4, as 6 is greater than 5.</p>\n</blockquote>\n</aside>\n<p>In this case, Db will return 6 as the read-version. Read-version is a global property, across all the keys. If version 6 was committed before the transaction was started, then it is guaranteed that the transaction will be assigned a read version &gt; 6.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-10-12T12:52:23.900Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 6,
        "reads": 68,
        "readers_count": 67,
        "score": 48.6,
        "yours": false,
        "topic_id": 2386,
        "topic_slug": "why-read-version-is-necessary-for-read-write-transactions",
        "display_username": "gaurav",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 166,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-read-version-is-necessary-for-read-write-transactions/2386/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8068,
        "name": "Mohammad Roohitavaf",
        "username": "roohitavaf",
        "avatar_template": "/user_avatar/forums.foundationdb.org/roohitavaf/{size}/1026_2.png",
        "created_at": "2020-10-12T15:00:31.342Z",
        "cooked": "<p>Thanks for the replay.</p>\n<p>What if at the time of getting read version, 6 is not committed yet. So database return 5 for example. But while the transaction is working on its logic someone else commits a transaction with timestamp 6.</p>\n<p>T1 starts and receives read version 5.<br>\nT2 commits with version 6 and writes a version for item x.<br>\nT1 reads x, but since its read version is 5, we don\u2019t return what is written by T2.<br>\nT1 will abort at conflict checking.</p>\n<p>If we would have returned the most recent version that we had (no matter what is read version), T1 didn\u2019t have to abort.</p>\n<p>In any case, whatever has happened in the system, do you agree when the client wants to read a key, and we see we have a version with a timestamp higher than the read-version, the transaction will abort? If I have versions 4 and 6 for x, and the client is requesting to read x with read version 5 (as I explained above how it can happen), for sure this transaction will be aborted if we return 4. As at the conflict checking we see the version read by the transaction has been overwritten.</p>\n<p>Thanks</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-10-12T15:00:31.342Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 5,
        "reads": 58,
        "readers_count": 57,
        "score": 41.6,
        "yours": false,
        "topic_id": 2386,
        "topic_slug": "why-read-version-is-necessary-for-read-write-transactions",
        "display_username": "Mohammad Roohitavaf",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 166,
          "username": "gaurav",
          "name": "gaurav",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 805,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-read-version-is-necessary-for-read-write-transactions/2386/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8069,
        "name": "gaurav",
        "username": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "created_at": "2020-10-12T15:04:17.009Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"roohitavaf\" data-post=\"3\" data-topic=\"2386\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/roohitavaf/48/1026_2.png\" class=\"avatar\"> roohitavaf:</div>\n<blockquote>\n<p>In any case, whatever has happened in the system, do you agree when the client wants to read a key, and we see we have a version with a timestamp higher than the read-version, the transaction will abort? If I have versions 4 and 6 for x, and the client is requesting to read x with read version 5 (as I explained above how it can happen), for sure this transaction will be aborted if we return 4. As at the conflict checking we see the version read by the transaction has been overwritten.</p>\n</blockquote>\n</aside>\n<p>Yes, as you have explained the scenario, T1 will conflict.</p>\n<p>Maybe, I was unable to catch your suggestion from the first post?</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-10-12T15:04:17.009Z",
        "reply_count": 0,
        "reply_to_post_number": 3,
        "quote_count": 1,
        "incoming_link_count": 5,
        "reads": 54,
        "readers_count": 53,
        "score": 35.8,
        "yours": false,
        "topic_id": 2386,
        "topic_slug": "why-read-version-is-necessary-for-read-write-transactions",
        "display_username": "gaurav",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 166,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-read-version-is-necessary-for-read-write-transactions/2386/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8071,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2020-10-12T16:48:59.945Z",
        "cooked": "<p>Have a look at this proposal to have reads abort the transaction earlier if you try to read a value that has changed:</p>\n<aside class=\"onebox githubissue\">\n  <header class=\"source\">\n      <a href=\"https://github.com/apple/foundationdb/issues/3290\" target=\"_blank\" rel=\"noopener\">github.com/apple/foundationdb</a>\n  </header>\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Issue\">\n\t  <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 14 16\" aria-hidden=\"true\"><path d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/apple/foundationdb/issues/3290\" target=\"_blank\" rel=\"noopener\">Abort conflicting transactions before commit</a>\n    </h4>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2020-06-04\" data-time=\"22:21:15\" data-timezone=\"UTC\">10:21PM - 04 Jun 20 UTC</span>\n      </div>\n\n\n      <div class=\"user\">\n        <a href=\"https://github.com/sfc-gh-anoyes\" target=\"_blank\" rel=\"noopener\">\n          <img alt=\"sfc-gh-anoyes\" src=\"https://global.discourse-cdn.com/foundationdb/original/1X/c549de54e6a7695ab35f1de0c83fb01e55e6d16e.png\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\">\n          sfc-gh-anoyes\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=\"github-row\">\n  <p class=\"github-content\">Transactions that have conflicts waste server resources. Maybe you do a bunch of reads and send a bunch of mutations to...</p>\n</div>\n\n<div class=\"labels\">\n</div>\n\n  </article>\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n  <div style=\"clear: both\"></div>\n</aside>\n",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-10-12T16:48:59.945Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 49,
        "readers_count": 48,
        "score": 34.8,
        "yours": false,
        "topic_id": 2386,
        "topic_slug": "why-read-version-is-necessary-for-read-write-transactions",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/issues/3290",
            "internal": false,
            "reflection": false,
            "title": "Abort conflicting transactions before commit \u00b7 Issue #3290 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 26
          },
          {
            "url": "https://github.com/sfc-gh-anoyes",
            "internal": false,
            "reflection": false,
            "title": "sfc-gh-anoyes (Andrew Noyes) \u00b7 GitHub",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-read-version-is-necessary-for-read-write-transactions/2386/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8072,
        "name": "Mohammad Roohitavaf",
        "username": "roohitavaf",
        "avatar_template": "/user_avatar/forums.foundationdb.org/roohitavaf/{size}/1026_2.png",
        "created_at": "2020-10-12T17:32:46.366Z",
        "cooked": "<p>Thanks, <a class=\"mention\" href=\"/u/ajbeamon\">@ajbeamon</a>.</p>\n<p>Aborting transactions as soon as we see that the read version causes reading stale versions is one solution to save time and resources.  But what I am saying is we don\u2019t need read version for read-write transactions at all. For read-write transactions that need to be committed, we can freely read the most recent version that we have for each key. If there is an issue that causes a violation of serializability, that\u2019s fine, as conflict checking will abort it. By reading the most recent version we increase the chance of the transaction being committed.</p>\n<p>I think we need to get a read version only for read-only snapshot reads.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-10-12T17:32:46.366Z",
        "reply_count": 2,
        "reply_to_post_number": 5,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 46,
        "readers_count": 45,
        "score": 29.2,
        "yours": false,
        "topic_id": 2386,
        "topic_slug": "why-read-version-is-necessary-for-read-write-transactions",
        "display_username": "Mohammad Roohitavaf",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 12,
          "username": "ajbeamon",
          "name": "A.J. Beamon",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 805,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-read-version-is-necessary-for-read-write-transactions/2386/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8073,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2020-10-12T17:43:41.090Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"roohitavaf\" data-post=\"6\" data-topic=\"2386\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/roohitavaf/48/1026_2.png\" class=\"avatar\"> roohitavaf:</div>\n<blockquote>\n<p>By reading the most recent version we increase the chance of the transaction being committed.</p>\n</blockquote>\n</aside>\n<p>I think that\u2019s only true insomuch as there is a delay between getting a read version and your first read. Once you\u2019ve done any read, you are bound to that version at least in the sense that it will be the basis for determining whether you have a conflict. Any reads that happen at newer versions in subsequent reads would be grounds for conflicting the transaction.</p>\n<p>Some other concerns \u2013</p>\n<ol>\n<li>If you know that your transaction is going to conflict, why read the newer version at all? Doing so also exposes you to seeing inconsistent versions of the data, which could be bad if you have any other side-effects besides committing.</li>\n<li>Reading the latest data is prone to another problem \u2013 namely that you may see data that hasn\u2019t actually been committed. Data can move to the storage server prior to the commit being fully realized.</li>\n</ol>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-10-12T17:43:41.090Z",
        "reply_count": 0,
        "reply_to_post_number": 6,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 43,
        "readers_count": 42,
        "score": 8.6,
        "yours": false,
        "topic_id": 2386,
        "topic_slug": "why-read-version-is-necessary-for-read-write-transactions",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-read-version-is-necessary-for-read-write-transactions/2386/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8074,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2020-10-12T19:00:40.330Z",
        "cooked": "<p>If you\u2019re always reading the most recent version, then your transaction body will see non-serializable results during execution, as no promises are made about the consistency of reads between two (or more) different keys.  Any execution that sees non-serializable results will abort at conflict checking time, but this still breaks developer expectations.  (I\u2019ve worked on a system that behaves in this fashion, and it\u2019s difficult to widely communicate and explain that you can\u2019t rely upon nor <code>ASSERT()</code> database invariants in transaction bodies.) But strictly in terms of serializable correctness, I agree with you.</p>\n<p>There\u2019s a couple other purposes that GetReadVersion servers that one would need to replace in order to implement such a feature.  AJ mentioned one, of an internal optimization within FoundationDB that allows data which isn\u2019t committed yet to propagate to storage servers, and the GRV logic is what prevents clients from seeing that uncommitted data.  GRVs also serve as rate limiting, which would need to be done somehow else.</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-10-12T19:00:40.330Z",
        "reply_count": 1,
        "reply_to_post_number": 6,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 38,
        "readers_count": 37,
        "score": 22.6,
        "yours": false,
        "topic_id": 2386,
        "topic_slug": "why-read-version-is-necessary-for-read-write-transactions",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 805,
          "username": "roohitavaf",
          "name": "Mohammad Roohitavaf",
          "avatar_template": "/user_avatar/forums.foundationdb.org/roohitavaf/{size}/1026_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-read-version-is-necessary-for-read-write-transactions/2386/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8075,
        "name": "Mohammad Roohitavaf",
        "username": "roohitavaf",
        "avatar_template": "/user_avatar/forums.foundationdb.org/roohitavaf/{size}/1026_2.png",
        "created_at": "2020-10-12T20:31:11.727Z",
        "cooked": "<p>I see what you mean, and I mentioned at the beginning that I know we do that for isolation. However, not returning the most recent version to keep snapshot consistency to avoid abortion, does not help; the transaction will abort. In other words, database doesn\u2019t return the latest version it to keep the snapshot consistent. But by not returning the most recent version it guarantees that your transaction will abort.</p>\n<p>But regarding uncommitted versions showing up in the version chain I see your point. If we return most recent version we will violate serializability. I didn\u2019t consider uncommitted versions. But again note that since I think no version would ever show up in the version chain before at least resolvers consider it as committed, not returning the most recent version will guarantee abortion.</p>\n<p>I think as soon as we see there is a version higher than read version, we shouldn\u2019t bother continuing our transaction, as it will be aborted. Whether this newer version is committed or not.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-10-12T20:31:11.727Z",
        "reply_count": 1,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 10,
        "reads": 37,
        "readers_count": 36,
        "score": 62.4,
        "yours": false,
        "topic_id": 2386,
        "topic_slug": "why-read-version-is-necessary-for-read-write-transactions",
        "display_username": "Mohammad Roohitavaf",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 805,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-read-version-is-necessary-for-read-write-transactions/2386/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8076,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2020-10-12T20:59:42.991Z",
        "cooked": "<p>I\u2019m getting a bit confused on which side of this we\u2019re discussing here\u2026</p>\n<p>If this is the \u201cI have a read version, and a value with version &gt;= my current version is available on the storage server\u201d case, then that\u2019s exactly what <a href=\"https://github.com/apple/foundationdb/issues/3290\">Abort conflicting transactions before commit</a> is about.  If we\u2019re discussing the \u201calways read the most recent version, and rely on the resolver to reject non-serializable reads in read-write transactions\u201d, then we don\u2019t have an issue open for that.  You, or someone else, is welcome to file one.</p>\n<p>There\u2019s differing amounts of client changes needed to support each of these approaches.  Currently there do exist \u201cread only\u201d transaction objects and \u201cread-write\u201d transaction objects in some client bindings, but the only difference is that the read-only transaction objects hide the write methods.  To the FoundationDB client, we mostly can\u2019t tell the difference between a read-only transaction and a read-write one \u2014 a read-write transaction is basically a read-only one that you call <code>commit()</code> on.</p>\n<p>The proposal to allow aborting transactions based on read results before commit is a way to save work within our current model.  Read-write transactions would still read a consistent snapshot, but we\u2019d be more intelligent about not committing transactions that we know will fail conflict checking.  Due to this mostly being compatible with the current model, I think we could get away with just offering \u201cabort on reads\u201d as a transaction option, and most people could upgrade their existing code easily.</p>\n<p>What you\u2019ve proposed would require a much stronger separation in the client between read-only transactions and read-write transactions.  Read-only transactions read from a consistent snapshot and will never abort.  Read-write transactions may see non-serializable read results, but have a higher chance at committing than current read-write transactions.  Due to the semantics change, I don\u2019t think there\u2019s as clear of an easy upgrade path, and it\u2019d be more disruptive to clients to drive for adoption on this.  Some users would happily accept the extra work for the reduced conflict rate.</p>\n<p>I\u2019m not claiming either approach is better or worse.  I think pushing for users to more clearly annotate read-only transactions from read-write ones is a great long-term goal anyway.</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-10-12T20:59:42.991Z",
        "reply_count": 1,
        "reply_to_post_number": 9,
        "quote_count": 0,
        "incoming_link_count": 8,
        "reads": 36,
        "readers_count": 35,
        "score": 52.2,
        "yours": false,
        "topic_id": 2386,
        "topic_slug": "why-read-version-is-necessary-for-read-write-transactions",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/issues/3290",
            "internal": false,
            "reflection": false,
            "title": "Abort conflicting transactions before commit \u00b7 Issue #3290 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 11
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 805,
          "username": "roohitavaf",
          "name": "Mohammad Roohitavaf",
          "avatar_template": "/user_avatar/forums.foundationdb.org/roohitavaf/{size}/1026_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-read-version-is-necessary-for-read-write-transactions/2386/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8078,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2020-10-13T01:40:32.990Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"alexmiller\" data-post=\"10\" data-topic=\"2386\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/alexmiller/48/326_2.png\" class=\"avatar\"> alexmiller:</div>\n<blockquote>\n<p>If we\u2019re discussing the \u201calways read the most recent version, and rely on the resolver to reject non-serializable reads in read-write transactions\u201d</p>\n</blockquote>\n</aside>\n<p>Ok, I think I understand the idea here, and I believe this would also require us sending versions for all of the read conflict ranges in a transaction, is that right? The optimization you\u2019d have available can be thought of as a chance to upgrade any older reads to your newest read version if they weren\u2019t modified between their read version and the newest one, but you wouldn\u2019t want to assume all reads happened at the oldest version.</p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-10-13T01:40:32.990Z",
        "reply_count": 1,
        "reply_to_post_number": 10,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 31,
        "readers_count": 30,
        "score": 11.2,
        "yours": false,
        "topic_id": 2386,
        "topic_slug": "why-read-version-is-necessary-for-read-write-transactions",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-read-version-is-necessary-for-read-write-transactions/2386/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8079,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2020-10-13T02:04:59.013Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"ajbeamon\" data-post=\"11\" data-topic=\"2386\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>I believe this would also require us sending versions for all of the read conflict ranges in a transaction, is that right?</p>\n</blockquote>\n</aside>\n<p>Precisely, yes.  And that \u201cchance to upgrade\u201d is the increased chance of a transaction committing.  What actual percent drop you\u2019d see in conflicting transactions in realistic workloads though, I have no idea.</p>\n<p>You could probably do something a little more bandwidth optimal than sending one version per read range, I suppose.  If <code>x</code> was written at versions <code>10</code> and <code>20</code>, then anything in between works.  You could probably thread a hint through with the read so that if version V is the same as the most recent version, then return V, otherwise return the most recent version.  Then you\u2019d at least be able to have one version apply to a vector of ranges, but, still extra overhead that I hadn\u2019t mentally factored in before.</p>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-10-13T02:04:59.013Z",
        "reply_count": 1,
        "reply_to_post_number": 11,
        "quote_count": 1,
        "incoming_link_count": 1,
        "reads": 31,
        "readers_count": 30,
        "score": 16.2,
        "yours": false,
        "topic_id": 2386,
        "topic_slug": "why-read-version-is-necessary-for-read-write-transactions",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-read-version-is-necessary-for-read-write-transactions/2386/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8085,
        "name": "Mohammad Roohitavaf",
        "username": "roohitavaf",
        "avatar_template": "/user_avatar/forums.foundationdb.org/roohitavaf/{size}/1026_2.png",
        "created_at": "2020-10-13T04:04:47.663Z",
        "cooked": "<p>Thanks, <a class=\"mention\" href=\"/u/alexmiller\">@alexmiller</a> and <a class=\"mention\" href=\"/u/ajbeamon\">@ajbeamon</a></p>\n<p>Just to clarify I am mainly trying to understand FoundationDB not to suggest changing it at this time. I couldn\u2019t understand the reason for using read versions for read-write transactions, so I asked you for help.</p>\n<p>In summary, <strong>this is the idea</strong>: I think if we guarantee that only committed versions are written to the storage, for read-write transactions we don\u2019t need to worry about anything else and we can just return the most recent version that we have. This way we don\u2019t lose anything while increasing the chance of successful commits.</p>\n<p>To use this idea, however, we need to:</p>\n<ol>\n<li>\n<p>Have a clear separation of read-write and read-only transactions.</p>\n</li>\n<li>\n<p>Have only committed versions on the storage. (I feel we might be able to remove this requirement if we update our resolvers when we role back storage due to a failure, but I am not sure)</p>\n</li>\n</ol>\n<p>Since we don\u2019t satisfy the requirements above, I think we cannot use the \u201creturn-the-most-recent-version\u201d idea now.<br>\n(* Actually we used this idea in GRIT, a protocol we designed for distributed transactions over microservice at eBay. In GRIT, since we only append committed transactions to the transaction log we don\u2019t need to worry about not committed versions showing up in the storage.<br>\n<a href=\"https://tech.ebayinc.com/engineering/grit-a-protocol-for-distributed-transactions-across-microservices/\" rel=\"noopener nofollow ugc\">https://tech.ebayinc.com/engineering/grit-a-protocol-for-distributed-transactions-across-microservices/</a>)</p>\n<p>Disregarding this idea, the early abort idea is definitely a good idea. If the transaction is going to abort why bother continuing it.</p>",
        "post_number": 13,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2020-10-13T04:04:47.663Z",
        "reply_count": 0,
        "reply_to_post_number": 12,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 30,
        "readers_count": 29,
        "score": 36.0,
        "yours": false,
        "topic_id": 2386,
        "topic_slug": "why-read-version-is-necessary-for-read-write-transactions",
        "display_username": "Mohammad Roohitavaf",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://tech.ebayinc.com/engineering/grit-a-protocol-for-distributed-transactions-across-microservices/",
            "internal": false,
            "reflection": false,
            "title": "GRIT: a Protocol for Distributed Transactions across Microservices",
            "clicks": 8
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 805,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-read-version-is-necessary-for-read-write-transactions/2386/13",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      8064,
      8066,
      8068,
      8069,
      8071,
      8072,
      8073,
      8074,
      8075,
      8076,
      8078,
      8079,
      8085
    ]
  },
  "timeline_lookup": [
    [
      1,
      1836
    ],
    [
      2,
      1835
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Why Read Version is necessary for read-write transactions?",
  "id": 2386,
  "title": "Why Read Version is necessary for read-write transactions?",
  "posts_count": 13,
  "created_at": "2020-10-12T05:42:44.091Z",
  "views": 2050,
  "reply_count": 10,
  "like_count": 0,
  "last_posted_at": "2020-10-13T04:04:47.663Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "why-read-version-is-necessary-for-read-write-transactions",
  "category_id": 8,
  "word_count": 2347,
  "deleted_at": null,
  "user_id": 805,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_2386",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 13,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 4,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Inducing a Read Conflict",
      "id": 1850,
      "title": "Inducing a Read Conflict",
      "slug": "inducing-a-read-conflict",
      "posts_count": 6,
      "reply_count": 4,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2019-12-17T20:19:47.478Z",
      "last_posted_at": "2019-12-19T20:29:26.296Z",
      "bumped": true,
      "bumped_at": "2019-12-19T20:29:26.296Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 875,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 517,
            "username": "janderland",
            "name": "Jon Anderson",
            "avatar_template": "/user_avatar/forums.foundationdb.org/janderland/{size}/517_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        }
      ]
    },
    {
      "fancy_title": "Understanding inter communication",
      "id": 745,
      "title": "Understanding inter communication",
      "slug": "understanding-inter-communication",
      "posts_count": 12,
      "reply_count": 7,
      "highest_post_number": 12,
      "image_url": null,
      "created_at": "2018-10-05T00:51:33.531Z",
      "last_posted_at": "2018-10-11T17:16:52.613Z",
      "bumped": true,
      "bumped_at": "2018-10-11T17:16:52.613Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 10,
      "views": 3588,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 384,
            "username": "Chandru4u",
            "name": "Chandrashekar",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/c/b487fb/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Questions regarding FDB transaction conflict on two concurrent transactions",
      "id": 2913,
      "title": "Questions regarding FDB transaction conflict on two concurrent transactions",
      "slug": "questions-regarding-fdb-transaction-conflict-on-two-concurrent-transactions",
      "posts_count": 10,
      "reply_count": 5,
      "highest_post_number": 10,
      "image_url": null,
      "created_at": "2021-09-28T06:26:34.642Z",
      "last_posted_at": "2021-10-28T08:17:02.264Z",
      "bumped": true,
      "bumped_at": "2021-10-28T09:13:59.130Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 3,
      "views": 2185,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 550,
            "username": "ntrhieu89",
            "name": "Hieu Nguyen",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ntrhieu89/{size}/587_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "[Java] why is setReadVersion not part of ReadTransaction/ReadSnapshot",
      "id": 646,
      "title": "[Java] why is setReadVersion not part of ReadTransaction/ReadSnapshot",
      "slug": "java-why-is-setreadversion-not-part-of-readtransaction-readsnapshot",
      "posts_count": 15,
      "reply_count": 12,
      "highest_post_number": 15,
      "image_url": null,
      "created_at": "2018-08-19T08:03:20.405Z",
      "last_posted_at": "2018-08-22T02:19:45.224Z",
      "bumped": true,
      "bumped_at": "2018-08-22T02:19:45.224Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 3,
      "views": 983,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "A few design-pattern + check-my-understanding questions",
      "id": 1153,
      "title": "A few design-pattern + check-my-understanding questions",
      "slug": "a-few-design-pattern-check-my-understanding-questions",
      "posts_count": 10,
      "reply_count": 6,
      "highest_post_number": 10,
      "image_url": null,
      "created_at": "2019-02-19T15:18:58.329Z",
      "last_posted_at": "2019-02-21T19:51:53.686Z",
      "bumped": true,
      "bumped_at": "2019-02-21T19:51:53.686Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 2273,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 519,
            "username": "JamesThompson",
            "name": "James Thompson",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/c67d28/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 173,
            "username": "jkominek",
            "name": "Jay Kominek",
            "avatar_template": "/user_avatar/forums.foundationdb.org/jkominek/{size}/140_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 805,
        "username": "roohitavaf",
        "name": "Mohammad Roohitavaf",
        "avatar_template": "/user_avatar/forums.foundationdb.org/roohitavaf/{size}/1026_2.png",
        "post_count": 5,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 12,
        "username": "ajbeamon",
        "name": "A.J. Beamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 166,
        "username": "gaurav",
        "name": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 3
      }
    ],
    "created_by": {
      "id": 805,
      "username": "roohitavaf",
      "name": "Mohammad Roohitavaf",
      "avatar_template": "/user_avatar/forums.foundationdb.org/roohitavaf/{size}/1026_2.png"
    },
    "last_poster": {
      "id": 805,
      "username": "roohitavaf",
      "name": "Mohammad Roohitavaf",
      "avatar_template": "/user_avatar/forums.foundationdb.org/roohitavaf/{size}/1026_2.png"
    },
    "links": [
      {
        "url": "https://github.com/apple/foundationdb/issues/3290",
        "title": "Abort conflicting transactions before commit \u00b7 Issue #3290 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 37,
        "user_id": 12,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://tech.ebayinc.com/engineering/grit-a-protocol-for-distributed-transactions-across-microservices/",
        "title": "GRIT: a Protocol for Distributed Transactions across Microservices",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 8,
        "user_id": 805,
        "domain": "tech.ebayinc.com",
        "root_domain": "ebayinc.com"
      }
    ]
  },
  "bookmarks": []
}