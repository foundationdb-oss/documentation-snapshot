{
  "post_stream": {
    "posts": [
      {
        "id": 10206,
        "name": "Randy Hu",
        "username": "randyhu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/randyhu/{size}/1224_2.png",
        "created_at": "2021-11-01T16:29:11.061Z",
        "cooked": "<p>We have a \u201creset\u201d operation that would drop the existing subspace by deleting directory, then create a new directory with the same path. Occasionally, we noticed left over data based on key-value size in status, but the space associated with new directory is empty. This seems more likely to happen with large dataset (150m K/V entries within the subspace, for example), or when the cluster is still under rebalancing.</p>\n<p>We observed the issue during multiple iteration of batch loading of same dataset, which always \u201creset\u201d the directory before the loading. The sum of key-value size increased a lot after each run. So there are couple questions:</p>\n<ol>\n<li>Does the directory layer assign same prefix to one directory after it been recreated? Guess the answer is no, or we should see left over entries.</li>\n<li>When the directory been delete, would the K/V entries been removed within the subspace synchronously, or this is a back ground job?</li>\n<li>We did wait for the directory been removed in API before loading dataset again.We also tried waiting  long enough (over 10 hours) after the loading job, but there was no change of key-value size, which was still way over dataset volume. If the subspace was removed asynchronously, what could prevent entries been removed?</li>\n</ol>\n<p>Thanks,</p>\n<p>Randy</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 1,
        "updated_at": "2021-11-01T16:29:11.061Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 12,
        "reads": 14,
        "readers_count": 13,
        "score": 62.8,
        "yours": false,
        "topic_id": 2981,
        "topic_slug": "directory-recreate-and-left-over-data",
        "display_username": "Randy Hu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1027,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/directory-recreate-and-left-over-data/2981/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      }
    ],
    "stream": [
      10206
    ]
  },
  "timeline_lookup": [
    [
      1,
      1450
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Directory recreate and left over data",
  "id": 2981,
  "title": "Directory recreate and left over data",
  "posts_count": 1,
  "created_at": "2021-11-01T16:29:10.987Z",
  "views": 280,
  "reply_count": 0,
  "like_count": 0,
  "last_posted_at": "2021-11-01T16:29:11.061Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "directory-recreate-and-left-over-data",
  "category_id": 7,
  "word_count": 218,
  "deleted_at": null,
  "user_id": 1027,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_2981",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 1,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 1,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Directory removal leaves stuff in database",
      "id": 3909,
      "title": "Directory removal leaves stuff in database",
      "slug": "directory-removal-leaves-stuff-in-database",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2023-04-17T00:45:59.695Z",
      "last_posted_at": "2023-04-23T22:58:58.572Z",
      "bumped": true,
      "bumped_at": "2023-04-23T22:58:58.572Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 399,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 1242,
            "username": "mAdkins23",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/m/7993a0/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "What&rsquo;s the purpose of the Directory layer?",
      "id": 677,
      "title": "What's the purpose of the Directory layer?",
      "slug": "whats-the-purpose-of-the-directory-layer",
      "posts_count": 10,
      "reply_count": 6,
      "highest_post_number": 11,
      "image_url": null,
      "created_at": "2018-09-02T20:58:11.436Z",
      "last_posted_at": "2022-07-22T02:24:33.270Z",
      "bumped": true,
      "bumped_at": "2022-07-22T02:24:33.270Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 11,
      "views": 6523,
      "category_id": 9,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 41,
            "username": "amirouche",
            "name": "Amirouche",
            "avatar_template": "/user_avatar/forums.foundationdb.org/amirouche/{size}/1911_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 538,
            "username": "ravilution",
            "name": "Ravilution",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ravilution/{size}/728_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 1080,
            "username": "knarayanan88",
            "name": "Narayanan K",
            "avatar_template": "/user_avatar/forums.foundationdb.org/knarayanan88/{size}/1300_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Moving Data more than double the key-value size stored",
      "id": 1006,
      "title": "Moving Data more than double the key-value size stored",
      "slug": "moving-data-more-than-double-the-key-value-size-stored",
      "posts_count": 1,
      "reply_count": 0,
      "highest_post_number": 1,
      "image_url": null,
      "created_at": "2019-01-11T14:25:18.665Z",
      "last_posted_at": "2019-01-11T14:25:18.879Z",
      "bumped": true,
      "bumped_at": "2019-01-11T14:25:18.879Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 472,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest single",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 332,
            "username": "wmd",
            "name": "William Dowling",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/w/fbc32d/{size}.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Disk space used not going down after clearrange",
      "id": 2153,
      "title": "Disk space used not going down after clearrange",
      "slug": "disk-space-used-not-going-down-after-clearrange",
      "posts_count": 7,
      "reply_count": 2,
      "highest_post_number": 7,
      "image_url": null,
      "created_at": "2020-06-02T15:35:25.369Z",
      "last_posted_at": "2020-06-05T17:59:33.994Z",
      "bumped": true,
      "bumped_at": "2020-06-05T17:59:33.994Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 1370,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 773,
            "username": "surya",
            "name": "Surya Teja Gora",
            "avatar_template": "/user_avatar/forums.foundationdb.org/surya/{size}/871_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 714,
            "username": "tuk",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/b5ac83/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Data retention after deleting a key range using SSD engine",
      "id": 2190,
      "title": "Data retention after deleting a key range using SSD engine",
      "slug": "data-retention-after-deleting-a-key-range-using-ssd-engine",
      "posts_count": 9,
      "reply_count": 5,
      "highest_post_number": 9,
      "image_url": null,
      "created_at": "2020-06-18T16:06:24.766Z",
      "last_posted_at": "2020-06-22T12:07:30.047Z",
      "bumped": true,
      "bumped_at": "2020-06-22T12:07:30.047Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 4,
      "views": 1379,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 481,
            "username": "mikerhodes",
            "name": "Mike Rhodes",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mikerhodes/{size}/480_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 714,
            "username": "tuk",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/b5ac83/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 1027,
        "username": "randyhu",
        "name": "Randy Hu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/randyhu/{size}/1224_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      }
    ],
    "created_by": {
      "id": 1027,
      "username": "randyhu",
      "name": "Randy Hu",
      "avatar_template": "/user_avatar/forums.foundationdb.org/randyhu/{size}/1224_2.png"
    },
    "last_poster": {
      "id": 1027,
      "username": "randyhu",
      "name": "Randy Hu",
      "avatar_template": "/user_avatar/forums.foundationdb.org/randyhu/{size}/1224_2.png"
    }
  },
  "bookmarks": []
}