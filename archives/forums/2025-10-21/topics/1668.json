{
  "post_stream": {
    "posts": [
      {
        "id": 5274,
        "name": "Justin C. Moore",
        "username": "jfinity",
        "avatar_template": "/user_avatar/forums.foundationdb.org/jfinity/{size}/682_2.png",
        "created_at": "2019-10-05T18:30:42.427Z",
        "cooked": "<p>If I\u2019m reading <a href=\"https://github.com/apple/foundationdb/blob/cf654e2d8c8f46154d321edb2287279f330e9b76/fdbserver/storageserver.actor.cpp#L928\" rel=\"nofollow noopener\">this</a> right, it looks like one could determine that a key is under watch by checking for a non-zero <a href=\"https://github.com/apple/foundationdb/blob/85d0dec585b276e3588dfbe6b1c25c07f38a417e/flow/genericactors.actor.h#L582\" rel=\"nofollow noopener\"><code>count</code></a> on that key in the underlying <code>AsyncMap</code> of the <code>StorageServer</code>.</p>\n<p>If that\u2019s true, it would be cool if that information could be exposed via some client API (and even cooler if the number of watches on that key could be reported, but it doesn\u2019t look like the architecture has any representation of that at this point\u2026).</p>\n<p>My use case is, given a scenario where I want to have a single <em>primary</em> agent tailing/processing a queue, to provide a mechanism for one or more <em>secondaries</em> to monitor the \u201cliveliness\u201d of the primary (which may have crashed/terminated) and \u201capply\u201d for promotion if the position is vacant.</p>\n<p>(Thinking about it now, I guess some sort of protocol where the primary has to publish a heartbeat to a key being \u201cobserved\u201d by secondaries may be sufficient/better?)</p>\n<p>Thoughts?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 5,
        "updated_at": "2019-10-05T18:38:20.251Z",
        "reply_count": 2,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 16,
        "reads": 30,
        "readers_count": 29,
        "score": 96.0,
        "yours": false,
        "topic_id": 1668,
        "topic_slug": "feature-request-client-api-dis-affirming-if-key-is-being-watched",
        "display_username": "Justin C. Moore",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/blob/cf654e2d8c8f46154d321edb2287279f330e9b76/fdbserver/storageserver.actor.cpp#L928",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/storageserver.actor.cpp at cf654e2d8c8f46154d321edb2287279f330e9b76 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 3
          },
          {
            "url": "https://github.com/apple/foundationdb/blob/85d0dec585b276e3588dfbe6b1c25c07f38a417e/flow/genericactors.actor.h#L582",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/genericactors.actor.h at 85d0dec585b276e3588dfbe6b1c25c07f38a417e \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 2
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 556,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/feature-request-client-api-dis-affirming-if-key-is-being-watched/1668/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 5284,
        "name": "Alec Grieser",
        "username": "alloc",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
        "created_at": "2019-10-07T15:57:14.877Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"jfinity\" data-post=\"1\" data-topic=\"1668\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/jfinity/48/682_2.png\" class=\"avatar\"> jfinity:</div>\n<blockquote>\n<p>(Thinking about it now, I guess some sort of protocol where the primary has to publish a heartbeat to a key being \u201cobserved\u201d by secondaries may be sufficient/better?)</p>\n</blockquote>\n</aside>\n<p>Hm, I\u2019m not sure which is better design starting from <em>tabula rasa</em>, but I believe the heartbeat idea should work and doesn\u2019t require an FDB API change.</p>\n<p>In the Record Layer, there\u2019s a <code>SynchronizedSession</code> class that is supposed to handle some of those details: <a href=\"https://github.com/FoundationDB/fdb-record-layer/blob/master/fdb-extensions/src/main/java/com/apple/foundationdb/synchronizedsession/SynchronizedSession.java\">https://github.com/FoundationDB/fdb-record-layer/blob/master/fdb-extensions/src/main/java/com/apple/foundationdb/synchronizedsession/SynchronizedSession.java</a></p>\n<p>The way it works is there are two keys: (1) one with a UUID indicating the current holder of the lock and (2) another containing the lock\u2019s timeout. Then to do things, the lock holder reads the UUID key, verifies it is the same, and updates the heartbeat with their timestamp plus some lease period. Observers read the UUID key and the timestamp key, and if the timestamp is less than the lease period expiration time, then they assume the lock holder is still alive. If their own time is greater than the timestamp, then they try and claim the lock by writing their own UUID into the key and updating the timestamp.</p>\n<p>Note that in this design, it is the value of the UUID key that truly determines the lock holder/leader, not the timestamp value. This means that in the presence of clock drift, a leader is still chosen and there is consensus on who holds the lock. (I don\u2019t think this in our implementation, but you could even relax this protocol by reading the UUID key at <code>SNAPSHOT</code> isolation level if you are okay with there temporarily being two leaders.) Using the timestamp is just a performance optimization.</p>\n<p>That being said, there are problems that can arise with clock drift. For example, if one process\u2019s clock drifts way ahead and then writes a timestamp way in the future, no one will be able to claim the lock until that time. This can be ameliorated by adding \u201cescape hatches\u201d that allow an operator to manually remove a lock, but it\u2019s not awesome.</p>\n<p>I believe our backup tooling does a similar thing, but it uses database versions instead of wall clock time. Maybe <a class=\"mention\" href=\"/u/steavedhams\">@SteavedHams</a> can correct me, but I believe that that\u2019s what this line is doing: <a href=\"https://github.com/apple/foundationdb/blob/a4f12a19a3a24bd68676bef8e629d6e855c4702c/fdbclient/TaskBucket.actor.cpp#L223\">https://github.com/apple/foundationdb/blob/a4f12a19a3a24bd68676bef8e629d6e855c4702c/fdbclient/TaskBucket.actor.cpp#L223</a></p>\n<p>That ameliorates some of the problems with clocks, but it depends on knowing how versions correlate with time, and that relationship may change in a future release. (Or in other words, the current behavior should not be considered part of the API.) Or at least that\u2019s advice we\u2019ve given in the past.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 5,
        "updated_at": "2019-10-07T15:57:40.342Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 5,
        "reads": 26,
        "readers_count": 25,
        "score": 35.2,
        "yours": false,
        "topic_id": 1668,
        "topic_slug": "feature-request-client-api-dis-affirming-if-key-is-being-watched",
        "display_username": "Alec Grieser",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/blob/a4f12a19a3a24bd68676bef8e629d6e855c4702c/fdbclient/TaskBucket.actor.cpp#L223",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/TaskBucket.actor.cpp at a4f12a19a3a24bd68676bef8e629d6e855c4702c \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 3
          },
          {
            "url": "https://github.com/FoundationDB/fdb-record-layer/blob/master/fdb-extensions/src/main/java/com/apple/foundationdb/synchronizedsession/SynchronizedSession.java",
            "internal": false,
            "reflection": false,
            "title": "fdb-record-layer/SynchronizedSession.java at master \u00b7 FoundationDB/fdb-record-layer \u00b7 GitHub",
            "clicks": 1
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 8,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/feature-request-client-api-dis-affirming-if-key-is-being-watched/1668/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5288,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-10-07T18:41:55.126Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"jfinity\" data-post=\"1\" data-topic=\"1668\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/jfinity/48/682_2.png\" class=\"avatar\"> jfinity:</div>\n<blockquote>\n<p>If I\u2019m reading <a href=\"https://github.com/apple/foundationdb/blob/cf654e2d8c8f46154d321edb2287279f330e9b76/fdbserver/storageserver.actor.cpp#L928\">this </a> right, it looks like one could determine that a key is under watch by checking for a non-zero <a href=\"https://github.com/apple/foundationdb/blob/85d0dec585b276e3588dfbe6b1c25c07f38a417e/flow/genericactors.actor.h#L582\"> <code>count</code> </a> on that key in the underlying <code>AsyncMap</code> of the <code>StorageServer</code> .</p>\n</blockquote>\n</aside>\n<p>You are, except that if a storage server has <a href=\"https://github.com/apple/foundationdb/blob/cf654e2d8c8f46154d321edb2287279f330e9b76/fdbserver/storageserver.actor.cpp#L948-L952\">too many watches</a>, then it will \u201ccancel\u201d some of them, which then causes clients to <a href=\"https://github.com/apple/foundationdb/blob/cf654e2d8c8f46154d321edb2287279f330e9b76/fdbclient/NativeAPI.actor.cpp#L1504-L1507\">revert to polling</a>.  Thus, this would only work up to a certain (large) number of watches.</p>\n<p>I agree that the better way to do this is by doing leader election on top of/via FDB, as Alec described.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 5,
        "updated_at": "2019-10-07T18:41:55.126Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 22,
        "readers_count": 21,
        "score": 4.4,
        "yours": false,
        "topic_id": 1668,
        "topic_slug": "feature-request-client-api-dis-affirming-if-key-is-being-watched",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/blob/cf654e2d8c8f46154d321edb2287279f330e9b76/fdbclient/NativeAPI.actor.cpp#L1504-L1507",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/NativeAPI.actor.cpp at cf654e2d8c8f46154d321edb2287279f330e9b76 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 1
          },
          {
            "url": "https://github.com/apple/foundationdb/blob/cf654e2d8c8f46154d321edb2287279f330e9b76/fdbserver/storageserver.actor.cpp#L948-L952",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/storageserver.actor.cpp at cf654e2d8c8f46154d321edb2287279f330e9b76 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/feature-request-client-api-dis-affirming-if-key-is-being-watched/1668/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5292,
        "name": "Justin C. Moore",
        "username": "jfinity",
        "avatar_template": "/user_avatar/forums.foundationdb.org/jfinity/{size}/682_2.png",
        "created_at": "2019-10-08T02:27:33.427Z",
        "cooked": "<p>Thanks, I think I\u2019ll go with the \u201clease\u201d strategy after all.  Only thing I\u2019m thinking differently than what was suggested is to leave the expiry-timing measurement concerns to the secondaries \u2013 something like have the primary regularly update the non-uuid key on a regular basis (atomic increments or maybe version-stamps) and require that secondaries have observed a static value there for the duration of the lease (according to each one\u2019s local wall-time when sampling the \u201cheartbeat\u201d) before rushing for a promotion.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 5,
        "updated_at": "2019-10-08T02:27:33.427Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 22,
        "readers_count": 21,
        "score": 4.4,
        "yours": false,
        "topic_id": 1668,
        "topic_slug": "feature-request-client-api-dis-affirming-if-key-is-being-watched",
        "display_username": "Justin C. Moore",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 556,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/feature-request-client-api-dis-affirming-if-key-is-being-watched/1668/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5449,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2019-11-04T23:00:56.003Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"alloc\" data-post=\"2\" data-topic=\"1668\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/alloc/48/9_2.png\" class=\"avatar\"> alloc:</div>\n<blockquote>\n<p>I believe our backup tooling does a similar thing, but it uses database versions instead of wall clock time. Maybe <a class=\"mention\" href=\"/u/steavedhams\">@SteavedHams</a> can correct me, but I believe that that\u2019s what this line is doing: <a href=\"https://github.com/apple/foundationdb/blob/a4f12a19a3a24bd68676bef8e629d6e855c4702c/fdbclient/TaskBucket.actor.cpp#L223\">https://github.com/apple/foundationdb/blob/a4f12a19a3a24bd68676bef8e629d6e855c4702c/fdbclient/TaskBucket.actor.cpp#L223 </a></p>\n</blockquote>\n</aside>\n<p>Correct.  The TaskBucket execution framework used by Backup and DR uses timestamps for both task timeouts and scheduling future execution of tasks.  Also, even though there currently is a fixed \u201cversions per second\u201d that the cluster attempts to adhere to, even without a behavior change there are events that can cause the commit version to advance suddenly and dramatically, such as a master recovery or a DR primary/secondary cluster switchover.  TaskBucket is not particularly concerned with the passage of real time even for scheduled tasks, so they can be approximate at best and occasionally wildly inaccurate without serious consequences.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 5,
        "updated_at": "2019-11-04T23:00:56.003Z",
        "reply_count": 0,
        "reply_to_post_number": 2,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 18,
        "readers_count": 17,
        "score": 3.6,
        "yours": false,
        "topic_id": 1668,
        "topic_slug": "feature-request-client-api-dis-affirming-if-key-is-being-watched",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/feature-request-client-api-dis-affirming-if-key-is-being-watched/1668/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      5274,
      5284,
      5288,
      5292,
      5449
    ]
  },
  "timeline_lookup": [
    [
      1,
      2208
    ],
    [
      2,
      2206
    ],
    [
      5,
      2178
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Feature Request: Client API (dis)affirming if key is being watched",
  "id": 1668,
  "title": "Feature Request: Client API (dis)affirming if key is being watched",
  "posts_count": 5,
  "created_at": "2019-10-05T18:30:42.324Z",
  "views": 618,
  "reply_count": 1,
  "like_count": 0,
  "last_posted_at": "2019-11-04T23:00:56.003Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "feature-request-client-api-dis-affirming-if-key-is-being-watched",
  "category_id": 5,
  "word_count": 1066,
  "deleted_at": null,
  "user_id": 556,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_1668",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 5,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 4,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Where do watches register themselves?",
      "id": 827,
      "title": "Where do watches register themselves?",
      "slug": "where-do-watches-register-themselves",
      "posts_count": 5,
      "reply_count": 3,
      "highest_post_number": 5,
      "image_url": null,
      "created_at": "2018-10-31T13:07:10.136Z",
      "last_posted_at": "2020-05-07T15:14:06.031Z",
      "bumped": true,
      "bumped_at": "2020-05-07T15:14:06.031Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 1098,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 388,
            "username": "amarjeet000",
            "name": "Amarjeet",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/e19adc/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 173,
            "username": "jkominek",
            "name": "Jay Kominek",
            "avatar_template": "/user_avatar/forums.foundationdb.org/jkominek/{size}/140_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Fdb-zk: rough cut of Zookeeper API layer",
      "id": 1278,
      "title": "Fdb-zk: rough cut of Zookeeper API layer",
      "slug": "fdb-zk-rough-cut-of-zookeeper-api-layer",
      "posts_count": 7,
      "reply_count": 3,
      "highest_post_number": 7,
      "image_url": null,
      "created_at": "2019-04-03T02:54:03.579Z",
      "last_posted_at": "2019-04-09T04:13:12.883Z",
      "bumped": true,
      "bumped_at": "2019-04-09T04:13:12.883Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 6,
      "views": 5102,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 113,
            "username": "pH14",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ph14/{size}/92_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 22,
            "username": "dave",
            "name": "David Scherer",
            "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Watchers and not missing changes",
      "id": 474,
      "title": "Watchers and not missing changes",
      "slug": "watchers-and-not-missing-changes",
      "posts_count": 14,
      "reply_count": 6,
      "highest_post_number": 14,
      "image_url": null,
      "created_at": "2018-05-25T13:29:22.034Z",
      "last_posted_at": "2018-06-05T23:23:48.371Z",
      "bumped": true,
      "bumped_at": "2018-06-05T23:23:48.371Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 3,
      "views": 1999,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 289,
            "username": "rowanG",
            "name": "Rowan Goemans",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/r/8baadc/{size}.png",
            "trust_level": 0
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 298,
            "username": "gwillis12",
            "name": "Geo",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/ed655f/{size}.png",
            "trust_level": 0
          }
        }
      ]
    },
    {
      "fancy_title": "Performance characteristics of using Watches for Distributed Task Scheduling",
      "id": 471,
      "title": "Performance characteristics of using Watches for Distributed Task Scheduling",
      "slug": "performance-characteristics-of-using-watches-for-distributed-task-scheduling",
      "posts_count": 28,
      "reply_count": 13,
      "highest_post_number": 28,
      "image_url": "https://global.discourse-cdn.com/foundationdb/original/1X/0819f4ad7c04fe7d847b2f33824849dc70ee6a0c.png",
      "created_at": "2018-05-24T13:42:28.764Z",
      "last_posted_at": "2018-08-16T03:57:50.737Z",
      "bumped": true,
      "bumped_at": "2018-08-16T03:57:50.737Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 15,
      "views": 5180,
      "category_id": 9,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 118,
            "username": "abdullin",
            "name": "Rinat Abdullin",
            "avatar_template": "/user_avatar/forums.foundationdb.org/abdullin/{size}/83_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 68,
            "username": "daverosenthal",
            "name": "Dave Rosenthal",
            "avatar_template": "/user_avatar/forums.foundationdb.org/daverosenthal/{size}/51_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Approximating a global clock for a Watchdog Timer using VersionStamps, ReadVersions or the &ldquo;timekeeper&rdquo;?",
      "id": 477,
      "title": "Approximating a global clock for a Watchdog Timer using VersionStamps, ReadVersions or the \"timekeeper\"?",
      "slug": "approximating-a-global-clock-for-a-watchdog-timer-using-versionstamps-readversions-or-the-timekeeper",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2018-05-28T22:19:55.515Z",
      "last_posted_at": "2018-05-28T23:08:19.229Z",
      "bumped": true,
      "bumped_at": "2018-05-28T23:08:19.229Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1182,
      "category_id": 5,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 556,
        "username": "jfinity",
        "name": "Justin C. Moore",
        "avatar_template": "/user_avatar/forums.foundationdb.org/jfinity/{size}/682_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 7,
        "username": "SteavedHams",
        "name": "Steve Atherton",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 8,
        "username": "alloc",
        "name": "Alec Grieser",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      }
    ],
    "created_by": {
      "id": 556,
      "username": "jfinity",
      "name": "Justin C. Moore",
      "avatar_template": "/user_avatar/forums.foundationdb.org/jfinity/{size}/682_2.png"
    },
    "last_poster": {
      "id": 7,
      "username": "SteavedHams",
      "name": "Steve Atherton",
      "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png"
    },
    "links": [
      {
        "url": "https://github.com/apple/foundationdb/blob/a4f12a19a3a24bd68676bef8e629d6e855c4702c/fdbclient/TaskBucket.actor.cpp#L223",
        "title": "foundationdb/TaskBucket.actor.cpp at a4f12a19a3a24bd68676bef8e629d6e855c4702c \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 8,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/cf654e2d8c8f46154d321edb2287279f330e9b76/fdbserver/storageserver.actor.cpp#L928",
        "title": "foundationdb/storageserver.actor.cpp at cf654e2d8c8f46154d321edb2287279f330e9b76 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 556,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/85d0dec585b276e3588dfbe6b1c25c07f38a417e/flow/genericactors.actor.h#L582",
        "title": "foundationdb/genericactors.actor.h at 85d0dec585b276e3588dfbe6b1c25c07f38a417e \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 556,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/cf654e2d8c8f46154d321edb2287279f330e9b76/fdbclient/NativeAPI.actor.cpp#L1504-L1507",
        "title": "foundationdb/NativeAPI.actor.cpp at cf654e2d8c8f46154d321edb2287279f330e9b76 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 13,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/FoundationDB/fdb-record-layer/blob/master/fdb-extensions/src/main/java/com/apple/foundationdb/synchronizedsession/SynchronizedSession.java",
        "title": "fdb-record-layer/SynchronizedSession.java at master \u00b7 FoundationDB/fdb-record-layer \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 8,
        "domain": "github.com",
        "root_domain": "github.com"
      }
    ]
  },
  "bookmarks": []
}