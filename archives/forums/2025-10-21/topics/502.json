{
  "post_stream": {
    "posts": [
      {
        "id": 1438,
        "name": "Bastien Gysler",
        "username": "basgys",
        "avatar_template": "/user_avatar/forums.foundationdb.org/basgys/{size}/291_2.png",
        "created_at": "2018-06-09T13:09:51.434Z",
        "cooked": "<p>As many people pointed out, deploying FoundationDB with a container-orchestration tool, such as Kubernetes, Docker Swarm, and others can be problematic for multiple reasons. One of the main problem is the unstable nature of IP addresses. Kubernetes provides stable network IDs with its StatefulSet, but when a Pod restarts, the IP address will most certainly change.</p>\n<p>There is a suggestion to use hostname instead and thus rely on DNS to uniquely identify nodes. However, despite that it would solve the problem on Kubernetes/Swarm, this change would introduce another potential source of failure (See <a href=\"https://forums.foundationdb.org/t/feature-request-hostnames-for-coordinators/402\">wwilson answer</a>).</p>\n<p>My proposal would be to uniquely identify nodes with an arbitrary string that would be either generated by FoundationDB when a node starts for the first time or defined by in the config file.<br>\nThe main benefit of such a solution is that it does not rely on movable parts, such as IP addresses, or DNS names to identify a node. I think that what defines a node identity is the data it carries, no matter its IP address or hostname. Moreover, because it is an arbitrary string, it would be flexible enough to allow people to still use IP addresses or DNS names if they would like to.</p>\n<p>Now one of the problems is to reach these nodes. Here is an example of an fdb.cluster file:</p>\n<p><code>&lt;desc&gt;:&lt;id&gt;@urn:node:&lt;uuid&gt;:&lt;ip&gt;:&lt;port&gt;:(&lt;tls&gt;),urn:node:&lt;uuid&gt;:&lt;ip&gt;:&lt;port&gt;:(&lt;tls&gt;)</code></p>\n<p>Since IP, port, and TLS can change, the canonical ID would be <code>urn:node:&lt;uuid&gt;</code>.</p>\n<p>I am not familiar with the internal implementation of FoundationDB, so I cannot assess the impact of such a change, but I am aware that this would introduce new challenges. For example, what happen when a node B has the IP address of node A that just left the cluster. Requests between nodes would have to contain this unique identifier to check its recipient.</p>\n<p>I would be interested to hear what the community thinks about it whether they run FoundationDB in a container or not.</p>\n<p>Related issues/threads:</p>\n<ul>\n<li><a href=\"https://github.com/apple/foundationdb/issues/354\" rel=\"nofollow noopener\">https://github.com/apple/foundationdb/issues/354</a></li>\n</ul>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 26,
        "updated_at": "2018-06-10T10:44:35.254Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 920,
        "reads": 175,
        "readers_count": 174,
        "score": 4655.0,
        "yours": false,
        "topic_id": 502,
        "topic_slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
        "display_username": "Bastien Gysler",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 3,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/feature-request-hostnames-for-coordinators/402",
            "internal": true,
            "reflection": false,
            "title": "Feature request: hostnames for coordinators",
            "clicks": 61
          },
          {
            "url": "https://github.com/apple/foundationdb/issues/354",
            "internal": false,
            "reflection": false,
            "title": "No HOST support in fdb.cluster \u00b7 Issue #354 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 47
          },
          {
            "url": "https://forums.foundationdb.org/t/6-1-fdb-create-database-without-fdb-cluster/1237/2",
            "internal": true,
            "reflection": true,
            "title": "6.1: 'fdb_create_database()' without 'fdb.cluster'",
            "clicks": 1
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 2
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 302,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/proposal-dont-identify-a-coordinator-based-on-its-ip/502/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 1441,
        "name": "David Scherer",
        "username": "dave",
        "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png",
        "created_at": "2018-06-09T15:00:14.596Z",
        "cooked": "<p>I could be wrong, but I <em>think</em> FDB already solves the specific problem you are trying to solve with unique IDs.</p>\n<ol>\n<li>\n<p>fdbserver roles other than coordinators only expect their IP address to be stable while the process is actually running.  Every time they start up they register with the coordinators, cluster controller service and/or system keyspace the IP address needed to reach them, and to the extent that their identities actually need to persist, they use various unique identifiers.</p>\n</li>\n<li>\n<p><span class=\"hashtag\">#1</span> is tested in simulation by <a href=\"https://github.com/apple/foundationdb/blob/e0c8175f3ccad92c582a3e70e9bcae58fff53633/fdbserver/SimulatedCluster.actor.cpp#L548\" rel=\"nofollow noopener\">swapping data folders</a> (which should be isomorphic to swapping IP addresses)</p>\n</li>\n<li>\n<p>Coordinators need to have stable IP addresses, because that\u2019s the only way we have to reach them via the cluster file.  If the cluster file doesn\u2019t contain enough correct IP addresses (perhaps just one if a coordinator change has occurred to reflect the new IP addresses?), an fdbserver won\u2019t be able to join the cluster.  I don\u2019t think this can be improved by using more unique identifiers, but see below.</p>\n</li>\n<li>\n<p>I <em>think</em> it is sound, however, for coordinators to swap or change IP addresses.  A unique identifier is used to identify the cluster for which coordination information is stored, and I don\u2019t think the consensus algorithm cares about the identity of different coordinators as long as the same coordinator isn\u2019t reached by more than one address.  As long as IP address changes occur sufficiently slowly, you could keep the cluster working indefinitely by just doing periodic coordinator changes.</p>\n</li>\n<li>\n<p>I\u2019m not sure if we are adequately testing <span class=\"hashtag\">#4</span>, however.  The tricky part would be to not break availability in simulations by running into <span class=\"hashtag\">#3</span>.  <a class=\"mention\" href=\"/u/evan\">@Evan</a>?</p>\n</li>\n</ol>\n<p>The feature that I would <em>like</em> to see for integration with external service discovery is to make it so that, as a command line parameter, environment variable or (client) network option you can pass cluster file contents or just coordinator IP addresses obtained from your service discovery system to FDB servers and clients.  FDB attempts to contact these coordinators in parallel with the ones in the cluster file, and then updates its cluster file (as it does today) if a more up to date configuration is found.  If service discovery is down or the information is out of date it does no harm.  Ideally then your FDB cluster keeps working if <em>either</em> your service discovery is up <em>or</em> enough of your coordinators have kept their IP addresses.  I would still recommend setting up coordinators with stable IP addresses if your orchestration system permits this, but this should make the best of a given situation.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 26,
        "updated_at": "2018-06-09T15:00:14.596Z",
        "reply_count": 2,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 145,
        "reads": 169,
        "readers_count": 168,
        "score": 768.8,
        "yours": false,
        "topic_id": 502,
        "topic_slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
        "display_username": "David Scherer",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/blob/e0c8175f3ccad92c582a3e70e9bcae58fff53633/fdbserver/SimulatedCluster.actor.cpp#L548",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/SimulatedCluster.actor.cpp at e0c8175f3ccad92c582a3e70e9bcae58fff53633 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 17
          },
          {
            "url": "https://forums.foundationdb.org/t/allowing-client-apis-to-use-an-in-memory-fdb-cluster-file/675/2",
            "internal": true,
            "reflection": true,
            "title": "Allowing client APIs to use an \"in-memory\" fdb.cluster file?",
            "clicks": 1
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 22,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/proposal-dont-identify-a-coordinator-based-on-its-ip/502/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 1447,
        "name": "Bastien Gysler",
        "username": "basgys",
        "avatar_template": "/user_avatar/forums.foundationdb.org/basgys/{size}/291_2.png",
        "created_at": "2018-06-10T11:43:52.547Z",
        "cooked": "<p>First off, thanks for your prompt answer <a class=\"mention\" href=\"/u/dave\">@dave</a>!</p>\n<p>I would like to rectify my proposal. When I mentioned nodes, I was actually referring to coordinators. I deployed a 3 nodes cluster and because all of them act both as a regular node and a coordinator, I mixed up the wording. I changed the title.</p>\n<blockquote>\n<p>Coordinators need to have stable IP addresses, because that\u2019s the only way we have to reach them via the cluster file. [\u2026] I don\u2019t think this can be improved by using more unique identifiers.</p>\n</blockquote>\n<p>Basically I see two cases where the IP addresses should be handled differently:</p>\n<ol>\n<li>Contact the cluster coordinators (when a node starts)</li>\n<li>Ongoing communication among peers</li>\n</ol>\n<p><strong>Case 1</strong><br>\nI agree that unique identifiers won\u2019t solve the problem in this specific context. We need to rely on stable IP addresses at some point to contact at least one coordinator to join the cluster.</p>\n<p>That means the fdb.cluster could probably stay as is. <code>&lt;desc&gt;:&lt;id&gt;@192.168.1.1:4500,192.168.1.2:4500</code></p>\n<p><strong>Case 2</strong><br>\nHere is the part where I think unique identifiers would solve a problem. But first I would like to stress that I\u2019m fairly new to FoundationDB, so feel free to correct me if I\u2019m wrong here.</p>\n<p>I made the assumption that a node relies solely on the fdb.cluster file to find coordinators in the cluster.</p>\n<p>Scenario: Cluster of 4 nodes and 3 of them are coordinators.<br>\nIf two Pods (coordinators) that are being restarted by Kubernetes (e.g. update, crash, \u2026), they will re-appear with a different IP address and the cluster is now blocked. I cannot update the list of coordinators anymore because there is no quorum and a force eviction won\u2019t work because it is a coordinator. As far as I am aware, Kubernetes does not allow me to assign a static IP to fix the issue. The cluster is basically locked forever.</p>\n<p>Using an arbitrary string to uniquely identify a coordinator would solve this problem. When a node or a coordinator (re-)join a cluster, it would share its IP/Port and ID with the cluster. The cluster would then share a table with all peers that would look like:</p>\n<p>| ID | Type | IP | Port |<br>\n| 1  | C | 192.168.1.1 | 4500 |<br>\n| 2  | C | 192.168.1.2 | 4500 |<br>\n| 3  | C | 192.168.1.3 | 4500 |<br>\n| 4  | N | 192.168.1.4 | 4500 |</p>\n<p>This table would be continuously shared among all peers in the cluster, so that when a coordinator leaves the cluster and joins back again with a different IP address, all peers would be informed and thus not affected by an IP/Port change.</p>\n<blockquote>\n<p>The feature that I would like to see for integration with external service discovery is to make it so that, as a command line parameter, environment variable or (client) network option you can pass cluster file contents or just coordinator IP addresses obtained from your service discovery system to FDB servers and clients. FDB attempts to contact these coordinators in parallel with the ones in the cluster file, and then updates its cluster file (as it does today) if a more up to date configuration is found.</p>\n</blockquote>\n<p>That is a good idea! This fdb.cluster file is definitely not ideal. Is it even necessary to keep it?</p>\n<p>Using a command line parameter, environment variable, or anything else should be enough to contact the cluster. Then the cluster would continuously share a transient table as I explained above.</p>\n<blockquote>\n<p>Ideally then your FDB cluster keeps working if either your service discovery is up or enough of your coordinators have kept their IP addresses. I would still recommend setting up coordinators with stable IP addresses if your orchestration system permits this, but this should make the best of a given situation.</p>\n</blockquote>\n<p>Obviously the idea is to keep IP addresses as stable as possible, but when shit hits the fan, FoundationDB (deployed with a container-orchestration tool) should be able to recover from it.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 26,
        "updated_at": "2018-06-10T11:43:52.547Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 13,
        "reads": 155,
        "readers_count": 154,
        "score": 116.0,
        "yours": false,
        "topic_id": 502,
        "topic_slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
        "display_username": "Bastien Gysler",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 22,
          "username": "dave",
          "name": "David Scherer",
          "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 302,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/proposal-dont-identify-a-coordinator-based-on-its-ip/502/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 1448,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2018-06-11T16:29:48.367Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"basgys\" data-post=\"3\" data-topic=\"502\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/basgys/48/291_2.png\" class=\"avatar\"> basgys:</div>\n<blockquote>\n<p>That is a good idea! This fdb.cluster file is definitely not ideal. Is it even necessary to keep it?</p>\n</blockquote>\n</aside>\n<p>I think one of the main arguments for the cluster file is that it provides a durable local record of the current connection information for the cluster and doesn\u2019t have any dependencies on external services.</p>\n<p>While a process is connected to the cluster, the cluster can undergo all kinds of changes to its members. If, for example, you migrate your cluster to new hosts (i.e. replace every process in the cluster), then the connection information you used when your process started up before the migration will not be valid after the migration. The processes (both client and server) that are connected to a cluster will update their cluster files in response to these changes, ensuring they can reconnect if they die.</p>\n<p>Without the cluster file, if your process dies and tries to reconnect with the same connection string it did originally, it would be unable to in the scenario I described above. Or, if you were relying on some external service discovery to provide you with up-to-date information, you are now dependent on that service being up and functioning in order for your processes to be able to reconnect.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 26,
        "updated_at": "2018-06-11T16:29:48.367Z",
        "reply_count": 2,
        "reply_to_post_number": 3,
        "quote_count": 1,
        "incoming_link_count": 5,
        "reads": 129,
        "readers_count": 128,
        "score": 60.8,
        "yours": false,
        "topic_id": 502,
        "topic_slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/proposal-dont-identify-a-coordinator-based-on-its-ip/502/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 1454,
        "name": "Bastien Gysler",
        "username": "basgys",
        "avatar_template": "/user_avatar/forums.foundationdb.org/basgys/{size}/291_2.png",
        "created_at": "2018-06-12T12:20:06.550Z",
        "cooked": "<p>Thanks for your answer.</p>\n<p>I realised after I replied to <a class=\"mention\" href=\"/u/dave\">@dave</a> that he already explained it. It makes sense to keep a fallback in case the external service you\u2019d be relying upon is down.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 26,
        "updated_at": "2018-06-12T12:20:06.550Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 124,
        "readers_count": 123,
        "score": 34.8,
        "yours": false,
        "topic_id": 502,
        "topic_slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
        "display_username": "Bastien Gysler",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 12,
          "username": "ajbeamon",
          "name": "A.J. Beamon",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 302,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/proposal-dont-identify-a-coordinator-based-on-its-ip/502/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 1461,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2018-06-14T01:15:44.557Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"dave\" data-post=\"2\" data-topic=\"502\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/dave/48/89_2.png\" class=\"avatar\"> dave:</div>\n<blockquote>\n<p>you can pass cluster file contents or just coordinator IP addresses obtained from your service discovery system to FDB servers and clients. FDB attempts to contact these coordinators in parallel with the ones in the cluster file, and then updates its cluster file (as it does today)</p>\n</blockquote>\n</aside>\n<p>I don\u2019t believe that would entirely solve the issue?  While an FDB process is running, one could have e.g. kubernetes restart all of the coordinators and assign them a different IP.  It would be expected for the cluster to continue working as long as their data volumes are the same and DNS now resolves them to the new IP.  I don\u2019t think that would be the case with this proposed feature, as there\u2019s no way to re-resolve what was provided from service discovery?</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 26,
        "updated_at": "2018-06-14T01:15:44.557Z",
        "reply_count": 1,
        "reply_to_post_number": 5,
        "quote_count": 1,
        "incoming_link_count": 3,
        "reads": 125,
        "readers_count": 124,
        "score": 45.0,
        "yours": false,
        "topic_id": 502,
        "topic_slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 302,
          "username": "basgys",
          "name": "Bastien Gysler",
          "avatar_template": "/user_avatar/forums.foundationdb.org/basgys/{size}/291_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/proposal-dont-identify-a-coordinator-based-on-its-ip/502/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 1467,
        "name": "David Scherer",
        "username": "dave",
        "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png",
        "created_at": "2018-06-14T17:16:14.935Z",
        "cooked": "<p>I said IP addresses, but there is no obvious reason why you couldn\u2019t allow DNS names or even an arbitrary command that outputs addresses.  The cluster file would still contain IPs, and we would only need to poll resolution when not successfully connected to a quorum of coordinators.</p>\n<p>You still need a mechanism for doing coordination changes automatically when needed.  And honestly this probably just scratches the surface of problems with running anything reliable on Kubernetes.  How do you handle changes to the cluster size safely?  How do you run a cluster across multiple datacenters (and hence Kubernetes clusters)?  I dunno.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 26,
        "updated_at": "2018-06-14T17:16:14.935Z",
        "reply_count": 0,
        "reply_to_post_number": 6,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 127,
        "readers_count": 126,
        "score": 45.4,
        "yours": false,
        "topic_id": 502,
        "topic_slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
        "display_username": "David Scherer",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 22,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/proposal-dont-identify-a-coordinator-based-on-its-ip/502/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 1780,
        "name": "Mikael Rapp ",
        "username": "Zatte",
        "avatar_template": "/user_avatar/forums.foundationdb.org/zatte/{size}/344_2.png",
        "created_at": "2018-08-02T09:57:05.413Z",
        "cooked": "<blockquote>\n<p>allow DNS names or /\u2026/ arbitrary command that outputs addresses /\u2026/ The cluster file would still contain IPs</p>\n</blockquote>\n<p>I don\u2019t see how this solves the issue of setting new coordinator servers when there isn\u2019t a quorum or coordinator servers available. Or in Basgys words:</p>\n<blockquote>\n<p>I cannot update the list of coordinators anymore because there is no quorum and a force eviction won\u2019t work because it is a coordinator. As far as I am aware, Kubernetes does not allow me to assign a static IP to fix the issue. <strong>The cluster is basically locked forever.</strong></p>\n</blockquote>\n<p>If the coordinators are identified by a DNS instead of IP, then no quorum change is needed, nodes need only to re-query the dns server on startup or IF coordinator is un-reachable. This would allow for a completely dead cluster to recover.</p>\n<p>I suppose the issue could also be fixed if the option to force new coordination servers to be set (without a quorum) was available but this seems like a dangerous approach.</p>\n<p>(<a class=\"mention\" href=\"/u/basgys\">@basgys</a> : I did found a workaround in k8 by giving each coordinator pod its own service (with static ip); ugly but seems to work)</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 26,
        "updated_at": "2018-08-02T09:57:05.413Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 119,
        "readers_count": 118,
        "score": 38.8,
        "yours": false,
        "topic_id": 502,
        "topic_slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
        "display_username": "Mikael Rapp ",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 339,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/proposal-dont-identify-a-coordinator-based-on-its-ip/502/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 1783,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2018-08-02T19:40:40.890Z",
        "cooked": "<p>There\u2019s a couple pieces of trouble hidden in those steps though:</p>\n<ol>\n<li>How would a coordinator know that it\u2019s a coordinator?</li>\n<li>What happens if DNS is unavailable?</li>\n</ol>\n<p>For (1), we could have each process resolve the hostname and check against its own IP.  This seems like it\u2019d run into trouble with multi-IP\u2019d hosts or NAT\u2019d situations.  We could have each process connect to each hostname and request an ID that it compares with a locally randomly generated (or assigned) one.  This starts to sound very similar to <a class=\"mention\" href=\"/u/basgys\">@basgys</a>\u2019s proposal.</p>\n<p>Considering DNS unavailability, this would mean that a process knowing that it\u2019s a coordinator would rely on DNS.  It would probably be wise to cache the IP resolved from DNS for a coordinator in the cluster file as well, and I believe we should have the ability to store a tiny bit of state about if we were formerly the coordinator in the pidfile where we store other preferences as well.</p>\n<p>Is it just the case that if you\u2019re running in kubernetes and DNS is unavailable, then so many other things would be broken and unavailable that FDB unavailability wouldn\u2019t even comparatively be a problem?</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 26,
        "updated_at": "2018-08-02T19:40:40.890Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 116,
        "readers_count": 115,
        "score": 58.2,
        "yours": false,
        "topic_id": 502,
        "topic_slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/proposal-dont-identify-a-coordinator-based-on-its-ip/502/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 1791,
        "name": "Mikael Rapp ",
        "username": "Zatte",
        "avatar_template": "/user_avatar/forums.foundationdb.org/zatte/{size}/344_2.png",
        "created_at": "2018-08-03T13:46:28.767Z",
        "cooked": "<p>(2) I agree that DNS availability adds another failure point. However I think the discussion is not if DNS should be mandatory but if it could be a supported alternative; If so, then everyone can decide if DNS is an acceptable point of failure given their respective infrastructure. In a K8 environment I would argue that depending on DNS is reasonable.</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 26,
        "updated_at": "2018-08-03T13:46:28.767Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 7,
        "reads": 119,
        "readers_count": 118,
        "score": 78.8,
        "yours": false,
        "topic_id": 502,
        "topic_slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
        "display_username": "Mikael Rapp ",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 339,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/proposal-dont-identify-a-coordinator-based-on-its-ip/502/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 1799,
        "name": "Kwasi Ohene-Adu",
        "username": "kwasi",
        "avatar_template": "/user_avatar/forums.foundationdb.org/kwasi/{size}/350_2.png",
        "created_at": "2018-08-05T03:59:52.992Z",
        "cooked": "<p>I\u2019d agree with <a class=\"mention\" href=\"/u/zatte\">@Zatte</a>. I believe it makes sense for FDB to optionally support DNS resolution of coordinator host names. To answer your question <a class=\"mention\" href=\"/u/alexmiller\">@alexmiller</a>: yes, DNS is extremely robust in Kubernetes. If that mechanism ceases to work, there are bigger problems to worry about.</p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 26,
        "updated_at": "2018-08-05T04:17:42.782Z",
        "reply_count": 0,
        "reply_to_post_number": 10,
        "quote_count": 0,
        "incoming_link_count": 558,
        "reads": 118,
        "readers_count": 117,
        "score": 2828.6,
        "yours": false,
        "topic_id": 502,
        "topic_slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
        "display_username": "Kwasi Ohene-Adu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 339,
          "username": "Zatte",
          "name": "Mikael Rapp ",
          "avatar_template": "/user_avatar/forums.foundationdb.org/zatte/{size}/344_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 343,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/proposal-dont-identify-a-coordinator-based-on-its-ip/502/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 1828,
        "name": "Chr1st0ph",
        "username": "Chr1st0ph",
        "avatar_template": "/user_avatar/forums.foundationdb.org/chr1st0ph/{size}/353_2.png",
        "created_at": "2018-08-07T06:33:04.768Z",
        "cooked": "<p>I believe we need another feature based on DNS: support for \u201cseeds identifited by hostnames\u201d.</p>\n<p>Thus, you do not have to \u201ccopy\u201d the fdb.cluster file in Kubernetes for adding new nodes. You just define one or few seed nodes ( probably coordinators ), and these seed nodes provide the necessary topology information for new nodes and applications.</p>\n<p>What are your thoughts ?</p>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 26,
        "updated_at": "2018-08-07T06:33:04.768Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 10,
        "reads": 120,
        "readers_count": 119,
        "score": 74.0,
        "yours": false,
        "topic_id": 502,
        "topic_slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
        "display_username": "Chr1st0ph",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/request-for-faqs-about-running-foundationdb-in-production/1670/2",
            "internal": true,
            "reflection": true,
            "title": "Request for FAQs about running FoundationDB in production",
            "clicks": 1
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 247,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/proposal-dont-identify-a-coordinator-based-on-its-ip/502/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2881,
        "name": "Tobad357",
        "username": "tobad357",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/49beb7/{size}.png",
        "created_at": "2018-12-15T13:41:07.118Z",
        "cooked": "<p>Is there any progress on this as we would prefer to run FDB on K8S but currently it gets quite difficult if we for example delete all pods and they change ips</p>\n<p>Was there any news during the conference?</p>",
        "post_number": 13,
        "post_type": 1,
        "posts_count": 26,
        "updated_at": "2018-12-15T13:41:07.118Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 107,
        "readers_count": 106,
        "score": 46.4,
        "yours": false,
        "topic_id": 502,
        "topic_slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
        "display_username": "Tobad357",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 366,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/proposal-dont-identify-a-coordinator-based-on-its-ip/502/13",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2892,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2018-12-20T07:11:15.756Z",
        "cooked": "<p>Nope.  None of the talks were about how to cloudify FDB.</p>\n<p>There\u2019s been a few iterations of discussion about that DNS support in FDB will be necessary for kubernetes, but no one has signed up to do the work yet.</p>",
        "post_number": 14,
        "post_type": 1,
        "posts_count": 26,
        "updated_at": "2018-12-20T07:11:15.756Z",
        "reply_count": 0,
        "reply_to_post_number": 13,
        "quote_count": 0,
        "incoming_link_count": 11,
        "reads": 106,
        "readers_count": 105,
        "score": 76.2,
        "yours": false,
        "topic_id": 502,
        "topic_slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 366,
          "username": "tobad357",
          "name": "Tobad357",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/49beb7/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/proposal-dont-identify-a-coordinator-based-on-its-ip/502/14",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4142,
        "name": "Jared2501",
        "username": "jared2501",
        "avatar_template": "/user_avatar/forums.foundationdb.org/jared2501/{size}/266_2.png",
        "created_at": "2019-05-21T17:29:38.485Z",
        "cooked": "<p>Hey <a class=\"mention\" href=\"/u/alexmiller\">@alexmiller</a>, my team and I are somewhat interested in making these changes. We\u2019re especially interested in it since we\u2019d like to run FDB as a Kubernetes StatefulSet. A couple assumptions:</p>\n<ul>\n<li>The DNS server will be run in a highly available configuration. If DNS is down, we\u2019ve got more major problems that FDB being down.</li>\n<li>StatefulSets ensure that each pod is assigned a stable network identity. I.e. there will be hosts fdb-0.cluster, fdb-1.cluster, fdb-2.cluster, etc\u2026</li>\n<li>For a StatefulSet\u2019s network identity, there will only be a single IP address it resolves to at any one t ime.</li>\n</ul>\n<p>I had a quick perusal over the code, and it seems that the best way to make this change might be to:</p>\n<ol>\n<li>Extend the <code>NetworkAddress</code> class to be able to take a hostname.</li>\n<li>Change <code>connect</code> in <code>network.cpp</code> to resolve the host before connecting.</li>\n<li>Fix up all other usages of NetworkAddress to handle the hostname.</li>\n</ol>\n<p>Does this sound like a reasonable change to make?</p>",
        "post_number": 15,
        "post_type": 1,
        "posts_count": 26,
        "updated_at": "2019-05-21T17:29:38.485Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 92,
        "readers_count": 91,
        "score": 63.4,
        "yours": false,
        "topic_id": 502,
        "topic_slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
        "display_username": "Jared2501",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 260,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/proposal-dont-identify-a-coordinator-based-on-its-ip/502/15",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4179,
        "name": "Jared2501",
        "username": "jared2501",
        "avatar_template": "/user_avatar/forums.foundationdb.org/jared2501/{size}/266_2.png",
        "created_at": "2019-05-27T06:13:18.669Z",
        "cooked": "<p>Just a quick heads up: I looked into making this code change and decided it was a bit too difficult, and that it would introduce some issues with ser/de back compat. Instead, I opted for the following strategy:</p>\n<ul>\n<li>There\u2019s a process that is responsible for monitoring the Pods that are a member of the FDB StatefulSet, and also for running the fdbmonitor command.</li>\n<li>When it detects a change in the IP addresses of the Pods that are members of the SS, it stops the local fdbmonitor process (if one was previously started), generates a new fdb.cluster file with the new IP addresses, and restarts the fdbmonitor process with this new cluster file.</li>\n</ul>\n<p>I\u2019ve got this working for small cluster of 3 FDB nodes and am attempting see if I can break it.</p>\n<p>Obviously, this strategy is pretty naive and results in a small window of downtime in the case that a Pod is rescheduled to another Node. After I get it working, I\u2019m going to attempt some simple strategies to reduce/eliminate this downtime such as having the Pods that are alive co-ordinate their restarts with neighbouring Pods that they can reach.</p>\n<p>I will likely continue to assume that the number of Pods that make up the StatefulSet (i.e. there is a fixed number of fdbmonitor processes, and therefore a fixed number of co-ordinators) for the foreseeable future.</p>\n<p>If I\u2019m successful, and if people are interested, I\u2019m happy to release this code as an a Go library that others can use.</p>",
        "post_number": 16,
        "post_type": 1,
        "posts_count": 26,
        "updated_at": "2019-05-27T07:36:23.400Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 5,
        "reads": 89,
        "readers_count": 88,
        "score": 42.8,
        "yours": false,
        "topic_id": 502,
        "topic_slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
        "display_username": "Jared2501",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 260,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/proposal-dont-identify-a-coordinator-based-on-its-ip/502/16",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4193,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-05-28T21:41:10.693Z",
        "cooked": "<p>Sorry for being slow in getting back to you.  (Vacation, long weekend, nontrivial question, and all that.)</p>\n<p>This is an area that we had really hoped that the community would be able to contribute to, being the ones more actively hitting these struggles.  I would hope that with some help and guidence, you (and your team) would be able to make better progress on fixing this within FDB properly.</p>\n<p>As we\u2019re now discussing implementation details, I\u2019d like to shuffle this conversation back to within GitHub on <a href=\"https://github.com/apple/foundationdb/issues/354\" rel=\"nofollow noopener\">#354</a>, and I\u2019ll go start typing out the rest of my thoughts there.</p>",
        "post_number": 17,
        "post_type": 1,
        "posts_count": 26,
        "updated_at": "2019-05-28T21:41:10.693Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 10,
        "reads": 84,
        "readers_count": 83,
        "score": 66.8,
        "yours": false,
        "topic_id": 502,
        "topic_slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/issues/354",
            "internal": false,
            "reflection": false,
            "title": "Allow DNS hostnames to be used in cluster files \u00b7 Issue #354 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 51
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/proposal-dont-identify-a-coordinator-based-on-its-ip/502/17",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4277,
        "name": "John Brownlee",
        "username": "john_brownlee",
        "avatar_template": "/user_avatar/forums.foundationdb.org/john_brownlee/{size}/22_2.png",
        "created_at": "2019-06-04T15:44:01.377Z",
        "cooked": "<p>There are a couple of other areas of concerns with IPs changing that we may want to address with a different kind of process identifier. Exclusions and kills are both done by IP today. For kills, it\u2019s feasible to look up the IP immediately before killing the process, but it would be better if we could avoid this work in administrative tooling by supplying another identifier that we use instead. For excludes, I think there\u2019s a bigger safety concern. It\u2019s plausible that a process could get rescheduled after it is excluded, but before it is fully evacuated, and I think this would cause it to rejoin the cluster and start taking on new data. This could lead the person or system doing the exclusion to falsely believe it is safe to take down the instance.  If this happens to multiple instances, that could lead to data loss. This seems like an area where we\u2019ll need an identifier that we can track across the lifetime of an instance.</p>\n<p>Caveat: I\u2019ve never seen the exclusion problem I described above, so it\u2019s possible it\u2019s not a problem in practice.</p>",
        "post_number": 18,
        "post_type": 1,
        "posts_count": 26,
        "updated_at": "2019-06-04T15:44:01.377Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 8,
        "reads": 84,
        "readers_count": 83,
        "score": 56.8,
        "yours": false,
        "topic_id": 502,
        "topic_slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
        "display_username": "John Brownlee",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 3,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/proposal-dont-identify-a-coordinator-based-on-its-ip/502/18",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4382,
        "name": "Rishabh",
        "username": "rishabh",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rishabh/{size}/540_2.png",
        "created_at": "2019-06-14T11:12:21.616Z",
        "cooked": "<p>I see good discussion on k8s here, hence posting my requirements. Please correct me if I should post it somewhere else.</p>\n<p>I have 2 separate requirements for deploying fdb on k8s as a <a href=\"https://kubernetes.io/docs/tutorials/stateful-application/basic-stateful-set/\" rel=\"nofollow noopener\">StatefulSet</a>, in which, each pod has its dedicated <a href=\"https://kubernetes.io/docs/concepts/storage/persistent-volumes/\" rel=\"nofollow noopener\">Persistent Volume</a> .</p>\n<p><strong>Deploying/Scaling on k8s</strong><br>\nI will first illustarate how <a href=\"https://kubernetes.io/docs/tutorials/stateful-application/cassandra/\" rel=\"nofollow noopener\">cassandra is deployed/scaled on k8s</a>.<br>\nCassandra has a concept of \u201cseed\u201d, where you can provide <strong>any</strong> node of the cluster to a new node and the new node will join the cluster.<br>\nThe steps are:</p>\n<ul>\n<li>\u201cNew node\u201d contacts \u201cSeed Node\u201d and gets cluster info (effectively the cluster file)</li>\n<li>\u201cNew Node\u201d makes this info durable (effectively creating cluster file locally)</li>\n<li>\u201cNew Node\u201d joins the cluster</li>\n</ul>\n<p>Note: Here, \u201cSeed Node\u201d is not required to be a special node (ex: a coordinator).</p>\n<p>The first k8s pod is self seeded and next are seeded by the previous ones (satetefulset has <strong>ordered pods</strong>).<br>\nIn general , one should try to have 3 designated seed nodes (per datacenter), so that we are resilient of pod failures. For this, one can manage initial nodes as trustable seeds.</p>\n<p>It\u2019s important to note that you might have your seed node excluded from cluster and so your new node might get old cluster information (stale cluster file) and that is something that needs to be managed (I will not go into its details, as this needs to be manged in any approach).</p>\n<p>Now lets go to fdb\u2019s doc: <a href=\"https://apple.github.io/foundationdb/administration.html#adding-machines-to-a-cluster\" rel=\"nofollow noopener\">Adding machines to a cluster</a></p>\n<ol>\n<li>Copy an <a href=\"https://apple.github.io/foundationdb/administration.html#specifying-a-cluster-file\" rel=\"nofollow noopener\">existing cluster file</a> from a server in your cluster to the new machine, overwriting the existing  <code>fdb.cluster</code>  file.</li>\n<li>Restart FoundationDB on the new machine so that it uses the new cluster file</li>\n</ol>\n<p>How should I do this <strong>automatically</strong> while I deploy fdb as StatefulSet?<br>\nPlease note that when I say <strong>automatically</strong>, I mean that I should just use \u201ckubectl statefuleset scale\u201d command and my cluster should scale (assuming all of my pods are identical by default).</p>\n<p>There are workarounds:</p>\n<ul>\n<li>Use a shared <a href=\"https://kubernetes.io/docs/concepts/storage/persistent-volumes/\" rel=\"nofollow noopener\">Persistent Volume</a> across all pods to share cluster file</li>\n<li>Fix coordinator pods (staefulset is ordered)</li>\n<li>Use <em>kubectl cp</em> inside pod</li>\n<li>Enable ssh across pods to get cluster file</li>\n<li>\u2026</li>\n</ul>\n<p>But all workarouds have drawbacks.</p>\n<p>Feature request: <em>Could we have fdb support such seeding as part of inter-node communication?</em></p>\n<p><strong>Recovering pod after failure</strong><br>\nWhen a pod in a StatefulSet fails, k8s allocates a new pod, with same DNS name, but can be at differnet IP. Note that the data it had is persistent in attached Persistent Volume.</p>\n<p>How should I make fdb cluster rejoin such a node after it comes back with its data? (assume here taht it has cluster file and it connects to clster effectively)?</p>\n<p>Feature request: <em>Could we have fdb support identification of nodes in a cluster by some genearted ID, independent of IP/host?</em></p>\n<p><strong>Some more info</strong></p>\n<p>Please note that here I have not requested features like</p>\n<ul>\n<li>identify coordinator by DNS hostname</li>\n<li>support DNS hostname names in cluster file</li>\n</ul>\n<p>I see \u201ccluster file\u201d as seed in a generic way, and I don\u2019t care if it has DNS names or IPs inside it. I know my pods in the cluster (DNS name and current IP) and just want generic seeding to be avialable in fdb.</p>\n<p>Similarly, I don\u2019t want node identifier based on DNS name. It helps me in StatefulSet deployment. But I believe that it\u2019s not something fdb should care about. Fdb should implement this in a generic way.</p>\n<p>Note: I know that writing a custom k8s controller (with a custom <em>scale</em> operation) is one of a sol\u2019n here. But, maintaining that is another overhead for me.</p>",
        "post_number": 19,
        "post_type": 1,
        "posts_count": 26,
        "updated_at": "2019-06-14T11:12:21.616Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 26,
        "reads": 93,
        "readers_count": 92,
        "score": 168.6,
        "yours": false,
        "topic_id": 502,
        "topic_slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
        "display_username": "Rishabh",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://apple.github.io/foundationdb/administration.html#adding-machines-to-a-cluster",
            "internal": false,
            "reflection": false,
            "title": "Administration \u2014 FoundationDB 6.1",
            "clicks": 3
          },
          {
            "url": "https://kubernetes.io/docs/tutorials/stateful-application/cassandra/",
            "internal": false,
            "reflection": false,
            "title": "Example: Deploying Cassandra with Stateful Sets - Kubernetes",
            "clicks": 2
          },
          {
            "url": "https://kubernetes.io/docs/tutorials/stateful-application/basic-stateful-set/",
            "internal": false,
            "reflection": false,
            "title": "StatefulSet Basics - Kubernetes",
            "clicks": 1
          },
          {
            "url": "https://apple.github.io/foundationdb/administration.html#specifying-a-cluster-file",
            "internal": false,
            "reflection": false,
            "title": "Administration \u2014 FoundationDB 6.1",
            "clicks": 0
          },
          {
            "url": "https://kubernetes.io/docs/concepts/storage/persistent-volumes/",
            "internal": false,
            "reflection": false,
            "title": "Persistent Volumes - Kubernetes",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 545,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/proposal-dont-identify-a-coordinator-based-on-its-ip/502/19",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4390,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-06-14T19:55:09.157Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"rishabh\" data-post=\"19\" data-topic=\"502\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/rishabh/48/540_2.png\" class=\"avatar\"> rishabh:</div>\n<blockquote>\n<p>How should I do this <strong>automatically</strong> while I deploy fdb as StatefulSet?</p>\n</blockquote>\n</aside>\n<p>Do you have enough of an understanding of Kubernetes to know if vending clusterfiles via a <a href=\"https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/\">custom resource</a> is an appropriate solution to this?</p>",
        "post_number": 20,
        "post_type": 1,
        "posts_count": 26,
        "updated_at": "2019-06-14T19:55:09.157Z",
        "reply_count": 1,
        "reply_to_post_number": 19,
        "quote_count": 1,
        "incoming_link_count": 7,
        "reads": 84,
        "readers_count": 83,
        "score": 56.8,
        "yours": false,
        "topic_id": 502,
        "topic_slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/",
            "internal": false,
            "reflection": false,
            "title": "Custom Resources - Kubernetes",
            "clicks": 8
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/proposal-dont-identify-a-coordinator-based-on-its-ip/502/20",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      1438,
      1441,
      1447,
      1448,
      1454,
      1461,
      1467,
      1780,
      1783,
      1791,
      1799,
      1828,
      2881,
      2892,
      4142,
      4179,
      4193,
      4277,
      4382,
      4390,
      4409,
      4424,
      4519,
      4520,
      4806,
      4807
    ]
  },
  "timeline_lookup": [
    [
      1,
      2691
    ],
    [
      3,
      2690
    ],
    [
      4,
      2689
    ],
    [
      5,
      2688
    ],
    [
      6,
      2687
    ],
    [
      7,
      2686
    ],
    [
      8,
      2638
    ],
    [
      9,
      2637
    ],
    [
      10,
      2636
    ],
    [
      11,
      2635
    ],
    [
      12,
      2633
    ],
    [
      13,
      2502
    ],
    [
      14,
      2498
    ],
    [
      15,
      2345
    ],
    [
      16,
      2340
    ],
    [
      17,
      2338
    ],
    [
      18,
      2331
    ],
    [
      19,
      2321
    ],
    [
      21,
      2319
    ],
    [
      22,
      2318
    ],
    [
      23,
      2313
    ],
    [
      25,
      2268
    ]
  ],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Proposal: Don&rsquo;t identify a coordinator based on its IP",
  "id": 502,
  "title": "Proposal: Don't identify a coordinator based on its IP",
  "posts_count": 26,
  "created_at": "2018-06-09T13:09:51.305Z",
  "views": 8425,
  "reply_count": 13,
  "like_count": 10,
  "last_posted_at": "2019-08-06T20:24:41.013Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "proposal-dont-identify-a-coordinator-based-on-its-ip",
  "category_id": 8,
  "word_count": 5622,
  "deleted_at": null,
  "user_id": 302,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_502",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 26,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 13,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": null,
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 7,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 545,
        "username": "rishabh",
        "name": "Rishabh",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rishabh/{size}/540_2.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 302,
        "username": "basgys",
        "name": "Bastien Gysler",
        "avatar_template": "/user_avatar/forums.foundationdb.org/basgys/{size}/291_2.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 260,
        "username": "jared2501",
        "name": "Jared2501",
        "avatar_template": "/user_avatar/forums.foundationdb.org/jared2501/{size}/266_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 22,
        "username": "dave",
        "name": "David Scherer",
        "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 339,
        "username": "Zatte",
        "name": "Mikael Rapp ",
        "avatar_template": "/user_avatar/forums.foundationdb.org/zatte/{size}/344_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 343,
        "username": "kwasi",
        "name": "Kwasi Ohene-Adu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/kwasi/{size}/350_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 614,
        "username": "qrpike",
        "name": "Quinton Pike",
        "avatar_template": "/user_avatar/forums.foundationdb.org/qrpike/{size}/618_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 3,
        "username": "john_brownlee",
        "name": "John Brownlee",
        "avatar_template": "/user_avatar/forums.foundationdb.org/john_brownlee/{size}/22_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 247,
        "username": "Chr1st0ph",
        "name": "Chr1st0ph",
        "avatar_template": "/user_avatar/forums.foundationdb.org/chr1st0ph/{size}/353_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 366,
        "username": "tobad357",
        "name": "Tobad357",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/49beb7/{size}.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 307,
        "username": "jwr",
        "name": "Jan Rychter",
        "avatar_template": "/user_avatar/forums.foundationdb.org/jwr/{size}/302_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 12,
        "username": "ajbeamon",
        "name": "A.J. Beamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      }
    ],
    "created_by": {
      "id": 302,
      "username": "basgys",
      "name": "Bastien Gysler",
      "avatar_template": "/user_avatar/forums.foundationdb.org/basgys/{size}/291_2.png"
    },
    "last_poster": {
      "id": 614,
      "username": "qrpike",
      "name": "Quinton Pike",
      "avatar_template": "/user_avatar/forums.foundationdb.org/qrpike/{size}/618_2.png"
    },
    "links": [
      {
        "url": "https://forums.foundationdb.org/t/feature-request-hostnames-for-coordinators/402",
        "title": "Feature request: hostnames for coordinators",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 61,
        "user_id": 302,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://github.com/apple/foundationdb/issues/354",
        "title": "Allow DNS hostnames to be used in cluster files \u00b7 Issue #354 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 51,
        "user_id": 13,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/issues/354",
        "title": "No HOST support in fdb.cluster \u00b7 Issue #354 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 47,
        "user_id": 302,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/e0c8175f3ccad92c582a3e70e9bcae58fff53633/fdbserver/SimulatedCluster.actor.cpp#L548",
        "title": "foundationdb/SimulatedCluster.actor.cpp at e0c8175f3ccad92c582a3e70e9bcae58fff53633 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 17,
        "user_id": 22,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/",
        "title": "Custom Resources - Kubernetes",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 8,
        "user_id": 13,
        "domain": "kubernetes.io",
        "root_domain": "kubernetes.io"
      },
      {
        "url": "https://kubernetes.io/docs/tutorials/stateful-application/cassandra/",
        "title": "Example: Deploying Cassandra with Stateful Sets - Kubernetes",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 4,
        "user_id": 545,
        "domain": "kubernetes.io",
        "root_domain": "kubernetes.io"
      },
      {
        "url": "https://forums.foundationdb.org/t/doubts-regarding-fdb-cluster-file/1109/2",
        "title": "Doubts regarding fdb.cluster file",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 4,
        "user_id": 545,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://apple.github.io/foundationdb/administration.html#adding-machines-to-a-cluster",
        "title": "Administration \u2014 FoundationDB 6.1",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 545,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      },
      {
        "url": "https://www.cockroachlabs.com/docs/stable/training/cluster-startup-and-scaling.html#step-9-scale-the-cluster",
        "title": "Cluster Startup and Scaling | CockroachDB Docs",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 545,
        "domain": "www.cockroachlabs.com",
        "root_domain": "cockroachlabs.com"
      },
      {
        "url": "https://forums.foundationdb.org/t/request-for-faqs-about-running-foundationdb-in-production/1670/2",
        "title": "Request for FAQs about running FoundationDB in production",
        "internal": true,
        "attachment": false,
        "reflection": true,
        "clicks": 1,
        "user_id": 661,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://forums.foundationdb.org/t/allowing-client-apis-to-use-an-in-memory-fdb-cluster-file/675/2",
        "title": "Allowing client APIs to use an \"in-memory\" fdb.cluster file?",
        "internal": true,
        "attachment": false,
        "reflection": true,
        "clicks": 1,
        "user_id": 8,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://forums.foundationdb.org/t/6-1-fdb-create-database-without-fdb-cluster/1237/2",
        "title": "6.1: 'fdb_create_database()' without 'fdb.cluster'",
        "internal": true,
        "attachment": false,
        "reflection": true,
        "clicks": 1,
        "user_id": 12,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://docs.couchbase.com/server/current/cli/cbcli/couchbase-cli-server-add.html",
        "title": "server-add | Couchbase Docs",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 545,
        "domain": "docs.couchbase.com",
        "root_domain": "couchbase.com"
      },
      {
        "url": "https://kubernetes.io/docs/tutorials/stateful-application/basic-stateful-set/",
        "title": "StatefulSet Basics - Kubernetes",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 545,
        "domain": "kubernetes.io",
        "root_domain": "kubernetes.io"
      },
      {
        "url": "https://blog.yugabyte.com/understanding-how-yugabyte-db-runs-on-kubernetes/",
        "title": "Understanding How YugaByte DB Runs on Kubernetes - The Distributed SQL Blog",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 545,
        "domain": "blog.yugabyte.com",
        "root_domain": "yugabyte.com"
      },
      {
        "url": "https://blog.couchbase.com/introducing-couchbase-operator/",
        "title": "Introducing Couchbase Operator | The Couchbase Blog",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 545,
        "domain": "blog.couchbase.com",
        "root_domain": "couchbase.com"
      }
    ]
  },
  "bookmarks": []
}