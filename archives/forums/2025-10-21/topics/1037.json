{
  "post_stream": {
    "posts": [
      {
        "id": 3063,
        "name": "Stephen Merity",
        "username": "Smerity",
        "avatar_template": "/user_avatar/forums.foundationdb.org/smerity/{size}/482_2.png",
        "created_at": "2019-01-18T13:14:34.722Z",
        "cooked": "<p>As a preface, I fundamentally love what has already been achieved with FoundationDB. Constructing a reliable and flexible primitive (KV) and building on top of it feels so clearly the right idea to me. I love that there are hints of BigTable history too <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=6\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"></p>\n<p>I\u2019ve been setting up a cluster for FoundationDB on a public cloud and have wanted to add TLS for communication. I have followed the instructions as best I can from <a href=\"https://apple.github.io/foundationdb/tls.html\" rel=\"nofollow noopener\">FDB\u2019s TLS page</a> but have yet to get success.</p>\n<p>The trace reports \u201cFDBLibTLSVerifyCert VerifyError self signed certificate\u201d followed by \u201cTLSConnectionHandshakeError\u201d so I\u2019d imagine I\u2019m just following the setup incorrectly. I also looked at the tests provided in the TLS plugin directory to try to shed some light but that hasn\u2019t led me to success.</p>\n<p>Given I\u2019ve produced <code>fdb.pem</code> from scratch using the OpenSSL instructions on that page, can anyone help me with what\u2019s the minimal amount of settings to have my servers and clients communicating using TLS? I may well be failing to set <code>tls_certificate_file</code> / <code>tls_key_file</code> / <code>tls_ca_file</code> correctly though I\u2019ve tried a few permutations so far.</p>\n<p>If someone helps me even in loose form here I\u2019ll happily update the documentation so you\u2019ll get less questions from people like me <img src=\"https://emoji.discourse-cdn.com/twitter/wink.png?v=6\" title=\":wink:\" class=\"emoji\" alt=\":wink:\"> Thanks! <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=6\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"></p>\n<p>P.S. I\u2019ve also found that if the Python client has an issue with forming a connection (either due to TLS or purposefully breaking the cluster file by changing the descriptor for example) then Python will freeze indefinitely and must be Ctrl + Z\u2019ed. I will investigate that further and potentially create an issue.</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2019-02-05T03:47:37.249Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1121,
        "reads": 134,
        "readers_count": 133,
        "score": 5633.8,
        "yours": false,
        "topic_id": 1037,
        "topic_slug": "solved-correct-setup-of-tls-for-foundationdb",
        "display_username": "Stephen Merity",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://apple.github.io/foundationdb/tls.html",
            "internal": false,
            "reflection": false,
            "title": "Transport Layer Security \u2014 FoundationDB 6.0",
            "clicks": 56
          },
          {
            "url": "https://forums.foundationdb.org/t/performing-backups-without-tls/1467",
            "internal": true,
            "reflection": true,
            "title": "Performing backups without TLS",
            "clicks": 1
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 483,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/solved-correct-setup-of-tls-for-foundationdb/1037/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 3065,
        "name": "Seph Gentle",
        "username": "josephg",
        "avatar_template": "/user_avatar/forums.foundationdb.org/josephg/{size}/84_2.png",
        "created_at": "2019-01-18T14:13:37.625Z",
        "cooked": "<p>I can\u2019t speak to the TLS connection setup, but I\u2019ve hit that freezing issue before too. Ctrl+Z only backgrounds a process - those python processes will still be running. On a few occasions I\u2019ve ended up needing to <code>killall Python</code> to stop it. (or <code>killall python</code> or something on linux.)</p>\n<p>I don\u2019t know why it doesn\u2019t respond to SIGINT, but the problem is that the cluster\u2019s database doesn\u2019t exist / isn\u2019t configured. You can fix that by connecting with <code>fdbcli</code> and running <code>configure new single memory</code>. (Or one of the other variants of <code>configure new</code> based on the storage engine and redundancy mode you want - <code>help configure</code> for options). Once you do that those python processes will probably suddenly spring back to life and start running again as if nothing happened.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2019-01-18T14:13:37.625Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 11,
        "reads": 128,
        "readers_count": 127,
        "score": 85.6,
        "yours": false,
        "topic_id": 1037,
        "topic_slug": "solved-correct-setup-of-tls-for-foundationdb",
        "display_username": "Seph Gentle",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 120,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/solved-correct-setup-of-tls-for-foundationdb/1037/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3067,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-01-18T16:41:46.294Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"josephg\" data-post=\"2\" data-topic=\"1037\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/josephg/48/84_2.png\" class=\"avatar\"> josephg:</div>\n<blockquote>\n<p>I don\u2019t know why it doesn\u2019t respond to SIGINT</p>\n</blockquote>\n</aside>\n<p>Yeah, this doesn\u2019t seem like great behavior. Feel free to raise an issue on GitHub for somebody to take a look.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2019-01-18T16:41:46.294Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 1,
        "incoming_link_count": 27,
        "reads": 134,
        "readers_count": 133,
        "score": 166.8,
        "yours": false,
        "topic_id": 1037,
        "topic_slug": "solved-correct-setup-of-tls-for-foundationdb",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/solved-correct-setup-of-tls-for-foundationdb/1037/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3068,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-01-18T17:26:09.817Z",
        "cooked": "<p>I\u2019m not super familiar with our TLS configuration options, but I tried playing around with this myself to see what I could find. For my first attempt, I tried the following:</p>\n<ol>\n<li>Update the cluster file to add the :tls suffix to each coordinator</li>\n<li>Create a certificate and key file (I ran the commands listed in <a href=\"https://apple.github.io/foundationdb/tls.html#certificate-creation\" rel=\"nofollow noopener\">this section</a>)</li>\n<li>Add <code>tls_certificate_file</code>, <code>tls_key_file</code>, and <code>tls_verify_peers</code> to the <code>fdbserver</code> section  of <code>foundationdb.conf</code>.</li>\n</ol>\n<pre><code class=\"lang-auto\">tls_certificate_file=/path/to/tls/fdb.pem\ntls_key_file=/path/to/tls/private.key\ntls_verify_peers=Check.Valid=0\n</code></pre>\n<ol start=\"4\">\n<li>I connected to the cluster using <code>fdbcli</code>, which required me to pass <code>--tls_certificate_file</code> and <code>--tls_key_file</code>. From a client, I think you would either use the corresponding client options or the environment variables.</li>\n</ol>\n<p>Notice that I\u2019m turning off peer verification, which allows me to get past the \u201cVerifyError self signed certificate\u201d.</p>\n<p>Once I confirmed that worked, I tried turning back on peer verification by removing the <code>tls_verify_peers</code> parameter. I then got it to work by modifying <code>foundationdb.conf</code> to add <code>tls_ca_file=/path/to/tls/cert.crt</code>, which is one of the files generated in step <span class=\"hashtag\">#2</span> above.</p>\n<p>One thing I noticed, though, is that it doesn\u2019t appear that backup agents can accept these TLS parameters, so my backup agent is not able to connect. I suppose it could be made to work using the environment variables, but I\u2019ll raise an issue to support the command line options as well.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2019-01-18T17:26:09.817Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 40,
        "reads": 133,
        "readers_count": 132,
        "score": 226.6,
        "yours": false,
        "topic_id": 1037,
        "topic_slug": "solved-correct-setup-of-tls-for-foundationdb",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://apple.github.io/foundationdb/tls.html#certificate-creation",
            "internal": false,
            "reflection": false,
            "title": "Transport Layer Security \u2014 FoundationDB 6.0",
            "clicks": 66
          },
          {
            "url": "https://forums.foundationdb.org/t/tls-setup-on-mac-and-linux/1188/5",
            "internal": true,
            "reflection": true,
            "title": "TLS setup on Mac and Linux",
            "clicks": 11
          },
          {
            "url": "https://forums.foundationdb.org/t/foundationdb-fdbbackup/1460/2",
            "internal": true,
            "reflection": true,
            "title": "FoundationDB fdbbackup",
            "clicks": 7
          },
          {
            "url": "https://forums.foundationdb.org/t/performing-backups-without-tls/1467/2",
            "internal": true,
            "reflection": true,
            "title": "Performing backups without TLS",
            "clicks": 6
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/solved-correct-setup-of-tls-for-foundationdb/1037/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3071,
        "name": "Seph Gentle",
        "username": "josephg",
        "avatar_template": "/user_avatar/forums.foundationdb.org/josephg/{size}/84_2.png",
        "created_at": "2019-01-18T21:03:30.725Z",
        "cooked": "<p>Good shout. Added an issue to github:</p>\n<aside class=\"onebox githubissue\">\n  <header class=\"source\">\n      <a href=\"https://github.com/apple/foundationdb/issues/1065\" target=\"_blank\" rel=\"nofollow noopener\">github.com/apple/foundationdb</a>\n  </header>\n  <article class=\"onebox-body\">\n    <a href=\"https://github.com/josephg\" rel=\"nofollow noopener\">\n<img src=\"https://global.discourse-cdn.com/foundationdb/original/1X/dc8f728a8689e33edef6f7179816b65962e0bca6.png\" class=\"thumbnail onebox-avatar\" width=\"96\" height=\"96\">\n</a>\n\n<h4><a href=\"https://github.com/apple/foundationdb/issues/1065\" target=\"_blank\" rel=\"nofollow noopener\">Issue: Python client does not respond to SIGINT while waiting for database to be configured</a></h4>\n\n<div class=\"date\" style=\"margin-top:10px;\">\n\t<div class=\"user\" style=\"margin-top:10px;\">\n\topened by <a href=\"https://github.com/josephg\" target=\"_blank\" rel=\"nofollow noopener\">josephg</a>\n\ton <a href=\"https://github.com/apple/foundationdb/issues/1065\" target=\"_blank\" rel=\"nofollow noopener\">2019-01-18</a>\n\t</div>\n\t<div class=\"user\">\n\t</div>\n</div>\n\n<pre class=\"content\" style=\"white-space: pre-wrap;\">If you start a fresh cluster but do not configure your local database files, the fdb client hard freezes while waiting...</pre>\n\n<div class=\"labels\">\n</div>\n\n  </article>\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n  <div style=\"clear: both\"></div>\n</aside>\n",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2019-01-18T21:03:30.725Z",
        "reply_count": 0,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 12,
        "reads": 123,
        "readers_count": 122,
        "score": 84.6,
        "yours": false,
        "topic_id": 1037,
        "topic_slug": "solved-correct-setup-of-tls-for-foundationdb",
        "display_username": "Seph Gentle",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/issues/1065",
            "internal": false,
            "reflection": false,
            "title": "Python client does not respond to SIGINT while waiting for database to be configured \u00b7 Issue #1065 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 13
          },
          {
            "url": "https://github.com/josephg",
            "internal": false,
            "reflection": false,
            "title": "josephg (Seph Gentle) \u00b7 GitHub",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 12,
          "username": "ajbeamon",
          "name": "A.J. Beamon",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 120,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/solved-correct-setup-of-tls-for-foundationdb/1037/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3277,
        "name": "Stephen Merity",
        "username": "Smerity",
        "avatar_template": "/user_avatar/forums.foundationdb.org/smerity/{size}/482_2.png",
        "created_at": "2019-02-05T03:46:54.237Z",
        "cooked": "<p>Thank you both <a class=\"mention\" href=\"/u/ajbeamon\">@ajbeamon</a> and <a class=\"mention\" href=\"/u/josephg\">@josephg</a>, brilliant replies! I apologize for not replying earlier giving you proper thanks but I was essentially away from keyboard for two weeks.</p>\n<p>Perfect step by step <a class=\"mention\" href=\"/u/ajbeamon\">@ajbeamon</a>. I was able to replicate your SSL setup after creating a new FDB cluster <img src=\"https://emoji.discourse-cdn.com/twitter/sunny.png?v=6\" title=\":sunny:\" class=\"emoji\" alt=\":sunny:\"> For now I\u2019m throwing the kitchen sink (cert file + key file + CA file + no verification) at <code>fdbcli</code> as my setup still doesn\u2019t run without the CA file even with <code>tls_verify_peers=Check.Valid=0</code> - but I really don\u2019t mind as it works <img src=\"https://emoji.discourse-cdn.com/twitter/wink.png?v=6\" title=\":wink:\" class=\"emoji\" alt=\":wink:\"></p>\n<p>I also saw that <a class=\"mention\" href=\"/u/bnamasivayam\">@bnamasivayam</a> has already fixed the \u201cSupport TLS command line options in backup\u201d and it\u2019s waiting to be committed. So exciting!</p>\n<p>I am curious if there\u2019s a way of indicating the TLS information that should be forwarded to the backup agent from the configuration file however as it\u2019s automatically started by <code>fdbmonitor</code>. I\u2019m guessing the laziest setup would be (when the command line options are merged):</p>\n<pre><code class=\"lang-auto\">[backup_agent]\ncommand = /usr/lib/foundationdb/backup_agent/backup_agent --tls_certificate_file /etc/foundationdb/fdb.pem --tls_key_file /etc/foundationdb/private.key --tls_ca_file /etc/foundationdb/cert.crt\n</code></pre>\n<p>Until then (for my and others reference), backups can be performed by starting a \u201cTLS happy\u201d backup agent and running the standard backup operations as expected.</p>\n<pre><code class=\"lang-auto\">FDB_TLS_CERTIFICATE_FILE=\"/etc/foundationdb/fdb.pem\" FDB_TLS_KEY_FILE=\"/etc/foundationdb/private.key\" FDB_TLS_CA_FILE=\"/etc/foundationdb/cert.crt\" /usr/lib/foundationdb/backup_agent/backup_agent -C /etc/foundationdb/fdb.cluster\n</code></pre>\n<p>I\u2019ll look at adding a few small bits to <a href=\"https://github.com/apple/foundationdb/blob/master/documentation/sphinx/source/tls.rst\" rel=\"nofollow noopener\">FoundationDB\u2019s TLS docs</a> to make it easier for the next person who doesn\u2019t have a <a class=\"mention\" href=\"/u/ajbeamon\">@ajbeamon</a> to appear magically out of nowhere to help them <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=6\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"></p>\n<p>tldr; I honestly can\u2019t tell you how excited I am. As noted in the original post, I\u2019m a strong believer in the FoundationDB layered philosophy but I am almost equally amazed by the responsiveness of the forums and community. I\u2019ll be contributing to it for certain.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2019-02-05T03:46:54.237Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 26,
        "reads": 112,
        "readers_count": 111,
        "score": 187.4,
        "yours": false,
        "topic_id": 1037,
        "topic_slug": "solved-correct-setup-of-tls-for-foundationdb",
        "display_username": "Stephen Merity",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/blob/master/documentation/sphinx/source/tls.rst",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/tls.rst at master \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 40
          },
          {
            "url": "https://forums.foundationdb.org/t/run-fdbbackup-fdbrestore-on-a-tls-enabled-cluster/1851/6",
            "internal": true,
            "reflection": true,
            "title": "Run fdbbackup/fdbrestore on a TLS-enabled cluster",
            "clicks": 1
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 2
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 483,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/solved-correct-setup-of-tls-for-foundationdb/1037/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3284,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-02-05T17:45:56.545Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"Smerity\" data-post=\"6\" data-topic=\"1037\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/smerity/48/482_2.png\" class=\"avatar\"> Smerity:</div>\n<blockquote>\n<p>I am curious if there\u2019s a way of indicating the TLS information that should be forwarded to the backup agent from the configuration file however as it\u2019s automatically started by <code>fdbmonitor</code> . I\u2019m guessing the laziest setup would be (when the command line options are merged):</p>\n</blockquote>\n</aside>\n<p>Once the command-line options are available, you should be able to add each parameter as a line in the configuration, similar to how it is being done in the <code>fdbserver</code> example in the previous post. Each of those gets converted to a command-line option that is passed to the binary when run.</p>\n<aside class=\"quote no-group\" data-username=\"Smerity\" data-post=\"6\" data-topic=\"1037\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/smerity/48/482_2.png\" class=\"avatar\"> Smerity:</div>\n<blockquote>\n<p>For now I\u2019m throwing the kitchen sink (cert file + key file + CA file + no verification) at <code>fdbcli</code> as my setup still doesn\u2019t run without the CA file even with <code>tls_verify_peers=Check.Valid=0</code> - but I really don\u2019t mind as it works</p>\n</blockquote>\n</aside>\n<p>Glad to hear you were able to get it running! If at some point you want to pursue solving this last problem (which may be helpful for the documentation part), let us know and we can try to figure out what\u2019s going on.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2019-02-05T17:45:56.545Z",
        "reply_count": 0,
        "reply_to_post_number": 6,
        "quote_count": 1,
        "incoming_link_count": 14,
        "reads": 108,
        "readers_count": 107,
        "score": 91.6,
        "yours": false,
        "topic_id": 1037,
        "topic_slug": "solved-correct-setup-of-tls-for-foundationdb",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/solved-correct-setup-of-tls-for-foundationdb/1037/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8833,
        "name": "Shubham",
        "username": "shubham4060",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/0ea827/{size}.png",
        "created_at": "2020-12-03T19:46:59.291Z",
        "cooked": "<p>I have set up a TLS enabled cluster following the steps highlighted by <a class=\"mention\" href=\"/u/ajbeamon\">@ajbeamon</a> and have verified the behavior by trying to connect to the same using fdbcli and providing the necessary certificate and key files. But while connecting to the cluster from a java client showed some strange behavior. Setting the TLS paths in the network options while running the java client through Windows OS gave a TLS error but interestingly enough the same worked on a unix machine. The network options are set like this:</p>\n<pre><code>        fdb.options().setTLSCertPath(\"path to cert file\");\n        fdb.options().setTLSCaPath(\"path to CA file\");\n        fdb.options().setTLSKeyPath(\"path to key file\");\n        fdb.options().setTLSVerifyPeers(\"Check.Valid=1\".getBytes());\n</code></pre>\n<p>and the stacktrace looks like this :</p>\n<p>Exception in thread \u201cmain\u201d com.apple.foundationdb.FDBException: TLS error<br>\nat com.apple.foundationdb.FDB.Network_setOption(Native Method)<br>\nat com.apple.foundationdb.OptionsSet.setOption(OptionsSet.java:55)<br>\nat com.apple.foundationdb.NetworkOptions.setTLSCertPath(NetworkOptions.java:87)<br>\nat Transaction.main(Transaction.java:33)</p>\n<p>can anyone please help if i am missing something here?</p>\n<p>And also for the record layer i couldn\u2019t find any way from which the TLS paths can be set in the network options from the java client. Is there any other way to specify the tls paths in java client itself?</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2020-12-03T19:47:33.121Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 7,
        "reads": 62,
        "readers_count": 61,
        "score": 47.4,
        "yours": false,
        "topic_id": 1037,
        "topic_slug": "solved-correct-setup-of-tls-for-foundationdb",
        "display_username": "Shubham",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 790,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/solved-correct-setup-of-tls-for-foundationdb/1037/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      3063,
      3065,
      3067,
      3068,
      3071,
      3277,
      3284,
      8833
    ]
  },
  "timeline_lookup": [
    [
      1,
      2468
    ],
    [
      6,
      2451
    ],
    [
      7,
      2450
    ],
    [
      8,
      1783
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "(Solved) Correct setup of TLS for FoundationDB",
  "id": 1037,
  "title": "(Solved) Correct setup of TLS for FoundationDB",
  "posts_count": 8,
  "created_at": "2019-01-18T13:14:34.597Z",
  "views": 3516,
  "reply_count": 3,
  "like_count": 2,
  "last_posted_at": "2020-12-03T19:46:59.291Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "solved-correct-setup-of-tls-for-foundationdb",
  "category_id": 7,
  "word_count": 1477,
  "deleted_at": null,
  "user_id": 483,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_1037",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 8,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 4,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "TLS implemenation for foundationdb",
      "id": 3503,
      "title": "TLS implemenation for foundationdb",
      "slug": "tls-implemenation-for-foundationdb",
      "posts_count": 3,
      "reply_count": 1,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2022-08-17T16:16:01.361Z",
      "last_posted_at": "2022-08-18T04:03:11.190Z",
      "bumped": true,
      "bumped_at": "2022-08-18T11:36:36.646Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 566,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 1116,
            "username": "gvddk",
            "name": "Deekshit kumar",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/bbce88/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Set up fdb to use TLS failure with N2_ConnectError",
      "id": 3020,
      "title": "Set up fdb to use TLS failure with N2_ConnectError",
      "slug": "set-up-fdb-to-use-tls-failure-with-n2-connecterror",
      "posts_count": 9,
      "reply_count": 3,
      "highest_post_number": 9,
      "image_url": null,
      "created_at": "2021-11-19T08:38:17.530Z",
      "last_posted_at": "2021-11-23T00:53:27.886Z",
      "bumped": true,
      "bumped_at": "2021-11-23T05:48:39.795Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 1054,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 1029,
            "username": "liuyan",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/839c29/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Enabling TLS on first install for single node setup",
      "id": 2111,
      "title": "Enabling TLS on first install for single node setup",
      "slug": "enabling-tls-on-first-install-for-single-node-setup",
      "posts_count": 3,
      "reply_count": 0,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2020-05-09T09:32:49.925Z",
      "last_posted_at": "2021-06-30T10:51:48.211Z",
      "bumped": true,
      "bumped_at": "2021-06-30T10:51:48.211Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 4,
      "views": 1232,
      "category_id": 17,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 476,
            "username": "dch",
            "name": "Dave Cottlehuber",
            "avatar_template": "/user_avatar/forums.foundationdb.org/dch/{size}/473_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 863,
            "username": "Dretch",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/dretch/{size}/1000_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Facing issue with TLS Setup",
      "id": 1463,
      "title": "Facing issue with TLS Setup",
      "slug": "facing-issue-with-tls-setup",
      "posts_count": 5,
      "reply_count": 2,
      "highest_post_number": 5,
      "image_url": null,
      "created_at": "2019-06-18T14:18:59.696Z",
      "last_posted_at": "2019-06-21T07:46:38.493Z",
      "bumped": true,
      "bumped_at": "2019-06-21T07:46:38.493Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 700,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 511,
            "username": "sakthivelpvs",
            "name": "Sakthivel",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9dc877/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 607,
            "username": "senthil",
            "name": "Senthil Nathan",
            "avatar_template": "/user_avatar/forums.foundationdb.org/senthil/{size}/720_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Using TLS in foundationDB with JAVA Client",
      "id": 2486,
      "title": "Using TLS in foundationDB with JAVA Client",
      "slug": "using-tls-in-foundationdb-with-java-client",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2020-12-14T13:28:30.028Z",
      "last_posted_at": "2020-12-15T02:46:39.811Z",
      "bumped": true,
      "bumped_at": "2020-12-15T02:46:39.811Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 617,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 790,
            "username": "shubham4060",
            "name": "Shubham",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/0ea827/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 12,
        "username": "ajbeamon",
        "name": "A.J. Beamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 120,
        "username": "josephg",
        "name": "Seph Gentle",
        "avatar_template": "/user_avatar/forums.foundationdb.org/josephg/{size}/84_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 483,
        "username": "Smerity",
        "name": "Stephen Merity",
        "avatar_template": "/user_avatar/forums.foundationdb.org/smerity/{size}/482_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 790,
        "username": "shubham4060",
        "name": "Shubham",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/0ea827/{size}.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      }
    ],
    "created_by": {
      "id": 483,
      "username": "Smerity",
      "name": "Stephen Merity",
      "avatar_template": "/user_avatar/forums.foundationdb.org/smerity/{size}/482_2.png"
    },
    "last_poster": {
      "id": 790,
      "username": "shubham4060",
      "name": "Shubham",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/0ea827/{size}.png"
    },
    "links": [
      {
        "url": "https://apple.github.io/foundationdb/tls.html#certificate-creation",
        "title": "Transport Layer Security \u2014 FoundationDB 6.0",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 66,
        "user_id": 12,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      },
      {
        "url": "https://apple.github.io/foundationdb/tls.html",
        "title": "Transport Layer Security \u2014 FoundationDB 6.0",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 56,
        "user_id": 483,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/master/documentation/sphinx/source/tls.rst",
        "title": "foundationdb/tls.rst at master \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 40,
        "user_id": 483,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/issues/1065",
        "title": "Python client does not respond to SIGINT while waiting for database to be configured \u00b7 Issue #1065 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 13,
        "user_id": 120,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://forums.foundationdb.org/t/tls-setup-on-mac-and-linux/1188/5",
        "title": "TLS setup on Mac and Linux",
        "internal": true,
        "attachment": false,
        "reflection": true,
        "clicks": 11,
        "user_id": 12,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://forums.foundationdb.org/t/foundationdb-fdbbackup/1460/2",
        "title": "FoundationDB fdbbackup",
        "internal": true,
        "attachment": false,
        "reflection": true,
        "clicks": 7,
        "user_id": 581,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://forums.foundationdb.org/t/performing-backups-without-tls/1467/2",
        "title": "Performing backups without TLS",
        "internal": true,
        "attachment": false,
        "reflection": true,
        "clicks": 6,
        "user_id": 581,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://forums.foundationdb.org/t/run-fdbbackup-fdbrestore-on-a-tls-enabled-cluster/1851/6",
        "title": "Run fdbbackup/fdbrestore on a TLS-enabled cluster",
        "internal": true,
        "attachment": false,
        "reflection": true,
        "clicks": 1,
        "user_id": 566,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://forums.foundationdb.org/t/performing-backups-without-tls/1467",
        "title": "Performing backups without TLS",
        "internal": true,
        "attachment": false,
        "reflection": true,
        "clicks": 1,
        "user_id": 610,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      }
    ]
  },
  "bookmarks": []
}