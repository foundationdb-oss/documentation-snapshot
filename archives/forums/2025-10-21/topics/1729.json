{
  "post_stream": {
    "posts": [
      {
        "id": 5521,
        "name": "Kao Makino",
        "username": "kao.makino",
        "avatar_template": "/user_avatar/forums.foundationdb.org/kao.makino/{size}/476_2.png",
        "created_at": "2019-11-12T19:04:58.390Z",
        "cooked": "<p>Can someone please tell me how <code>io_trust_seconds</code> work?<br>\nOr How can we detect disk stalls in general?</p>\n<p>I created a small cluster (1 host, 3 process) with <code>io_trust_seconds</code> set to 5 seconds, then stalled the disk on the storage server via fuse filesystem.  I was expecting to see some kind of timeout error, but the entire process got stalled instead until the disk came back.<br>\nThe following is the trace logs on the storage server when I stalled the disk after <code>1573579506.935685</code>.<br>\n(It\u2019s interesting the second line showed up after the disk came back, but the timestamp is only 3 seconds after the previous line.)</p>\n<pre><code class=\"lang-auto\">{\"Severity\":\"10\",\"Time\":\"1573579506.935685\",\"Type\":\"MachineMetrics\",\"ID\":\"0000000000000000\",\"Elapsed\":\"5.00012\",\"MbpsSent\":\"70.7843\",\"MbpsReceived\":\"70.7843\",\"OutSegs\":\"228751\",\"RetransSegs\":\"0\",\"CPUSeconds\":\"4.7144\",\"TotalMemory\":\"7993544704\",\"CommittedMemory\":\"1441497088\",\"AvailableMemory\":\"6552047616\",\"ZoneID\":\"d168b16bcd45a2081e434b59a2e60cbd\",\"MachineID\":\"d168b16bcd45a2081e434b59a2e60cbd\",\"Machine\":\"127.0.0.1:4501\",\"LogGroup\":\"default\",\"Roles\":\"SS\",\"TrackLatestType\":\"Original\"}\n{\"Severity\":\"30\",\"Time\":\"1573579509.597792\",\"Type\":\"SlowTask\",\"ID\":\"0000000000000000\",\"TaskID\":\"9000\",\"MClocks\":\"90003\",\"Duration\":\"30.0007\",\"SampleRate\":\"1\",\"NumYields\":\"0\",\"Machine\":\"127.0.0.1:4501\",\"LogGroup\":\"default\",\"Roles\":\"SS\"}\n{\"Severity\":\"20\",\"Time\":\"1573579509.597792\",\"Type\":\"Net2SlowTaskTrace\",\"ID\":\"0000000000000000\",\"TraceTime\":\"1573579519.598367\",\"Trace\":\"addr2line -e fdbserver.debug -p -C -f -i 0x7f28d39fd5f0 0x7f28d3209467 0x7f28d32094db 0x1e9a68a 0xc12674 0x10f0b50 0x1132a64 0x79cf01 0x1d65a5e 0x1d65c95 0x1e81628 0x73da6f 0x7f28d313c505 0x776cf5\",\"Machine\":\"127.0.0.1:4501\",\"LogGroup\":\"default\",\"Roles\":\"SS\"}\n{\"Severity\":\"20\",\"Time\":\"1573579509.597792\",\"Type\":\"Net2SlowTaskTrace\",\"ID\":\"0000000000000000\",\"TraceTime\":\"1573579539.598582\",\"Trace\":\"addr2line -e fdbserver.debug -p -C -f -i 0x7f28d39fd5f0 0x7f28d3209275 0x7f28d32094f7 0x1e9a68a 0xc12674 0x10f0b50 0x1132a64 0x79cf01 0x1d65a5e 0x1d65c95 0x1e81628 0x73da6f 0x7f28d313c505 0x776cf5\",\"Machine\":\"127.0.0.1:4501\",\"LogGroup\":\"default\",\"Roles\":\"SS\"}\n{\"Severity\":\"10\",\"Time\":\"1573579509.597792\",\"Type\":\"SomewhatSlowRunLoopBottom\",\"ID\":\"0000000000000000\",\"Elapsed\":\"30.001\",\"Machine\":\"127.0.0.1:4501\",\"LogGroup\":\"default\",\"Roles\":\"SS\"}\n{\"Severity\":\"10\",\"Time\":\"1573579509.597792\",\"Type\":\"ConnectionFrom\",\"ID\":\"c200d62665d48c6a\",\"SuppressedEventCount\":\"7\",\"FromAddress\":\"127.0.0.1:60330\",\"ListenAddress\":\"127.0.0.1:4501\",\"Machine\":\"127.0.0.1:4501\",\"LogGroup\":\"default\",\"Roles\":\"SS\"}\n{\"Severity\":\"20\",\"Time\":\"1573579509.597792\",\"Type\":\"N2_ReadError\",\"ID\":\"c200d62665d48c6a\",\"SuppressedEventCount\":\"0\",\"Message\":\"2\",\"Machine\":\"127.0.0.1:4501\",\"LogGroup\":\"default\",\"Roles\":\"SS\"}\n{\"Severity\":\"10\",\"Time\":\"1573579509.597792\",\"Type\":\"IncomingConnectionError\",\"ID\":\"c200d62665d48c6a\",\"Error\":\"connection_failed\",\"ErrorDescription\":\"Network connection failed\",\"ErrorCode\":\"1026\",\"SuppressedEventCount\":\"0\",\"FromAddress\":\"127.0.0.1:60330\",\"Machine\":\"127.0.0.1:4501\",\"LogGroup\":\"default\",\"Roles\":\"SS\"}\n{\"Severity\":\"20\",\"Time\":\"1573579539.598975\",\"Type\":\"GetDiskStatisticsDeviceNotFound\",\"ID\":\"0000000000000000\",\"Directory\":\"/mnt/charybdbde\",\"Machine\":\"127.0.0.1:4501\",\"LogGroup\":\"default\",\"Roles\":\"SS\"}\n{\"Severity\":\"10\",\"Time\":\"1573579539.598975\",\"Type\":\"MachineLoadDetail\",\"ID\":\"0000000000000000\",\"User\":\"182443\",\"Nice\":\"270\",\"System\":\"32507\",\"Idle\":\"465553\",\"IOWait\":\"10231\",\"IRQ\":\"0\",\"SoftIRQ\":\"1245\",\"Steal\":\"70\",\"Guest\":\"0\",\"Machine\":\"127.0.0.1:4501\",\"LogGroup\":\"default\",\"Roles\":\"SS\"}\n{\"Severity\":\"10\",\"Time\":\"1573579539.598975\",\"Type\":\"ProcessMetrics\",\"ID\":\"0000000000000000\",\"Elapsed\":\"32.6633\",\"CPUSeconds\":\"2.18722\",\"MainThreadCPUSeconds\":\"2.1848\",\"UptimeSeconds\":\"367.688\",\"Memory\":\"725852160\",\"ResidentMemory\":\"518291456\",\"UnusedAllocatedMemory\":\"358433984\",\"MbpsSent\":\"1.81155\",\"MbpsReceived\":\"2.26044\",\"DiskTotalBytes\":\"98294394880\",\"DiskFreeBytes\":\"90431365120\",\"DiskQueueDepth\":\"0\",\"DiskIdleSeconds\":\"32.6633\",\"DiskReads\":\"0\",\"DiskWrites\":\"0\",\"DiskReadsCount\":\"0\",\"DiskWritesCount\":\"0\",\"DiskWriteSectors\":\"0\",\"DiskReadSectors\":\"0\",\"FileWrites\":\"5\",\"FileReads\":\"0\",\"CacheReadBytes\":\"20480\",\"CacheFinds\":\"11\",\"CacheWritesBlocked\":\"0\",\"CacheReadsBlocked\":\"0\",\"CachePageReadsMerged\":\"0\",\"CacheWrites\":\"7\",\"CacheReads\":\"172121\",\"CacheHits\":\"172126\",\"CacheMisses\":\"0\",\"CacheEvictions\":\"0\",\"ZoneID\":\"d168b16bcd45a2081e434b59a2e60cbd\",\"MachineID\":\"d168b16bcd45a2081e434b59a2e60cbd\",\"AIOSubmitCount\":\"2\",\"AIOCollectCount\":\"2\",\"AIOSubmitLag\":\"2.57184e-10\",\"AIODiskStall\":\"6.63153e-10\",\"CurrentConnections\":\"10\",\"ConnectionsEstablished\":\"0\",\"ConnectionsClosed\":\"0\",\"ConnectionErrors\":\"0\",\"Machine\":\"127.0.0.1:4501\",\"LogGroup\":\"default\",\"Roles\":\"SS\",\"TrackLatestType\":\"Original\"}\n</code></pre>\n<p>The only evidence of the disk stall was the <code>ProcessMetrics</code>, but it was reported after the disk came to back normal.<br>\n<code>\"DiskIdleSeconds\":\"32.6633\"</code></p>\n<p>Is this an expected behavior?<br>\nHow can we detest stalled disks earlier?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2019-11-12T19:04:58.390Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 137,
        "reads": 52,
        "readers_count": 51,
        "score": 695.4,
        "yours": false,
        "topic_id": 1729,
        "topic_slug": "how-to-detect-disk-stalls",
        "display_username": "Kao Makino",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 478,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-detect-disk-stalls/1729/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 5523,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-11-12T20:01:02.333Z",
        "cooked": "<p>Can you symbolicate one of those two <code>Net2SlowTaskTrace</code> events?  It\u2019s kind of hard for FDB to do anything to guard against a bad disk if it doesn\u2019t return to the runloop for 30 seconds.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2019-11-12T20:01:02.333Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 47,
        "readers_count": 46,
        "score": 9.4,
        "yours": false,
        "topic_id": 1729,
        "topic_slug": "how-to-detect-disk-stalls",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-detect-disk-stalls/1729/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5524,
        "name": "Kao Makino",
        "username": "kao.makino",
        "avatar_template": "/user_avatar/forums.foundationdb.org/kao.makino/{size}/476_2.png",
        "created_at": "2019-11-12T21:11:53.395Z",
        "cooked": "<p>Oh, interesting.  It was trying to retrieve file metadata.</p>\n<p>First one:</p>\n<pre><code class=\"lang-auto\">$ addr2line -e bin/fdbserver -p -C -f -i 0x7fe45929c5f0 0x7fe458aa8467 0x7fe458aa84db 0x1e9a68a 0xc12674 0x10f0b50 0x1132a64 0x79cf01 0x1d65a5e 0x1d65c95 0x1e81628 0x73da6f 0x7fe4589db505 0x776cf5\n?? ??:0\n?? ??:0\n?? ??:0\ngetDiskBytes(std::string const&amp;, long&amp;, long&amp;) at /opt/rh/devtoolset-8/root/usr/include/c++/8/bits/basic_string.h:3355\nstd::string::_M_rep() const at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/FastAlloc.h:200\n (inlined by) std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::~basic_string() at /opt/rh/devtoolset-8/root/usr/include/c++/8/bits/basic_string.h:3640\n (inlined by) KeyValueStoreSQLite::getStorageBytes() at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/fdbserver/KeyValueStoreSQLite.actor.cpp:1959\ngetQueuingMetrics(StorageServer*, StorageQueuingMetricsRequest const&amp;) at /opt/rh/devtoolset-8/root/usr/include/c++/8/ext/new_allocator.h:102\na_body1loopBody1when8 at /opt/rh/devtoolset-8/root/usr/include/c++/8/ext/new_allocator.h:102\n (inlined by) a_callback_fire at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/build/fdbserver/storageserver.actor.g.cpp:14024\n (inlined by) fire at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/flow.h:1009\nvoid NotifiedQueue&lt;StorageQueuingMetricsRequest&gt;::send&lt;StorageQueuingMetricsRequest&gt;(StorageQueuingMetricsRequest&amp;&amp;) at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/flow.h:598\n (inlined by) void NotifiedQueue&lt;StorageQueuingMetricsRequest&gt;::send&lt;StorageQueuingMetricsRequest&gt;(StorageQueuingMetricsRequest&amp;&amp;) at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/flow.h:594\n (inlined by) NetNotifiedQueue&lt;StorageQueuingMetricsRequest&gt;::receive(ArenaObjectReader&amp;) at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/fdbrpc/fdbrpc.h:253\nReference&lt;ArenaBlock&gt;::~Reference() at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/Deque.h:162\n (inlined by) Arena::~Arena() at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/Arena.h:92\n (inlined by) ArenaObjectReader::~ArenaObjectReader() at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/ObjectSerializer.h:117\n (inlined by) a_body1cont1 at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/fdbrpc/FlowTransport.actor.cpp:640\nActorCallback&lt;(anonymous namespace)::DeliverActor, 0, Void&gt;::fire(Void const&amp;) at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/Deque.h:162\nvoid SAV&lt;Void&gt;::send&lt;Void&gt;(Void&amp;&amp;) at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/TDMetric.actor.h:1218\n (inlined by) void Promise&lt;Void&gt;::send&lt;Void&gt;(Void&amp;&amp;) const at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/flow.h:779\n (inlined by) N2::PromiseTask::operator()() at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/Net2.actor.cpp:490\n (inlined by) N2::Net2::run() at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/Net2.actor.cpp:666\nmain at ??:?\n?? ??:0\n_start at ??:?\n</code></pre>\n<p>Second one:</p>\n<pre><code class=\"lang-auto\">$ addr2line -e bin/fdbserver -p -C -f -i 0x7fe45929c5f0 0x7fe458aa8275 0x7fe458aa84f7 0x1e9a68a 0xc12674 0x10f0b50 0x1132a64 0x79cf01 0x1d65a5e 0x1d65c95 0x1e81628 0x73da6f 0x7fe4589db505 0x776cf5\n?? ??:0\n?? ??:0\n?? ??:0\ngetDiskBytes(std::string const&amp;, long&amp;, long&amp;) at /opt/rh/devtoolset-8/root/usr/include/c++/8/bits/basic_string.h:3355\nstd::string::_M_rep() const at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/FastAlloc.h:200\n (inlined by) std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::~basic_string() at /opt/rh/devtoolset-8/root/usr/include/c++/8/bits/basic_string.h:3640\n (inlined by) KeyValueStoreSQLite::getStorageBytes() at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/fdbserver/KeyValueStoreSQLite.actor.cpp:1959\ngetQueuingMetrics(StorageServer*, StorageQueuingMetricsRequest const&amp;) at /opt/rh/devtoolset-8/root/usr/include/c++/8/ext/new_allocator.h:102\na_body1loopBody1when8 at /opt/rh/devtoolset-8/root/usr/include/c++/8/ext/new_allocator.h:102\n (inlined by) a_callback_fire at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/build/fdbserver/storageserver.actor.g.cpp:14024\n (inlined by) fire at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/flow.h:1009\nvoid NotifiedQueue&lt;StorageQueuingMetricsRequest&gt;::send&lt;StorageQueuingMetricsRequest&gt;(StorageQueuingMetricsRequest&amp;&amp;) at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/flow.h:598\n (inlined by) void NotifiedQueue&lt;StorageQueuingMetricsRequest&gt;::send&lt;StorageQueuingMetricsRequest&gt;(StorageQueuingMetricsRequest&amp;&amp;) at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/flow.h:594\n (inlined by) NetNotifiedQueue&lt;StorageQueuingMetricsRequest&gt;::receive(ArenaObjectReader&amp;) at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/fdbrpc/fdbrpc.h:253\nReference&lt;ArenaBlock&gt;::~Reference() at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/Deque.h:162\n (inlined by) Arena::~Arena() at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/Arena.h:92\n (inlined by) ArenaObjectReader::~ArenaObjectReader() at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/ObjectSerializer.h:117\n (inlined by) a_body1cont1 at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/fdbrpc/FlowTransport.actor.cpp:640\nActorCallback&lt;(anonymous namespace)::DeliverActor, 0, Void&gt;::fire(Void const&amp;) at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/Deque.h:162\nvoid SAV&lt;Void&gt;::send&lt;Void&gt;(Void&amp;&amp;) at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/TDMetric.actor.h:1218\n (inlined by) void Promise&lt;Void&gt;::send&lt;Void&gt;(Void&amp;&amp;) const at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/flow.h:779\n (inlined by) N2::PromiseTask::operator()() at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/Net2.actor.cpp:490\n (inlined by) N2::Net2::run() at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/Net2.actor.cpp:666\nmain at ??:?\n?? ??:0\n_start at ??:?\n</code></pre>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2019-11-12T21:11:53.395Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 47,
        "readers_count": 46,
        "score": 14.4,
        "yours": false,
        "topic_id": 1729,
        "topic_slug": "how-to-detect-disk-stalls",
        "display_username": "Kao Makino",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 478,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-detect-disk-stalls/1729/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5525,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2019-11-12T21:17:33.908Z",
        "cooked": "<p>Oh I see - we still block for some disk operations (<code>statvfs</code> in this case). I am not sure how to feel about this\u2026</p>\n<p>For what we saw in production, this particular behavior is actually not bad. The process will stall and therefore the CC would remove it from the cluster. So for tlogs and storages, this would behave fine.</p>\n<p>On the other hand, this makes testing quite painful\u2026 Can you somehow only stall data operations but not meta-data operations? Or could you just stall <code>read</code>, <code>write</code>, and <code>fdatasync</code>? Those are a bit more interesting to test.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2019-11-12T21:17:33.908Z",
        "reply_count": 1,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 42,
        "readers_count": 41,
        "score": 13.4,
        "yours": false,
        "topic_id": 1729,
        "topic_slug": "how-to-detect-disk-stalls",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 478,
          "username": "kao.makino",
          "name": "Kao Makino",
          "avatar_template": "/user_avatar/forums.foundationdb.org/kao.makino/{size}/476_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-detect-disk-stalls/1729/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5526,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-11-12T21:48:03.246Z",
        "cooked": "<p><code>io_trust_seconds</code> is a mechanism that was designed to address a particular issue where we couldn\u2019t trust the success of an IO operation if it had been outstanding long enough (in particular, if the kernel attempted a task abort). To work around this case, we aborted any IO that was running longer than some duration.</p>\n<p>While it can be used to help timeout a process when its disk is unresponsive, it wasn\u2019t really designed for that use case, and as you discovered there are certainly cases where you can stall on an unresponsive disk that aren\u2019t addressed by this feature.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2019-11-12T21:48:03.246Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 42,
        "readers_count": 41,
        "score": 23.4,
        "yours": false,
        "topic_id": 1729,
        "topic_slug": "how-to-detect-disk-stalls",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-detect-disk-stalls/1729/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5527,
        "name": "Kao Makino",
        "username": "kao.makino",
        "avatar_template": "/user_avatar/forums.foundationdb.org/kao.makino/{size}/476_2.png",
        "created_at": "2019-11-12T21:52:57.540Z",
        "cooked": "<p>If we stall only <code>read</code>, <code>write</code>, <code>fdatasync</code>, it didn\u2019t block the runloop.</p>\n<p>There was one task stalled.</p>\n<pre><code class=\"lang-auto\">{  \"Severity\": \"30\", \"Time\": \"1573594590.811891\", \"Type\": \"SlowTask\", \"ID\": \"0000000000000000\", \"TaskID\": \"9000\", \"MClocks\": \"29718.6\", \"Duration\": \"\\\n9.90613\", \"SampleRate\": \"1\", \"NumYields\": \"0\", \"Machine\": \"127.0.0.1:4502\", \"LogGroup\": \"default\", \"Roles\": \"SS\" }\n{  \"Severity\": \"20\", \"Time\": \"1573594590.811891\", \"Type\": \"Net2SlowTaskTrace\", \"ID\": \"0000000000000000\", \"TraceTime\": \"1573594600.717443\", \"Trace\": \"\\\naddr2line -e fdbserver.debug -p -C -f -i 0x7ff3d324c5f0 0x7ff3d2a58315 0x7ff3d29ac5a9 0x1e9d71f 0x1e9ddc0 0xc12663 0x10f0b50 0x1132a64 0x79cf01 0x1d6\\\n5a5e 0x1d65c95 0x1e81628 0x73da6f 0x7ff3d298b505 0x776cf5\", \"Machine\": \"127.0.0.1:4502\", \"LogGroup\": \"default\", \"Roles\": \"SS\" }\n</code></pre>\n<p>Which is this guy\u2026 which still seems to me a metadata read, but I can be wrong.</p>\n<pre><code class=\"lang-auto\">?? ??:0\n?? ??:0\n?? ??:0\nabspath(std::string const&amp;, bool, bool) at /opt/rh/devtoolset-8/root/usr/include/c++/8/bits/basic_string.h:3355\nparentDirectory(std::string const&amp;, bool, bool) at /opt/rh/devtoolset-8/root/usr/include/c++/8/bits/basic_string.h:3355\nKeyValueStoreSQLite::getStorageBytes() at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/FastAlloc.h:200\ngetQueuingMetrics(StorageServer*, StorageQueuingMetricsRequest const&amp;) at /opt/rh/devtoolset-8/root/usr/include/c++/8/ext/new_allocator.h:102\na_body1loopBody1when8 at /opt/rh/devtoolset-8/root/usr/include/c++/8/ext/new_allocator.h:102\n (inlined by) a_callback_fire at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/build/fdbserver/storageserver.actor.g.cpp:14024\n (inlined by) fire at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/flow.h:1009\nvoid NotifiedQueue&lt;StorageQueuingMetricsRequest&gt;::send&lt;StorageQueuingMetricsRequest&gt;(StorageQueuingMetricsRequest&amp;&amp;) at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/flow.h:598\n (inlined by) void NotifiedQueue&lt;StorageQueuingMetricsRequest&gt;::send&lt;StorageQueuingMetricsRequest&gt;(StorageQueuingMetricsRequest&amp;&amp;) at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/flow.h:594\n (inlined by) NetNotifiedQueue&lt;StorageQueuingMetricsRequest&gt;::receive(ArenaObjectReader&amp;) at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/fdbrpc/fdbrpc.h:253\nReference&lt;ArenaBlock&gt;::~Reference() at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/Deque.h:162\n (inlined by) Arena::~Arena() at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/Arena.h:92\n (inlined by) ArenaObjectReader::~ArenaObjectReader() at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/ObjectSerializer.h:117\n (inlined by) a_body1cont1 at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/fdbrpc/FlowTransport.actor.cpp:640\nActorCallback&lt;(anonymous namespace)::DeliverActor, 0, Void&gt;::fire(Void const&amp;) at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/Deque.h:162\nvoid SAV&lt;Void&gt;::send&lt;Void&gt;(Void&amp;&amp;) at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/TDMetric.actor.h:1218\n (inlined by) void Promise&lt;Void&gt;::send&lt;Void&gt;(Void&amp;&amp;) const at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/flow.h:779\n (inlined by) N2::PromiseTask::operator()() at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/Net2.actor.cpp:490\n (inlined by) N2::Net2::run() at /mnt/jenkins/home/jenkins/workspace/FoundationDB-OSFDB-Build/jenkins/foundationdb/flow/Net2.actor.cpp:666\nmain at ??:?\n?? ??:0\n_start at ??:?\n</code></pre>\n<p>Eventually (more than 10 seconds after the disk was stalled), it detected some network communication error, but this can be unrelated.</p>\n<pre><code class=\"lang-auto\">{  \"Severity\": \"20\", \"Time\": \"1573594600.719515\", \"Type\": \"N2_ReadError\", \"ID\": \"6d0e0d23c63d3258\", \"SuppressedEventCount\": \"0\", \"Message\": \"2\", \"Mac\\\nhine\": \"127.0.0.1:4502\", \"LogGroup\": \"default\", \"Roles\": \"SS\" }\n{  \"Severity\": \"10\", \"Time\": \"1573594600.719515\", \"Type\": \"ConnectionClosed\", \"ID\": \"6d0e0d23c63d3258\", \"Error\": \"connection_failed\", \"ErrorDescripti\\\non\": \"Network connection failed\", \"ErrorCode\": \"1026\", \"SuppressedEventCount\": \"0\", \"PeerAddr\": \"127.0.0.1:4500\", \"Machine\": \"127.0.0.1:4502\", \"LogGr\\\noup\": \"default\", \"Roles\": \"SS\" }\n{  \"Severity\": \"10\", \"Time\": \"1573594600.719515\", \"Type\": \"PeerDestroy\", \"ID\": \"0000000000000000\", \"Error\": \"connection_failed\", \"ErrorDescription\": \\\n\"Network connection failed\", \"ErrorCode\": \"1026\", \"SuppressedEventCount\": \"0\", \"PeerAddr\": \"127.0.0.1:32916\", \"Machine\": \"127.0.0.1:4502\", \"LogGroup\"\\\n: \"default\", \"Roles\": \"SS\" }\n{  \"Severity\": \"30\", \"Time\": \"1573594600.719515\", \"Type\": \"FailureMonitorClientSlow\", \"ID\": \"0000000000000000\", \"Elapsed\": \"9.9566\", \"Expected\": \"0.1\\\n\", \"Machine\": \"127.0.0.1:4502\", \"LogGroup\": \"default\", \"Roles\": \"SS\" }\n{  \"Severity\": \"10\", \"Time\": \"1573594600.719515\", \"Type\": \"ConnectionFrom\", \"ID\": \"9babc127863a64b8\", \"SuppressedEventCount\": \"0\", \"FromAddress\": \"12\\\n7.0.0.1:32928\", \"ListenAddress\": \"127.0.0.1:4502\", \"Machine\": \"127.0.0.1:4502\", \"LogGroup\": \"default\", \"Roles\": \"SS\" }\n{  \"Severity\": \"10\", \"Time\": \"1573594600.719923\", \"Type\": \"IncomingConnectionError\", \"ID\": \"9babc127863a64b8\", \"Error\": \"connection_failed\", \"ErrorDe\\\nscription\": \"Network connection failed\", \"ErrorCode\": \"1026\", \"SuppressedEventCount\": \"0\", \"FromAddress\": \"127.0.0.1:32928\", \"Machine\": \"127.0.0.1:45\\\n02\", \"LogGroup\": \"default\", \"Roles\": \"SS\" }\n</code></pre>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2019-11-12T21:52:57.540Z",
        "reply_count": 0,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 45,
        "readers_count": 44,
        "score": 9.0,
        "yours": false,
        "topic_id": 1729,
        "topic_slug": "how-to-detect-disk-stalls",
        "display_username": "Kao Makino",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 15,
          "username": "markus.pilman",
          "name": "Markus Pilman",
          "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 478,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-detect-disk-stalls/1729/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5528,
        "name": "Kao Makino",
        "username": "kao.makino",
        "avatar_template": "/user_avatar/forums.foundationdb.org/kao.makino/{size}/476_2.png",
        "created_at": "2019-11-12T21:54:18.212Z",
        "cooked": "<p>Thanks for the clarification.<br>\nSo <code>io_trust_seconds</code> is obviously not the mechanism we want to rely on in this case.<br>\nDo we have any other mechanism to react to unresponsive disks?</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2019-11-12T21:54:18.212Z",
        "reply_count": 3,
        "reply_to_post_number": 5,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 40,
        "readers_count": 39,
        "score": 23.0,
        "yours": false,
        "topic_id": 1729,
        "topic_slug": "how-to-detect-disk-stalls",
        "display_username": "Kao Makino",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 12,
          "username": "ajbeamon",
          "name": "A.J. Beamon",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 478,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-detect-disk-stalls/1729/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5529,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-11-12T22:03:41.795Z",
        "cooked": "<p>At the moment, I think the best we have is <code>io_trust_seconds</code>  and a new-ish mechanism on the transaction logs that cause them to be marked degraded and deprioritized for selection by the cluster controller when they can\u2019t commit. There\u2019s additional work in this area milestoned for 7.0 in this issue:</p>\n<aside class=\"onebox githubissue\">\n  <header class=\"source\">\n      <a href=\"https://github.com/apple/foundationdb/issues/1017\" target=\"_blank\">github.com/apple/foundationdb</a>\n  </header>\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Issue\">\n\t  <svg width=\"60\" height=\"60\" class=\"github-icon\" viewbox=\"0 0 14 16\" aria-hidden=\"true\"><path d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/apple/foundationdb/issues/1017\" target=\"_blank\">Automatically exclude slow machines</a>\n    </h4>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2019-01-09\" data-time=\"01:49:12\" data-timezone=\"UTC\">01:49AM - 09 Jan 19 UTC</span>\n      </div>\n\n\n      <div class=\"user\">\n        <a href=\"https://github.com/etschannen\" target=\"_blank\">\n          <img alt=\"etschannen\" src=\"https://global.discourse-cdn.com/foundationdb/original/1X/ff6700df10628a6bf2f530368dbea5dc9506dde6.png\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\">\n          etschannen\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=\"github-row\">\n  <p class=\"github-content\">If a single process in a database is much slower than the other processes, the entire database will slow down. This...</p>\n</div>\n\n<div class=\"labels\">\n</div>\n\n  </article>\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n  <div style=\"clear: both\"></div>\n</aside>\n",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2019-11-12T22:03:41.795Z",
        "reply_count": 0,
        "reply_to_post_number": 7,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 40,
        "readers_count": 39,
        "score": 8.0,
        "yours": false,
        "topic_id": 1729,
        "topic_slug": "how-to-detect-disk-stalls",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/issues/1017",
            "internal": false,
            "reflection": false,
            "title": "Automatically exclude slow machines \u00b7 Issue #1017 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 4
          },
          {
            "url": "https://github.com/etschannen",
            "internal": false,
            "reflection": false,
            "title": "etschannen (Evan Tschannen) \u00b7 GitHub",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 478,
          "username": "kao.makino",
          "name": "Kao Makino",
          "avatar_template": "/user_avatar/forums.foundationdb.org/kao.makino/{size}/476_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-detect-disk-stalls/1729/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5530,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2019-11-12T22:03:49.624Z",
        "cooked": "<p>I don\u2019t think these are unrelated - we get networking errors because the main loop stalled (which is because of the disk stall).</p>\n<p>again: In general I like this behavior. The question is whether we can somehow construct a test where the disk stalls but the main thread doesn\u2019t\u2026 This is what happened in production and this is where stuff gets weird.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2019-11-12T22:03:49.624Z",
        "reply_count": 0,
        "reply_to_post_number": 7,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 39,
        "readers_count": 38,
        "score": 12.8,
        "yours": false,
        "topic_id": 1729,
        "topic_slug": "how-to-detect-disk-stalls",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 478,
          "username": "kao.makino",
          "name": "Kao Makino",
          "avatar_template": "/user_avatar/forums.foundationdb.org/kao.makino/{size}/476_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-detect-disk-stalls/1729/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5531,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-11-12T22:20:19.258Z",
        "cooked": "<p>I think it\u2019s more that we should expand what <code>io_trust_seconds</code> applies to, as you appear to have (rather easily) found holes in it.  Setting some time aside to get <a href=\"https://github.com/apple/foundationdb/pull/1447\">#1447</a> merged for 7.0 might be a pretty good idea\u2026</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2019-11-12T22:20:19.258Z",
        "reply_count": 1,
        "reply_to_post_number": 7,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 40,
        "readers_count": 39,
        "score": 73.0,
        "yours": false,
        "topic_id": 1729,
        "topic_slug": "how-to-detect-disk-stalls",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/pull/1447",
            "internal": false,
            "reflection": false,
            "title": "Add simulated disk interface by tclinken \u00b7 Pull Request #1447 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 5
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 478,
          "username": "kao.makino",
          "name": "Kao Makino",
          "avatar_template": "/user_avatar/forums.foundationdb.org/kao.makino/{size}/476_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 2
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-detect-disk-stalls/1729/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5533,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-11-12T23:06:47.820Z",
        "cooked": "<p><code>io_trust_seconds</code> is a feature to specify how long we trust the results of a read or write IO, so it may be helpful to think of it as somewhat distinct from the topic of detecting stalls. It\u2019s possible we\u2019d want to also have a global IO timeout, though a lot of discussion on the past has been centered around how we\u2019d want these kind of decisions to be made centrally rather than locally (as in the issue I posted above).</p>\n<p>Or maybe we will decide that we want local timeouts and that they could subsume the <code>io_trust_seconds</code> feature (or that it\u2019s no longer necessary for its original purpose), in which case we could try to rename and expand it to a broader timeout mechanism. If we decide to go that route and continue supporting the original use case, we\u2019ll want to make sure that the way errors are handled meets the needs of other use cases.</p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2019-11-12T23:06:47.820Z",
        "reply_count": 0,
        "reply_to_post_number": 10,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 39,
        "readers_count": 38,
        "score": 7.8,
        "yours": false,
        "topic_id": 1729,
        "topic_slug": "how-to-detect-disk-stalls",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-detect-disk-stalls/1729/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5536,
        "name": "Kao Makino",
        "username": "kao.makino",
        "avatar_template": "/user_avatar/forums.foundationdb.org/kao.makino/{size}/476_2.png",
        "created_at": "2019-11-13T19:13:56.769Z",
        "cooked": "<p>Ah, OK, now I understand what <code>io_trust_seconds</code> is designed for.<br>\nSo it\u2019s more of a verification mechanism of the super long latency I/Os, but it doesn\u2019t really timeout.</p>\n<p>Here, I set it to 5 seconds and stalled the disk for 20+ seconds.<br>\nSS complains that I/O took too long after the disk comes back.</p>\n<pre><code class=\"lang-auto\">         OPS         8974      1123.01         0.00\n         OPS         6685       830.68         0.00\n         OPS         9408      1175.01         1.00\n         OPS         7967       997.01         0.00\n         OPS           43         6.00         0.00\n         OPS            0         0.00         0.00\n         OPS            0         0.00         0.00\n         OPS            0         0.00         0.00\n         OPS            0         0.00         0.00\n         OPS            0         0.00         0.00\n         OPS            0         0.00         0.00\n         OPS            0         0.00         0.00\n         OPS            0         0.00         0.00\n         OPS            0         0.00         0.00\n         OPS            0         0.00         0.00\n         OPS            0         0.00         0.00\n         OPS            0         0.00         0.00\n         OPS            0         0.00         0.00\n         OPS            0         0.00         0.00\n         OPS            0         0.00         0.00\n         OPS            0         0.00         0.00\n         OPS            0         0.00         0.00\n         OPS            0         0.00         0.00\n         OPS            0         0.00         0.00\n         OPS            0         0.00         0.00\n         OPS            0         0.00         0.00\n         OPS            0         0.00         0.00\n         OPS            0         0.00         0.00\nERROR: Error commit_transaction (1007) occured at Transaction is too old to perform reads or be committed\nTime=\"1573672012.970110\" Severity=\"40\" LogGroup=\"default\" Process=\"fdbserver.4501\": Fatal Error: A disk IO operation failed to complete in a timely manner\n</code></pre>\n<p>By the way, just FYI to the other members in this forum, I used <a href=\"https://github.com/apple/foundationdb/blob/master/bindings/c/test/mako/mako.rst\" rel=\"nofollow noopener\"><code>mako</code> benchmark</a> to generate the load.</p>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2019-11-13T19:13:56.769Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 34,
        "readers_count": 33,
        "score": 21.8,
        "yours": false,
        "topic_id": 1729,
        "topic_slug": "how-to-detect-disk-stalls",
        "display_username": "Kao Makino",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/blob/master/bindings/c/test/mako/mako.rst",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/mako.rst at master \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 8
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 478,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-detect-disk-stalls/1729/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      5521,
      5523,
      5524,
      5525,
      5526,
      5527,
      5528,
      5529,
      5530,
      5531,
      5533,
      5536
    ]
  },
  "timeline_lookup": [
    [
      1,
      2170
    ],
    [
      12,
      2169
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "How to detect disk stalls?",
  "id": 1729,
  "title": "How to detect disk stalls?",
  "posts_count": 12,
  "created_at": "2019-11-12T19:04:58.331Z",
  "views": 1944,
  "reply_count": 7,
  "like_count": 2,
  "last_posted_at": "2019-11-13T19:13:56.769Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "how-to-detect-disk-stalls",
  "category_id": 7,
  "word_count": 3118,
  "deleted_at": null,
  "user_id": 478,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_1729",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 12,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 4,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "FoundationDB cluster performance issue - Periods of high disk I/O and sustained high latency",
      "id": 2184,
      "title": "FoundationDB cluster performance issue - Periods of high disk I/O and sustained high latency",
      "slug": "foundationdb-cluster-performance-issue-periods-of-high-disk-i-o-and-sustained-high-latency",
      "posts_count": 22,
      "reply_count": 17,
      "highest_post_number": 22,
      "image_url": null,
      "created_at": "2020-06-15T15:45:43.650Z",
      "last_posted_at": "2020-07-06T06:50:56.594Z",
      "bumped": true,
      "bumped_at": "2020-07-06T06:50:56.594Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 2571,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 779,
            "username": "imtdk",
            "name": null,
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/i/22d042/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 747,
            "username": "ashishgupta",
            "name": "Ashish Gupta",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/c67d28/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        }
      ]
    },
    {
      "fancy_title": "Foundationdb seems keep reinitialising itself after client hang",
      "id": 1437,
      "title": "Foundationdb seems keep reinitialising itself after client hang",
      "slug": "foundationdb-seems-keep-reinitialising-itself-after-client-hang",
      "posts_count": 6,
      "reply_count": 2,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2019-06-10T10:10:13.209Z",
      "last_posted_at": "2019-06-26T18:08:03.629Z",
      "bumped": true,
      "bumped_at": "2019-06-26T18:08:03.629Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 1222,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 602,
            "username": "ppggff",
            "name": "ppggff",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ppggff/{size}/855_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Foundationdb 6.2 - fdbserver going out of memory",
      "id": 2080,
      "title": "Foundationdb 6.2 - fdbserver going out of memory",
      "slug": "foundationdb-6-2-fdbserver-going-out-of-memory",
      "posts_count": 10,
      "reply_count": 5,
      "highest_post_number": 10,
      "image_url": null,
      "created_at": "2020-04-20T14:55:39.274Z",
      "last_posted_at": "2020-04-23T04:34:49.858Z",
      "bumped": true,
      "bumped_at": "2020-04-23T04:34:49.858Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1037,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 714,
            "username": "tuk",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/b5ac83/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Debugging abnormally high IO load",
      "id": 1707,
      "title": "Debugging abnormally high IO load",
      "slug": "debugging-abnormally-high-io-load",
      "posts_count": 6,
      "reply_count": 3,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2019-10-30T03:45:59.349Z",
      "last_posted_at": "2019-10-31T01:13:04.667Z",
      "bumped": true,
      "bumped_at": "2019-10-31T01:13:04.667Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1431,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 260,
            "username": "jared2501",
            "name": "Jared2501",
            "avatar_template": "/user_avatar/forums.foundationdb.org/jared2501/{size}/266_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Segmentation fault error and broken cluster",
      "id": 483,
      "title": "Segmentation fault error and broken cluster",
      "slug": "segmentation-fault-error-and-broken-cluster",
      "posts_count": 17,
      "reply_count": 12,
      "highest_post_number": 17,
      "image_url": null,
      "created_at": "2018-05-31T15:34:28.123Z",
      "last_posted_at": "2018-06-11T17:31:13.656Z",
      "bumped": true,
      "bumped_at": "2018-06-11T17:31:13.656Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 4331,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 211,
            "username": "brk0v",
            "name": "Viacheslav Biriukov",
            "avatar_template": "/user_avatar/forums.foundationdb.org/brk0v/{size}/173_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 156,
            "username": "spullara",
            "name": "Sam Pullara",
            "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
            "trust_level": 2
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 478,
        "username": "kao.makino",
        "name": "Kao Makino",
        "avatar_template": "/user_avatar/forums.foundationdb.org/kao.makino/{size}/476_2.png",
        "post_count": 5,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 12,
        "username": "ajbeamon",
        "name": "A.J. Beamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 15,
        "username": "markus.pilman",
        "name": "Markus Pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      }
    ],
    "created_by": {
      "id": 478,
      "username": "kao.makino",
      "name": "Kao Makino",
      "avatar_template": "/user_avatar/forums.foundationdb.org/kao.makino/{size}/476_2.png"
    },
    "last_poster": {
      "id": 478,
      "username": "kao.makino",
      "name": "Kao Makino",
      "avatar_template": "/user_avatar/forums.foundationdb.org/kao.makino/{size}/476_2.png"
    },
    "links": [
      {
        "url": "https://github.com/apple/foundationdb/blob/master/bindings/c/test/mako/mako.rst",
        "title": "foundationdb/mako.rst at master \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 8,
        "user_id": 478,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/pull/1447",
        "title": "Add simulated disk interface by tclinken \u00b7 Pull Request #1447 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 5,
        "user_id": 13,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/issues/1017",
        "title": "Automatically exclude slow machines \u00b7 Issue #1017 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 4,
        "user_id": 12,
        "domain": "github.com",
        "root_domain": "github.com"
      }
    ]
  },
  "bookmarks": []
}