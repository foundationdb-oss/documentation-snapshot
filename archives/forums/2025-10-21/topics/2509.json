{
  "post_stream": {
    "posts": [
      {
        "id": 8929,
        "name": "Shubham",
        "username": "shubham4060",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/0ea827/{size}.png",
        "created_at": "2021-01-13T06:02:43.785Z",
        "cooked": "<p>Hi,</p>\n<p>So I was playing around backup/restore of a cluster to/from a local file. So here is my understanding :</p>\n<ul>\n<li>\n<p>The backup agent processes are the actual daemon processes which executes the backup and restore of the cluster. When a fdbbackup client runs for backup of the cluster, the request is queued in the cluster and then it is assigned to the backup agents for the actual backup/restore to be done.</p>\n</li>\n<li>\n<p>If multiple backup agents are running across several hosts then the backup job is distributed across those agents, therefore each job writing the partial backup to the file(path provided during fdbbackup client) in the local directory of the host on which backup agent is running(a subdirectory for the backup job with same timestamp is created in the directory path provided across all the hosts who have backup agents running on them).</p>\n</li>\n<li>\n<p>During restore, the backup agent requires all the files for restoring(infact atleast one backup agent should have all the files as each backup agent tries a restore and if it doesn\u2019t have all the files it will fail and some other backup agent will retry, eventually restore will succeed. <a href=\"https://forums.foundationdb.org/t/backup-and-restore-using-multiple-backup-agent-with-local-url/2110\" class=\"inline-onebox\">Backup and restore using multiple backup_agent with local url</a>). Therefore for backup agents across several machines, all the backup files within each host needs to be accumulated first in a single place where a backup agent can access them and eventually restore the database.</p>\n</li>\n</ul>\n<p>Please correct me if i am wrong. Now there are a few questions regarding the behaviour i observed.<br>\nFor multiple backup agents on different machines, is the distribution of key ranges across those agents processes uniform in terms of size of the partial backup they will produce?</p>\n<p>If I want to manually control the backup agents for example i want only a particular set of backup agent processes to execute a particular fdbbackup client job, can i do that?</p>\n<p>After running the backup with backup agents running across several machines, I have partial backup files across those machines, so now is there a way i can restore the cluster directly using these partial backup files across the machines rather than first accumulating them in a single host?</p>\n<p>So what our use case is that we have a huge cluster in terms of size and we want to take its backup ofcourse. now in terms of backup, spawning multiple backup agents across several machines can help us taking the partial backup on each one of those machines(assuming the distribution of key ranges across backup agents for the backup job is somewhat uniform) but during the restore, it requires all those partial backup files to be accumulated first at a single place but getting a disk with such a huge space is not feasible. so is there any way to achieve this?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 2,
        "updated_at": "2021-01-13T06:02:43.785Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 35,
        "reads": 34,
        "readers_count": 33,
        "score": 181.8,
        "yours": false,
        "topic_id": 2509,
        "topic_slug": "backup-restore-of-a-large-cluster-in-a-distributed-way",
        "display_username": "Shubham",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/backup-and-restore-using-multiple-backup-agent-with-local-url/2110",
            "internal": true,
            "reflection": false,
            "title": "Backup and restore using multiple backup_agent with local url",
            "clicks": 4
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 790,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-restore-of-a-large-cluster-in-a-distributed-way/2509/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 8934,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2021-01-13T20:28:07.456Z",
        "cooked": "<p>Is backing up to/from S3 (or an S3-compatible blob storage system) not an option?  Or could you instead do a file backup to/from some NFS instance so that all files are accessible and in one place for all backup agents?</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 2,
        "updated_at": "2021-01-13T20:28:07.456Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 31,
        "readers_count": 30,
        "score": 6.2,
        "yours": false,
        "topic_id": 2509,
        "topic_slug": "backup-restore-of-a-large-cluster-in-a-distributed-way",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-restore-of-a-large-cluster-in-a-distributed-way/2509/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      8929,
      8934
    ]
  },
  "timeline_lookup": [
    [
      1,
      1743
    ],
    [
      2,
      1742
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Backup/restore of a large cluster in a distributed way",
  "id": 2509,
  "title": "Backup/restore of a large cluster in a distributed way",
  "posts_count": 2,
  "created_at": "2021-01-13T06:02:43.707Z",
  "views": 532,
  "reply_count": 0,
  "like_count": 0,
  "last_posted_at": "2021-01-13T20:28:07.456Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "backup-restore-of-a-large-cluster-in-a-distributed-way",
  "category_id": 7,
  "word_count": 522,
  "deleted_at": null,
  "user_id": 790,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_2509",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 2,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 2,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Backup and restore using multiple backup_agent with local url",
      "id": 2110,
      "title": "Backup and restore using multiple backup_agent with local url",
      "slug": "backup-and-restore-using-multiple-backup-agent-with-local-url",
      "posts_count": 4,
      "reply_count": 2,
      "highest_post_number": 4,
      "image_url": null,
      "created_at": "2020-05-09T08:58:29.028Z",
      "last_posted_at": "2020-05-11T03:10:10.145Z",
      "bumped": true,
      "bumped_at": "2020-05-11T03:10:10.145Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 647,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 602,
            "username": "ppggff",
            "name": "ppggff",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ppggff/{size}/855_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Backup /restore fdb",
      "id": 1637,
      "title": "Backup /restore fdb",
      "slug": "backup-restore-fdb",
      "posts_count": 22,
      "reply_count": 17,
      "highest_post_number": 22,
      "image_url": null,
      "created_at": "2019-09-19T17:04:18.878Z",
      "last_posted_at": "2019-10-05T04:45:51.663Z",
      "bumped": true,
      "bumped_at": "2019-10-05T04:45:51.663Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 2729,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 604,
            "username": "Minaxi",
            "name": "meenakshi subramanyam",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/m/2bfe46/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Backup &amp; restore performance tuning",
      "id": 2078,
      "title": "Backup & restore performance tuning",
      "slug": "backup-restore-performance-tuning",
      "posts_count": 18,
      "reply_count": 16,
      "highest_post_number": 18,
      "image_url": null,
      "created_at": "2020-04-18T06:43:29.997Z",
      "last_posted_at": "2020-05-06T09:01:50.194Z",
      "bumped": true,
      "bumped_at": "2020-05-06T09:01:50.194Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 2929,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 643,
            "username": "lehu",
            "name": "Leo Hu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Taking FDB cluster backup in multiple disks",
      "id": 2271,
      "title": "Taking FDB cluster backup in multiple disks",
      "slug": "taking-fdb-cluster-backup-in-multiple-disks",
      "posts_count": 3,
      "reply_count": 0,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2020-08-03T10:46:26.118Z",
      "last_posted_at": "2020-08-04T18:00:17.851Z",
      "bumped": true,
      "bumped_at": "2020-08-04T18:00:17.851Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 473,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 747,
            "username": "ashishgupta",
            "name": "Ashish Gupta",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/c67d28/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Regarding issue faced while running fdbbackup",
      "id": 1458,
      "title": "Regarding issue faced while running fdbbackup",
      "slug": "regarding-issue-faced-while-running-fdbbackup",
      "posts_count": 17,
      "reply_count": 14,
      "highest_post_number": 17,
      "image_url": null,
      "created_at": "2019-06-17T12:33:04.574Z",
      "last_posted_at": "2019-12-17T19:51:11.604Z",
      "bumped": true,
      "bumped_at": "2019-12-17T19:51:11.604Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 2007,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 587,
            "username": "pragawaran",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/p/f07891/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 700,
            "username": "viveksinghggits",
            "name": "Vivek Singh",
            "avatar_template": "/user_avatar/forums.foundationdb.org/viveksinghggits/{size}/737_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 3,
            "username": "john_brownlee",
            "name": "John Brownlee",
            "avatar_template": "/user_avatar/forums.foundationdb.org/john_brownlee/{size}/22_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 790,
        "username": "shubham4060",
        "name": "Shubham",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/0ea827/{size}.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      }
    ],
    "created_by": {
      "id": 790,
      "username": "shubham4060",
      "name": "Shubham",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/0ea827/{size}.png"
    },
    "last_poster": {
      "id": 13,
      "username": "alexmiller",
      "name": "Alex Miller",
      "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
    },
    "links": [
      {
        "url": "https://forums.foundationdb.org/t/backup-and-restore-using-multiple-backup-agent-with-local-url/2110",
        "title": "Backup and restore using multiple backup_agent with local url",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 4,
        "user_id": 790,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      }
    ]
  },
  "bookmarks": []
}