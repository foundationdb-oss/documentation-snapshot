{
  "post_stream": {
    "posts": [
      {
        "id": 1419,
        "name": "Christophe Chevalier",
        "username": "KrzysFR",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
        "created_at": "2018-06-07T14:40:00.384Z",
        "cooked": "<p>When attempting to install fdb 5.1.7 on a newly installed win10 machine, we got this weird error:</p>\n<pre><code class=\"lang-auto\">&lt;Event Severity=\"40\" Time=\"1528381129.831068\" Type=\"FileOpenError\" Machine=\"127.0.0.1:4500\" ID=\"0000000000000000\" Reason=\"Must be unbuffered\" Flags=\"131074\" File=\"C:\\ProgramData\\foundationdb\\data\\4500\\storage-811f51d3f2dd5414739706e38748a17b-0.fdq\" logGroup=\"default\" Backtrace=\"\"/&gt;\n&lt;Event Severity=\"40\" Time=\"1528381129.831068\" Type=\"DiskQueueShutdownError\" Machine=\"127.0.0.1:4500\" ID=\"811f51d3f2dd5414\" Reason=\"unknown\" Error=\"io_error\" ErrorDescription=\"Disk i/o operation failed\" ErrorCode=\"1510\" logGroup=\"default\" Backtrace=\"\"/&gt;\n</code></pre>\n<p>This is right after installing via the setup (that pre-configures the db using the memory storage engine).</p>\n<p>When connecting to fdbcli, the cluster was unavailable. Attemtping to \u201cconfigure single ssd\u201d did not seem to work at first. Then after restarting everything, it now works fine, and it is using the ssd-2 storage engine. The last logged error for the node is <code>DiskQueueShutdownError</code></p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://global.discourse-cdn.com/foundationdb/original/1X/a938a2538369b70a6d6a27cc8eca865311a7c245.png\" title=\"image.png\" rel=\"nofollow noopener\"><img src=\"https://global.discourse-cdn.com/foundationdb/original/1X/a938a2538369b70a6d6a27cc8eca865311a7c245.png\" alt=\"image\" width=\"480\" height=\"500\" data-small-upload=\"https://global.discourse-cdn.com/foundationdb/optimized/1X/a938a2538369b70a6d6a27cc8eca865311a7c245_2_10x10.png\"><div class=\"meta\">\n<svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use xlink:href=\"#far-image\"></use></svg><span class=\"filename\">image.png</span><span class=\"informations\">979\u00d71018 23.9 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use xlink:href=\"#discourse-expand\"></use></svg>\n</div></a></div></p>\n<p>I think that for some reason, the memory engine did try to open a file on windows without specifying the <code>OPEN_UNBUFFERED</code> that is tested in <code>AsyncFileWinASIO::open(..)</code> but I have difficulty, looking at the code, to find why.</p>\n<p>After the restart, my guess is that the storage was successfully converted from memory to ssd-2 and the error went away.</p>\n<p>The file name in the error is <code>xxxx-0.fdq</code> which seems to be only used by the Memory engine, so maybe only this path may forget to set the flag OPEN_UNBUFFERED in some cases?</p>\n<p>The equivalent <code>AsyncFileKAIO::open()</code> for linux seem to check the flag via <code>ASSERT( flags &amp; OPEN_UNBUFFERED );</code> while the Widows version is more explicit in tracing and throwing an error\u2026 maybe there is difference in behavior there?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2018-06-07T14:40:00.384Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 181,
        "reads": 37,
        "readers_count": 36,
        "score": 912.4,
        "yours": false,
        "topic_id": 496,
        "topic_slug": "fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file",
        "display_username": "Christophe Chevalier",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://global.discourse-cdn.com/foundationdb/original/1X/a938a2538369b70a6d6a27cc8eca865311a7c245.png",
            "internal": false,
            "reflection": false,
            "title": "a938a2538369b70a6d6a27cc8eca865311a7c245.png",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 53,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file/496/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 2329,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2018-10-13T01:41:28.439Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"KrzysFR\" data-post=\"1\" data-topic=\"496\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/krzysfr/48/43_2.png\" class=\"avatar\"> KrzysFR:</div>\n<blockquote>\n<p>foundationdb\\data\\4500\\storage-811f51d3f2dd5414739706e38748a17b-0.fdq</p>\n</blockquote>\n</aside>\n<p>So this is indeed a DiskQueue file from a KeyValueStoreMemory.  However, I\u2019m baffled that the code to open this DiskQueue is the exact same code used to open a DiskQueue for the transaction logs, which appears to have succeeded in your case.</p>\n<p>So I\u2019m kind of more baffled about where this request is coming from.  You wouldn\u2019t happen to be able to offer a symbolicated backtrace, would you?</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2018-10-13T01:41:28.439Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 20,
        "readers_count": 19,
        "score": 9.0,
        "yours": false,
        "topic_id": 496,
        "topic_slug": "fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file/496/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2331,
        "name": "Christophe Chevalier",
        "username": "KrzysFR",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
        "created_at": "2018-10-13T12:21:53.886Z",
        "cooked": "<p>Sorry no, it was a long time ago and using the officially released binaries (we do not build our own binaries yet). And all recent install were done with 5.2.5 which did not seem to reproduce this particular issue.</p>\n<p>I\u2019ve had other problems with the Windows setup or linux packages creating a new cluster using the memory storage engine, and then having to transition to ssd-2 engine, or worse, stop the service, delete the data, and then restart just so we can join an existing cluster (we\u2019ve had a recent customer issue were a chain of events starting from this brought down the entire cluster for several hours until we were able to diagnose the root cause).</p>\n<p>As a side note: It would be really cool if the setup would NOT automatically create a new cluster (or at least a checkbox in the setup to do it or not).</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2018-10-13T12:28:05.790Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 20,
        "readers_count": 19,
        "score": 9.0,
        "yours": false,
        "topic_id": 496,
        "topic_slug": "fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file",
        "display_username": "Christophe Chevalier",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 53,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file/496/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2332,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2018-10-14T20:22:52.073Z",
        "cooked": "<p>We do have a set of basic tests that involve installing our windows package on \u2026 some version of windows, so I think we\u2019d catch if creating a memory storage engine was horrifically broken.  If you happen to have it occur again, and get any sort of information as to how/why, I\u2019d be happy to take a look.  I\u2019ll at minimum flip the windows behavior to match the linux behavior, as I\u2019m not aware of any reason that they should be different.</p>\n<aside class=\"quote no-group\" data-username=\"KrzysFR\" data-post=\"3\" data-topic=\"496\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/krzysfr/48/43_2.png\" class=\"avatar\"> KrzysFR:</div>\n<blockquote>\n<p>As a side note: It would be really cool if the setup would NOT automatically create a new cluster (or at least a checkbox in the setup to do it or not</p>\n</blockquote>\n</aside>\n<p>Yeah, the dockerization attempts has revealed this to be quite an annoyance.  I\u2019d be happy to see it removed, but unfortunately, there\u2019s no one around that seems to have a solid understanding of our packaging scripts to be able to make them do the right thing easily.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2018-10-14T20:22:52.073Z",
        "reply_count": 0,
        "reply_to_post_number": 3,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 20,
        "readers_count": 19,
        "score": 4.0,
        "yours": false,
        "topic_id": 496,
        "topic_slug": "fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file/496/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2900,
        "name": "Christophe Chevalier",
        "username": "KrzysFR",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
        "created_at": "2018-12-21T18:18:24.959Z",
        "cooked": "<p>I getting the same kind of errors again, on Windows, with v6.0.15, but this time it seems to happen while the files are being closed and then re-opened (right when doing a \u201cconfigure double\u201d after adding more nodes to a cluster)</p>\n<p><em>see XML log below</em></p>\n<p>The code that trigger the \u201cmust be unbuffered\u201d error is in AsynFileWinASIO::open() (-&gt; <a href=\"https://github.com/apple/foundationdb/blob/release-6.0/fdbrpc/AsyncFileWinASIO.actor.h#L47\" rel=\"nofollow noopener\">here</a>)</p>\n<p>The corresponding code for linux KAIO does an <code>ASSERT(...)</code> (-&gt; <a href=\"https://github.com/apple/foundationdb/blob/release-6.0/fdbrpc/AsyncFileKAIO.actor.h#L98\" rel=\"nofollow noopener\">here</a>) while the Windows version does an actual <code>if (..) { ... return io_error(); }</code>, so maybe the bug is not visible with Linux release builds, but will blow up on Windows release builds?</p>\n<p><strong>EDIT:</strong> the configure double failure is unrelated, it\u2019s a different issue that has been solved, see <a href=\"https://forums.foundationdb.org/t/unable-to-fake-multiple-machine-id-on-the-same-host-for-testing/970/8\" class=\"inline-onebox\">Unable to fake multiple \"machine_id\" on the same host for testing</a> ). Though maybe the I/O error sometimes happening at the same time are a contributing factors\u2026</p>\n<p>Example log from one of the nodes:</p>\n<pre><code class=\"lang-auto\">&lt;Event Severity=\"10\" Time=\"1545415114.576911\" Type=\"DQDestroy\" ID=\"6a277c88dd62d671\" LastPoppedSeq=\"745557\" PoppedSeq=\"745557\" NextPageSeq=\"815104\" File0Name=\"C:\\ProgramData\\foundationdb\\data\\4501\\logqueue-6a277c88dd62d6719e1e3995266d60ba-0.fdq\" Machine=\"10.10.0.173:4501\" LogGroup=\"default\" Roles=\"RV,SS\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1545415114.576911\" Type=\"DiskQueueShutdownDeleting\" ID=\"6a277c88dd62d671\" File0=\"C:\\ProgramData\\foundationdb\\data\\4501\\logqueue-6a277c88dd62d6719e1e3995266d60ba-0.fdq\" File1=\"C:\\ProgramData\\foundationdb\\data\\4501\\logqueue-6a277c88dd62d6719e1e3995266d60ba-1.fdq\" Machine=\"10.10.0.173:4501\" LogGroup=\"default\" Roles=\"RV,SS\" /&gt;\n&lt;Event Severity=\"40\" Time=\"1545415114.576911\" Type=\"FileOpenError\" ID=\"0000000000000000\" Reason=\"Must be unbuffered\" Flags=\"131074\" File=\"C:\\ProgramData\\foundationdb\\data\\4501\\logqueue-6a277c88dd62d6719e1e3995266d60ba-0.fdq\" Backtrace=\"\" Machine=\"10.10.0.173:4501\" LogGroup=\"default\" Roles=\"RV,SS\" /&gt;\n&lt;Event Severity=\"40\" Time=\"1545415114.576911\" Type=\"DiskQueueShutdownError\" ID=\"6a277c88dd62d671\" Error=\"io_error\" ErrorDescription=\"Disk i/o operation failed\" ErrorCode=\"1510\" Reason=\"unknown\" Backtrace=\"\" Machine=\"10.10.0.173:4501\" LogGroup=\"default\" Roles=\"RV,SS\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1545415114.576911\" Type=\"TLogTerminated\" ID=\"6a277c88dd62d671\" Error=\"worker_removed\" ErrorDescription=\"Normal worker shut down\" ErrorCode=\"1202\" Machine=\"10.10.0.173:4501\" LogGroup=\"default\" Roles=\"RV,SS\" /&gt;\n...\n&lt;Event Severity=\"10\" Time=\"1545415114.588058\" Type=\"KVWriterDestroying\" ID=\"6a277c88dd62d671\" Machine=\"10.10.0.173:4501\" LogGroup=\"default\" Roles=\"RV,SS\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1545415114.588058\" Type=\"KVWriterDestroyed\" ID=\"6a277c88dd62d671\" Machine=\"10.10.0.173:4501\" LogGroup=\"default\" Roles=\"RV,SS\" /&gt;\n&lt;Event Severity=\"40\" Time=\"1545415114.595561\" Type=\"FileOpenError\" ID=\"0000000000000000\" Reason=\"Must be unbuffered\" Flags=\"131074\" File=\"C:\\ProgramData\\foundationdb\\data\\4501\\log-6a277c88dd62d6719e1e3995266d60ba.sqlite\" Backtrace=\"\" Machine=\"10.10.0.173:4501\" LogGroup=\"default\" Roles=\"RV,SS\" /&gt;\n&lt;Event Severity=\"40\" Time=\"1545415114.595561\" Type=\"KVDoCloseError\" ID=\"6a277c88dd62d671\" Error=\"io_error\" ErrorDescription=\"Disk i/o operation failed\" ErrorCode=\"1510\" Reason=\"unknown\" Backtrace=\"\" Machine=\"10.10.0.173:4501\" LogGroup=\"default\" Roles=\"RV,SS\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1545415114.595561\" Type=\"KVClosed\" ID=\"6a277c88dd62d671\" Machine=\"10.10.0.173:4501\" LogGroup=\"default\" Roles=\"RV,SS\" /&gt;\n</code></pre>\n<p>I see the same things on several of the processes, and they are happening for <code>log-*</code>, <code>logqueue-*</code>, <code>storage-*</code> files, so bascially any file.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2018-12-21T22:48:28.280Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 5,
        "reads": 18,
        "readers_count": 17,
        "score": 33.6,
        "yours": false,
        "topic_id": 496,
        "topic_slug": "fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file",
        "display_username": "Christophe Chevalier",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/blob/release-6.0/fdbrpc/AsyncFileWinASIO.actor.h#L47",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/AsyncFileWinASIO.actor.h at release-6.0 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 2
          },
          {
            "url": "https://github.com/apple/foundationdb/blob/release-6.0/fdbrpc/AsyncFileKAIO.actor.h#L98",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/AsyncFileKAIO.actor.h at release-6.0 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 1
          },
          {
            "url": "https://forums.foundationdb.org/t/unable-to-fake-multiple-machine-id-on-the-same-host-for-testing/970/8",
            "internal": true,
            "reflection": false,
            "title": "Unable to fake multiple \"machine_id\" on the same host for testing",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 53,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file/496/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3569,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-03-05T00:16:04.331Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"KrzysFR\" data-post=\"5\" data-topic=\"496\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/krzysfr/48/43_2.png\" class=\"avatar\"> KrzysFR:</div>\n<blockquote>\n<p>The corresponding code for linux KAIO does an <code>ASSERT(...)</code> (-&gt; <a href=\"https://github.com/apple/foundationdb/blob/release-6.0/fdbrpc/AsyncFileKAIO.actor.h#L98\">here </a>) while the Windows version does an actual <code>if (..) { ... return io_error(); }</code> , so maybe the bug is not visible with Linux release builds, but will blow up on Windows release builds?</p>\n</blockquote>\n</aside>\n<p>Meng posted <a href=\"https://github.com/apple/foundationdb/pull/1232\">PR #1232</a> to make windows and linux match in their error handling here.  Looking through the code again, I still can\u2019t see how a disk queue can get opened without UNBUFFERED, and the fact that windows appears to be missing stack traces is very unfortunate. <img src=\"https://emoji.discourse-cdn.com/twitter/confused.png?v=12\" title=\":confused:\" class=\"emoji\" alt=\":confused:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-03-05T00:16:04.331Z",
        "reply_count": 1,
        "reply_to_post_number": 5,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 15,
        "readers_count": 14,
        "score": 38.0,
        "yours": false,
        "topic_id": 496,
        "topic_slug": "fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/pull/1232",
            "internal": false,
            "reflection": false,
            "title": "AsynFileWinASIO: Make error checking consistent with Linux by xumengpanda \u00b7 Pull Request #1232 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 2
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file/496/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3570,
        "name": "Meng Xu",
        "username": "mengxu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
        "created_at": "2019-03-05T00:41:17.511Z",
        "cooked": "<p>Right now, we just make the sanity check consistent both in Linux and Windows.<br>\nHopefully, the weird error can surface in the Linux environment and preferably in the simulation test later.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-03-05T00:41:17.511Z",
        "reply_count": 0,
        "reply_to_post_number": 6,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 15,
        "readers_count": 14,
        "score": 3.0,
        "yours": false,
        "topic_id": 496,
        "topic_slug": "fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file",
        "display_username": "Meng Xu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 337,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file/496/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3575,
        "name": "Christophe Chevalier",
        "username": "KrzysFR",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
        "created_at": "2019-03-05T09:47:55.061Z",
        "cooked": "<p>Thanks for fixing this!</p>\n<p>I also tried to find where <code>UNBUFFERED</code> comes from, but without any luck.</p>\n<p>The issue seems to happen randomly (on several identical VM, only one showed the problem) so I suspect some sort of race condition?</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-03-05T09:47:55.061Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 15,
        "readers_count": 14,
        "score": 8.0,
        "yours": false,
        "topic_id": 496,
        "topic_slug": "fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file",
        "display_username": "Christophe Chevalier",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 53,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file/496/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3648,
        "name": "Meng Xu",
        "username": "mengxu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
        "created_at": "2019-03-14T05:07:18.702Z",
        "cooked": "<p>I would say if the problem only exists in VM, it may be some kind of subtle bug in hypervisor (or VM monitor).</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-03-14T05:07:18.702Z",
        "reply_count": 1,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 17,
        "readers_count": 16,
        "score": 8.4,
        "yours": false,
        "topic_id": 496,
        "topic_slug": "fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file",
        "display_username": "Meng Xu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 53,
          "username": "KrzysFR",
          "name": "Christophe Chevalier",
          "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 337,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file/496/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3654,
        "name": "Christophe Chevalier",
        "username": "KrzysFR",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
        "created_at": "2019-03-14T09:29:33.138Z",
        "cooked": "<p>It happened on both Hyper-V (ours), VMWare (customer), and also one time on a brand new physical machine during installation (top message of this thread). It was also accross multiple versions of fdb (though this part of the code probably did not change).</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-03-14T09:29:33.138Z",
        "reply_count": 0,
        "reply_to_post_number": 9,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 17,
        "readers_count": 16,
        "score": 3.4,
        "yours": false,
        "topic_id": 496,
        "topic_slug": "fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file",
        "display_username": "Christophe Chevalier",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 337,
          "username": "mengxu",
          "name": "Meng Xu",
          "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 53,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file/496/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3774,
        "name": "Christophe Chevalier",
        "username": "KrzysFR",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
        "created_at": "2019-03-30T11:46:43.006Z",
        "cooked": "<p>It\u2019s doing it again! Everytime I start the service on this particular machine (4 processes), at least one or two processes complain about <code>Must be unbuffered</code>. I tried stopping the service, removing all previous data, restarting, doing <code>configure new single ssd</code> and everytime I restart the services, I get the same result.</p>\n<p>The pattern I see is a <code>StorageServerTerminated</code> event, followed by a bunch of <code>CoroStop</code>, then a <code>AllAlternativesFailed</code> and finally <code>FileOpenError</code>/<code>KVDoCloseError</code>. This time it\u2019s on a .sqlite file.</p>\n<p>v6.0.15, 4 processes on single machine, data split between two disks (C: and D:)</p>\n<p>Config file:</p>\n<pre><code class=\"lang-auto\">[fdbmonitor]\nrestart_delay = 20\n\n[general]\ncluster_file=C:\\ProgramData\\foundationdb\\fdb.cluster\n\n[fdbserver]\npublic_address = auto:$ID\nlisten_address = public\nparentpid = $PID\ncommand=C:\\Program Files\\foundationdb\\bin\\fdbserver.exe\ndatadir=C:\\ProgramData\\foundationdb\\data\\$ID\nlogdir=C:\\ProgramData\\foundationdb\\logs\n\n[fdbserver.4500]\n\n[fdbserver.4501]\n\n[fdbserver.4502]\ndatadir=D:\\foundationdb\\data\\$ID\n\n[fdbserver.4503]\ndatadir=D:\\foundationdb\\data\\$ID\n\n[backup-agent]\ncommand=C:\\Program Files\\foundationdb\\bin\\backup_agent.exe\nlogdir=C:\\ProgramData\\foundationdb\\logs\n\n[backup-agent.1]\n</code></pre>\n<p>Log extract:</p>\n<pre><code class=\"lang-auto\">...\n&lt;Event Severity=\"10\" Time=\"1553945442.597377\" Type=\"TLogJoinedMe\" ID=\"c512472fafc50a3d\" TLog=\"56659ccf2ca43a92\" Address=\"10.0.1.26:4501\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.597377\" Type=\"CoroStop\" ID=\"0000000000000000\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.597377\" Type=\"KVWriterDestroying\" ID=\"b60c68f39e5a077c\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.597377\" Type=\"KVWriterDestroyed\" ID=\"b60c68f39e5a077c\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.600754\" Type=\"KVClose\" ID=\"d9a605321616b006\" Del=\"1\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.600754\" Type=\"WorkPool_Stop\" ID=\"0000000000000000\" Workers=\"1\" Idle=\"1\" Work=\"0\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.600754\" Type=\"WorkPool_Stop\" ID=\"0000000000000000\" Workers=\"64\" Idle=\"64\" Work=\"0\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.600754\" Type=\"StorageServerTerminated\" ID=\"d9a605321616b006\" Error=\"worker_removed\" ErrorDescription=\"Normal worker shut down\" ErrorCode=\"1202\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.605091\" Type=\"CommitAttachID\" ID=\"4ba4f4861037259a\" To=\"8c45ffdb86141495\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.605091\" Type=\"CommitDebug\" ID=\"8c45ffdb86141495\" Location=\"TLog.tLogCommit.BeforeWaitForVersion\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.605091\" Type=\"CommitDebug\" ID=\"8c45ffdb86141495\" Location=\"TLog.tLogCommit.Before\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.605091\" Type=\"CommitDebug\" ID=\"8c45ffdb86141495\" Location=\"TLog.tLogCommit.AfterTLogCommit\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.606858\" Type=\"CommitDebug\" ID=\"8c45ffdb86141495\" Location=\"TLog.tLogCommit.After\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.606858\" Type=\"CoroStop\" ID=\"0000000000000000\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.606858\" Type=\"CoroStop\" ID=\"0000000000000000\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.606858\" Type=\"CoroStop\" ID=\"0000000000000000\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.606858\" Type=\"CoroStop\" ID=\"0000000000000000\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n... same event repeated 10 times....\n&lt;Event Severity=\"10\" Time=\"1553945442.608516\" Type=\"CoroStop\" ID=\"0000000000000000\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.608516\" Type=\"CoroStop\" ID=\"0000000000000000\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.608782\" Type=\"CodeCoverage\" ID=\"0000000000000000\" File=\"DiskQueue.actor.cpp\" Line=\"655\" Condition=\"contents.size() &amp;amp;&amp;amp; pushedPageCount()\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.608782\" Type=\"CoroStop\" ID=\"0000000000000000\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n... removed 30+ times same event...\n&lt;Event Severity=\"10\" Time=\"1553945442.609032\" Type=\"CoroStop\" ID=\"0000000000000000\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.609032\" Type=\"CoroStop\" ID=\"0000000000000000\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.609032\" Type=\"CoroStop\" ID=\"0000000000000000\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.609290\" Type=\"AllAlternativesFailed\" ID=\"0000000000000000\" Interval=\"1\" Alternatives=\"bebba47071638ebd\" Delay=\"0.05\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"40\" Time=\"1553945442.609290\" Type=\"FileOpenError\" ID=\"0000000000000000\" Reason=\"Must be unbuffered\" Flags=\"131074\" File=\"D:\\foundationdb\\data\\4503\\storage-b60c68f39e5a077c0c974b6d0118c118.sqlite\" Backtrace=\"\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"40\" Time=\"1553945442.609290\" Type=\"KVDoCloseError\" ID=\"b60c68f39e5a077c\" Error=\"io_error\" ErrorDescription=\"Disk i/o operation failed\" ErrorCode=\"1510\" Reason=\"unknown\" Backtrace=\"\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.609290\" Type=\"KVClosed\" ID=\"b60c68f39e5a077c\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.609290\" Type=\"Role\" ID=\"b60c68f39e5a077c\" Error=\"success\" ErrorDescription=\"Success\" ErrorCode=\"0\" Transition=\"End\" As=\"StorageServer\" Reason=\"Error\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" TrackLatestType=\"Original\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.609290\" Type=\"WorkPool_Stop\" ID=\"0000000000000000\" Workers=\"1\" Idle=\"0\" Work=\"0\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.609290\" Type=\"WorkPool_Stop\" ID=\"0000000000000000\" Workers=\"64\" Idle=\"0\" Work=\"0\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.612864\" Type=\"TransactionAttachID\" ID=\"10188f69184bbdef\" To=\"edd39d8b61f68931\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.612864\" Type=\"TransactionDebug\" ID=\"edd39d8b61f68931\" Location=\"TLogServer.TLogConfirmRunningRequest\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.612864\" Type=\"CoroStop\" ID=\"0000000000000000\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.612864\" Type=\"KVWriterDestroying\" ID=\"d9a605321616b006\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.612864\" Type=\"KVWriterDestroyed\" ID=\"d9a605321616b006\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"40\" Time=\"1553945442.616773\" Type=\"FileOpenError\" ID=\"0000000000000000\" Reason=\"Must be unbuffered\" Flags=\"131074\" File=\"D:\\foundationdb\\data\\4503\\storage-d9a605321616b0064898aff70659a5a5.sqlite\" Backtrace=\"\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"40\" Time=\"1553945442.616773\" Type=\"KVDoCloseError\" ID=\"d9a605321616b006\" Error=\"io_error\" ErrorDescription=\"Disk i/o operation failed\" ErrorCode=\"1510\" Reason=\"unknown\" Backtrace=\"\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.616773\" Type=\"KVClosed\" ID=\"d9a605321616b006\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.616773\" Type=\"Role\" ID=\"d9a605321616b006\" Error=\"success\" ErrorDescription=\"Success\" ErrorCode=\"0\" Transition=\"End\" As=\"StorageServer\" Reason=\"Error\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" TrackLatestType=\"Original\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.616773\" Type=\"WorkPool_Stop\" ID=\"0000000000000000\" Workers=\"1\" Idle=\"0\" Work=\"0\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.616773\" Type=\"WorkPool_Stop\" ID=\"0000000000000000\" Workers=\"64\" Idle=\"0\" Work=\"0\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.618938\" Type=\"SSTag\" ID=\"ff08bffb954efca7\" MyTag=\"0:2\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553945442.618938\" Type=\"StorageServerStartingCore\" ID=\"ff08bffb954efca7\" TimeTaken=\"1.34955\" Machine=\"10.0.1.26:4503\" LogGroup=\"default\" Roles=\"MS,SS,TL\" /&gt;\n...\n</code></pre>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-03-30T11:53:25.357Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 19,
        "readers_count": 18,
        "score": 3.8,
        "yours": false,
        "topic_id": 496,
        "topic_slug": "fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file",
        "display_username": "Christophe Chevalier",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 53,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file/496/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3775,
        "name": "Christophe Chevalier",
        "username": "KrzysFR",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
        "created_at": "2019-03-30T11:52:24.117Z",
        "cooked": "<p>Noticed that I forgot to remove data files on second disk while recreating a new cluster, so wiped everything, retried. On first two restart no issues, but on 3rd attempt, one of the process had the issue, this time on a tlog file. Here is extract of the log:</p>\n<p>On all occurrences I\u2019ve seen so that, it\u2019s always after a role (storage, tlog, \u2026) is terminated\u2026?</p>\n<pre><code class=\"lang-auto\">&lt;Event Severity=\"10\" Time=\"1553946541.844301\" Type=\"TLogError\" ID=\"0c07d4b07d4cbefb\" Error=\"worker_removed\" ErrorDescription=\"Normal worker shut down\" ErrorCode=\"1202\" Machine=\"10.0.1.26:4502\" LogGroup=\"default\" Roles=\"MP,RV,SS\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553946541.844301\" Type=\"Role\" ID=\"0c07d4b07d4cbefb\" Transition=\"End\" As=\"SharedTLog\" Reason=\"Error\" Machine=\"10.0.1.26:4502\" LogGroup=\"default\" Roles=\"MP,RV,SS\" TrackLatestType=\"Original\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553946541.844301\" Type=\"KVClose\" ID=\"0c07d4b07d4cbefb\" Del=\"1\" Machine=\"10.0.1.26:4502\" LogGroup=\"default\" Roles=\"MP,RV,SS\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553946541.844301\" Type=\"WorkPool_Stop\" ID=\"0000000000000000\" Workers=\"1\" Idle=\"0\" Work=\"7\" Machine=\"10.0.1.26:4502\" LogGroup=\"default\" Roles=\"MP,RV,SS\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553946541.844301\" Type=\"WorkPool_Stop\" ID=\"0000000000000000\" Workers=\"64\" Idle=\"64\" Work=\"0\" Machine=\"10.0.1.26:4502\" LogGroup=\"default\" Roles=\"MP,RV,SS\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553946541.844301\" Type=\"DQDestroy\" ID=\"0c07d4b07d4cbefb\" LastPoppedSeq=\"753749\" PoppedSeq=\"753749\" NextPageSeq=\"761856\" File0Name=\"D:\\foundationdb\\data\\4502\\logqueue-0c07d4b07d4cbefb4f64550649c1f256-1.fdq\" Machine=\"10.0.1.26:4502\" LogGroup=\"default\" Roles=\"MP,RV,SS\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553946541.844301\" Type=\"DiskQueueShutdownDeleting\" ID=\"0c07d4b07d4cbefb\" File0=\"D:\\foundationdb\\data\\4502\\logqueue-0c07d4b07d4cbefb4f64550649c1f256-0.fdq\" File1=\"D:\\foundationdb\\data\\4502\\logqueue-0c07d4b07d4cbefb4f64550649c1f256-1.fdq\" Machine=\"10.0.1.26:4502\" LogGroup=\"default\" Roles=\"MP,RV,SS\" /&gt;\n&lt;Event Severity=\"40\" Time=\"1553946541.844301\" Type=\"FileOpenError\" ID=\"0000000000000000\" Reason=\"Must be unbuffered\" Flags=\"131074\" File=\"D:\\foundationdb\\data\\4502\\logqueue-0c07d4b07d4cbefb4f64550649c1f256-0.fdq\" Backtrace=\"\" Machine=\"10.0.1.26:4502\" LogGroup=\"default\" Roles=\"MP,RV,SS\" /&gt;\n&lt;Event Severity=\"40\" Time=\"1553946541.844301\" Type=\"DiskQueueShutdownError\" ID=\"0c07d4b07d4cbefb\" Error=\"io_error\" ErrorDescription=\"Disk i/o operation failed\" ErrorCode=\"1510\" Reason=\"unknown\" Backtrace=\"\" Machine=\"10.0.1.26:4502\" LogGroup=\"default\" Roles=\"MP,RV,SS\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553946541.844301\" Type=\"TLogTerminated\" ID=\"0c07d4b07d4cbefb\" Error=\"worker_removed\" ErrorDescription=\"Normal worker shut down\" ErrorCode=\"1202\" Machine=\"10.0.1.26:4502\" LogGroup=\"default\" Roles=\"MP,RV,SS\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553946541.844301\" Type=\"Role\" ID=\"0c07d4b07d4cbefb\" Error=\"success\" ErrorDescription=\"Success\" ErrorCode=\"0\" Transition=\"End\" As=\"SharedTLog\" Reason=\"Error\" Machine=\"10.0.1.26:4502\" LogGroup=\"default\" Roles=\"MP,RV,SS\" TrackLatestType=\"Original\" /&gt;\n&lt;Event Severity=\"10\" Time=\"1553946541.844301\" Type=\"CodeCoverage\" ID=\"0000000000000000\" File=\"storageserver.actor.cpp\" Line=\"3236\" Condition=\"self-&amp;gt;logSystem\" Machine=\"10.0.1.26:4502\" LogGroup=\"default\" Roles=\"MP,RV,SS\" /&gt;\n</code></pre>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-03-30T11:52:42.325Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 19,
        "readers_count": 18,
        "score": 3.8,
        "yours": false,
        "topic_id": 496,
        "topic_slug": "fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file",
        "display_username": "Christophe Chevalier",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 53,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file/496/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3776,
        "name": "Christophe Chevalier",
        "username": "KrzysFR",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
        "created_at": "2019-03-30T12:01:36.132Z",
        "cooked": "<p>Looking at the code, it lead me to the deletion of old files:</p>\n<aside class=\"onebox githubblob\">\n  <header class=\"source\">\n      <a href=\"https://github.com/apple/foundationdb/blob/ddf8e86730101d192c74bee9ff570b2f1a69c2b7/fdbserver/DiskQueue.actor.cpp#L484\" target=\"_blank\" rel=\"nofollow noopener\">github.com</a>\n  </header>\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/apple/foundationdb/blob/ddf8e86730101d192c74bee9ff570b2f1a69c2b7/fdbserver/DiskQueue.actor.cpp#L484\" target=\"_blank\" rel=\"nofollow noopener\">apple/foundationdb/blob/ddf8e86730101d192c74bee9ff570b2f1a69c2b7/fdbserver/DiskQueue.actor.cpp#L484</a></h4>\n<pre class=\"onebox\"><code class=\"lang-cpp\"><ol class=\"start lines\" start=\"474\" style=\"counter-reset: li-counter 473 ;\">\n<li>\tACTOR static void shutdown( RawDiskQueue_TwoFiles* self, bool deleteFiles ) {</li>\n<li>\t\t// Wait for all reads and writes on the file, and all actors referencing self, to be finished</li>\n<li>\t\tstate Error error = success();</li>\n<li>\t\ttry {</li>\n<li>\t\t\twait(success(errorOr(self-&gt;lastCommit)));</li>\n<li>\t\t\twait( self-&gt;onSafeToDestruct() );</li>\n<li>\n</li>\n<li>\t\t\tfor(int i=0; i&lt;2; i++)</li>\n<li>\t\t\t\tself-&gt;files[i].f.clear();</li>\n<li>\n</li>\n<li class=\"selected\">\t\t\tif (deleteFiles) {</li>\n<li>\t\t\t\tTraceEvent(\"DiskQueueShutdownDeleting\", self-&gt;dbgid)</li>\n<li>\t\t\t\t\t.detail(\"File0\", self-&gt;filename(0))</li>\n<li>\t\t\t\t\t.detail(\"File1\", self-&gt;filename(1));</li>\n<li>\t\t\t\twait( IAsyncFileSystem::filesystem()-&gt;incrementalDeleteFile( self-&gt;filename(0), false ) );</li>\n<li>\t\t\t\twait( IAsyncFileSystem::filesystem()-&gt;incrementalDeleteFile( self-&gt;filename(1), true ) );</li>\n<li>\t\t\t}</li>\n<li>\t\t\tTraceEvent(\"DiskQueueShutdownComplete\", self-&gt;dbgid)</li>\n<li>\t\t\t\t.detail(\"DeleteFiles\", deleteFiles)</li>\n<li>\t\t\t\t.detail(\"File0\", self-&gt;filename(0));</li>\n<li>\t\t} catch( Error &amp;e ) {</li>\n</ol></code></pre>\n\n\n  </article>\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>I see the trace for <code>DiskQueueShutdownDeleting</code> but not for <code>DiskQueueShutdownComplete</code> and instead we get an error <code>DiskQueueShutdownError</code> which cause an error on the DiskQueue actor?</p>\n<p>This points to incrementalDeleteHelper() that attempts to open the file (to get it\u2019s size) but does not specify the <code>OPEN_UNBUFFERED</code> flag, triggering the failure in <code>AsyncFileWinASIO::open()</code>!</p>\n<aside class=\"onebox githubblob\">\n  <header class=\"source\">\n      <a href=\"https://github.com/apple/foundationdb/blob/cdb7c721c9aa3a082cdf16d2b82e4c6429d0f292/fdbrpc/IAsyncFile.actor.cpp#L91\" target=\"_blank\" rel=\"nofollow noopener\">github.com</a>\n  </header>\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/apple/foundationdb/blob/cdb7c721c9aa3a082cdf16d2b82e4c6429d0f292/fdbrpc/IAsyncFile.actor.cpp#L91\" target=\"_blank\" rel=\"nofollow noopener\">apple/foundationdb/blob/cdb7c721c9aa3a082cdf16d2b82e4c6429d0f292/fdbrpc/IAsyncFile.actor.cpp#L91</a></h4>\n<pre class=\"onebox\"><code class=\"lang-cpp\"><ol class=\"start lines\" start=\"81\" style=\"counter-reset: li-counter 80 ;\">\n<li>\twait( IAsyncFileSystem::filesystem()-&gt;deleteFile(filename, true) );</li>\n<li>\treturn Void();</li>\n<li>}</li>\n<li>\n</li>\n<li>ACTOR static Future&lt;Void&gt; incrementalDeleteHelper( std::string filename, bool mustBeDurable, int64_t truncateAmt, double interval ) {</li>\n<li>\tstate Reference&lt;IAsyncFile&gt; file;</li>\n<li>\tstate int64_t remainingFileSize;</li>\n<li>\tstate bool exists = fileExists(filename);</li>\n<li>\n</li>\n<li>\tif(exists) {</li>\n<li class=\"selected\">\t\tReference&lt;IAsyncFile&gt; f = wait(IAsyncFileSystem::filesystem()-&gt;open(filename, IAsyncFile::OPEN_READWRITE | IAsyncFile::OPEN_UNCACHED, 0));</li>\n<li>\t\tfile = f;</li>\n<li>\n</li>\n<li>\t\tint64_t fileSize = wait(file-&gt;size());</li>\n<li>\t\tremainingFileSize = fileSize;</li>\n<li>\t}</li>\n<li>\n</li>\n<li>\twait(IAsyncFileSystem::filesystem()-&gt;deleteFile(filename, mustBeDurable));</li>\n<li>\n</li>\n<li>\tif(exists) {</li>\n<li>\t\tfor( ; remainingFileSize &gt; 0; remainingFileSize -= truncateAmt ){</li>\n</ol></code></pre>\n\n\n  </article>\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>This explains why it does not happen on first boot (no files yet) or after a full cleanup (no files to delete), but when restarting the service OR when changing from one storage engine to the other.</p>\n<p>On Windows, before the recent change (and in the binary that I\u2019m running), this was a hard error instead of an ASSERT, but then why is it not ASSERTing on both linux and windows when this code runs in debug mode?</p>",
        "post_number": 13,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-03-30T12:05:01.532Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 9,
        "reads": 18,
        "readers_count": 17,
        "score": 48.6,
        "yours": false,
        "topic_id": 496,
        "topic_slug": "fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file",
        "display_username": "Christophe Chevalier",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/blob/ddf8e86730101d192c74bee9ff570b2f1a69c2b7/fdbserver/DiskQueue.actor.cpp#L484",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/DiskQueue.actor.cpp at ddf8e86730101d192c74bee9ff570b2f1a69c2b7 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 0
          },
          {
            "url": "https://github.com/apple/foundationdb/blob/cdb7c721c9aa3a082cdf16d2b82e4c6429d0f292/fdbrpc/IAsyncFile.actor.cpp#L91",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/IAsyncFile.actor.cpp at cdb7c721c9aa3a082cdf16d2b82e4c6429d0f292 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 53,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file/496/13",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3777,
        "name": "Christophe Chevalier",
        "username": "KrzysFR",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
        "created_at": "2019-03-30T12:11:31.815Z",
        "cooked": "<p>I\u2019ve opened an issue for this: <a href=\"https://github.com/apple/foundationdb/issues/1380\" rel=\"nofollow noopener\">https://github.com/apple/foundationdb/issues/1380</a></p>",
        "post_number": 14,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-03-30T12:11:31.815Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 17,
        "readers_count": 16,
        "score": 3.4,
        "yours": false,
        "topic_id": 496,
        "topic_slug": "fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file",
        "display_username": "Christophe Chevalier",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/issues/1380",
            "internal": false,
            "reflection": false,
            "title": "IAsyncFile::incrementalDeleteHelper calls AsyncFileWinASIO::open() without specifying OPEN_UNBUFFERED triggering an error/assertion \u00b7 Issue #1380 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 6
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 53,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file/496/14",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3808,
        "name": "Christophe Chevalier",
        "username": "KrzysFR",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
        "created_at": "2019-04-02T09:06:38.608Z",
        "cooked": "<p>Fixed in <a href=\"https://github.com/apple/foundationdb/pull/1396\" rel=\"nofollow noopener\">https://github.com/apple/foundationdb/pull/1396</a></p>",
        "post_number": 15,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-04-02T09:06:38.608Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 17,
        "readers_count": 16,
        "score": 3.4,
        "yours": false,
        "topic_id": 496,
        "topic_slug": "fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file",
        "display_username": "Christophe Chevalier",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/pull/1396",
            "internal": false,
            "reflection": false,
            "title": "Open incrementalDelete files with OPEN_UNBUFFERED by alexmiller-apple \u00b7 Pull Request #1396 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 7
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 53,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file/496/15",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      1419,
      2329,
      2331,
      2332,
      2900,
      3569,
      3570,
      3575,
      3648,
      3654,
      3774,
      3775,
      3776,
      3777,
      3808
    ]
  },
  "timeline_lookup": [
    [
      1,
      2693
    ],
    [
      2,
      2566
    ],
    [
      3,
      2565
    ],
    [
      4,
      2564
    ],
    [
      5,
      2496
    ],
    [
      6,
      2423
    ],
    [
      9,
      2414
    ],
    [
      11,
      2397
    ],
    [
      15,
      2395
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Fresh install on Windows fails with FileOpenError `Must be unbuffered` when attempting to open &lsquo;xxxx-0.fdq&rsquo; file",
  "id": 496,
  "title": "Fresh install on Windows fails with FileOpenError `Must be unbuffered` when attempting to open 'xxxx-0.fdq' file",
  "posts_count": 15,
  "created_at": "2018-06-07T14:40:00.221Z",
  "views": 1731,
  "reply_count": 6,
  "like_count": 2,
  "last_posted_at": "2019-04-02T09:06:38.608Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "fresh-install-on-windows-fails-with-fileopenerror-must-be-unbuffered-when-attempting-to-open-xxxx-0-fdq-file",
  "category_id": 7,
  "word_count": 3467,
  "deleted_at": null,
  "user_id": 53,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": "https://global.discourse-cdn.com/foundationdb/original/1X/a938a2538369b70a6d6a27cc8eca865311a7c245.png",
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_496",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 15,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 3,
  "show_read_indicator": false,
  "thumbnails": [
    {
      "max_width": null,
      "max_height": null,
      "width": 979,
      "height": 1018,
      "url": "https://global.discourse-cdn.com/foundationdb/original/1X/a938a2538369b70a6d6a27cc8eca865311a7c245.png"
    }
  ],
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Foundationdb seems keep reinitialising itself after client hang",
      "id": 1437,
      "title": "Foundationdb seems keep reinitialising itself after client hang",
      "slug": "foundationdb-seems-keep-reinitialising-itself-after-client-hang",
      "posts_count": 6,
      "reply_count": 2,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2019-06-10T10:10:13.209Z",
      "last_posted_at": "2019-06-26T18:08:03.629Z",
      "bumped": true,
      "bumped_at": "2019-06-26T18:08:03.629Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 1222,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 602,
            "username": "ppggff",
            "name": "ppggff",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ppggff/{size}/855_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "FoundationDB does not run on Windows Subsystem For Linux (WSL)",
      "id": 809,
      "title": "FoundationDB does not run on Windows Subsystem For Linux (WSL)",
      "slug": "foundationdb-does-not-run-on-windows-subsystem-for-linux-wsl",
      "posts_count": 10,
      "reply_count": 9,
      "highest_post_number": 10,
      "image_url": null,
      "created_at": "2018-10-27T18:14:34.500Z",
      "last_posted_at": "2020-06-02T22:08:46.793Z",
      "bumped": true,
      "bumped_at": "2020-06-02T22:08:46.793Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 3724,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Io_error on all FDB storage machines",
      "id": 2317,
      "title": "Io_error on all FDB storage machines",
      "slug": "io-error-on-all-fdb-storage-machines",
      "posts_count": 14,
      "reply_count": 5,
      "highest_post_number": 14,
      "image_url": null,
      "created_at": "2020-08-28T18:35:27.154Z",
      "last_posted_at": "2020-09-05T03:29:36.922Z",
      "bumped": true,
      "bumped_at": "2020-09-05T03:29:36.922Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 1935,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 810,
            "username": "amanda",
            "name": "Amanda",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/67e7ee/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 14,
            "username": "andrew.noyes",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 260,
            "username": "jared2501",
            "name": "Jared2501",
            "avatar_template": "/user_avatar/forums.foundationdb.org/jared2501/{size}/266_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "All Coordinators Crashed At Same Time",
      "id": 1537,
      "title": "All Coordinators Crashed At Same Time",
      "slug": "all-coordinators-crashed-at-same-time",
      "posts_count": 15,
      "reply_count": 10,
      "highest_post_number": 15,
      "image_url": null,
      "created_at": "2019-07-25T21:19:54.522Z",
      "last_posted_at": "2019-09-09T23:32:55.551Z",
      "bumped": true,
      "bumped_at": "2019-09-09T23:32:55.551Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 2139,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 627,
            "username": "Dan",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/eada6e/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 26,
            "username": "mrz",
            "name": "matthew zeier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mrz/{size}/26_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 15,
            "username": "markus.pilman",
            "name": "Markus Pilman",
            "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Segmentation fault error and broken cluster",
      "id": 483,
      "title": "Segmentation fault error and broken cluster",
      "slug": "segmentation-fault-error-and-broken-cluster",
      "posts_count": 17,
      "reply_count": 12,
      "highest_post_number": 17,
      "image_url": null,
      "created_at": "2018-05-31T15:34:28.123Z",
      "last_posted_at": "2018-06-11T17:31:13.656Z",
      "bumped": true,
      "bumped_at": "2018-06-11T17:31:13.656Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 4331,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 211,
            "username": "brk0v",
            "name": "Viacheslav Biriukov",
            "avatar_template": "/user_avatar/forums.foundationdb.org/brk0v/{size}/173_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 156,
            "username": "spullara",
            "name": "Sam Pullara",
            "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
            "trust_level": 2
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 53,
        "username": "KrzysFR",
        "name": "Christophe Chevalier",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
        "post_count": 10,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 337,
        "username": "mengxu",
        "name": "Meng Xu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      }
    ],
    "created_by": {
      "id": 53,
      "username": "KrzysFR",
      "name": "Christophe Chevalier",
      "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png"
    },
    "last_poster": {
      "id": 53,
      "username": "KrzysFR",
      "name": "Christophe Chevalier",
      "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png"
    },
    "links": [
      {
        "url": "https://github.com/apple/foundationdb/pull/1396",
        "title": "Open incrementalDelete files with OPEN_UNBUFFERED by alexmiller-apple \u00b7 Pull Request #1396 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 7,
        "user_id": 53,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/issues/1380",
        "title": "IAsyncFile::incrementalDeleteHelper calls AsyncFileWinASIO::open() without specifying OPEN_UNBUFFERED triggering an error/assertion \u00b7 Issue #1380 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 6,
        "user_id": 53,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/release-6.0/fdbrpc/AsyncFileWinASIO.actor.h#L47",
        "title": "foundationdb/AsyncFileWinASIO.actor.h at release-6.0 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 53,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/release-6.0/fdbrpc/AsyncFileKAIO.actor.h#L98",
        "title": "foundationdb/AsyncFileKAIO.actor.h at release-6.0 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 53,
        "domain": "github.com",
        "root_domain": "github.com"
      }
    ]
  },
  "bookmarks": []
}