{
  "post_stream": {
    "posts": [
      {
        "id": 7824,
        "name": "",
        "username": "arshia",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/d2c977/{size}.png",
        "created_at": "2020-08-24T10:48:16.146Z",
        "cooked": "<p>We\u2019ve been facing a lot of Transaction Cancelled errors (<strong>Operation aborted because transaction was cancelled: 1025</strong>) lately. We have identical, unique transactions of ~500 KB each being transacted by 6 Java clients in a loop. We do not have any timeout options set for these transactions. We were running these with a performance testing setup in mind, and the write rate observed was ~25000 kHz.</p>\n<p>Our cluster configuration:</p>\n<ul>\n<li>5 machines</li>\n<li>triple replication</li>\n<li>1 SSD per machine</li>\n</ul>\n<p>The process class configuration:</p>\n<ul>\n<li>\n<p>Machine 1: 2 storage + 1 proxy + 1 stateless</p>\n</li>\n<li>\n<p>Machine 2: 2 storage + 1 proxy + 1 stateless</p>\n</li>\n<li>\n<p>Machine 3: 2 storage + 1 proxy + 1 stateless + 1 log</p>\n</li>\n<li>\n<p>Machine 4: 2 storage + 1 log + 1 stateless</p>\n</li>\n<li>\n<p>Machine 5: 2 storage + 1 log + 1 stateless</p>\n</li>\n</ul>\n<p>Interestingly enough, our logs suggest that some of these transactions were already committed when the said error was encountered.</p>\n<p>Any insight into this would be helpful!</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 2,
        "updated_at": "2020-08-24T11:00:04.351Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 475,
        "reads": 34,
        "readers_count": 33,
        "score": 2381.8,
        "yours": false,
        "topic_id": 2306,
        "topic_slug": "transaction-cancelled-errors",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 804,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/transaction-cancelled-errors/2306/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 7828,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2020-08-24T15:32:54.811Z",
        "cooked": "<p><code>transaction_cancelled</code> can get thrown by an operation for a few reasons:</p>\n<ol>\n<li>You call <code>cancel</code> on your transaction.</li>\n<li>The transaction is destroyed while an operation is outstanding. For example, if you start a read and don\u2019t wait for the result, closing the transaction may cause that operation to throw this error.</li>\n<li>You reset your transaction (I don\u2019t think this is possible in Java).</li>\n<li>You retry a transaction that has outstanding operations (using <code>onError</code> or the default retry loops).</li>\n<li>If you happen to be running an API version before 410, then I think <code>commit</code> could put the transaction into a state where any subsequently started operations may be cancelled.</li>\n</ol>\n<p>If you have transactions that are successfully committing and then throwing this error in some operation, then I suspect what\u2019s happening is you are hitting <span class=\"hashtag\">#2</span>. In the case that you commit a transaction, though, it will wait for outstanding reads to complete before the commit can succeed. That would mean that in order to trigger this case, you would need to be starting operations after the commit has started, and it would be these operations that would see the error.</p>\n<p>Is that something that is plausibly happening in your application?</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 2,
        "updated_at": "2020-08-24T15:32:54.811Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 8,
        "reads": 32,
        "readers_count": 31,
        "score": 61.4,
        "yours": false,
        "topic_id": 2306,
        "topic_slug": "transaction-cancelled-errors",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/transaction-cancelled-errors/2306/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      7824,
      7828
    ]
  },
  "timeline_lookup": [
    [
      1,
      1884
    ]
  ],
  "suggested_topics": [],
  "tags": [
    "performance"
  ],
  "tags_descriptions": {},
  "fancy_title": "Transaction Cancelled Errors",
  "id": 2306,
  "title": "Transaction Cancelled Errors",
  "posts_count": 2,
  "created_at": "2020-08-24T10:48:16.072Z",
  "views": 1460,
  "reply_count": 0,
  "like_count": 1,
  "last_posted_at": "2020-08-24T15:32:54.811Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "transaction-cancelled-errors",
  "category_id": 17,
  "word_count": 355,
  "deleted_at": null,
  "user_id": 804,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_2306",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 2,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 2,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "What does it mean &ldquo;Transaction Is Retryable&rdquo;, In particular to Handle Error of &ldquo;Transaction Too Old&rdquo;?",
      "id": 1451,
      "title": "What does it mean \"Transaction Is Retryable\", In particular to Handle Error of \"Transaction Too Old\"?",
      "slug": "what-does-it-mean-transaction-is-retryable-in-particular-to-handle-error-of-transaction-too-old",
      "posts_count": 6,
      "reply_count": 4,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2019-06-13T09:38:16.632Z",
      "last_posted_at": "2019-06-13T23:20:16.165Z",
      "bumped": true,
      "bumped_at": "2019-06-13T23:20:16.165Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "bindings"
      ],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 3564,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 531,
            "username": "jltz",
            "name": "Jun Li",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/c0e974/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "&ldquo;Transaction may or may not have committed&rdquo; receive during scheduled node",
      "id": 486,
      "title": "\"Transaction may or may not have committed\" receive during scheduled node",
      "slug": "transaction-may-or-may-not-have-committed-receive-during-scheduled-node",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2018-06-04T18:07:58.814Z",
      "last_posted_at": "2018-06-04T23:00:31.353Z",
      "bumped": true,
      "bumped_at": "2018-06-04T23:00:31.353Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 885,
      "category_id": 5,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 296,
            "username": "theos",
            "name": "Daniil Gitelson",
            "avatar_template": "/user_avatar/forums.foundationdb.org/theos/{size}/282_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "[Java] Validity of `tx.get()` futures not waiting to complete before `tx.commit()` being called",
      "id": 598,
      "title": "[Java] Validity of `tx.get()` futures not waiting to complete before `tx.commit()` being called",
      "slug": "java-validity-of-tx-get-futures-not-waiting-to-complete-before-tx-commit-being-called",
      "posts_count": 6,
      "reply_count": 1,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2018-07-28T16:12:29.768Z",
      "last_posted_at": "2018-08-09T16:55:29.882Z",
      "bumped": true,
      "bumped_at": "2018-08-09T16:55:29.882Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 3,
      "views": 708,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 38,
            "username": "panghy",
            "name": "Clement Pang",
            "avatar_template": "/user_avatar/forums.foundationdb.org/panghy/{size}/19_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Transaction is too old to perform reads or be committed AND Request for future version",
      "id": 1857,
      "title": "Transaction is too old to perform reads or be committed AND Request for future version",
      "slug": "transaction-is-too-old-to-perform-reads-or-be-committed-and-request-for-future-version",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2019-12-27T16:56:33.063Z",
      "last_posted_at": "2019-12-31T00:22:23.805Z",
      "bumped": true,
      "bumped_at": "2019-12-31T00:22:23.805Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 2459,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 695,
            "username": "nischalkumar",
            "name": "nischal kumar",
            "avatar_template": "/user_avatar/forums.foundationdb.org/nischalkumar/{size}/933_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "`CANCEL` instruction behavior in python bindings",
      "id": 3051,
      "title": "`CANCEL` instruction behavior in python bindings",
      "slug": "cancel-instruction-behavior-in-python-bindings",
      "posts_count": 4,
      "reply_count": 2,
      "highest_post_number": 4,
      "image_url": null,
      "created_at": "2021-12-02T12:24:51.414Z",
      "last_posted_at": "2021-12-03T03:27:59.952Z",
      "bumped": true,
      "bumped_at": "2021-12-03T03:27:59.952Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "bindings"
      ],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 439,
      "category_id": 5,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 946,
            "username": "rajivr",
            "name": "Rajiv M Ranganath",
            "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 12,
        "username": "ajbeamon",
        "name": "A.J. Beamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 804,
        "username": "arshia",
        "name": "",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/d2c977/{size}.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      }
    ],
    "created_by": {
      "id": 804,
      "username": "arshia",
      "name": "",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/d2c977/{size}.png"
    },
    "last_poster": {
      "id": 12,
      "username": "ajbeamon",
      "name": "A.J. Beamon",
      "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
    }
  },
  "bookmarks": []
}