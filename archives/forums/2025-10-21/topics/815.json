{
  "post_stream": {
    "posts": [
      {
        "id": 2465,
        "name": "Daniil Gitelson",
        "username": "theos",
        "avatar_template": "/user_avatar/forums.foundationdb.org/theos/{size}/282_2.png",
        "created_at": "2018-10-29T10:43:52.627Z",
        "cooked": "<p>I\u2019m running FoundationDB on 3 machines with 5 processes per machine, SSD2 storage, with Fault Tolerance = 1. Nothing special in configuration.</p>\n<p>The load is like this: two keys are updated, one is inserted, so database KV data grows due to inserts.</p>\n<p>I would expect that as data grows FDB would split it\u2019s <code>storage-*.sqlite</code> files, (according to docs, as I understand, they should not be greater than 500MB), but what I see, that each FDB process\u2019s data just grows without really splitting: I had <code>storage-*.sqlite</code> files for ~13Gb and growing.</p>\n<p>Is this expected behaviour? If so, how does it correlate with max shard size?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2018-10-31T03:36:44.345Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 172,
        "reads": 81,
        "readers_count": 80,
        "score": 876.2,
        "yours": false,
        "topic_id": 815,
        "topic_slug": "shards-are-not-splitted-into-smaller-ones",
        "display_username": "Daniil Gitelson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/data-retention-after-deleting-a-key-range-using-ssd-engine/2190/2",
            "internal": true,
            "reflection": true,
            "title": "Data retention after deleting a key range using SSD engine",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 296,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shards-are-not-splitted-into-smaller-ones/815/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 2473,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2018-10-29T16:00:06.949Z",
        "cooked": "<p>All of the shards that a particular storage server is responsible for are stored in the same data files. For the sqlite engine, this means that you\u2019ll have 1 <code>.sqlite</code> file and 1 <code>.sqlite-wal</code> file regardless of the number of shards that are assigned to that storage server.</p>\n<p>I will note, however, that it is possible for one process to have multiple sets of storage server files for various reasons unrelated to the partitioning of key space. In that case, if the files are all valid, then there will be multiple storage servers running on the same process.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2018-10-29T16:00:06.949Z",
        "reply_count": 2,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 78,
        "readers_count": 77,
        "score": 25.6,
        "yours": false,
        "topic_id": 815,
        "topic_slug": "shards-are-not-splitted-into-smaller-ones",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shards-are-not-splitted-into-smaller-ones/815/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2475,
        "name": "Daniil Gitelson",
        "username": "theos",
        "avatar_template": "/user_avatar/forums.foundationdb.org/theos/{size}/282_2.png",
        "created_at": "2018-10-29T16:23:59.712Z",
        "cooked": "<p>Thanx for the answer. My concern is about mass deletion of entries: I\u2019m creating entries like 2018.10.09.xxx (prefixing key with current date) to be able delete all \u2018old\u2019 (let say older than 5 days) keys with single clearrange and I was hoping that it will be as fast as \u2018truncate\u2019 for rdbms, which will just drop entire partition.</p>\n<p>Can you comment on effeciency of such range deletion?</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2018-10-29T16:23:59.712Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 74,
        "readers_count": 73,
        "score": 24.8,
        "yours": false,
        "topic_id": 815,
        "topic_slug": "shards-are-not-splitted-into-smaller-ones",
        "display_username": "Daniil Gitelson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 12,
          "username": "ajbeamon",
          "name": "A.J. Beamon",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 296,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shards-are-not-splitted-into-smaller-ones/815/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2477,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2018-10-29T18:34:20.041Z",
        "cooked": "<p>A range clear is typically a very quick operation to perform from a user perspective. In the <code>ssd</code> storage engine, it basically just detaches the affected data from the b-tree and defers the cleanup work. In the <code>memory</code> storage engine, it removes the data from the memory data structure and logs the mutation to disk with no deferred work.</p>\n<p>The cleanup work in the <code>ssd</code> storage engine is actually a fairly slow process, and it consists of two phases. The first phase processes the detached pages and makes them available for reuse within the file. The second phase removes them from the file. As long as the first phase keeps up with your write load, then there shouldn\u2019t be an issue. If it doesn\u2019t, increasing the size of your cluster should help. See <a href=\"https://forums.foundationdb.org/t/used-disk-space-dramatically-increases-while-sum-of-key-value-sizes-is-constant/644\">Used disk space dramatically increases while sum of key-value sizes is constant</a> for some additional discussion on this.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2018-10-29T18:34:20.041Z",
        "reply_count": 2,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 18,
        "reads": 70,
        "readers_count": 69,
        "score": 114.0,
        "yours": false,
        "topic_id": 815,
        "topic_slug": "shards-are-not-splitted-into-smaller-ones",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/used-disk-space-dramatically-increases-while-sum-of-key-value-sizes-is-constant/644",
            "internal": true,
            "reflection": false,
            "title": "Used disk space dramatically increases while sum of key-value sizes is constant",
            "clicks": 21
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 296,
          "username": "theos",
          "name": "Daniil Gitelson",
          "avatar_template": "/user_avatar/forums.foundationdb.org/theos/{size}/282_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shards-are-not-splitted-into-smaller-ones/815/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2483,
        "name": "Daniil Gitelson",
        "username": "theos",
        "avatar_template": "/user_avatar/forums.foundationdb.org/theos/{size}/282_2.png",
        "created_at": "2018-10-30T07:41:13.962Z",
        "cooked": "<p>Thanx for the explanation. Guy who asked that question is working right in front of me <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=6\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"><br>\nI was trying to elminate all that cleanup related tasks altogether by deleting big ranges at once (which would just delete files), but it seems impossible if shards are kept together in one file. Are there any plans at least to have an option to split shards into separate files?<br>\nThis bothers me, because I store some user activity log which I need to keep ~half a year (so storage file going to be quite big), and then I can drop them. So I wanted to prefix each event with Year + Month and once a month drop all outdated events with a single delete and I wanted that operation to be as cheap as possible.</p>\n<p>BTW, does this also mean that during repartitioning when shard is moved to another node storage file needs to be \u2018cleaned up\u2019 to be able to use space that was occupied by moved shard?</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2018-10-30T07:41:13.962Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 69,
        "readers_count": 68,
        "score": 18.8,
        "yours": false,
        "topic_id": 815,
        "topic_slug": "shards-are-not-splitted-into-smaller-ones",
        "display_username": "Daniil Gitelson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 12,
          "username": "ajbeamon",
          "name": "A.J. Beamon",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 296,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shards-are-not-splitted-into-smaller-ones/815/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2489,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2018-10-30T18:16:17.136Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"theos\" data-post=\"5\" data-topic=\"815\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/theos/48/282_2.png\" class=\"avatar\"> theos:</div>\n<blockquote>\n<p>So I wanted to prefix each event with Year + Month and once a month drop all outdated events with a single delete and I wanted that operation to be as cheap as possible.</p>\n</blockquote>\n</aside>\n<p>On the surface, that sounds to me like it should work ok. Clearing a months worth of data can certainly result in a fair amount of deferred cleanup, but I would expect that the cleanup would take less time than a month. In other words, I think cleanup would be sufficiently fast to keep up with your write rate.</p>\n<aside class=\"quote no-group\" data-username=\"theos\" data-post=\"5\" data-topic=\"815\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/theos/48/282_2.png\" class=\"avatar\"> theos:</div>\n<blockquote>\n<p>Are there any plans at least to have an option to split shards into separate files?</p>\n</blockquote>\n</aside>\n<p>No plans for this specifically, but I think there is an interest in improving the speed of deferred cleanup work. I don\u2019t know exactly what form that would take, though.</p>\n<aside class=\"quote no-group\" data-username=\"theos\" data-post=\"5\" data-topic=\"815\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/theos/48/282_2.png\" class=\"avatar\"> theos:</div>\n<blockquote>\n<p>BTW, does this also mean that during repartitioning when shard is moved to another node storage file needs to be \u2018cleaned up\u2019 to be able to use space that was occupied by moved shard?</p>\n</blockquote>\n</aside>\n<p>That\u2019s correct, the same process is used to clean up the space evacuated by data movement.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2018-10-30T18:16:17.136Z",
        "reply_count": 0,
        "reply_to_post_number": 5,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 68,
        "readers_count": 67,
        "score": 13.6,
        "yours": false,
        "topic_id": 815,
        "topic_slug": "shards-are-not-splitted-into-smaller-ones",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shards-are-not-splitted-into-smaller-ones/815/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2492,
        "name": "Sam Pullara",
        "username": "spullara",
        "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
        "created_at": "2018-10-30T20:59:37.172Z",
        "cooked": "<p>I have been thinking about a meta-storage engine that would allow you to specify different storage engines for different ranges. I was thinking primarily that I would want that so I could have transactions that span a memory store and the SSD store but this might also be a use case for such a system.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2018-10-30T20:59:37.172Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 66,
        "readers_count": 65,
        "score": 18.2,
        "yours": false,
        "topic_id": 815,
        "topic_slug": "shards-are-not-splitted-into-smaller-ones",
        "display_username": "Sam Pullara",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/wrapper-storage-engine-for-memory-ssd/1338",
            "internal": true,
            "reflection": true,
            "title": "Wrapper storage engine for memory + SSD",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 156,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shards-are-not-splitted-into-smaller-ones/815/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2494,
        "name": "Christophe Chevalier",
        "username": "KrzysFR",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
        "created_at": "2018-10-30T22:12:20.512Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"ajbeamon\" data-post=\"4\" data-topic=\"815\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>n the <code>ssd</code> storage engine, it basically just detaches the affected data from the b-tree and defers the cleanup work.</p>\n</blockquote>\n</aside>\n<p>There\u2019s something I don\u2019t understand here: What does \u201cdetach\u201d and \u201ccleanup\u201d mean here in the context of the B-Tree?</p>\n<p>In my implementation of <code>ClearRange</code> in a CoW B-Tree, the pages that are fully covered by the clear range don\u2019t need any \u201ccleaning\u201d and can simply be returned to the free-list (since they can still be accessed by readers until commit, and would be cleared when reallocated later), and only the first/last leaf pages that would be partially covered would need to be mutated (keys removed or tombstoned). So for very large clear ranges, we would be be talking about thousands+ pages (probably contiguous) returned to the Free List at once, which can be very fast depending on how its implemented (poking some bits here and there is your favorite sparse bitmap encoding scheme).</p>\n<p>The only thing that could require some async processing, would be moving pages around to reclaim the tail of a data file, or maybe try to defrag \u201chot\u201d pages closer together after a burst of random writes/splits? Are we talking about this kind of operations?</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2018-10-30T22:14:15.185Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 1,
        "incoming_link_count": 5,
        "reads": 68,
        "readers_count": 67,
        "score": 43.6,
        "yours": false,
        "topic_id": 815,
        "topic_slug": "shards-are-not-splitted-into-smaller-ones",
        "display_username": "Christophe Chevalier",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 53,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shards-are-not-splitted-into-smaller-ones/815/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2497,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2018-10-30T22:47:34.066Z",
        "cooked": "<p>There are three different steps happening when you clear data from the B-tree.</p>\n<p>The first step, which I described as detaching the data from the B-tree, is performed when the mutation is applied. I\u2019m not super familiar with the code for this step, but I believe the idea is that it tries to grab the minimal number of pages that are needed to delete the data from the tree and store them elsewhere for later processing. In other words, a node whose entire sub-tree is going to be deleted only needs to touch the root node and not any of the children. You can see the code for this here: <a href=\"https://github.com/apple/foundationdb/blob/f418a85390734373b74f022ae6a61bed23eb92ee/fdbserver/sqlite/btree.c#L7201\">https://github.com/apple/foundationdb/blob/f418a85390734373b74f022ae6a61bed23eb92ee/fdbserver/sqlite/btree.c#L7201</a>.</p>\n<p>The remaining two steps are what I referred to when I mentioned deferred cleanup. The first of these is something we call lazy deletion, where we traverse the sub-trees removed in the first step and properly free each page. Among other things, this puts each page onto the free list and makes it available for reuse when new pages need to be allocated. See <a href=\"https://github.com/apple/foundationdb/blob/f418a85390734373b74f022ae6a61bed23eb92ee/fdbserver/sqlite/btree.c#L7073\">https://github.com/apple/foundationdb/blob/f418a85390734373b74f022ae6a61bed23eb92ee/fdbserver/sqlite/btree.c#L7073</a>.</p>\n<p>The last step is what we call vacuuming, and it\u2019s doing what you describe; namely it fills in the holes in the file with pages from the end and then truncates off the empty pages. See <a href=\"https://github.com/apple/foundationdb/blob/f418a85390734373b74f022ae6a61bed23eb92ee/fdbserver/sqlite/btree.c#L3042\">https://github.com/apple/foundationdb/blob/f418a85390734373b74f022ae6a61bed23eb92ee/fdbserver/sqlite/btree.c#L3042</a>.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2018-10-30T22:47:34.066Z",
        "reply_count": 1,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 5,
        "reads": 67,
        "readers_count": 66,
        "score": 73.4,
        "yours": false,
        "topic_id": 815,
        "topic_slug": "shards-are-not-splitted-into-smaller-ones",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/blob/f418a85390734373b74f022ae6a61bed23eb92ee/fdbserver/sqlite/btree.c#L7201",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/btree.c at f418a85390734373b74f022ae6a61bed23eb92ee \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 3
          },
          {
            "url": "https://github.com/apple/foundationdb/blob/f418a85390734373b74f022ae6a61bed23eb92ee/fdbserver/sqlite/btree.c#L3042",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/btree.c at f418a85390734373b74f022ae6a61bed23eb92ee \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 3
          },
          {
            "url": "https://github.com/apple/foundationdb/blob/f418a85390734373b74f022ae6a61bed23eb92ee/fdbserver/sqlite/btree.c#L7073",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/btree.c at f418a85390734373b74f022ae6a61bed23eb92ee \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 3
          },
          {
            "url": "https://forums.foundationdb.org/t/storage-server-running-out-of-space/1655/17",
            "internal": true,
            "reflection": true,
            "title": "Storage server running out of space",
            "clicks": 1
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 53,
          "username": "KrzysFR",
          "name": "Christophe Chevalier",
          "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 2
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shards-are-not-splitted-into-smaller-ones/815/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2529,
        "name": "Senthil Ramamoorthy",
        "username": "lihtnes",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/848f3c/{size}.png",
        "created_at": "2018-11-03T00:39:07.381Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"ajbeamon\" data-post=\"2\" data-topic=\"815\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>I will note, however, that it is possible for one process to have multiple sets of storage server files for various reasons unrelated to the partitioning of key space. In that case, if the files are all valid, then there will be multiple storage servers running on the same process.</p>\n</blockquote>\n</aside>\n<p>Could you detail the reason(s) why we end up with this situation, ie - multiple storage servers running on the same process?</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2018-11-03T00:39:07.381Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 1,
        "incoming_link_count": 2,
        "reads": 60,
        "readers_count": 59,
        "score": 27.0,
        "yours": false,
        "topic_id": 815,
        "topic_slug": "shards-are-not-splitted-into-smaller-ones",
        "display_username": "Senthil Ramamoorthy",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 417,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shards-are-not-splitted-into-smaller-ones/815/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2552,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2018-11-05T16:33:40.923Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"lihtnes\" data-post=\"10\" data-topic=\"815\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/l/848f3c/48.png\" class=\"avatar\"> lihtnes:</div>\n<blockquote>\n<p>Could you detail the reason(s) why we end up with this situation, ie - multiple storage servers running on the same process?</p>\n</blockquote>\n</aside>\n<p>This probably won\u2019t be an exhaustive list, but some ways this can happen:</p>\n<ul>\n<li>Externally moving data files to the same directory</li>\n<li>Switching storage engines (data files for both storage engines will be present until data from the old files has been re-replicated in the new files).</li>\n<li>Some types of corruption (such as missing one of the files in the ssd storage engine) will still allow another storage server to be recruited on the same process. The first storage server should die though, meaning you\u2019ll only have one active one in the process.</li>\n<li>Some error conditions or races in the code have led to this behavior. We\u2019ve usually tried to take steps to avoid it when we find ways it can happen, but I\u2019m sure it\u2019s still possible.</li>\n</ul>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2018-11-05T16:33:40.923Z",
        "reply_count": 0,
        "reply_to_post_number": 10,
        "quote_count": 1,
        "incoming_link_count": 5,
        "reads": 59,
        "readers_count": 58,
        "score": 51.8,
        "yours": false,
        "topic_id": 815,
        "topic_slug": "shards-are-not-splitted-into-smaller-ones",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shards-are-not-splitted-into-smaller-ones/815/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 9861,
        "name": "",
        "username": "tuk",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/b5ac83/{size}.png",
        "created_at": "2021-08-15T11:01:10.515Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"ajbeamon\" data-post=\"9\" data-topic=\"815\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>The remaining two steps are what I referred to when I mentioned deferred cleanup. The first of these is something we call lazy deletion, where we traverse the sub-trees removed in the first step and properly free each page. Among other things, this puts each page onto the free list and makes it available for reuse when new pages need to be allocated. See <a href=\"https://github.com/apple/foundationdb/blob/f418a85390734373b74f022ae6a61bed23eb92ee/fdbserver/sqlite/btree.c#L7073\" rel=\"noopener nofollow ugc\">https://github.com/apple/foundationdb/blob/f418a85390734373b74f022ae6a61bed23eb92ee/fdbserver/sqlite/btree.c#L7073 </a>.</p>\n<p>The last step is what we call vacuuming, and it\u2019s doing what you describe; namely it fills in the holes in the file with pages from the end and then truncates off the empty pages. See <a href=\"https://github.com/apple/foundationdb/blob/f418a85390734373b74f022ae6a61bed23eb92ee/fdbserver/sqlite/btree.c#L3042\" rel=\"noopener nofollow ugc\">https://github.com/apple/foundationdb/blob/f418a85390734373b74f022ae6a61bed23eb92ee/fdbserver/sqlite/btree.c#L3042</a></p>\n</blockquote>\n</aside>\n<p><a class=\"mention\" href=\"/u/ajbeamon\">@ajbeamon</a> If new writes are continuously coming (along with deletes) will the vaccum back off? If yes how does setting <code>SPRING_CLEANING_VACUUMS_PER_LAZY_DELETE_PAGE</code> changes the behavior as discussed <a href=\"https://forums.foundationdb.org/t/used-disk-space-dramatically-increases-while-sum-of-key-value-sizes-is-constant/644/7\">here</a>?</p>\n<p>FoundationDB Version - 6.2.30.</p>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2021-08-15T11:01:10.515Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 2,
        "reads": 25,
        "readers_count": 24,
        "score": 20.0,
        "yours": false,
        "topic_id": 815,
        "topic_slug": "shards-are-not-splitted-into-smaller-ones",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/used-disk-space-dramatically-increases-while-sum-of-key-value-sizes-is-constant/644/7",
            "internal": true,
            "reflection": false,
            "title": "Used disk space dramatically increases while sum of key-value sizes is constant",
            "clicks": 4
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 714,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shards-are-not-splitted-into-smaller-ones/815/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 9877,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2021-08-16T17:39:23.884Z",
        "cooked": "<p>The spring cleaning process will run regardless of whether you are reading and writing, but it\u2019s possible you may end up doing very little vacuuming as a result of one or both of the following:</p>\n<ol>\n<li>You are generating enough new work for the lazy deletion process that vacuuming (which is lower priority) doesn\u2019t run</li>\n<li>Your writes are consuming the lazily deleted pages such that they don\u2019t need to be vacuumed</li>\n</ol>\n<p>If you use the <code>SPRING_CLEANING_VACUUMS_PER_LAZY_DELETE_PAGE</code> to adjust the relative priority of these two options, then point 1 above would not apply and you would do some vacuuming. Point 2 still could be relevant, but in that case there isn\u2019t really any vacuuming that needs to be done.</p>",
        "post_number": 13,
        "post_type": 1,
        "posts_count": 13,
        "updated_at": "2021-08-16T17:39:23.884Z",
        "reply_count": 0,
        "reply_to_post_number": 12,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 24,
        "readers_count": 23,
        "score": 19.8,
        "yours": false,
        "topic_id": 815,
        "topic_slug": "shards-are-not-splitted-into-smaller-ones",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 714,
          "username": "tuk",
          "name": "",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/b5ac83/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shards-are-not-splitted-into-smaller-ones/815/13",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      2465,
      2473,
      2475,
      2477,
      2483,
      2489,
      2492,
      2494,
      2497,
      2529,
      2552,
      9861,
      9877
    ]
  },
  "timeline_lookup": [
    [
      1,
      2549
    ],
    [
      6,
      2548
    ],
    [
      10,
      2545
    ],
    [
      11,
      2542
    ],
    [
      12,
      1528
    ],
    [
      13,
      1527
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Shards are not splitted into smaller ones",
  "id": 815,
  "title": "Shards are not splitted into smaller ones",
  "posts_count": 13,
  "created_at": "2018-10-29T10:43:52.561Z",
  "views": 2641,
  "reply_count": 9,
  "like_count": 4,
  "last_posted_at": "2021-08-16T17:39:23.884Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "shards-are-not-splitted-into-smaller-ones",
  "category_id": 7,
  "word_count": 1900,
  "deleted_at": null,
  "user_id": 296,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_815",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 13,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 6,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "FoundationDB cluster performance issue - Periods of high disk I/O and sustained high latency",
      "id": 2184,
      "title": "FoundationDB cluster performance issue - Periods of high disk I/O and sustained high latency",
      "slug": "foundationdb-cluster-performance-issue-periods-of-high-disk-i-o-and-sustained-high-latency",
      "posts_count": 22,
      "reply_count": 17,
      "highest_post_number": 22,
      "image_url": null,
      "created_at": "2020-06-15T15:45:43.650Z",
      "last_posted_at": "2020-07-06T06:50:56.594Z",
      "bumped": true,
      "bumped_at": "2020-07-06T06:50:56.594Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 2571,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 779,
            "username": "imtdk",
            "name": null,
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/i/22d042/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 747,
            "username": "ashishgupta",
            "name": "Ashish Gupta",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/c67d28/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        }
      ]
    },
    {
      "fancy_title": "Used disk space dramatically increases while sum of key-value sizes is constant",
      "id": 644,
      "title": "Used disk space dramatically increases while sum of key-value sizes is constant",
      "slug": "used-disk-space-dramatically-increases-while-sum-of-key-value-sizes-is-constant",
      "posts_count": 6,
      "reply_count": 4,
      "highest_post_number": 7,
      "image_url": null,
      "created_at": "2018-08-17T14:38:26.479Z",
      "last_posted_at": "2018-09-04T16:08:07.423Z",
      "bumped": true,
      "bumped_at": "2018-09-04T16:08:07.423Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 2087,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 297,
            "username": "imukhin",
            "name": "Ivan Mukhin",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/i/b19c9b/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Disk space used not going down after clearrange",
      "id": 2153,
      "title": "Disk space used not going down after clearrange",
      "slug": "disk-space-used-not-going-down-after-clearrange",
      "posts_count": 7,
      "reply_count": 2,
      "highest_post_number": 7,
      "image_url": null,
      "created_at": "2020-06-02T15:35:25.369Z",
      "last_posted_at": "2020-06-05T17:59:33.994Z",
      "bumped": true,
      "bumped_at": "2020-06-05T17:59:33.994Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 1370,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 773,
            "username": "surya",
            "name": "Surya Teja Gora",
            "avatar_template": "/user_avatar/forums.foundationdb.org/surya/{size}/871_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 714,
            "username": "tuk",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/b5ac83/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Cannot clear all keys by &ldquo;clearrange \\x00 \\xff&rdquo;",
      "id": 1578,
      "title": "Cannot clear all keys by \"clearrange \\x00 \\xff\"",
      "slug": "cannot-clear-all-keys-by-clearrange-x00-xff",
      "posts_count": 16,
      "reply_count": 10,
      "highest_post_number": 18,
      "image_url": null,
      "created_at": "2019-08-10T05:44:48.247Z",
      "last_posted_at": "2022-07-03T22:20:16.158Z",
      "bumped": true,
      "bumped_at": "2022-07-03T22:20:16.158Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 2970,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 629,
            "username": "Sraw",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/a88e57/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 15,
            "username": "markus.pilman",
            "name": "Markus Pilman",
            "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Data retention after deleting a key range using SSD engine",
      "id": 2190,
      "title": "Data retention after deleting a key range using SSD engine",
      "slug": "data-retention-after-deleting-a-key-range-using-ssd-engine",
      "posts_count": 9,
      "reply_count": 5,
      "highest_post_number": 9,
      "image_url": null,
      "created_at": "2020-06-18T16:06:24.766Z",
      "last_posted_at": "2020-06-22T12:07:30.047Z",
      "bumped": true,
      "bumped_at": "2020-06-22T12:07:30.047Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 4,
      "views": 1379,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 481,
            "username": "mikerhodes",
            "name": "Mike Rhodes",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mikerhodes/{size}/480_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 714,
            "username": "tuk",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/b5ac83/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 12,
        "username": "ajbeamon",
        "name": "A.J. Beamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "post_count": 6,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 296,
        "username": "theos",
        "name": "Daniil Gitelson",
        "avatar_template": "/user_avatar/forums.foundationdb.org/theos/{size}/282_2.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 53,
        "username": "KrzysFR",
        "name": "Christophe Chevalier",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 156,
        "username": "spullara",
        "name": "Sam Pullara",
        "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 417,
        "username": "lihtnes",
        "name": "Senthil Ramamoorthy",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/848f3c/{size}.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 714,
        "username": "tuk",
        "name": "",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/b5ac83/{size}.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      }
    ],
    "created_by": {
      "id": 296,
      "username": "theos",
      "name": "Daniil Gitelson",
      "avatar_template": "/user_avatar/forums.foundationdb.org/theos/{size}/282_2.png"
    },
    "last_poster": {
      "id": 12,
      "username": "ajbeamon",
      "name": "A.J. Beamon",
      "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
    },
    "links": [
      {
        "url": "https://forums.foundationdb.org/t/used-disk-space-dramatically-increases-while-sum-of-key-value-sizes-is-constant/644",
        "title": "Used disk space dramatically increases while sum of key-value sizes is constant",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 21,
        "user_id": 12,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://forums.foundationdb.org/t/used-disk-space-dramatically-increases-while-sum-of-key-value-sizes-is-constant/644/7",
        "title": "Used disk space dramatically increases while sum of key-value sizes is constant",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 4,
        "user_id": 714,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/f418a85390734373b74f022ae6a61bed23eb92ee/fdbserver/sqlite/btree.c#L3042",
        "title": "foundationdb/btree.c at f418a85390734373b74f022ae6a61bed23eb92ee \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 12,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/f418a85390734373b74f022ae6a61bed23eb92ee/fdbserver/sqlite/btree.c#L7073",
        "title": "foundationdb/btree.c at f418a85390734373b74f022ae6a61bed23eb92ee \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 12,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/f418a85390734373b74f022ae6a61bed23eb92ee/fdbserver/sqlite/btree.c#L7201",
        "title": "foundationdb/btree.c at f418a85390734373b74f022ae6a61bed23eb92ee \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 12,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://forums.foundationdb.org/t/storage-server-running-out-of-space/1655/17",
        "title": "Storage server running out of space",
        "internal": true,
        "attachment": false,
        "reflection": true,
        "clicks": 1,
        "user_id": 12,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      }
    ]
  },
  "bookmarks": []
}