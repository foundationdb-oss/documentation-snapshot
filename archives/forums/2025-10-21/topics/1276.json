{
  "post_stream": {
    "posts": [
      {
        "id": 3810,
        "name": "",
        "username": "chanon",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/c/a587f6/{size}.png",
        "created_at": "2019-04-02T12:42:34.321Z",
        "cooked": "<p>I am looking into using FoundationDB and maybe writing a layer to work as a database system backend for my SaaS.</p>\n<p>What I can\u2019t figure out is, if I use key-value pairs to create indexes, how could I filter by one field with one index and then sort by another with another index.</p>\n<p>The only way I can think is to create a composite index of the two fields. But what if there are too many fields and the user can sort/filter by any?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2019-04-02T12:43:07.412Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 317,
        "reads": 32,
        "readers_count": 31,
        "score": 1591.4,
        "yours": false,
        "topic_id": 1276,
        "topic_slug": "implementing-sorting-by-one-field-and-filtering-by-another",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 554,
        "hidden": false,
        "trust_level": 0,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/implementing-sorting-by-one-field-and-filtering-by-another/1276/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 3811,
        "name": "Ryan Worl",
        "username": "ryanworl",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
        "created_at": "2019-04-02T13:42:25.418Z",
        "cooked": "<p>You can use two indexes at the same time. For example, you could retrieve all the records matching the filter condition, then do individual look-ups for the matching records and perform the sorting yourself in memory. You could also use one index to retrieve a set of sorted records, and then do individual key look-ups to evaluate the filter. You could also create the composite index, but that is not as flexible, as you\u2019ve already discovered.</p>\n<p>Knowing which one of these is the best solution 1) for your application specifically, and 2) which to choose at runtime in a database are two different issues. The latter is a field of database research called query optimization, and the typical first implementation is a basic heuristics-based query optimizer to choose what index to use for a given query, followed by replacing it with a cost-based optimizer which uses statistics to choose a more efficient (usually) ordering of indexes, and if to use an index at all.</p>\n<p>Some queries, when expressed as scanning one index and doing key look-ups in another, are more efficiently done as full table scans. A simple example is if your index situation required a key look-up for each row in the table. It would obviously be more efficient to just scan the records in order as you get the benefits of sequential IO instead of random IO.</p>\n<p>This question is complicated and unfortunately doesn\u2019t have any easy answer that isn\u2019t application-specific.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2019-04-02T13:45:23.472Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 31,
        "readers_count": 30,
        "score": 36.2,
        "yours": false,
        "topic_id": 1276,
        "topic_slug": "implementing-sorting-by-one-field-and-filtering-by-another",
        "display_username": "Ryan Worl",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 81,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/implementing-sorting-by-one-field-and-filtering-by-another/1276/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 3814,
        "name": "",
        "username": "chanon",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/c/a587f6/{size}.png",
        "created_at": "2019-04-03T08:23:30.090Z",
        "cooked": "<p>Thank you for explaining! It is similar to what I thought \u2026 it doesn\u2019t have a simple solution that can be applied to every case.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2019-04-03T08:23:37.544Z",
        "reply_count": 0,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 27,
        "readers_count": 26,
        "score": 5.4,
        "yours": false,
        "topic_id": 1276,
        "topic_slug": "implementing-sorting-by-one-field-and-filtering-by-another",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 81,
          "username": "ryanworl",
          "name": "Ryan Worl",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 554,
        "hidden": false,
        "trust_level": 0,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/implementing-sorting-by-one-field-and-filtering-by-another/1276/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      3810,
      3811,
      3814
    ]
  },
  "timeline_lookup": [
    [
      1,
      2394
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Implementing sorting by one field and filtering by another",
  "id": 1276,
  "title": "Implementing sorting by one field and filtering by another",
  "posts_count": 3,
  "created_at": "2019-04-02T12:42:34.217Z",
  "views": 1015,
  "reply_count": 1,
  "like_count": 1,
  "last_posted_at": "2019-04-03T08:23:30.090Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "implementing-sorting-by-one-field-and-filtering-by-another",
  "category_id": 7,
  "word_count": 365,
  "deleted_at": null,
  "user_id": 554,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_1276",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 3,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 2,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Secondary indexing approaches",
      "id": 792,
      "title": "Secondary indexing approaches",
      "slug": "secondary-indexing-approaches",
      "posts_count": 7,
      "reply_count": 2,
      "highest_post_number": 7,
      "image_url": null,
      "created_at": "2018-10-19T19:24:02.093Z",
      "last_posted_at": "2018-10-20T15:08:09.001Z",
      "bumped": true,
      "bumped_at": "2018-10-20T15:08:09.001Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 2905,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 391,
            "username": "atombender",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/atombender/{size}/688_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 22,
            "username": "dave",
            "name": "David Scherer",
            "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Slow sorting on indexed _id field",
      "id": 1148,
      "title": "Slow sorting on indexed _id field",
      "slug": "slow-sorting-on-indexed-id-field",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2019-02-18T20:31:36.423Z",
      "last_posted_at": "2019-02-18T22:32:09.652Z",
      "bumped": true,
      "bumped_at": "2019-02-18T22:32:09.652Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 949,
      "category_id": 11,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 494,
            "username": "developer_resource",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/eb8c5e/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 9,
            "username": "mbhaskar",
            "name": "Bhaskar Muppana",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mbhaskar/{size}/277_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Supporting Strings with case insensitive comparisons but case preserved in data",
      "id": 1716,
      "title": "Supporting Strings with case insensitive comparisons but case preserved in data",
      "slug": "supporting-strings-with-case-insensitive-comparisons-but-case-preserved-in-data",
      "posts_count": 9,
      "reply_count": 4,
      "highest_post_number": 9,
      "image_url": null,
      "created_at": "2019-11-05T18:47:39.241Z",
      "last_posted_at": "2019-11-08T16:21:13.121Z",
      "bumped": true,
      "bumped_at": "2019-11-08T16:21:13.121Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1218,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 545,
            "username": "rishabh",
            "name": "Rishabh",
            "avatar_template": "/user_avatar/forums.foundationdb.org/rishabh/{size}/540_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 451,
            "username": "rnewson",
            "name": "Robert Newson",
            "avatar_template": "/user_avatar/forums.foundationdb.org/rnewson/{size}/502_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 499,
            "username": "garrensmith",
            "name": "Garren Smith",
            "avatar_template": "/user_avatar/forums.foundationdb.org/garrensmith/{size}/494_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Any chance of server-side Boolean operations like intersection?",
      "id": 445,
      "title": "Any chance of server-side Boolean operations like intersection?",
      "slug": "any-chance-of-server-side-boolean-operations-like-intersection",
      "posts_count": 9,
      "reply_count": 3,
      "highest_post_number": 9,
      "image_url": null,
      "created_at": "2018-05-21T10:01:41.965Z",
      "last_posted_at": "2018-05-22T16:57:56.442Z",
      "bumped": true,
      "bumped_at": "2018-05-22T16:57:56.442Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 4,
      "views": 1706,
      "category_id": 8,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 208,
            "username": "cloudspeech",
            "name": "Cloudspeech",
            "avatar_template": "/user_avatar/forums.foundationdb.org/cloudspeech/{size}/330_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 31,
            "username": "dicklacara",
            "name": "Richard Applebaum",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/8797f3/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Looking for ideas for index ordering",
      "id": 2556,
      "title": "Looking for ideas for index ordering",
      "slug": "looking-for-ideas-for-index-ordering",
      "posts_count": 3,
      "reply_count": 1,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2021-02-14T18:58:34.337Z",
      "last_posted_at": "2021-02-16T03:43:27.485Z",
      "bumped": true,
      "bumped_at": "2021-02-16T03:43:27.485Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 583,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 721,
            "username": "ggilley",
            "name": "Greg Gilley",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/7993a0/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 448,
            "username": "dongxinEric",
            "name": "Xin Dong",
            "avatar_template": "/user_avatar/forums.foundationdb.org/dongxineric/{size}/434_2.png",
            "trust_level": 2
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 554,
        "username": "chanon",
        "name": "",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/c/a587f6/{size}.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 0
      },
      {
        "id": 81,
        "username": "ryanworl",
        "name": "Ryan Worl",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 3
      }
    ],
    "created_by": {
      "id": 554,
      "username": "chanon",
      "name": "",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/c/a587f6/{size}.png"
    },
    "last_poster": {
      "id": 554,
      "username": "chanon",
      "name": "",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/c/a587f6/{size}.png"
    }
  },
  "bookmarks": []
}