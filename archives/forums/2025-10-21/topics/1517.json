{
  "post_stream": {
    "posts": [
      {
        "id": 4651,
        "name": "",
        "username": "jonahwest",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/90db22/{size}.png",
        "created_at": "2019-07-13T06:06:58.569Z",
        "cooked": "<p>In the C API, when doing a range read with:</p>\n<pre><code>fdb_transaction_get_range(tr, FDB_KEYSEL_FIRST_GREATER_OR_EQUAL(start, 1), FDB_KEYSEL_FIRST_GREATER_OR_EQUAL(end, 1), 0, 0, FDB_STREAMING_MODE_WANT_ALL, 0, 0, 0);\n</code></pre>\n<p>then waiting for the future, and extracting the <code>FDBKeyValue</code> array with:</p>\n<pre><code>fdb_future_get_keyvalue_array(future, &amp;keyvalue, &amp;count, &amp;more);\n</code></pre>\n<p>only the first 2857 keys are returned (<code>count</code> is <code>2857</code>). Calling <code>fdb_future_get_keyvalue_array()</code> again does not return the next 2857 keys, as one could expect.</p>\n<p>Why am I only getting the first 2857 keys in the database and how can I get every single key? Thanks!</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 2,
        "updated_at": "2019-07-13T06:06:58.569Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 53,
        "reads": 46,
        "readers_count": 45,
        "score": 274.2,
        "yours": false,
        "topic_id": 1517,
        "topic_slug": "why-can-i-only-range-read-2857-keys",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 542,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-can-i-only-range-read-2857-keys/1517/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 4653,
        "name": "Christophe Chevalier",
        "username": "KrzysFR",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
        "created_at": "2019-07-13T19:32:13.906Z",
        "cooked": "<p>The get_range operation is returning data one batch at a time, so you are supposed to check the value returned in <code>more</code> to know if you need to call it again to get the rest of the range. (see <a href=\"https://apple.github.io/foundationdb/api-c.html?highlight=fdb_transaction_get_range#c.fdb_transaction_get_range\" rel=\"nofollow noopener\">https://apple.github.io/foundationdb/api-c.html?highlight=fdb_transaction_get_range#c.fdb_transaction_get_range</a>)</p>\n<p>The <code>FDB_STREAMING_MODE_WANT_ALL</code> here does not mean \u201cin a single batch\u201d, but should probably be understood as \u201cin as few batches as possible\u201d, and in your case, 2857 keys is considered the ideal batch size. The other streaming modes are for cases where you will inspect the data as they arrive and stop iterating before the end of the range (so it would be wasteful if the db would send you ALL the keys you are are only interested in a few).</p>\n<p>So in your case, you\u2019ll have to check if <code>more</code> is non-zero after the call, and call <code>fdb_transaction_get_range</code> again and again, using FDB_KEYSEL_FIRST_GREATER_THAN(\u2026) on the last key of the previous batch, and stopping when <code>more</code> is 0.</p>\n<p>Be warned though, that reading an unbounded range in a single transaction will probably not work as you\u2019d expect, due to the 5 seconds lifetime of each transaction: it is possible that you end up taking more than 5 seconds to read a very large range, meaning that you\u2019ll need to figure out how to read large quantities of data across multiple transactions without the safety net of ACID transactions.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 2,
        "updated_at": "2019-07-13T19:33:52.166Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 45,
        "readers_count": 44,
        "score": 39.0,
        "yours": false,
        "topic_id": 1517,
        "topic_slug": "why-can-i-only-range-read-2857-keys",
        "display_username": "Christophe Chevalier",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://apple.github.io/foundationdb/api-c.html?highlight=fdb_transaction_get_range#c.fdb_transaction_get_range",
            "internal": false,
            "reflection": false,
            "title": "C API \u2014 FoundationDB 6.1",
            "clicks": 7
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 2
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 53,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-can-i-only-range-read-2857-keys/1517/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      4651,
      4653
    ]
  },
  "timeline_lookup": [
    [
      1,
      2293
    ],
    [
      2,
      2292
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Why can I only range read 2857 keys?",
  "id": 1517,
  "title": "Why can I only range read 2857 keys?",
  "posts_count": 2,
  "created_at": "2019-07-13T06:06:58.493Z",
  "views": 634,
  "reply_count": 0,
  "like_count": 2,
  "last_posted_at": "2019-07-13T19:32:13.906Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "why-can-i-only-range-read-2857-keys",
  "category_id": 7,
  "word_count": 328,
  "deleted_at": null,
  "user_id": 542,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_1517",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 2,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 2,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "How to Fetch all stored key-values at once",
      "id": 1285,
      "title": "How to Fetch all stored key-values at once",
      "slug": "how-to-fetch-all-stored-key-values-at-once",
      "posts_count": 7,
      "reply_count": 4,
      "highest_post_number": 7,
      "image_url": null,
      "created_at": "2019-04-05T12:12:49.636Z",
      "last_posted_at": "2019-04-10T20:48:57.581Z",
      "bumped": true,
      "bumped_at": "2019-04-10T20:48:57.581Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "fdbsummit"
      ],
      "tags_descriptions": {},
      "like_count": 3,
      "views": 5507,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 511,
            "username": "sakthivelpvs",
            "name": "Sakthivel",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9dc877/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Is it possible to fetch two different keys using &ldquo;fdb_transaction_get_range&rdquo; API in C program",
      "id": 1388,
      "title": "Is it possible to fetch two different keys using \"fdb_transaction_get_range\" API in C program",
      "slug": "is-it-possible-to-fetch-two-different-keys-using-fdb-transaction-get-range-api-in-c-program",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2019-05-23T08:14:07.379Z",
      "last_posted_at": "2019-05-23T15:43:55.444Z",
      "bumped": true,
      "bumped_at": "2019-05-23T15:43:55.444Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "bindings"
      ],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 591,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 511,
            "username": "sakthivelpvs",
            "name": "Sakthivel",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9dc877/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Why can&rsquo;t get the key-value I need for using fdb_transaction_get_range",
      "id": 3038,
      "title": "Why can't get the key-value I need for using fdb_transaction_get_range",
      "slug": "why-cant-get-the-key-value-i-need-for-using-fdb-transaction-get-range",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2021-11-25T09:15:15.954Z",
      "last_posted_at": "2021-11-27T03:37:15.102Z",
      "bumped": true,
      "bumped_at": "2021-11-27T03:37:15.102Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 705,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest single",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 1039,
            "username": "JiangXiNJU",
            "name": "Jiang Xi",
            "avatar_template": "/user_avatar/forums.foundationdb.org/jiangxinju/{size}/1247_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "How to get exact range of keys using fdb_transaction_get_range in C Programming",
      "id": 1355,
      "title": "How to get exact range of keys using fdb_transaction_get_range in C Programming",
      "slug": "how-to-get-exact-range-of-keys-using-fdb-transaction-get-range-in-c-programming",
      "posts_count": 5,
      "reply_count": 3,
      "highest_post_number": 5,
      "image_url": null,
      "created_at": "2019-05-09T12:22:07.878Z",
      "last_posted_at": "2019-05-20T14:14:50.692Z",
      "bumped": true,
      "bumped_at": "2019-05-20T14:14:50.692Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "bindings"
      ],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 1573,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 511,
            "username": "sakthivelpvs",
            "name": "Sakthivel",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9dc877/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 219,
            "username": "MMcM",
            "name": "Mike McMahon",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/m/d07c76/{size}.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Can&rsquo;t get last pair in FDBKeyValue array",
      "id": 1252,
      "title": "Can't get last pair in FDBKeyValue array",
      "slug": "cant-get-last-pair-in-fdbkeyvalue-array",
      "posts_count": 5,
      "reply_count": 2,
      "highest_post_number": 5,
      "image_url": null,
      "created_at": "2019-03-24T06:57:23.327Z",
      "last_posted_at": "2019-03-25T21:53:28.346Z",
      "bumped": true,
      "bumped_at": "2019-03-25T22:09:28.671Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 886,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 542,
            "username": "jonahwest",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/90db22/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 53,
        "username": "KrzysFR",
        "name": "Christophe Chevalier",
        "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 542,
        "username": "jonahwest",
        "name": "",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/90db22/{size}.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      }
    ],
    "created_by": {
      "id": 542,
      "username": "jonahwest",
      "name": "",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/90db22/{size}.png"
    },
    "last_poster": {
      "id": 53,
      "username": "KrzysFR",
      "name": "Christophe Chevalier",
      "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png"
    },
    "links": [
      {
        "url": "https://apple.github.io/foundationdb/api-c.html?highlight=fdb_transaction_get_range#c.fdb_transaction_get_range",
        "title": "C API \u2014 FoundationDB 6.1",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 7,
        "user_id": 53,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      }
    ]
  },
  "bookmarks": []
}