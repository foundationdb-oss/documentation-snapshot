{
  "post_stream": {
    "posts": [
      {
        "id": 1975,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2018-08-25T13:09:24.628Z",
        "cooked": "<p>The actor listen in FlowTransport.actor.cpp has the following implementation:</p>\n<pre><code>state Reference&lt;IListener&gt; listener = INetworkConnections::net()-&gt;listen(listenAddr);\ntry {\n\tloop {\n\t\tReference&lt;IConnection&gt; conn = wait(listener-&gt;accept());\n\t\tTraceEvent(\"ConnectionFrom\", conn-&gt;getDebugID())\n\t\t    .suppressFor(1.0)\n\t\t    .detail(\"FromAddress\", conn-&gt;getPeerAddress());\n\t\tincoming.add(connectionIncoming(self, conn));\n\t\twait(delay(0) || delay(FLOW_KNOBS-&gt;CONNECTION_ACCEPT_DELAY, TaskWriteSocket));\n\t}\n} catch (Error&amp; e) {\n\tTraceEvent(SevError, \"ListenError\").error(e);\n\tthrow;\n}\n</code></pre>\n<p>The catch-clause is a bit confusing to me here as it writes with SevError. My understanding was always that a Sev 40 will only be logged if the system can\u2019t recovery by itself. But this is imho not the case here. accept could throw an error if a connection fails while it is accepted. Shouldn\u2019t the listener simply retry if this happens? Or maybe be a bit more selective and only fail in certain cases? (Like if the system runs out of file descriptors)</p>\n<p>The reason this is problematic for us is because we grep for Sev 40s in production and several people get woken up whenever this happens. So before we change this (at least for our production binary), I would like to understand the rationale behind this Sev 40.</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2018-08-25T13:24:36.547Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 75,
        "reads": 35,
        "readers_count": 34,
        "score": 384.0,
        "yours": false,
        "topic_id": 663,
        "topic_slug": "why-is-a-sev-40-if-ilistener-accept-throws-an-error",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-is-a-sev-40-if-ilistener-accept-throws-an-error/663/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 1989,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2018-08-27T16:00:40.009Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"1\" data-topic=\"663\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>My understanding was always that a Sev 40 will only be logged if the system can\u2019t recovery by itself.</p>\n</blockquote>\n</aside>\n<p>I think the guideline is a bit different than this. In fact, we expect the system to respond gracefully to many types of errors that could occur (here, I\u2019m taking system to mean the cluster, or maybe even the fdbserver process + fdbmonitor). For example, a process running out of memory or even crashing often has little impact on the cluster but would log a severity 40 event. Another common example is IO errors, of which many can be safely tolerated by the cluster (although they may require intervention to restore all processes to the cluster). Of course in these cases there may be some root problem that needs to be investigated.</p>\n<p>I think there are a few types of situations that we are representing in severity 40 events. Some examples include unexpected circumstances that lead to the death of the process (i.e. not the intentional death of a process, such as when issuing an fdbcli kill), an event that causes a process to stop functioning normally even if it\u2019s still running, the cluster reaching a state where it\u2019s not fully operable (e.g. KeyValueStoreMemory_OutOfSpace), corruption being detected, etc. In the case of <code>accept</code>, the SevError seems appropriate in the code as written because the error here would terminate the process.</p>\n<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"1\" data-topic=\"663\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>accept could throw an error if a connection fails while it is accepted. Shouldn\u2019t the listener simply retry if this happens? Or maybe be a bit more selective and only fail in certain cases? (Like if the system runs out of file descriptors)</p>\n</blockquote>\n</aside>\n<p>Having said the above, I think this is the meat of your question, and I agree that some of <code>accept</code>\u2019s error cases may not need such a heavy-handed approach as restarting the process. I don\u2019t think we\u2019ve seen an issue with that in practice, but if I were to change this I would probably enumerate the errors that can be safely retried, falling back to the <code>throw</code> for all other errors.</p>\n<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"1\" data-topic=\"663\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>The reason this is problematic for us is because we grep for Sev 40s in production and several people get woken up whenever this happens.</p>\n</blockquote>\n</aside>\n<p>While it is important to keep tabs on Severity 40s in your clusters, I think it\u2019s worth mentioning that they aren\u2019t being used with paging in mind. As I stated above, there are classes of errors where we expect the cluster to be able to respond gracefully, and while it\u2019s of course not wrong to respond to them immediately, it\u2019s often fine to deal with them later (e.g. during business hours). Because we treat them with that mindset, it\u2019s possible you may end up playing a little whack-a-mole trying to suppress certain error events.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2018-08-27T16:00:40.009Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 1,
        "reads": 31,
        "readers_count": 30,
        "score": 16.2,
        "yours": false,
        "topic_id": 663,
        "topic_slug": "why-is-a-sev-40-if-ilistener-accept-throws-an-error",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-is-a-sev-40-if-ilistener-accept-throws-an-error/663/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 1992,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2018-08-27T17:49:11.966Z",
        "cooked": "<p>I think this warrants a discussion.</p>\n<p>So the way I would like to think about severity-levels in general is this:</p>\n<ul>\n<li>SevError: Something happened that either should never happen (undefined behavior from there) or something happened that the system can\u2019t recover from properly. Therefore, page the on-call team.</li>\n<li>SevWarnAlways: Something happened that the system can handle by itself but will need a human to look at it eventually -&gt; Create a ticket.</li>\n<li>Everything else will just be used for investigation purposes.</li>\n</ul>\n<p>Now from your response I conclude that your philosophy is different. However, this philosophy is contradicted while testing as you fail tests if they log a Sev 40. Uniformity in testing and production would be reasonable. Also, assertions are checked in production and an assertion failure is something that should never happen in production and therefore might need immediate attention as this would be a bug anywhere - like global data corruption. An example would be the following trace line we saw in testing (this would indicated metadata being corrupted):</p>\n<pre><code>\tTraceEvent(SevError, \"DeliveredToNotAssigned\")\n\t    .detail(\"Version\", version)\n\t    .detail(\"Mutation\", mutation.toString());\n</code></pre>\n<p>Alerting on more global scenarios (Ratekeeper going below a certain rate, fdbcli being unable to connect etc) is obviously necessary but imho it is not sufficient.</p>\n<p>In general, I would like to have a way of creating an on-call page if certain events happen. Losing a process is usually not problematic, but losing a machine might be.</p>\n<p>In our history of using fdb we only ever saw two kinds of Sev 40s. One was during disk failures and the other one was the one I mentioned in the original question. We are fine with having a few false positives and fixing them as they take place. But importantly we would like to have an agreement on the definition of tracing levels.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2018-08-27T17:49:11.966Z",
        "reply_count": 3,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 27,
        "readers_count": 26,
        "score": 20.4,
        "yours": false,
        "topic_id": 663,
        "topic_slug": "why-is-a-sev-40-if-ilistener-accept-throws-an-error",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 12,
          "username": "ajbeamon",
          "name": "A.J. Beamon",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-is-a-sev-40-if-ilistener-accept-throws-an-error/663/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 1993,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2018-08-27T18:17:38.094Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"3\" data-topic=\"663\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>However, this philosophy is contradicted while testing as you fail tests if they log a Sev 40. Uniformity in testing and production would be reasonable.</p>\n</blockquote>\n</aside>\n<p>We have a mechanism for injecting faults into our tests that induces errors but for which we don\u2019t fail the tests. I believe in these case we\u2019re trying to ensure that these error conditions don\u2019t lead to unexpected behavior. An example of this would be IO errors. I think it\u2019s also reasonable to fail a test for a condition that we don\u2019t want, even if it\u2019s something that doesn\u2019t require immediate attention in a running production cluster.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2018-08-27T18:17:38.094Z",
        "reply_count": 0,
        "reply_to_post_number": 3,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 25,
        "readers_count": 24,
        "score": 5.0,
        "yours": false,
        "topic_id": 663,
        "topic_slug": "why-is-a-sev-40-if-ilistener-accept-throws-an-error",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-is-a-sev-40-if-ilistener-accept-throws-an-error/663/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 1994,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2018-08-27T18:33:31.915Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"3\" data-topic=\"663\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>I think this warrants a discussion.</p>\n<p>So the way I would like to think about severity-levels in general is this:</p>\n<ul>\n<li>SevError: Something happened that either should never happen (undefined behavior from there) or something happened that the system can\u2019t recover from properly. Therefore, page the on-call team.</li>\n<li>SevWarnAlways: Something happened that the system can handle by itself but will need a human to look at it eventually -&gt; Create a ticket.</li>\n<li>Everything else will just be used for investigation purposes.</li>\n</ul>\n</blockquote>\n</aside>\n<p>Let me raise this idea with the team here. I\u2019ve at times thought it might be useful to have a severity above Error (Critical?) that represented something that did need more urgent attention. I don\u2019t know that it really would have changed much about any past incidents I\u2019ve encountered (i.e. I don\u2019t know if it would have given us much additional lead time on any issues), but at the very least I\u2019ve thought it could be helpful in the triaging process. And as you point out, there are imaginable scenarios where it could indicate a problem that isn\u2019t reflected through other monitoring channels.</p>\n<p>Instead of 3 categories, it\u2019s possible that everything could fit well into 2 divided up in the way you describe. We\u2019ve tended to use SevWarnAlways as a category of things that we should be aware of but that may not need attention. In other words, we treat SevWarnAlways as a monitorable but not necessarily actionable severity. At least at the moment, it tends to be a bit noisy (although I wish that weren\u2019t the case), and there may be some events that don\u2019t fit well into your SevError category but which may not be a great fit for being in the noisier SevWarnAlways category.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2018-08-27T18:33:31.915Z",
        "reply_count": 1,
        "reply_to_post_number": 3,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 23,
        "readers_count": 22,
        "score": 9.6,
        "yours": false,
        "topic_id": 663,
        "topic_slug": "why-is-a-sev-40-if-ilistener-accept-throws-an-error",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-is-a-sev-40-if-ilistener-accept-throws-an-error/663/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 1998,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2018-08-27T21:44:11.494Z",
        "cooked": "<p>I am not sure another warning level is needed. Or asked differently: what is the difference between SevWarn and SevWarnAlways? We treat them pretty much the same way (maybe I am missing something here).</p>\n<ol>\n<li>All current SevWarnAlways should be downgraded to SevWarn</li>\n<li>Some SevError should be downgraded to SevWarnAlways. Currently I only see one, but an easy way of doing this would be if you could also grep your production logs and see what kind of errors actually happen in production. I would imagine the set of Sev 40s in your logs are very small.</li>\n<li>Use SevError only for stuff where the system really is expected to need human help (and assertions - these are bugs and I am really really afraid of non-defined behavior).</li>\n</ol>\n<p>But in general I don\u2019t feel too strongly. The two main things that we would like to have is an error level we can alert on to on-call and, maybe even more important, a clear definition what the log levels actually mean and how they should be treated.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2018-08-27T21:44:11.494Z",
        "reply_count": 1,
        "reply_to_post_number": 5,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 20,
        "readers_count": 19,
        "score": 9.0,
        "yours": false,
        "topic_id": 663,
        "topic_slug": "why-is-a-sev-40-if-ilistener-accept-throws-an-error",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 12,
          "username": "ajbeamon",
          "name": "A.J. Beamon",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-is-a-sev-40-if-ilistener-accept-throws-an-error/663/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 1999,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2018-08-27T22:23:03.621Z",
        "cooked": "<p>We use SevWarn as a non-monitoring severity, but of things that are more significant than SevInfo. The distinction between current SevWarn and SevInfo may not be significant enough to maintain, but the distinction between SevWarnAlways and SevError probably is, at least for now. The three possible monitoring classes I\u2019m imagining are:</p>\n<ol>\n<li>Things that require immediate attention</li>\n<li>Things that require eventual attention</li>\n<li>Things that are good to be aware of but may not require any additional attention</li>\n</ol>\n<p>The two classes we have now roughly correspond to (#1+#2) and <span class=\"hashtag\">#3</span>, and your proposal gives us <span class=\"hashtag\">#1</span> and <span class=\"hashtag\">#2</span> but not <span class=\"hashtag\">#3</span>. Or, perhaps SevWarn could be <span class=\"hashtag\">#3</span>, but I think pretty much everything currently in SevWarn would need to be downgraded.</p>\n<p>If we cleaned things up enough that those things in <span class=\"hashtag\">#3</span> that didn\u2019t actually require additional attention were moved down a severity, then we could probably combine <span class=\"hashtag\">#2</span> and <span class=\"hashtag\">#3</span>. However that\u2019s not super straightforward to do because a number of the things that show up there require extra context to determine whether any further action is warranted. As it currently stands, I think combining <span class=\"hashtag\">#2</span> and <span class=\"hashtag\">#3</span> would hide the SevError events in too much noise from the SevWarnAlways events.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2018-08-27T22:23:03.621Z",
        "reply_count": 1,
        "reply_to_post_number": 6,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 21,
        "readers_count": 20,
        "score": 9.2,
        "yours": false,
        "topic_id": 663,
        "topic_slug": "why-is-a-sev-40-if-ilistener-accept-throws-an-error",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 15,
          "username": "markus.pilman",
          "name": "Markus Pilman",
          "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-is-a-sev-40-if-ilistener-accept-throws-an-error/663/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2000,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2018-08-28T16:57:53.016Z",
        "cooked": "<p>I usually try to think of log-levels solely in terms of alerting and limiting verbosity (that is what SevDebug is useful for) - which means that I would prefer few log levels and most messages having simply the info level. As soon as a process produces hundreds of warnings per hour, they are imho not useful anymore. This is already the case in fdb - we basically never use the log levels (except Sev 40) when investigating problems - instead we filter by type to see for example whether there was a networking issue during the time of the incident.</p>\n<p>But that said I think this is more of a philosophical question and we could discuss that with no end. I would be happy to get what you are proposing as long as there are clear definitions for the levels and the two highest levels occur rarely enough. We can then treat the warning levels all the same and you can treat them differently.</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2018-08-28T16:57:53.016Z",
        "reply_count": 1,
        "reply_to_post_number": 7,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 20,
        "readers_count": 19,
        "score": 9.0,
        "yours": false,
        "topic_id": 663,
        "topic_slug": "why-is-a-sev-40-if-ilistener-accept-throws-an-error",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 12,
          "username": "ajbeamon",
          "name": "A.J. Beamon",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-is-a-sev-40-if-ilistener-accept-throws-an-error/663/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 2008,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2018-08-29T21:54:59.478Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"8\" data-topic=\"663\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>I usually try to think of log-levels solely in terms of alerting and limiting verbosity (that is what SevDebug is useful for) - which means that I would prefer few log levels and most messages having simply the info level. As soon as a process produces hundreds of warnings per hour, they are imho not useful anymore.</p>\n</blockquote>\n</aside>\n<p>The intent of our current SevWarnAlways is that it doesn\u2019t reach this level of verbosity, while SevWarn has no such limits. In practice, that isn\u2019t always the case (which is part of what I alluded to with the noise at this level), but the SevWarnAlways events do still summarize pretty easily. I\u2019ve actually found good value in keeping tabs on these events in FoundationDB, for what it\u2019s worth. I\u2019ve gotten less mileage out of SevWarn vs. SevInfo, but I have on occasion used these to limit the number of events that I\u2019ve had to look at (sometimes looking at a subset of the events with higher severities can be helpful when you don\u2019t have a good starting point in an investigation).</p>\n<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"3\" data-topic=\"663\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>So the way I would like to think about severity-levels in general is this:</p>\n<ul>\n<li>SevError: Something happened that either should never happen (undefined behavior from there) or something happened that the system can\u2019t recover from properly. Therefore, page the on-call team.</li>\n<li>SevWarnAlways: Something happened that the system can handle by itself but will need a human to look at it eventually -&gt; Create a ticket.</li>\n<li>Everything else will just be used for investigation purposes.</li>\n</ul>\n</blockquote>\n</aside>\n<p>After some discussion about this proposal, I think the idea of having a more serious severity (whether that be a redefinition of SevError or a new SevCritical) could potentially make sense, but having the goal that it be intended for paging an on-call person is much harder. In particular, we didn\u2019t really envision this being something that we would want to use for paging ourselves, mainly because most such events are either already detected by other monitoring mechanisms in status or they are not events worthy of being paged about but could be hard to segregate (e.g. with many assertions). If there is some type of problem that represents an urgent issue that isn\u2019t being detected by status, I think we\u2019d want to address that by finding a way to get it into status.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 9,
        "updated_at": "2018-08-29T21:54:59.478Z",
        "reply_count": 0,
        "reply_to_post_number": 8,
        "quote_count": 2,
        "incoming_link_count": 2,
        "reads": 20,
        "readers_count": 19,
        "score": 4.0,
        "yours": false,
        "topic_id": 663,
        "topic_slug": "why-is-a-sev-40-if-ilistener-accept-throws-an-error",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/why-is-a-sev-40-if-ilistener-accept-throws-an-error/663/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      1975,
      1989,
      1992,
      1993,
      1994,
      1998,
      1999,
      2000,
      2008
    ]
  },
  "timeline_lookup": [
    [
      1,
      2614
    ],
    [
      2,
      2612
    ],
    [
      8,
      2611
    ],
    [
      9,
      2610
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Why is a Sev 40 if IListener::accept throws an error?",
  "id": 663,
  "title": "Why is a Sev 40 if IListener::accept throws an error?",
  "posts_count": 9,
  "created_at": "2018-08-25T13:09:24.558Z",
  "views": 993,
  "reply_count": 7,
  "like_count": 0,
  "last_posted_at": "2018-08-29T21:54:59.478Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "why-is-a-sev-40-if-ilistener-accept-throws-an-error",
  "category_id": 8,
  "word_count": 2391,
  "deleted_at": null,
  "user_id": 15,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_663",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 9,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 2,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Foundationdb seems keep reinitialising itself after client hang",
      "id": 1437,
      "title": "Foundationdb seems keep reinitialising itself after client hang",
      "slug": "foundationdb-seems-keep-reinitialising-itself-after-client-hang",
      "posts_count": 6,
      "reply_count": 2,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2019-06-10T10:10:13.209Z",
      "last_posted_at": "2019-06-26T18:08:03.629Z",
      "bumped": true,
      "bumped_at": "2019-06-26T18:08:03.629Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 1222,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 602,
            "username": "ppggff",
            "name": "ppggff",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ppggff/{size}/855_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Segmentation fault error and broken cluster",
      "id": 483,
      "title": "Segmentation fault error and broken cluster",
      "slug": "segmentation-fault-error-and-broken-cluster",
      "posts_count": 17,
      "reply_count": 12,
      "highest_post_number": 17,
      "image_url": null,
      "created_at": "2018-05-31T15:34:28.123Z",
      "last_posted_at": "2018-06-11T17:31:13.656Z",
      "bumped": true,
      "bumped_at": "2018-06-11T17:31:13.656Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 4331,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 211,
            "username": "brk0v",
            "name": "Viacheslav Biriukov",
            "avatar_template": "/user_avatar/forums.foundationdb.org/brk0v/{size}/173_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 156,
            "username": "spullara",
            "name": "Sam Pullara",
            "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "All Coordinators Crashed At Same Time",
      "id": 1537,
      "title": "All Coordinators Crashed At Same Time",
      "slug": "all-coordinators-crashed-at-same-time",
      "posts_count": 15,
      "reply_count": 10,
      "highest_post_number": 15,
      "image_url": null,
      "created_at": "2019-07-25T21:19:54.522Z",
      "last_posted_at": "2019-09-09T23:32:55.551Z",
      "bumped": true,
      "bumped_at": "2019-09-09T23:32:55.551Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 2139,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 627,
            "username": "Dan",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/eada6e/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 26,
            "username": "mrz",
            "name": "matthew zeier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mrz/{size}/26_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 15,
            "username": "markus.pilman",
            "name": "Markus Pilman",
            "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Detecting cluster availability transitions for long running clients",
      "id": 365,
      "title": "Detecting cluster availability transitions for long running clients",
      "slug": "detecting-cluster-availability-transitions-for-long-running-clients",
      "posts_count": 9,
      "reply_count": 7,
      "highest_post_number": 9,
      "image_url": null,
      "created_at": "2018-05-07T08:18:42.873Z",
      "last_posted_at": "2018-05-08T17:59:06.057Z",
      "bumped": true,
      "bumped_at": "2018-05-08T17:59:06.057Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 1318,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 22,
            "username": "dave",
            "name": "David Scherer",
            "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Performance characteristics of using Watches for Distributed Task Scheduling",
      "id": 471,
      "title": "Performance characteristics of using Watches for Distributed Task Scheduling",
      "slug": "performance-characteristics-of-using-watches-for-distributed-task-scheduling",
      "posts_count": 28,
      "reply_count": 13,
      "highest_post_number": 28,
      "image_url": "https://global.discourse-cdn.com/foundationdb/original/1X/0819f4ad7c04fe7d847b2f33824849dc70ee6a0c.png",
      "created_at": "2018-05-24T13:42:28.764Z",
      "last_posted_at": "2018-08-16T03:57:50.737Z",
      "bumped": true,
      "bumped_at": "2018-08-16T03:57:50.737Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 15,
      "views": 5180,
      "category_id": 9,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 118,
            "username": "abdullin",
            "name": "Rinat Abdullin",
            "avatar_template": "/user_avatar/forums.foundationdb.org/abdullin/{size}/83_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 68,
            "username": "daverosenthal",
            "name": "Dave Rosenthal",
            "avatar_template": "/user_avatar/forums.foundationdb.org/daverosenthal/{size}/51_2.png",
            "trust_level": 2
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 12,
        "username": "ajbeamon",
        "name": "A.J. Beamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "post_count": 5,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 15,
        "username": "markus.pilman",
        "name": "Markus Pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "post_count": 4,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      }
    ],
    "created_by": {
      "id": 15,
      "username": "markus.pilman",
      "name": "Markus Pilman",
      "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png"
    },
    "last_poster": {
      "id": 12,
      "username": "ajbeamon",
      "name": "A.J. Beamon",
      "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
    }
  },
  "bookmarks": []
}