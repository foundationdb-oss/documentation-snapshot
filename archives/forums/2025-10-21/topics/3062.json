{
  "post_stream": {
    "posts": [
      {
        "id": 10386,
        "name": "Rajiv M Ranganath",
        "username": "rajivr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "created_at": "2021-12-07T14:34:46.178Z",
        "cooked": "<p>I am currently working on <code>UNIT_TESTS</code> instruction for Rust binding tester.</p>\n<p>In the tests for watches I noticed the following code in <a href=\"https://github.com/apple/foundationdb/blob/6.3.22/bindings/java/src/test/com/apple/foundationdb/test/StackTester.java#L671-L678\" rel=\"noopener nofollow ugc\">Java</a> and <a href=\"https://github.com/apple/foundationdb/blob/6.3.22/bindings/go/src/_stacktester/stacktester.go#L294-L303\" rel=\"noopener nofollow ugc\">Go</a> bindings.</p>\n<pre><code class=\"lang-auto\">List&lt;CompletableFuture&lt;Void&gt;&gt; watches = db.run(tr -&gt; {\n\tList&lt;CompletableFuture&lt;Void&gt;&gt; watchList = new LinkedList&lt;&gt;();\n\twatchList.add(tr.watch(\"foo\".getBytes()));\n\twatchList.add(tr.watch(\"bar\".getBytes()));\n\n\ttr.set(\"foo\".getBytes(), \"f\".getBytes());\n\treturn watchList;\n});\n\n_, e = db.Transact(func(tr fdb.Transaction) (interface{}, error) {\n\twatches[0] = tr.Watch(fdb.Key(\"w0\"))\n\twatches[1] = tr.Watch(fdb.Key(\"w1\"))\n\twatches[2] = tr.Watch(fdb.Key(\"w2\"))\n\twatches[3] = tr.Watch(fdb.Key(\"w3\"))\n\n\ttr.Set(fdb.Key(\"w0\"), []byte(\"0\"))\n\ttr.Clear(fdb.Key(\"w1\"))\n\treturn nil, nil\n})\n</code></pre>\n<p>In the above code, we seems to be leaking FDB future from the function closure passed to <code>db.run</code> and <code>db.Transact</code>.</p>\n<p>Since lifetime of a FDB future is tied to the lifetime of the transaction created within <code>db.run</code> and <code>db.Transact</code>, I was wondering if</p>\n<ol>\n<li>\n<p>At the C API level, are watch futures special in some way that allows it to safely stay alive after the transaction has been destroyed? (or)</p>\n</li>\n<li>\n<p>Is it just the case that Java and Go binding tester just relies on GC not to destroy the transaction object till the future is alive?</p>\n</li>\n</ol>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2021-12-07T14:34:46.178Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 46,
        "reads": 19,
        "readers_count": 18,
        "score": 233.8,
        "yours": false,
        "topic_id": 3062,
        "topic_slug": "question-regarding-watch-future",
        "display_username": "Rajiv M Ranganath",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/blob/6.3.22/bindings/java/src/test/com/apple/foundationdb/test/StackTester.java#L671-L678",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/StackTester.java at 6.3.22 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 1
          },
          {
            "url": "https://github.com/apple/foundationdb/blob/6.3.22/bindings/go/src/_stacktester/stacktester.go#L294-L303",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/stacktester.go at 6.3.22 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 946,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/question-regarding-watch-future/3062/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 10387,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2021-12-07T15:32:17.313Z",
        "cooked": "<p>The lifetime of a native future in Java is not exactly tied to the transaction, but rather the completion of that future (I don\u2019t recall for Go, but I suspect this is true there too). In most cases an incomplete future is automatically failed when the transaction that created it is destroyed, so that does have the effect of freeing the native memory. This is not true for the watch futures here, though, which are not failed when the transaction completes or is destroyed.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2021-12-07T18:07:08.838Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 18,
        "readers_count": 17,
        "score": 8.6,
        "yours": false,
        "topic_id": 3062,
        "topic_slug": "question-regarding-watch-future",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/question-regarding-watch-future/3062/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10392,
        "name": "Alec Grieser",
        "username": "alloc",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
        "created_at": "2021-12-08T18:07:25.565Z",
        "cooked": "<p>It\u2019s also probably worth noting here that it is fundamental to the semantics of a watch that the future be able to outlive the transaction it was created in. In particular, the idea behind a watch is that the watcher get notified when the watched key is changed, including some time in the future after the original transaction is long gone.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2021-12-08T18:07:25.565Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 18,
        "readers_count": 17,
        "score": 8.6,
        "yours": false,
        "topic_id": 3062,
        "topic_slug": "question-regarding-watch-future",
        "display_username": "Alec Grieser",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 12,
          "username": "ajbeamon",
          "name": "A.J. Beamon",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 8,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/question-regarding-watch-future/3062/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10394,
        "name": "Rajiv M Ranganath",
        "username": "rajivr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "created_at": "2021-12-08T23:50:31.637Z",
        "cooked": "<p>Thanks <a class=\"mention\" href=\"/u/ajbeamon\">@ajbeamon</a> <a class=\"mention\" href=\"/u/alloc\">@alloc</a> for the replies. <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=10\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"></p>\n<p>I\u2019ve a related question regarding correct use of watches and retry loop.</p>\n<p>Lets say I\u2019ve a watch future <code>w0</code>. Now if I\u2019ve a code with the following structure, where in a subsequent transaction, I do</p>\n<pre><code class=\"lang-auto\">db.run(|tr| {\n  let _ = w0.join()?;\n\n  // an error occurs that causes retry\n});\n</code></pre>\n<p>In the above code, <code>w0.join()</code> blocks the thread till the watch future resolves. Once <code>w0</code> future resolves, before proceeding, it also takes ownership of the future and drops it (by calling <code>fdb_future_destroy</code>).</p>\n<p>Now if some action happens later in the function closure body, that causes a retry, <code>db.run</code> will retry the transaction thereby causing a <code>join()</code> on a possibly destroyed future.</p>\n<p>For normal futures this behavior is okay because when using safe Rust, futures can\u2019t leak out of the function closure. They are all destroyed before retry occurs.</p>\n<p>So, the question is,</p>\n<ol>\n<li>\n<p>Is it safe to call <code>fdb_future_block_until_ready</code> on a watch FDB future (<code>w0</code>) that has already been destroyed? (I suspect not, but I am asking to confirm)</p>\n</li>\n<li>\n<p>Suppose I don\u2019t destroy <code>w0</code> after the first <code>fdb_future_block_until_ready</code> resolves, it it safe to call <code>fdb_future_block_until_ready</code> on <code>w0</code> multiple times?</p>\n</li>\n<li>\n<p>In the above pattern, it it my responsibility to ensure that I don\u2019t destroy <code>w0</code> in function closure, but do it outside of <code>db.run(...)</code>?</p>\n</li>\n</ol>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2021-12-09T04:22:06.267Z",
        "reply_count": 1,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 17,
        "readers_count": 16,
        "score": 8.4,
        "yours": false,
        "topic_id": 3062,
        "topic_slug": "question-regarding-watch-future",
        "display_username": "Rajiv M Ranganath",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 8,
          "username": "alloc",
          "name": "Alec Grieser",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 946,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/question-regarding-watch-future/3062/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10398,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2021-12-09T08:24:54.594Z",
        "cooked": "<ol>\n<li>\n<p>No.</p>\n</li>\n<li>\n<p>Calling fdb_future_block_until_ready multiple times is safe.</p>\n</li>\n<li>\n<p>I would think that the correct pattern would be to do:</p>\n<pre><code class=\"lang-auto\">let _ = w0.join()?;\ndb.run(|tr| {\n  // an error occurs that causes retry\n});\n</code></pre>\n<p>As waiting for the watch to fire (indicating that the watched value has changed) doesn\u2019t have anything to do with the transactional body that you\u2019re about to execute in response to being informed that the watched value has changed.</p>\n</li>\n</ol>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2021-12-09T08:24:54.594Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 14,
        "readers_count": 13,
        "score": 7.8,
        "yours": false,
        "topic_id": 3062,
        "topic_slug": "question-regarding-watch-future",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 946,
          "username": "rajivr",
          "name": "Rajiv M Ranganath",
          "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/question-regarding-watch-future/3062/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10407,
        "name": "Rajiv M Ranganath",
        "username": "rajivr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "created_at": "2021-12-09T14:01:21.321Z",
        "cooked": "<p>Thanks <a class=\"mention\" href=\"/u/alexmiller\">@alexmiller</a> for the reply. <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<aside class=\"quote no-group\" data-username=\"alexmiller\" data-post=\"5\" data-topic=\"3062\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/alexmiller/48/326_2.png\" class=\"avatar\"> alexmiller:</div>\n<blockquote>\n<p>I would think that the correct pattern would be to do:</p>\n<pre><code class=\"lang-auto\">let _ = w0.join()?;\ndb.run(|tr| {\n  // an error occurs that causes retry\n});\n</code></pre>\n</blockquote>\n</aside>\n<p>Wouldn\u2019t we still need to put <code>w0</code> inside a retry loop, like so?</p>\n<pre><code class=\"lang-auto\">db.run(|tr| {\n   w0.join()?\n});\n\n// Verify that `w0` correctly resolved without any errors.\n\ndb.run(|tr| {\n  // an error that causes retry\n});\n</code></pre>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2021-12-09T14:01:21.321Z",
        "reply_count": 1,
        "reply_to_post_number": 5,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 13,
        "readers_count": 12,
        "score": 7.6,
        "yours": false,
        "topic_id": 3062,
        "topic_slug": "question-regarding-watch-future",
        "display_username": "Rajiv M Ranganath",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 946,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/question-regarding-watch-future/3062/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10413,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2021-12-09T20:50:36.737Z",
        "cooked": "<p>No.  There\u2019s nothing to retry.</p>\n<p>The watch is created as part of a transaction, so that you can create a watch transactionally.  (ie. you can decide if a watch is needed based on a correct and up-to-date understanding of the database state.)</p>\n<p>After that point, there\u2019s no need for a transaction.  It\u2019s just a future that completes when the value has changed in the database.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2021-12-09T20:50:36.737Z",
        "reply_count": 1,
        "reply_to_post_number": 6,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 12,
        "readers_count": 11,
        "score": 7.4,
        "yours": false,
        "topic_id": 3062,
        "topic_slug": "question-regarding-watch-future",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 946,
          "username": "rajivr",
          "name": "Rajiv M Ranganath",
          "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/question-regarding-watch-future/3062/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10414,
        "name": "Rajiv M Ranganath",
        "username": "rajivr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "created_at": "2021-12-10T01:10:12.437Z",
        "cooked": "<p>Thanks <a class=\"mention\" href=\"/u/alexmiller\">@alexmiller</a>.</p>\n<aside class=\"quote no-group\" data-username=\"alexmiller\" data-post=\"7\" data-topic=\"3062\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/alexmiller/48/326_2.png\" class=\"avatar\"> alexmiller:</div>\n<blockquote>\n<p>After that point, there\u2019s no need for a transaction. It\u2019s just a future that completes when the value has changed in the database.</p>\n</blockquote>\n</aside>\n<p>I see.</p>\n<p>I was wondering if there was some reason why an error from watch future was being sent to <code>on_error</code> in a newly created transaction in <a href=\"https://github.com/apple/foundationdb/blob/6.3.23/bindings/go/src/_stacktester/stacktester.go#L258-L270\" rel=\"noopener nofollow ugc\">Go</a> and <a href=\"https://github.com/apple/foundationdb/blob/6.3.23/bindings/java/src/test/com/apple/foundationdb/test/StackTester.java#L645-L656\" rel=\"noopener nofollow ugc\">Java</a> stack tester, rather than just being ignored (ignored in the sense that bubbling the error up to the application)?</p>\n<p>Basically I want to understand the right way of handling any errors that occurs when <code>w0.join()</code> returns an error.</p>\n<pre><code class=\"lang-auto\">// Go\ne := watch.Get()\nif e != nil {\n\tswitch e := e.(type) {\n\tcase fdb.Error:\n\t\ttr, tr_error := db.CreateTransaction()\n\t\tif tr_error != nil {\n\t\t\tpanic(tr_error)\n\t\t}\n\t\ttr.OnError(e).MustGet()\n\tdefault:\n\t\tpanic(e)\n\t}\n}\n\n// Java\ntry {\n\tw.join();\n\tif(!expected) {\n\t\tthrow new IllegalStateException(\"A watch triggered too early\");\n\t}\n}\ncatch(FDBException e) {\n\tTransaction tr = db.createTransaction();\n\ttr.onError(e).join();\n\treturn false;\n}\n</code></pre>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 8,
        "updated_at": "2021-12-10T01:14:08.660Z",
        "reply_count": 0,
        "reply_to_post_number": 7,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 12,
        "readers_count": 11,
        "score": 2.4,
        "yours": false,
        "topic_id": 3062,
        "topic_slug": "question-regarding-watch-future",
        "display_username": "Rajiv M Ranganath",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/blob/6.3.23/bindings/java/src/test/com/apple/foundationdb/test/StackTester.java#L645-L656",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/StackTester.java at 6.3.23 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 1
          },
          {
            "url": "https://github.com/apple/foundationdb/blob/6.3.23/bindings/go/src/_stacktester/stacktester.go#L258-L270",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/stacktester.go at 6.3.23 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 946,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/question-regarding-watch-future/3062/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      10386,
      10387,
      10392,
      10394,
      10398,
      10407,
      10413,
      10414
    ]
  },
  "timeline_lookup": [
    [
      1,
      1414
    ],
    [
      3,
      1413
    ],
    [
      6,
      1412
    ]
  ],
  "suggested_topics": [],
  "tags": [
    "bindings"
  ],
  "tags_descriptions": {},
  "fancy_title": "Question regarding WATCH future",
  "id": 3062,
  "title": "Question regarding WATCH future",
  "posts_count": 8,
  "created_at": "2021-12-07T14:34:46.115Z",
  "views": 480,
  "reply_count": 6,
  "like_count": 0,
  "last_posted_at": "2021-12-10T01:10:12.437Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "question-regarding-watch-future",
  "category_id": 5,
  "word_count": 1041,
  "deleted_at": null,
  "user_id": 946,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_3062",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 8,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 4,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Understanding &ldquo;Watches&rdquo;",
      "id": 903,
      "title": "Understanding \"Watches\"",
      "slug": "understanding-watches",
      "posts_count": 10,
      "reply_count": 4,
      "highest_post_number": 10,
      "image_url": null,
      "created_at": "2018-11-26T17:28:09.202Z",
      "last_posted_at": "2018-11-27T17:28:33.763Z",
      "bumped": true,
      "bumped_at": "2018-11-27T17:28:33.763Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 3295,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 437,
            "username": "MansurAshraf",
            "name": "Mansur Ashraf",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/m/b9bd4f/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 435,
            "username": "ArchDev",
            "name": "Arthur Kushka",
            "avatar_template": "/user_avatar/forums.foundationdb.org/archdev/{size}/425_2.png",
            "trust_level": 0
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Watch semantics",
      "id": 1480,
      "title": "Watch semantics",
      "slug": "watch-semantics",
      "posts_count": 1,
      "reply_count": 0,
      "highest_post_number": 1,
      "image_url": null,
      "created_at": "2019-06-23T00:08:14.360Z",
      "last_posted_at": "2019-06-23T00:08:14.445Z",
      "bumped": true,
      "bumped_at": "2019-06-23T00:08:14.445Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 378,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest single",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 14,
            "username": "andrew.noyes",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "What is the life time of key, value and other arguments passed to fdb_transaction_*",
      "id": 516,
      "title": "What is the life time of key, value and other arguments passed to fdb_transaction_*",
      "slug": "what-is-the-life-time-of-key-value-and-other-arguments-passed-to-fdb-transaction",
      "posts_count": 11,
      "reply_count": 4,
      "highest_post_number": 11,
      "image_url": null,
      "created_at": "2018-06-18T18:28:57.904Z",
      "last_posted_at": "2018-07-17T16:11:21.242Z",
      "bumped": true,
      "bumped_at": "2018-07-17T16:11:21.242Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "bindings"
      ],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 2608,
      "category_id": 5,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 308,
            "username": "ananthakumaran",
            "name": "Anantha Kumaran",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ananthakumaran/{size}/526_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 22,
            "username": "dave",
            "name": "David Scherer",
            "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "`fdb_future_block_until_ready` and retry logic",
      "id": 2826,
      "title": "`fdb_future_block_until_ready` and retry logic",
      "slug": "fdb-future-block-until-ready-and-retry-logic",
      "posts_count": 17,
      "reply_count": 14,
      "highest_post_number": 17,
      "image_url": null,
      "created_at": "2021-07-29T16:11:47.961Z",
      "last_posted_at": "2021-09-02T13:29:20.517Z",
      "bumped": true,
      "bumped_at": "2021-09-02T13:29:20.517Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "bindings"
      ],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 1009,
      "category_id": 5,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 946,
            "username": "rajivr",
            "name": "Rajiv M Ranganath",
            "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 14,
            "username": "andrew.noyes",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Transaction.Watch Examples?",
      "id": 257,
      "title": "Transaction.Watch Examples?",
      "slug": "transaction-watch-examples",
      "posts_count": 6,
      "reply_count": 2,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2018-04-25T03:34:54.216Z",
      "last_posted_at": "2018-10-23T12:05:15.737Z",
      "bumped": true,
      "bumped_at": "2018-10-23T12:05:15.737Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 2822,
      "category_id": 5,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 174,
            "username": "seddonm1",
            "name": "seddonm1",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/e274bd/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 22,
            "username": "dave",
            "name": "David Scherer",
            "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 265,
            "username": "brainfucker",
            "name": "Illarionov Oleg",
            "avatar_template": "/user_avatar/forums.foundationdb.org/brainfucker/{size}/237_2.png",
            "trust_level": 1
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 946,
        "username": "rajivr",
        "name": "Rajiv M Ranganath",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "post_count": 4,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 8,
        "username": "alloc",
        "name": "Alec Grieser",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 12,
        "username": "ajbeamon",
        "name": "A.J. Beamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      }
    ],
    "created_by": {
      "id": 946,
      "username": "rajivr",
      "name": "Rajiv M Ranganath",
      "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png"
    },
    "last_poster": {
      "id": 946,
      "username": "rajivr",
      "name": "Rajiv M Ranganath",
      "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png"
    },
    "links": [
      {
        "url": "https://github.com/apple/foundationdb/blob/6.3.22/bindings/java/src/test/com/apple/foundationdb/test/StackTester.java#L671-L678",
        "title": "foundationdb/StackTester.java at 6.3.22 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 946,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/6.3.23/bindings/java/src/test/com/apple/foundationdb/test/StackTester.java#L645-L656",
        "title": "foundationdb/StackTester.java at 6.3.23 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 946,
        "domain": "github.com",
        "root_domain": "github.com"
      }
    ]
  },
  "bookmarks": []
}