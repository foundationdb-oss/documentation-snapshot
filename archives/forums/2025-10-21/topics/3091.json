{
  "post_stream": {
    "posts": [
      {
        "id": 10488,
        "name": "Rajiv M Ranganath",
        "username": "rajivr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "created_at": "2021-12-25T04:32:20.603Z",
        "cooked": "<p>When studying record layer code, I noticed that in <a href=\"https://github.com/FoundationDB/fdb-record-layer/blob/3.1.224.0/fdb-record-layer-core/src/main/proto/record_metadata.proto#L110-L124\" rel=\"noopener nofollow ugc\"><code>record_metadata.proto</code></a>, the proto message <code>Field</code> is defined as follows.</p>\n<pre><code class=\"lang-auto\">message Field {\n  required string field_name = 1;\n\n  // [...]\n  }\n}\n</code></pre>\n<p>In protobuf, the way to uniquely identify a field/column is by using field number. I tried to understand the implications of using field name, and found the following comment in <a href=\"https://github.com/FoundationDB/fdb-record-layer/blob/3.1.224.0/docs/SchemaEvolution.md#rename-a-field-in-a-record-type\" rel=\"noopener nofollow ugc\"><code>SchemaEvolution.md</code></a>.</p>\n<blockquote>\n<p>However, index and primary key definitions in the meta-data itself are based on field names, so these will also need to be updated in exactly the same way. At present, to avoid this appearing to be a change requiring an index rebuild, the index\u2019s subspace key and version need to be copied from the old definition.</p>\n</blockquote>\n<p>I was wondering what was the motivation for using field name instead of field number? I am trying to understand the pros and cons.</p>\n<p>For my implementation, I am considering something as follows instead.</p>\n<pre><code class=\"lang-auto\">message Field {\n  required uint32 field_number = 1;\n\n  // [...]\n  }\n}\n</code></pre>\n<p>Happy Holidays! <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2021-12-25T04:32:20.603Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 61,
        "reads": 18,
        "readers_count": 17,
        "score": 323.6,
        "yours": false,
        "topic_id": 3091,
        "topic_slug": "record-layer-field-proto-message",
        "display_username": "Rajiv M Ranganath",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/FoundationDB/fdb-record-layer/blob/3.1.224.0/fdb-record-layer-core/src/main/proto/record_metadata.proto#L110-L124",
            "internal": false,
            "reflection": false,
            "title": "fdb-record-layer/record_metadata.proto at 3.1.224.0 \u00b7 FoundationDB/fdb-record-layer \u00b7 GitHub",
            "clicks": 3
          },
          {
            "url": "https://github.com/FoundationDB/fdb-record-layer/blob/3.1.224.0/docs/SchemaEvolution.md#rename-a-field-in-a-record-type",
            "internal": false,
            "reflection": false,
            "title": "fdb-record-layer/SchemaEvolution.md at 3.1.224.0 \u00b7 FoundationDB/fdb-record-layer \u00b7 GitHub",
            "clicks": 2
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 946,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/record-layer-field-proto-message/3091/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 10520,
        "name": "Alec Grieser",
        "username": "alloc",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
        "created_at": "2022-01-04T21:50:33.951Z",
        "cooked": "<p>One reason to use name instead of number is that you can have an index definition (or common primary key) that spans across types as long as all types have that field defined on them. So, for example, you could have <code>ChildType1</code> and <code>ChildType2</code> that both had a <code>parent_id</code> field that pointed to some <code>ParentType</code> by its primary key (say), and then you could define a multi-type index on <code>ChildType1</code> and <code>ChildType2</code> on the <code>parent_id</code> field that would let you query for all children (of both types) for a given parent.</p>\n<p>Now, you could do the same thing with field numbers instead of field names, but I think there are more cases where the same field name gets used across types to represent the same information rather than number (or, perhaps, it\u2019s easier to retroactively change a protobuf definition so that the same names are used for the same data across messages are the same rather than numbers, which can\u2019t be changed after the fact).</p>\n<p>But that is a bit niche and for single-type indexes, it doesn\u2019t really buy you too much (other than maybe being slightly easier for humans to look at and understand, though that can be fixed by having whatever user interface the human is looking through look up the field name by number), and using the field number instead would be fine for most purposes, I think.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2022-01-04T21:50:59.476Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 12,
        "readers_count": 11,
        "score": 7.4,
        "yours": false,
        "topic_id": 3091,
        "topic_slug": "record-layer-field-proto-message",
        "display_username": "Alec Grieser",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 8,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/record-layer-field-proto-message/3091/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10521,
        "name": "Rajiv M Ranganath",
        "username": "rajivr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "created_at": "2022-01-05T00:28:08.536Z",
        "cooked": "<p>Thanks <a class=\"mention\" href=\"/u/alloc\">@alloc</a> for the reply!</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2022-01-05T00:28:08.536Z",
        "reply_count": 0,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 10,
        "readers_count": 9,
        "score": 2.0,
        "yours": false,
        "topic_id": 3091,
        "topic_slug": "record-layer-field-proto-message",
        "display_username": "Rajiv M Ranganath",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 8,
          "username": "alloc",
          "name": "Alec Grieser",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 946,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/record-layer-field-proto-message/3091/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      10488,
      10520,
      10521
    ]
  },
  "timeline_lookup": [
    [
      1,
      1397
    ],
    [
      2,
      1386
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Record Layer `Field` proto message",
  "id": 3091,
  "title": "Record Layer `Field` proto message",
  "posts_count": 3,
  "created_at": "2021-12-25T04:32:20.529Z",
  "views": 521,
  "reply_count": 1,
  "like_count": 1,
  "last_posted_at": "2022-01-05T00:28:08.536Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "record-layer-field-proto-message",
  "category_id": 9,
  "word_count": 445,
  "deleted_at": null,
  "user_id": 946,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_3091",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 3,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 2,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Creating secondary index on data within a Map",
      "id": 1910,
      "title": "Creating secondary index on data within a Map",
      "slug": "creating-secondary-index-on-data-within-a-map",
      "posts_count": 4,
      "reply_count": 2,
      "highest_post_number": 4,
      "image_url": null,
      "created_at": "2020-01-27T01:16:00.108Z",
      "last_posted_at": "2020-01-27T21:21:25.792Z",
      "bumped": true,
      "bumped_at": "2020-01-27T21:21:25.792Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1054,
      "category_id": 12,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 713,
            "username": "samitsawant",
            "name": "Samit Sawant",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/13edae/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Question about FDB Record Layer&rsquo;s SIGMOD&rsquo;19 paper",
      "id": 2460,
      "title": "Question about FDB Record Layer's SIGMOD'19 paper",
      "slug": "question-about-fdb-record-layers-sigmod19-paper",
      "posts_count": 5,
      "reply_count": 3,
      "highest_post_number": 5,
      "image_url": null,
      "created_at": "2020-12-02T13:26:04.240Z",
      "last_posted_at": "2020-12-04T12:54:03.141Z",
      "bumped": true,
      "bumped_at": "2020-12-04T12:54:03.141Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1056,
      "category_id": 12,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 857,
            "username": "zydong",
            "name": "ZhiyuanDong",
            "avatar_template": "/user_avatar/forums.foundationdb.org/zydong/{size}/994_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "What&rsquo;s so special about proto3 and ordinal 0 for enums?",
      "id": 3301,
      "title": "What's so special about proto3 and ordinal 0 for enums?",
      "slug": "whats-so-special-about-proto3-and-ordinal-0-for-enums",
      "posts_count": 3,
      "reply_count": 0,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2022-05-06T14:18:56.090Z",
      "last_posted_at": "2022-05-06T22:23:45.024Z",
      "bumped": true,
      "bumped_at": "2022-05-06T22:23:45.024Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 2185,
      "category_id": 5,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 968,
            "username": "arnaudgeiser",
            "name": "Arnaud Geiser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/arnaudgeiser/{size}/1138_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Application design using Subspace and Tuple",
      "id": 452,
      "title": "Application design using Subspace and Tuple",
      "slug": "application-design-using-subspace-and-tuple",
      "posts_count": 9,
      "reply_count": 7,
      "highest_post_number": 9,
      "image_url": null,
      "created_at": "2018-05-22T21:46:43.537Z",
      "last_posted_at": "2018-07-14T21:02:50.010Z",
      "bumped": true,
      "bumped_at": "2018-07-14T21:02:50.010Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 5,
      "views": 3678,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 211,
            "username": "brk0v",
            "name": "Viacheslav Biriukov",
            "avatar_template": "/user_avatar/forums.foundationdb.org/brk0v/{size}/173_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 317,
            "username": "Lundin",
            "name": "Pontus Lundin",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/dfb087/{size}.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Querying a non-string value",
      "id": 1807,
      "title": "Querying a non-string value",
      "slug": "querying-a-non-string-value",
      "posts_count": 4,
      "reply_count": 2,
      "highest_post_number": 4,
      "image_url": null,
      "created_at": "2019-12-04T13:52:17.159Z",
      "last_posted_at": "2020-04-01T07:45:29.577Z",
      "bumped": true,
      "bumped_at": "2020-04-01T07:45:29.577Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 1004,
      "category_id": 12,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 694,
            "username": "marko.cacic",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/m/e274bd/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 219,
            "username": "MMcM",
            "name": "Mike McMahon",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/m/d07c76/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 534,
            "username": "PierreZ",
            "name": "Pierre Zemb",
            "avatar_template": "/user_avatar/forums.foundationdb.org/pierrez/{size}/866_2.png",
            "trust_level": 2
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 946,
        "username": "rajivr",
        "name": "Rajiv M Ranganath",
        "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 8,
        "username": "alloc",
        "name": "Alec Grieser",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      }
    ],
    "created_by": {
      "id": 946,
      "username": "rajivr",
      "name": "Rajiv M Ranganath",
      "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png"
    },
    "last_poster": {
      "id": 946,
      "username": "rajivr",
      "name": "Rajiv M Ranganath",
      "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png"
    },
    "links": [
      {
        "url": "https://github.com/FoundationDB/fdb-record-layer/blob/3.1.224.0/fdb-record-layer-core/src/main/proto/record_metadata.proto#L110-L124",
        "title": "fdb-record-layer/record_metadata.proto at 3.1.224.0 \u00b7 FoundationDB/fdb-record-layer \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 946,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/FoundationDB/fdb-record-layer/blob/3.1.224.0/docs/SchemaEvolution.md#rename-a-field-in-a-record-type",
        "title": "fdb-record-layer/SchemaEvolution.md at 3.1.224.0 \u00b7 FoundationDB/fdb-record-layer \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 946,
        "domain": "github.com",
        "root_domain": "github.com"
      }
    ]
  },
  "bookmarks": []
}