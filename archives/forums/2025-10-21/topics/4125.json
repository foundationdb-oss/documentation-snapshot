{
  "post_stream": {
    "posts": [
      {
        "id": 13193,
        "name": "Sam Weaver",
        "username": "swr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/swr/{size}/1643_2.png",
        "created_at": "2023-08-23T15:37:21.823Z",
        "cooked": "<p>I attempted to move a development FDB cluster to a new set of machines, and broke the cluster, resulting in data loss. I\u2019d like to understand where I went wrong, and whether it\u2019s possible to recover any of the data.</p>\n<p>Here were the steps I took:</p>\n<ol>\n<li>Initial \u201cgreen\u201d cluster: 3 machines, 2 processes each, replication configuration \u2018double\u2019</li>\n<li>Spin up an identical \u201cblue\u201d cluster, and cluster all 3 nodes together. Blue cluster is a fresh FDB install.</li>\n<li>Join the \u201cblue\u201d cluster to the \u201cgreen\u201d cluster by copying the cluster file and restarting FDB. Now in one \u201csuper\u201d cluster, 6 machines, 12 processes total.</li>\n<li>Exclude the three \u201cgreen\u201d machines with FDB CLI command <code>exclude FORCE</code> (this feels like my mistake, but regular <code>exclude</code> was saying that it couldn\u2019t calculate the size of the database)</li>\n<li>After all 3 excludes succeed, shut down FoundationDB on the green cluster.</li>\n</ol>\n<p>At this point, the new cluster is in a bad state. I eventually wiped it, and set up a fresh cluster, but I still have the 3 excluded green nodes around. Is there anything I can do to get them back clustered, included, and have the data remain intact?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2023-08-23T15:37:21.823Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 372,
        "reads": 40,
        "readers_count": 39,
        "score": 1868.0,
        "yours": false,
        "topic_id": 4125,
        "topic_slug": "how-would-i-recover-from-this-failed-cluster-move",
        "display_username": "Sam Weaver",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1309,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-would-i-recover-from-this-failed-cluster-move/4125/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 13195,
        "name": "Lukas Joswiak",
        "username": "ljoswiak",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/977dab/{size}.png",
        "created_at": "2023-08-23T17:46:54.127Z",
        "cooked": "<p>You have the correct idea of how to move a cluster to a new set of machines. However, there are some protections in place within the database that would have prevented the blue cluster processes from joining the green cluster. Initially implemented in <a href=\"https://github.com/apple/foundationdb/pull/8560\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Data loss protection v3 by sfc-gh-ljoswiak \u00b7 Pull Request #8560 \u00b7 apple/foundationdb \u00b7 GitHub</a>, data loss protection is a feature that prevents processes from one FDB cluster from joining another FDB cluster.</p>\n<p>When a stateful FDB process comes online (like a tlog or storage server), it attempts to register with the cluster controller. The cluster controller has state about what the stateful processes are (this is stored in the coordinated state on the coordinators). If a tlog from the blue cluster comes online and registers with the green cluster, the tlog will not be recognized because it is from a different cluster, and it will wipe all its on disk data. This is a problem, because it leads to potential data loss scenarios in production if cluster files are accidentally updated to point to the wrong cluster. The above data loss protection PR prevents this issue by assigning a \u201ccluster ID\u201d UID to each stateful process upon its first registration with the cluster controller. This value is stored in a file called <code>clusterId</code> in the data directory for each stateful process. To correctly perform machine moves, you should stop the blue cluster, delete the <code>clusterId</code> file from each processes datadir, and then modify the cluster file to point to the green cluster. Alternatively, you can copy the cluster file from the green cluster to the blue machines before running them for the first time.</p>\n<p>If you still have the logs around, you can look for <code>WorkerBelongsToExistingCluster</code> to verify data loss protection is the cause of the issue. This gets logged on the cluster controller, so all these logs should come from one machine in the green cluster. You can also look for <code>ZombieProcess</code> traces, which should have been output on each of the blue cluster processes, indicating they are refusing to join the new cluster and are going into a zombie state.</p>\n<p>To attempt to recover your data, I would set up your original green cluster by itself, and then <code>include</code> the excluded processes. The result of your original <code>exclude FORCE</code> would have been to exclude all the processes in the cluster. I\u2019m not sure what exactly happens in this case, but you may be able to recover the data by simply including the processes back.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2023-08-23T17:46:54.127Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 8,
        "reads": 41,
        "readers_count": 40,
        "score": 53.2,
        "yours": false,
        "topic_id": 4125,
        "topic_slug": "how-would-i-recover-from-this-failed-cluster-move",
        "display_username": "Lukas Joswiak",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/pull/8560",
            "internal": false,
            "reflection": false,
            "title": "Data loss protection v3 by sfc-gh-ljoswiak \u00b7 Pull Request #8560 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 3
          }
        ],
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 838,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-would-i-recover-from-this-failed-cluster-move/4125/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13196,
        "name": "Sam Weaver",
        "username": "swr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/swr/{size}/1643_2.png",
        "created_at": "2023-08-23T20:11:29.977Z",
        "cooked": "<p>I\u2019m not sure if data loss protection triggered here - I can\u2019t find any <code>WorkerBelongsToExistingCluster</code> nor <code>ZombieProcess</code> traces. Do you know the expected severity for those log messages?</p>\n<p>Also, I\u2019m not sure how to start the green cluster on its own. I attempt to change the cluster file to point to the old (excluded, green) coordinators, but every time it starts, it gets rewritten to point to the new (blue) coordinators, which have since been destroyed/recreated with new IPs (and are therefore unreachable.)</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2023-08-23T20:11:29.977Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 34,
        "readers_count": 33,
        "score": 21.8,
        "yours": false,
        "topic_id": 4125,
        "topic_slug": "how-would-i-recover-from-this-failed-cluster-move",
        "display_username": "Sam Weaver",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 838,
          "username": "ljoswiak",
          "name": "Lukas Joswiak",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/977dab/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1309,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-would-i-recover-from-this-failed-cluster-move/4125/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13197,
        "name": "Lukas Joswiak",
        "username": "ljoswiak",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/977dab/{size}.png",
        "created_at": "2023-08-23T21:03:09.094Z",
        "cooked": "<p>I may have misinterpreted this</p>\n<blockquote>\n<ul>\n<li>Join the \u201cblue\u201d cluster to the \u201cgreen\u201d cluster by copying the cluster file and restarting FDB. Now in one \u201csuper\u201d cluster, 6 machines, 12 processes total.</li>\n</ul>\n</blockquote>\n<p>Did you change the cluster files on the green cluster processes to point to the blue cluster, or did you change them on the blue cluster to point to the green cluster? Based on the cluster file containing blue cluster IPs, it sounds like you changed the cluster files on the green cluster.</p>\n<p>In either case, I\u2019m a little surprised you don\u2019t see either of those traces - they should both log as <code>SevError</code>. If you didn\u2019t run <code>configure new</code> on the blue cluster, then I don\u2019t believe a <code>clusterId</code> file gets created, so that could be it. But then the coordinator IPs in the cluster file wouldn\u2019t have been changed unless you updated the coordinators using the fdbcli <code>coordinators</code> command.</p>\n<p>Also, please add the output of <code>fdbserver --version</code>.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2023-08-23T21:03:09.094Z",
        "reply_count": 1,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 35,
        "readers_count": 34,
        "score": 12.0,
        "yours": false,
        "topic_id": 4125,
        "topic_slug": "how-would-i-recover-from-this-failed-cluster-move",
        "display_username": "Lukas Joswiak",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 1309,
          "username": "swr",
          "name": "Sam Weaver",
          "avatar_template": "/user_avatar/forums.foundationdb.org/swr/{size}/1643_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 838,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-would-i-recover-from-this-failed-cluster-move/4125/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13198,
        "name": "Sam Weaver",
        "username": "swr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/swr/{size}/1643_2.png",
        "created_at": "2023-08-24T13:08:23.326Z",
        "cooked": "<p>I changed the cluster files on the blue cluster to point to green. After that, I did <code>exclude FORCE</code> on each of the green machine IPs, and then I ran <code>coordinators auto</code> (sorry, forgot to mention this) which explains why the IPs were changed.</p>\n<p>My FDB server version is:</p>\n<pre><code class=\"lang-auto\">FoundationDB 7.2 (v7.2.0)\nsource version 5eae3be195ee5c1302878459d3d1d34282b1ee60\nprotocol fdb00b072000000\n</code></pre>\n<p>If they were <code>SevError</code>, I definitely didn\u2019t see those log messages. I checked both our logging pipeline and the files on disk on the green cluster. <code>min_trace_severity</code> was set to 20, but that shouldn\u2019t have prevented <code>SevError</code> messages, if I understand that knob correctly.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2023-08-24T13:08:23.326Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 29,
        "readers_count": 28,
        "score": 10.8,
        "yours": false,
        "topic_id": 4125,
        "topic_slug": "how-would-i-recover-from-this-failed-cluster-move",
        "display_username": "Sam Weaver",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 838,
          "username": "ljoswiak",
          "name": "Lukas Joswiak",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/977dab/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1309,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-would-i-recover-from-this-failed-cluster-move/4125/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13199,
        "name": "Lukas Joswiak",
        "username": "ljoswiak",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/977dab/{size}.png",
        "created_at": "2023-08-24T17:54:51.163Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"swr\" data-post=\"5\" data-topic=\"4125\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/swr/48/1643_2.png\" class=\"avatar\"> swr:</div>\n<blockquote>\n<pre><code class=\"lang-auto\">source version 5eae3be195ee5c1302878459d3d1d34282b1ee60\n</code></pre>\n</blockquote>\n</aside>\n<p>This source version does not have data loss protection. The good news is that, since you modified the cluster files on the blue cluster, it is unlikely that the stateful processes on the green cluster wiped their data. However, I am not sure it will be possible to restore their data given the current state of the database.</p>\n<blockquote>\n<p>I attempt to change the cluster file to point to the old (excluded, green) coordinators, but every time it starts, it gets rewritten to point to the new (blue) coordinators, which have since been destroyed/recreated with new IPs</p>\n</blockquote>\n<p>I believe this process exists because old coordinators store the value of the new coordinators as a way to update clients which have not received the newest set of coordinators. The cluster string is stored internally in the database in the system key <code>\\xff/coordinators</code>. So just updating the cluster file won\u2019t necessarily work. Unfortunately, since it sounds like you deleted the data on the latest set of coordinators (on the blue cluster), the database has no way to bootstrap. It\u2019s probably theoretically possible to \u201cfix\u201d the old coordinators (on the green cluster) in some way such that you can start the cluster, but I\u2019m not aware of any tooling we have to perform such an action.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2023-08-24T17:54:51.163Z",
        "reply_count": 2,
        "reply_to_post_number": 5,
        "quote_count": 1,
        "incoming_link_count": 2,
        "reads": 28,
        "readers_count": 27,
        "score": 25.6,
        "yours": false,
        "topic_id": 4125,
        "topic_slug": "how-would-i-recover-from-this-failed-cluster-move",
        "display_username": "Lukas Joswiak",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 838,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-would-i-recover-from-this-failed-cluster-move/4125/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13200,
        "name": "Sam Weaver",
        "username": "swr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/swr/{size}/1643_2.png",
        "created_at": "2023-08-24T18:37:25.462Z",
        "cooked": "<p>Is there any documentation on the format of the data stored in each process\u2019 data directory? If I could manually modify the system key you mention within the old coordinators, that might help me \u201cfix\u201d the old coordinators, but that would require some knowledge of the internal data format.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2023-08-24T18:37:25.462Z",
        "reply_count": 0,
        "reply_to_post_number": 6,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 25,
        "readers_count": 24,
        "score": 5.0,
        "yours": false,
        "topic_id": 4125,
        "topic_slug": "how-would-i-recover-from-this-failed-cluster-move",
        "display_username": "Sam Weaver",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 838,
          "username": "ljoswiak",
          "name": "Lukas Joswiak",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/977dab/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1309,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-would-i-recover-from-this-failed-cluster-move/4125/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13201,
        "name": "Sam Weaver",
        "username": "swr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/swr/{size}/1643_2.png",
        "created_at": "2023-08-24T18:41:07.119Z",
        "cooked": "<p>Also, perhaps it belongs on a separate thread, but is there any documentation describing why my use of <code>exclude [IP]</code> didn\u2019t work, leading me to use the erroneous <code>exclude FORCE [IP]</code>? (As described in the first post in this thread.)</p>\n<aside class=\"quote no-group\" data-username=\"swr\" data-post=\"1\" data-topic=\"4125\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/swr/48/1643_2.png\" class=\"avatar\"> swr:</div>\n<blockquote>\n<ol start=\"4\">\n<li>Exclude the three \u201cgreen\u201d machines with FDB CLI command <code>exclude FORCE</code> (this feels like my mistake, but regular <code>exclude</code> was saying that it couldn\u2019t calculate the size of the database)</li>\n</ol>\n</blockquote>\n</aside>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2023-08-24T18:41:07.119Z",
        "reply_count": 0,
        "reply_to_post_number": 6,
        "quote_count": 1,
        "incoming_link_count": 4,
        "reads": 25,
        "readers_count": 24,
        "score": 25.0,
        "yours": false,
        "topic_id": 4125,
        "topic_slug": "how-would-i-recover-from-this-failed-cluster-move",
        "display_username": "Sam Weaver",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/recovering-data-from-corrupt-folder/4658/3",
            "internal": true,
            "reflection": true,
            "title": "Recovering data from corrupt folder",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 838,
          "username": "ljoswiak",
          "name": "Lukas Joswiak",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/977dab/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1309,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-would-i-recover-from-this-failed-cluster-move/4125/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13203,
        "name": "Lukas Joswiak",
        "username": "ljoswiak",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/977dab/{size}.png",
        "created_at": "2023-08-24T20:22:02.459Z",
        "cooked": "<p>I was talking to <a class=\"mention\" href=\"/u/alexmiller\">@alexmiller</a> about this, and he mentioned a recent change that can directly dump key-value pairs from a storage server SQLite file <a href=\"https://github.com/apple/foundationdb/pull/6302\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Add role 'kvfiledump' to dump key-values from storage file by ppggff \u00b7 Pull Request #6302 \u00b7 apple/foundationdb \u00b7 GitHub</a>. You can run this with <code>fdbserver --role kvfiledump --kvfile &lt;path_to_sqlite_file&gt;</code>.</p>\n<blockquote>\n<p>If I could manually modify the system key you mention within the old coordinators, that might help me \u201cfix\u201d the old coordinators</p>\n</blockquote>\n<p>Thinking about this a little more, I don\u2019t think fixing the old coordinators would help in this case. The state of the new coordinators is likely still needed to correctly bring the cluster back up. The difficulty in this case is that it sounds like your storage servers still have all the data, but since the coordinator files are missing, the cluster can\u2019t correctly boot. Hopefully the kvdump tool above will help.</p>\n<blockquote>\n<p>Also, perhaps it belongs on a separate thread, but is there any documentation describing why my use of <code>exclude [IP]</code> didn\u2019t work, leading me to use the erroneous <code>exclude FORCE [IP]</code>?</p>\n</blockquote>\n<p>I\u2019m not aware of any documentation on the failure modes of <code>exclude</code>. The check occurs in <code>checkExclusion</code> (<a href=\"https://github.com/apple/foundationdb/blob/16b5a22cef0bce4f7f40e7d8bc9b4279a3df1b56/fdbclient/SpecialKeySpace.actor.cpp#L952\" rel=\"noopener nofollow ugc\">https://github.com/apple/foundationdb/blob/16b5a22cef0bce4f7f40e7d8bc9b4279a3df1b56/fdbclient/SpecialKeySpace.actor.cpp#L952</a>), and presumably you saw one of the errors in that function when you originally attempted the exclude.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2023-08-24T20:22:02.459Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 25,
        "readers_count": 24,
        "score": 35.0,
        "yours": false,
        "topic_id": 4125,
        "topic_slug": "how-would-i-recover-from-this-failed-cluster-move",
        "display_username": "Lukas Joswiak",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/pull/6302",
            "internal": false,
            "reflection": false,
            "title": "Add role 'kvfiledump' to dump key-values from storage file by ppggff \u00b7 Pull Request #6302 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 6
          },
          {
            "url": "https://github.com/apple/foundationdb/blob/16b5a22cef0bce4f7f40e7d8bc9b4279a3df1b56/fdbclient/SpecialKeySpace.actor.cpp#L952",
            "internal": false,
            "reflection": false,
            "clicks": 2
          }
        ],
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 838,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-would-i-recover-from-this-failed-cluster-move/4125/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13204,
        "name": "Sam Weaver",
        "username": "swr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/swr/{size}/1643_2.png",
        "created_at": "2023-08-24T22:06:55.040Z",
        "cooked": "<p>This is helpful, thanks!</p>\n<p>After a little experimentation, it looks like the data was deleted from the green storage servers when I ran the <code>exclude</code>, as the dumps are empty now. Presumably it would\u2019ve been present on the blue cluster we migrated to (which has since been deleted.)</p>\n<p>I was able to practice the <code>kvfiledump</code> command on our new cluster though, and it works as expected! For future readers, <strong>the server must be stopped,</strong> otherwise you\u2019ll get an error like:</p>\n<pre><code class=\"lang-auto\">Dump start: , end: \\xff\\xff, debug: true\nFatal Error: Broken promise\n</code></pre>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2023-08-24T22:06:55.040Z",
        "reply_count": 1,
        "reply_to_post_number": 9,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 26,
        "readers_count": 25,
        "score": 40.2,
        "yours": false,
        "topic_id": 4125,
        "topic_slug": "how-would-i-recover-from-this-failed-cluster-move",
        "display_username": "Sam Weaver",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 838,
          "username": "ljoswiak",
          "name": "Lukas Joswiak",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/977dab/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1309,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-would-i-recover-from-this-failed-cluster-move/4125/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 14437,
        "name": "Andy Potter",
        "username": "potterandy96",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/p/34f0e0/{size}.png",
        "created_at": "2024-10-14T05:38:56.922Z",
        "cooked": "<p>Hey, how\u2019d you end up re-importing the data? The kvfiledump works but trying to figure out a way to efficiently capture it and move it to a new cluster.</p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2024-10-14T05:38:56.922Z",
        "reply_count": 1,
        "reply_to_post_number": 10,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 17,
        "readers_count": 16,
        "score": 8.4,
        "yours": false,
        "topic_id": 4125,
        "topic_slug": "how-would-i-recover-from-this-failed-cluster-move",
        "display_username": "Andy Potter",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 1309,
          "username": "swr",
          "name": "Sam Weaver",
          "avatar_template": "/user_avatar/forums.foundationdb.org/swr/{size}/1643_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1481,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-would-i-recover-from-this-failed-cluster-move/4125/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 14451,
        "name": "Sam Weaver",
        "username": "swr",
        "avatar_template": "/user_avatar/forums.foundationdb.org/swr/{size}/1643_2.png",
        "created_at": "2024-10-16T15:12:00.410Z",
        "cooked": "<p>In this case, the data was from a test cluster, so it was discarded. As I mentioned in the other thread, I don\u2019t think there\u2019s a built in way to recover data from the <code>kvfiledump</code> role:</p>\n<aside class=\"quote no-group\" data-username=\"swr\" data-post=\"4\" data-topic=\"4658\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/swr/48/1643_2.png\" class=\"avatar\"><a href=\"https://forums.foundationdb.org/t/recovering-data-from-corrupt-folder/4658/4\">Recovering data from corrupt folder</a></div>\n<blockquote>\n<p>I\u2019m pretty sure that the <code>kvfiledump</code> role is for \u201cemergency\u201d recoveries like this\u2026 I don\u2019t think it\u2019s part of a supported backup/restore path. I suspect you would need to build your own tooling to write these K/V pairs back to the database again (perhaps as part of your application that\u2019s already connecting to FDB.)</p>\n</blockquote>\n</aside>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 12,
        "updated_at": "2024-10-16T15:12:00.410Z",
        "reply_count": 0,
        "reply_to_post_number": 11,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 16,
        "readers_count": 15,
        "score": 8.2,
        "yours": false,
        "topic_id": 4125,
        "topic_slug": "how-would-i-recover-from-this-failed-cluster-move",
        "display_username": "Sam Weaver",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/recovering-data-from-corrupt-folder/4658/4",
            "internal": true,
            "reflection": false,
            "title": "Recovering data from corrupt folder",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 1481,
          "username": "potterandy96",
          "name": "Andy Potter",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/p/34f0e0/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1309,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-would-i-recover-from-this-failed-cluster-move/4125/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      13193,
      13195,
      13196,
      13197,
      13198,
      13199,
      13200,
      13201,
      13203,
      13204,
      14437,
      14451
    ]
  },
  "timeline_lookup": [
    [
      1,
      790
    ],
    [
      5,
      789
    ],
    [
      11,
      373
    ],
    [
      12,
      370
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "How would I recover from this failed cluster move?",
  "id": 4125,
  "title": "How would I recover from this failed cluster move?",
  "posts_count": 12,
  "created_at": "2023-08-23T15:37:21.767Z",
  "views": 617,
  "reply_count": 9,
  "like_count": 1,
  "last_posted_at": "2024-10-16T15:12:00.410Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "how-would-i-recover-from-this-failed-cluster-move",
  "category_id": 17,
  "word_count": 1773,
  "deleted_at": null,
  "user_id": 1309,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_4125",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 12,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 3,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "How to restore cluster after accidentally dropping coordinators",
      "id": 1588,
      "title": "How to restore cluster after accidentally dropping coordinators",
      "slug": "how-to-restore-cluster-after-accidentally-dropping-coordinators",
      "posts_count": 10,
      "reply_count": 5,
      "highest_post_number": 10,
      "image_url": null,
      "created_at": "2019-08-19T17:17:44.072Z",
      "last_posted_at": "2021-02-11T02:19:38.586Z",
      "bumped": true,
      "bumped_at": "2021-02-11T02:19:38.586Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 2330,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 311,
            "username": "ThomasJ",
            "name": "Thomas Johson",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 15,
            "username": "markus.pilman",
            "name": "Markus Pilman",
            "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 810,
            "username": "amanda",
            "name": "Amanda",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/67e7ee/{size}.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Can I remove a process?",
      "id": 1428,
      "title": "Can I remove a process?",
      "slug": "can-i-remove-a-process",
      "posts_count": 9,
      "reply_count": 4,
      "highest_post_number": 9,
      "image_url": null,
      "created_at": "2019-06-05T23:13:44.635Z",
      "last_posted_at": "2019-06-18T14:05:53.063Z",
      "bumped": true,
      "bumped_at": "2019-06-18T14:05:53.063Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 2178,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 594,
            "username": "zhuyi29",
            "name": "Zoe",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/z/edb3f5/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 511,
            "username": "sakthivelpvs",
            "name": "Sakthivel",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9dc877/{size}.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Fdb cluster is unavailable after delete a disk",
      "id": 2232,
      "title": "Fdb cluster is unavailable after delete a disk",
      "slug": "fdb-cluster-is-unavailable-after-delete-a-disk",
      "posts_count": 4,
      "reply_count": 1,
      "highest_post_number": 4,
      "image_url": null,
      "created_at": "2020-07-07T09:35:29.720Z",
      "last_posted_at": "2020-07-09T08:38:11.028Z",
      "bumped": true,
      "bumped_at": "2020-07-09T09:28:06.173Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1154,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 585,
            "username": "ssb",
            "name": "Shunbo Shi",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ssb/{size}/656_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        }
      ]
    },
    {
      "fancy_title": "Temporary hardware failure on singly replicated cluster",
      "id": 2293,
      "title": "Temporary hardware failure on singly replicated cluster",
      "slug": "temporary-hardware-failure-on-singly-replicated-cluster",
      "posts_count": 3,
      "reply_count": 1,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2020-08-14T13:20:01.952Z",
      "last_posted_at": "2020-08-28T07:10:05.803Z",
      "bumped": true,
      "bumped_at": "2020-08-28T07:10:05.803Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 466,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 737,
            "username": "aymalik",
            "name": "Aayushi Malik",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/aca169/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "How to save partial data in case of lost all tlog nodes and some of storage nodes",
      "id": 3114,
      "title": "How to save partial data in case of lost all tlog nodes and some of storage nodes",
      "slug": "how-to-save-partial-data-in-case-of-lost-all-tlog-nodes-and-some-of-storage-nodes",
      "posts_count": 4,
      "reply_count": 2,
      "highest_post_number": 4,
      "image_url": null,
      "created_at": "2022-01-15T11:38:40.626Z",
      "last_posted_at": "2022-01-27T14:48:58.564Z",
      "bumped": true,
      "bumped_at": "2022-02-09T20:05:13.640Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 696,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 602,
            "username": "ppggff",
            "name": "ppggff",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ppggff/{size}/855_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 1309,
        "username": "swr",
        "name": "Sam Weaver",
        "avatar_template": "/user_avatar/forums.foundationdb.org/swr/{size}/1643_2.png",
        "post_count": 7,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 838,
        "username": "ljoswiak",
        "name": "Lukas Joswiak",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/977dab/{size}.png",
        "post_count": 4,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 1481,
        "username": "potterandy96",
        "name": "Andy Potter",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/p/34f0e0/{size}.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      }
    ],
    "created_by": {
      "id": 1309,
      "username": "swr",
      "name": "Sam Weaver",
      "avatar_template": "/user_avatar/forums.foundationdb.org/swr/{size}/1643_2.png"
    },
    "last_poster": {
      "id": 1309,
      "username": "swr",
      "name": "Sam Weaver",
      "avatar_template": "/user_avatar/forums.foundationdb.org/swr/{size}/1643_2.png"
    },
    "links": [
      {
        "url": "https://github.com/apple/foundationdb/pull/6302",
        "title": "Add role 'kvfiledump' to dump key-values from storage file by ppggff \u00b7 Pull Request #6302 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 6,
        "user_id": 838,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/pull/8560",
        "title": "Data loss protection v3 by sfc-gh-ljoswiak \u00b7 Pull Request #8560 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 838,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/16b5a22cef0bce4f7f40e7d8bc9b4279a3df1b56/fdbclient/SpecialKeySpace.actor.cpp#L952",
        "title": null,
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 838,
        "domain": "github.com",
        "root_domain": "github.com"
      }
    ]
  },
  "bookmarks": []
}