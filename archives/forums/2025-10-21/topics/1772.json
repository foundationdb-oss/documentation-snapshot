{
  "post_stream": {
    "posts": [
      {
        "id": 5610,
        "name": "Sam Pullara",
        "username": "spullara",
        "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
        "created_at": "2019-11-19T20:59:06.660Z",
        "cooked": "<p>I was just at the FoundationDB summit yesterday and in one of the talks the topic of how to efficiently write log-like data structures was discussed. The basic idea is that you need to introduce a shard key before a version stamp on write and then coalesce reads across all shards. So you might end up with keys that look like:</p>\n<pre><code>/{shard}/key/{versionstamp}\n</code></pre>\n<p>Where {shard} is a power of 2 range so that you can later split and combine shards. For example, if your number of shards were 4, then you would have a series of writes that looks like:</p>\n<pre><code>/0/key/{versionstamp}\n/1/key/{versionstamp}\n/2/key/{versionstamp}\n/3/key/{versionstamp}\n/0/key/{versionstamp}\n/1/key/{versionstamp}\n/2/key/{versionstamp}\n/3/key/{versionstamp}\n</code></pre>\n<p>And then to read them you would need to read 4 prefix ranges to read the complete log:</p>\n<pre><code>/0/key\n/1/key\n/2/key\n/4/key\n</code></pre>\n<p>And then interleave them based on the version stamp discovered in the key during the scan. The client also needs to maintain some statistics about their access patterns and the size of the cluster they are running on in order to pick an optimal number of shards. Wouldn\u2019t it be great if this were something that FDB could handle itself? Basically a new placeholder in the key that is the \u201cshard key\u201d that isn\u2019t managed by the client. What do y\u2019all think about this?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-11-19T20:59:06.660Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 425,
        "reads": 71,
        "readers_count": 70,
        "score": 2124.2,
        "yours": false,
        "topic_id": 1772,
        "topic_slug": "shard-marker-for-log-like-data-structures",
        "display_username": "Sam Pullara",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 156,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shard-marker-for-log-like-data-structures/1772/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 5614,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-11-19T21:40:52.393Z",
        "cooked": "<p>Append-only workloads become an amplified problem currently because data distribution always splits shards in the middle, which is rather suboptimal for append-only workloads.  If it instead had a bit of heuristics to detect when writes to a shard are always increasing (or decreasing), it could instead split shards by setting the split point to be the highest (or lowest) current key in the shard.  Then future appends would go into a brand new shard, created on some other server. I\u2019d sort of prefer to see if FoundationDB could just handle this better rather than bake workarounds into the client API.</p>\n<p>That said, I\u2019ve never actually seen a database implement doing this to know exactly how much of the problem it will solve, and client changes are obviously easier, solve problems now, and have a faster feedback loop.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-11-19T21:40:52.393Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 65,
        "readers_count": 64,
        "score": 18.0,
        "yours": false,
        "topic_id": 1772,
        "topic_slug": "shard-marker-for-log-like-data-structures",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shard-marker-for-log-like-data-structures/1772/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5616,
        "name": "Sam Pullara",
        "username": "spullara",
        "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
        "created_at": "2019-11-19T21:44:10.213Z",
        "cooked": "<p>I\u2019m not sure why moving the hot shard between servers would make much of a difference \u2014 I suppose it means that we don\u2019t have to move the data immediately but you are still loading a single server with the workload.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-11-19T21:44:10.213Z",
        "reply_count": 2,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 63,
        "readers_count": 62,
        "score": 37.6,
        "yours": false,
        "topic_id": 1772,
        "topic_slug": "shard-marker-for-log-like-data-structures",
        "display_username": "Sam Pullara",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 156,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shard-marker-for-log-like-data-structures/1772/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5625,
        "name": "gaurav",
        "username": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "created_at": "2019-11-20T01:51:53.029Z",
        "cooked": "<p>Hi Sam, which is the talk are you referring to? I presented something for same issue in one of mine - are you referring to that or something different?</p>\n<p>Few comments on your questions:</p>\n<ul>\n<li>simple sharding has obvious problem that you have to read All the data and then throw away what you don\u2019t need; you can\u2019t \u2018tail\u2019 the log efficiently.</li>\n<li>moving hot shard to a new server will probably not change things, but if you switch the storage server quickly enough (not necessarily with every write), then each server can accommodate short bursts and not get saturated.</li>\n</ul>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-11-20T01:51:53.029Z",
        "reply_count": 1,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 11,
        "reads": 66,
        "readers_count": 65,
        "score": 73.2,
        "yours": false,
        "topic_id": 1772,
        "topic_slug": "shard-marker-for-log-like-data-structures",
        "display_username": "gaurav",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 156,
          "username": "spullara",
          "name": "Sam Pullara",
          "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 166,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shard-marker-for-log-like-data-structures/1772/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5633,
        "name": "Sam Pullara",
        "username": "spullara",
        "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
        "created_at": "2019-11-20T17:36:22.886Z",
        "cooked": "<p>(<a class=\"mention\" href=\"/u/ryanworl\">@ryanworl</a>\u2019s talk, see the slides on CDC, <a href=\"https://static.sched.com/hosted_files/foundationdbsummit2019/63/Ryan%20Worl%20FDB%20Summit%202019.pdf\" rel=\"nofollow noopener\">https://static.sched.com/hosted_files/foundationdbsummit2019/63/Ryan%20Worl%20FDB%20Summit%202019.pdf</a>)</p>\n<p>This is for cases where you will always be reading or at least scanning the entire log. For instance, you might build a scalable queue on FDB, a transaction log for another system or in Ryan\u2019s case, change data capture log. The pattern described here is the current best practice for building this kind of data structure on foundationdb. The proposal here is to add native support to it that can be more efficient than doing it in a layer.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-11-20T17:39:54.298Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 18,
        "reads": 62,
        "readers_count": 61,
        "score": 102.4,
        "yours": false,
        "topic_id": 1772,
        "topic_slug": "shard-marker-for-log-like-data-structures",
        "display_username": "Sam Pullara",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://static.sched.com/hosted_files/foundationdbsummit2019/63/Ryan%20Worl%20FDB%20Summit%202019.pdf",
            "internal": false,
            "reflection": false,
            "clicks": 31
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 166,
          "username": "gaurav",
          "name": "gaurav",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 156,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shard-marker-for-log-like-data-structures/1772/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5634,
        "name": "gaurav",
        "username": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "created_at": "2019-11-20T17:56:02.034Z",
        "cooked": "<p>Thanks. Please also take a look at our <a href=\"https://static.sched.com/hosted_files/foundationdbsummit2019/35/Building%20a%20Performant%20Configuration-Store%20Layer.pdf\">approach</a>.</p>\n<p>It has worked quite well for us to get efficient change feeds with very little hot spotting and option to not do full scan (where such a thing is needed).</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-11-20T17:56:32.153Z",
        "reply_count": 1,
        "reply_to_post_number": 5,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 59,
        "readers_count": 58,
        "score": 36.8,
        "yours": false,
        "topic_id": 1772,
        "topic_slug": "shard-marker-for-log-like-data-structures",
        "display_username": "gaurav",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://static.sched.com/hosted_files/foundationdbsummit2019/35/Building%20a%20Performant%20Configuration-Store%20Layer.pdf",
            "internal": false,
            "reflection": false,
            "clicks": 43
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 156,
          "username": "spullara",
          "name": "Sam Pullara",
          "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 166,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shard-marker-for-log-like-data-structures/1772/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5635,
        "name": "Sam Pullara",
        "username": "spullara",
        "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
        "created_at": "2019-11-20T21:23:57.930Z",
        "cooked": "<p>The underlying assumption I am making that I don\u2019t think you or alex are making is that a single team cannot keep up with my write load. I might need 8, 16, 32 or more processes just for the writes. I think that Alex\u2019s suggestion above would adequately handle your case though.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-11-20T21:24:36.707Z",
        "reply_count": 1,
        "reply_to_post_number": 6,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 54,
        "readers_count": 53,
        "score": 15.8,
        "yours": false,
        "topic_id": 1772,
        "topic_slug": "shard-marker-for-log-like-data-structures",
        "display_username": "Sam Pullara",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 166,
          "username": "gaurav",
          "name": "gaurav",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 156,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shard-marker-for-log-like-data-structures/1772/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5636,
        "name": "Adam Kocoloski",
        "username": "kocolosk",
        "avatar_template": "/user_avatar/forums.foundationdb.org/kocolosk/{size}/412_2.png",
        "created_at": "2019-11-20T22:09:39.345Z",
        "cooked": "<p><a class=\"mention\" href=\"/u/gaurav\">@gaurav</a> I\u2019m not sure I understand your point that simple sharding breaks the ability to tail the log. Can\u2019t I just tail the N shards and merge them as needed to get the totally-ordered list?</p>\n<p>I was in the other track during your talk. I think I get the gist of the bucketing algorithm though. Do you worry about the ability to consume a single stream? The simple sharding enables an easy approach to parallelism on the consumer side (at the expense of total ordering, of course).</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-11-20T22:09:39.345Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 50,
        "readers_count": 49,
        "score": 30.0,
        "yours": false,
        "topic_id": 1772,
        "topic_slug": "shard-marker-for-log-like-data-structures",
        "display_username": "Adam Kocoloski",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 423,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shard-marker-for-log-like-data-structures/1772/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5637,
        "name": "gaurav",
        "username": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "created_at": "2019-11-20T22:24:12.974Z",
        "cooked": "<p>Hi Adam, yes I am assuming total ordering to be a hard constraint for the design in my approach. If that is not a constraint, then it would probably be a better choice to shard/partition the change feed (something analogous to kafka partitions of a topic).</p>\n<p>Scanning and merging the shards will be doable, but could more be expensive/involved at read time - one would either read small batches of records from every shard (if they care about not reading too much data / or not retaining lot of data in memory) and repeat this till they have fetched enough, or, if they can afford to keep all new records from all shards in memory (since last checkpoint), they would then do a client side merge of n sorted streams (and possibly throw away anything extra if there is a <code>limit</code> parameter they need to support).</p>\n<p>In our case, we wanted to get a strongly ordered sorted stream (ability to consume it was not a concern in this case), as cheaply as possible at the read time (we have many clients that are doing this operation every 20-100 ms, to keep some other state in sync).</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-11-20T22:24:12.974Z",
        "reply_count": 0,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 50,
        "readers_count": 49,
        "score": 30.0,
        "yours": false,
        "topic_id": 1772,
        "topic_slug": "shard-marker-for-log-like-data-structures",
        "display_username": "gaurav",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 423,
          "username": "kocolosk",
          "name": "Adam Kocoloski",
          "avatar_template": "/user_avatar/forums.foundationdb.org/kocolosk/{size}/412_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 166,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shard-marker-for-log-like-data-structures/1772/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5639,
        "name": "gaurav",
        "username": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "created_at": "2019-11-20T22:27:49.220Z",
        "cooked": "<p>If FDB can split shards more intelligently, thereby switching the SS more quickly, it should definitely help. Only thing I am not sure is whether the shard split would happen sooner, or would SS queue saturation would happen first? Assuming that shards will be of about 64-128 MB in size, but SS queue corresponding to it might be much bigger (due to memory overheads of transaction in queue).</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-11-20T22:46:47.213Z",
        "reply_count": 0,
        "reply_to_post_number": 7,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 49,
        "readers_count": 48,
        "score": 19.8,
        "yours": false,
        "topic_id": 1772,
        "topic_slug": "shard-marker-for-log-like-data-structures",
        "display_username": "gaurav",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 156,
          "username": "spullara",
          "name": "Sam Pullara",
          "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 166,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shard-marker-for-log-like-data-structures/1772/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5640,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-11-20T23:56:39.083Z",
        "cooked": "<p>I went to do some back-of-the-envelope math, and forgot how abysmal sqlite is at write throughput.  SQLite doing 5MB/s and a cluster accepting a conservative 50MB/s, means that by the time a storage server falls ~4s behind, it would take another 35s to catch up, even if we perfectly split immediately.  (Which I think also answers <a class=\"mention\" href=\"/u/gaurav\">@gaurav</a> 's question above.). So even with my proposed change, gaurav\u2019s solution would still be advantageous.</p>\n<p>It\u2019s sounding like redwood\u2019s ability to do sequential inserts will be significantly better, which would then change a good amount of how this could work.  I\u2019m still sort of assuming that workloads wouldn\u2019t literally be 100% of appending to a single queue, but I suppose Ryan\u2019s CDC example would have been 50% appending to one large queue.</p>\n<p>There\u2019s still things that one could consider doing in FDB core that would make this better.  What if we could assign more than one team of servers to a range of keys, and do the random assignment between them and clients would need to know to read from all and merge results? This gives us something similar to a shard key, but in configuration rather than the key.  Is configuration better?  Or we could allow teams of a larger size to be assigned for a queue range of keys, in which we assign keys to servers by hash.  Maybe I should just go search google scholar for if people have done research on optimizations for sequential writes on ordered databases instead of throwing out random theories on the forums.</p>\n<p>But if in the end, the best thing to do is actually to provide clients with a special sharding API, then that\u2019s clearly better than making everyone rewrite a good sharding solution themself.</p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-11-20T23:56:39.083Z",
        "reply_count": 3,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 48,
        "readers_count": 47,
        "score": 64.6,
        "yours": false,
        "topic_id": 1772,
        "topic_slug": "shard-marker-for-log-like-data-structures",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 156,
          "username": "spullara",
          "name": "Sam Pullara",
          "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 2
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shard-marker-for-log-like-data-structures/1772/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5641,
        "name": "Sam Pullara",
        "username": "spullara",
        "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
        "created_at": "2019-11-21T00:02:02.389Z",
        "cooked": "<p><a class=\"mention\" href=\"/u/alexmiller\">@alexmiller</a> I like the automatic distribution between shards that you describe as it reminds me a lot of the consistent caching solution coming soon and would Just Work\u2122. DD could even sort and combine them later once they are no longer hot.</p>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-11-21T00:02:02.389Z",
        "reply_count": 0,
        "reply_to_post_number": 11,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 47,
        "readers_count": 46,
        "score": 9.4,
        "yours": false,
        "topic_id": 1772,
        "topic_slug": "shard-marker-for-log-like-data-structures",
        "display_username": "Sam Pullara",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 156,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shard-marker-for-log-like-data-structures/1772/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5642,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2019-11-21T01:29:45.265Z",
        "cooked": "<p>I hacked together a quick sequential write test, writing to Redwood and SQLite directly using the IKeyValueStore interface, running on my MacBook.</p>\n<p>Using 64 bit (8 byte) BigEndian integer keys, starting at 0 and counting up, and 100 byte values, Redwood can write 12.2GB of KV pairs at 48.5 MB/s, and SQLite is 31.65 MB/s.</p>\n<p>Of course a StorageServer does a lot of other things beside use an IKeyValueStore, but it looks like we should see at least a 50% speedup in this workload based on Redwood\u2019s current state which is not yet fully optimized in a bunch of ways.</p>",
        "post_number": 13,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-11-21T01:29:45.265Z",
        "reply_count": 0,
        "reply_to_post_number": 11,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 47,
        "readers_count": 46,
        "score": 29.4,
        "yours": false,
        "topic_id": 1772,
        "topic_slug": "shard-marker-for-log-like-data-structures",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shard-marker-for-log-like-data-structures/1772/13",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5643,
        "name": "David Scherer",
        "username": "dave",
        "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png",
        "created_at": "2019-11-21T01:39:56.518Z",
        "cooked": "<p>Disclaimer: my knowledge is getting rusty and there could be a dumb mistake below</p>\n<p>I think the ideal solution for sequential write throughput is to get shard \u201csplits\u201d to happen in the write path so that any given write just goes to one storage team and doesn\u2019t move, and each sequential 100MB or so of writes goes to a different team. Of course at extreme scale that 100MB would come in over an arbitrarily tiny interval, but as long as the write-to-read latency impact of receiving and queuing the 100MB on a given server is bearable, that is fine. (And of course you could use even finer sharding, treating the new data as temporarily hot, at the throughput cost of more data movement to coalesce larger shards as they cool)</p>\n<p>Getting this to actually happen will be tricky! You want to do each split (as Alex says) right after the last write, so that ~no data has to move, but you also have to generate it <em>instantly</em> on the proxy in sequence with the other mutations so that the very next write can go to the new shard. (And not to the old team while any preexisting data is being moved, which I can\u2019t remember if is possible now, but could be). So you would have to have all the information needed to decide and carry out the change on the proxy, and the data distribution system would have to tolerate something else making changes.</p>\n<p>But it would probably work really well if you could work out the details. Reads would still be able to go just one place, and writes would round robin with a reasonable and adjustable granularity.</p>\n<p>(Making the storage engine decently fast at sequential writes would also be a good idea!)</p>",
        "post_number": 14,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2019-11-21T01:39:56.518Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 48,
        "readers_count": 47,
        "score": 29.6,
        "yours": false,
        "topic_id": 1772,
        "topic_slug": "shard-marker-for-log-like-data-structures",
        "display_username": "David Scherer",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 22,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shard-marker-for-log-like-data-structures/1772/14",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7289,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2020-06-10T06:34:53.516Z",
        "cooked": "<p>(And to finally post back an old thought I had\u2026)</p>\n<p>In what I had described, I meant \u201crandom assignment\u201d as \u201cchoose one of the two teams at random when inserting\u201d, and specifically I did not mean \u201cuse a hash function over the key to determine which storage sub-team is responsible for the key\u201d.  While this would work well for <code>set()</code> operations, it fails to handle atomic ops.  In the case of an atomic add, there\u2019s no way to send it to one of the two teams jointly covering a key range, and then reconcile the correct sum later \u2013 FoundationDB doesn\u2019t have the schema information that would be required to know which byte ranges to add together when reading from both teams.  This would need to work as a static hash mapping of key to storage sub-team, so that all atomic adds always go to the same team of servers.  If predicate pushdown is ever to be implemented in a way that allows a predicate to be evaluated over a range of key/values, then that would spell doom for either way of doing this sub-team sharding.</p>\n<p>While hash-based sharding over sub-teams would still help improve write bandwidth for log-like data structures, it doesn\u2019t provide the infinite single-key write throughput that \u201cwrite to any storage sub-team and read from all of them\u201d would achieve.</p>\n<p>And regardless, \u201cauto-detect append-mostly workloads and split shards at the end instead of the middle\u201d is still on the list of features I\u2019ve always wanted in a database, but never had.</p>",
        "post_number": 15,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2020-06-10T06:34:53.516Z",
        "reply_count": 1,
        "reply_to_post_number": 11,
        "quote_count": 0,
        "incoming_link_count": 7,
        "reads": 32,
        "readers_count": 31,
        "score": 46.4,
        "yours": false,
        "topic_id": 1772,
        "topic_slug": "shard-marker-for-log-like-data-structures",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shard-marker-for-log-like-data-structures/1772/15",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7584,
        "name": "Oleg Samarin",
        "username": "osamarin",
        "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png",
        "created_at": "2020-07-13T15:18:48.203Z",
        "cooked": "<p>Writing logs to sequencilal files instead of sqlite with large blocks (&gt;128kb) improves bandwith ~10 times on a typical ssd.</p>\n<p>For example, a typical nvme ssd has 1000-2000 mb/sec  write speed when the writing is sequencial with 1m blocks and has only 100-200 mb/sec when the writing is random with 4k blocks.</p>",
        "post_number": 16,
        "post_type": 1,
        "posts_count": 16,
        "updated_at": "2020-07-13T15:18:48.203Z",
        "reply_count": 0,
        "reply_to_post_number": 15,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 26,
        "readers_count": 25,
        "score": 5.2,
        "yours": false,
        "topic_id": 1772,
        "topic_slug": "shard-marker-for-log-like-data-structures",
        "display_username": "Oleg Samarin",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 711,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/shard-marker-for-log-like-data-structures/1772/16",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      5610,
      5614,
      5616,
      5625,
      5633,
      5634,
      5635,
      5636,
      5637,
      5639,
      5640,
      5641,
      5642,
      5643,
      7289,
      7584
    ]
  },
  "timeline_lookup": [
    [
      1,
      2163
    ],
    [
      5,
      2162
    ],
    [
      15,
      1960
    ],
    [
      16,
      1926
    ]
  ],
  "suggested_topics": [],
  "tags": [
    "performance"
  ],
  "tags_descriptions": {},
  "fancy_title": "Shard marker for log-like data structures",
  "id": 1772,
  "title": "Shard marker for log-like data structures",
  "posts_count": 16,
  "created_at": "2019-11-19T20:59:06.598Z",
  "views": 2315,
  "reply_count": 12,
  "like_count": 6,
  "last_posted_at": "2020-07-13T15:18:48.203Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "shard-marker-for-log-like-data-structures",
  "category_id": 8,
  "word_count": 2161,
  "deleted_at": null,
  "user_id": 156,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_1772",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 16,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 7,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Log abstraction on FoundationDB",
      "id": 117,
      "title": "Log abstraction on FoundationDB",
      "slug": "log-abstraction-on-foundationdb",
      "posts_count": 10,
      "reply_count": 3,
      "highest_post_number": 10,
      "image_url": null,
      "created_at": "2018-04-20T10:47:11.941Z",
      "last_posted_at": "2018-05-03T17:35:34.126Z",
      "bumped": true,
      "bumped_at": "2018-05-03T17:35:34.126Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 3,
      "views": 3110,
      "category_id": 5,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 22,
            "username": "dave",
            "name": "David Scherer",
            "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 78,
            "username": "pineapple",
            "name": "Brian Haslet",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/p/7993a0/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Keyspace partitions &amp; performance",
      "id": 168,
      "title": "Keyspace partitions & performance",
      "slug": "keyspace-partitions-performance",
      "posts_count": 9,
      "reply_count": 5,
      "highest_post_number": 9,
      "image_url": null,
      "created_at": "2018-04-21T05:03:54.670Z",
      "last_posted_at": "2018-04-22T03:29:31.049Z",
      "bumped": true,
      "bumped_at": "2018-04-22T03:29:31.049Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 5,
      "views": 5892,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 113,
            "username": "pH14",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ph14/{size}/92_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 9,
            "username": "mbhaskar",
            "name": "Bhaskar Muppana",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mbhaskar/{size}/277_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 54,
            "username": "Evan",
            "name": "Evan Tschannen",
            "avatar_template": "/user_avatar/forums.foundationdb.org/evan/{size}/104_2.png",
            "moderator": true,
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "As a table grows, is it automatically split into multiple tablets",
      "id": 212,
      "title": "As a table grows, is it automatically split into multiple tablets",
      "slug": "as-a-table-grows-is-it-automatically-split-into-multiple-tablets",
      "posts_count": 6,
      "reply_count": 2,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2018-04-23T05:24:46.403Z",
      "last_posted_at": "2018-04-24T22:58:50.515Z",
      "bumped": true,
      "bumped_at": "2018-04-24T22:58:50.515Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1753,
      "category_id": 8,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 146,
            "username": "bigdata86",
            "name": "Wangmeng",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/b/cdc98d/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 22,
            "username": "dave",
            "name": "David Scherer",
            "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 38,
            "username": "panghy",
            "name": "Clement Pang",
            "avatar_template": "/user_avatar/forums.foundationdb.org/panghy/{size}/19_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Building scalable log streaming on FoundationDB",
      "id": 2781,
      "title": "Building scalable log streaming on FoundationDB",
      "slug": "building-scalable-log-streaming-on-foundationdb",
      "posts_count": 10,
      "reply_count": 6,
      "highest_post_number": 10,
      "image_url": null,
      "created_at": "2021-07-06T09:08:27.981Z",
      "last_posted_at": "2021-07-14T14:03:10.175Z",
      "bumped": true,
      "bumped_at": "2021-07-14T14:03:10.175Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 9,
      "views": 1864,
      "category_id": 14,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 962,
            "username": "begelundmuller",
            "name": "Benjamin Egelund-M\u00fcller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/begelundmuller/{size}/1127_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 711,
            "username": "osamarin",
            "name": "Oleg Samarin",
            "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        }
      ]
    },
    {
      "fancy_title": "How to troubleshoot throughput performance degrade?",
      "id": 1436,
      "title": "How to troubleshoot throughput performance degrade?",
      "slug": "how-to-troubleshoot-throughput-performance-degrade",
      "posts_count": 36,
      "reply_count": 24,
      "highest_post_number": 36,
      "image_url": "https://global.discourse-cdn.com/foundationdb/original/1X/9c9854ce87e53265f75154876f180812ee93f8ec.png",
      "created_at": "2019-06-10T10:09:55.810Z",
      "last_posted_at": "2019-06-20T21:36:30.209Z",
      "bumped": true,
      "bumped_at": "2019-06-20T21:36:30.209Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 8,
      "views": 4377,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 597,
            "username": "rayjcwu",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/rayjcwu/{size}/602_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 592,
            "username": "nfeinberg",
            "name": "Nicholas Feinberg",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/n/ba8739/{size}.png",
            "trust_level": 1
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 156,
        "username": "spullara",
        "name": "Sam Pullara",
        "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
        "post_count": 5,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 166,
        "username": "gaurav",
        "name": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "post_count": 4,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 3
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 22,
        "username": "dave",
        "name": "David Scherer",
        "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 7,
        "username": "SteavedHams",
        "name": "Steve Atherton",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 423,
        "username": "kocolosk",
        "name": "Adam Kocoloski",
        "avatar_template": "/user_avatar/forums.foundationdb.org/kocolosk/{size}/412_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 711,
        "username": "osamarin",
        "name": "Oleg Samarin",
        "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      }
    ],
    "created_by": {
      "id": 156,
      "username": "spullara",
      "name": "Sam Pullara",
      "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png"
    },
    "last_poster": {
      "id": 711,
      "username": "osamarin",
      "name": "Oleg Samarin",
      "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png"
    },
    "links": [
      {
        "url": "https://static.sched.com/hosted_files/foundationdbsummit2019/35/Building%20a%20Performant%20Configuration-Store%20Layer.pdf",
        "title": null,
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 43,
        "user_id": 166,
        "domain": "static.sched.com",
        "root_domain": "sched.com"
      },
      {
        "url": "https://static.sched.com/hosted_files/foundationdbsummit2019/63/Ryan%20Worl%20FDB%20Summit%202019.pdf",
        "title": null,
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 31,
        "user_id": 156,
        "domain": "static.sched.com",
        "root_domain": "sched.com"
      }
    ]
  },
  "bookmarks": []
}