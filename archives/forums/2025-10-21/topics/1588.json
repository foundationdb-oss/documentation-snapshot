{
  "post_stream": {
    "posts": [
      {
        "id": 4911,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2019-08-19T17:17:44.150Z",
        "cooked": "<p>This is the x-time I was replacing cluster but this time, I completely forgot to switch coordinators before removing old servers. Now the new cluster is up and running however all 3 coordinators were on the old clusters that was completely removed.</p>\n<p>Is there a way to get things up and running? I tried to point to the new servers through the <code>coordinators</code> setting, but nothing is happening.</p>\n<pre><code class=\"lang-auto\">fdb&gt; status details\n\nUsing cluster file `fdb.cluster'.\n\nUnable to locate a cluster controller within 2 seconds.  Check that there are\nserver processes running.\n\nConfiguration:\n  Redundancy mode        - unknown\n  Storage engine         - unknown\n  Coordinators           - unknown\n\nCluster:\n  FoundationDB processes - unknown\n  Machines               -\n  Machines               - unknown\n\nData:\n  Replication health     - unknown\n  Moving data            - unknown\n  Sum of key-value sizes - unknown\n  Disk space used        - unknown\n\nOperating space:\n  Unable to retrieve operating space status\n\nWorkload:\n  Read rate              - unknown\n  Write rate             - unknown\n  Transactions started   - unknown\n  Transactions committed - unknown\n  Conflict rate          - unknown\n\nBackup and DR:\n  Running backups        - 0\n  Running DRs            - 0\n\nProcess performance details:\n\nCoordination servers:\n  10.128.0.167:4500  (reachable)\n  10.128.3.122:4500  (reachable)\n  10.128.8.78:4500  (reachable)\n\nClient time: 08/19/19 10:46:59\n</code></pre>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2019-08-20T00:52:13.316Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 881,
        "reads": 122,
        "readers_count": 121,
        "score": 4429.4,
        "yours": false,
        "topic_id": 1588,
        "topic_slug": "how-to-restore-cluster-after-accidentally-dropping-coordinators",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 4,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/deleted-all-active-coordinators-how-can-i-reset/1589/2",
            "internal": true,
            "reflection": true,
            "title": "Deleted All Active Coordinators, How Can I Reset?",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-restore-cluster-after-accidentally-dropping-coordinators/1588/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 4914,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2019-08-19T18:10:28.805Z",
        "cooked": "<p>If I forcefully try to point to new cluster in the <code>fdb.cluster</code> file, this is what I get.</p>\n<pre><code class=\"lang-auto\">status details\n\nUsing cluster file `/etc/foundationdb/fdb.cluster'.\n\nThe coordinator(s) have no record of this database. Either the coordinator\naddresses are incorrect, the coordination state on those machines is missing, or\nno database has been created.\n\n  10.128.0.167:4500  (reachable)\n  10.128.3.122:4500  (reachable)\n  10.128.8.78:4500  (reachable)\n\nUnable to locate the data distributor worker.\n\nUnable to locate the ratekeeper worker.\n\n1 client(s) reported: Cluster file contents do not match current cluster connection string. Verify the cluster file and its parent directory are writable and that the cluster file has not been overwritten externally.\n  10.128.0.2:57625\n</code></pre>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2019-08-19T18:10:28.805Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 7,
        "reads": 121,
        "readers_count": 120,
        "score": 59.2,
        "yours": false,
        "topic_id": 1588,
        "topic_slug": "how-to-restore-cluster-after-accidentally-dropping-coordinators",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-restore-cluster-after-accidentally-dropping-coordinators/1588/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4916,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2019-08-20T00:19:22.868Z",
        "cooked": "<p>Have not found a solution and nobody is responding here.</p>\n<p>I span new servers on the old IP addresses, which helped only with the coordinators, but nothing else.</p>\n<pre><code class=\"lang-auto\">status\n\nUsing cluster file `/etc/foundationdb/fdb.cluster'.\n\nCould not communicate with all of the coordination servers.\n  The database will remain operational as long as we\n  can connect to a quorum of servers, however the fault\n  tolerance of the system is reduced as long as the\n  servers remain disconnected.\n\n  10.128.2.67:4500  (reachable)\n  10.128.3.55:4500  (unreachable)\n  10.128.8.4:4500  (reachable)\n\nThe coordinator(s) have no record of this database. Either the coordinator\naddresses are incorrect, the coordination state on those machines is missing, or\nno database has been created.\n\nUnable to locate the data distributor worker.\n\nUnable to locate the ratekeeper worker.\n</code></pre>\n<p>Is there a way to recover from this or do I have to rebuild the cluster from scratch?</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2019-08-20T00:19:22.868Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 12,
        "reads": 120,
        "readers_count": 119,
        "score": 89.0,
        "yours": false,
        "topic_id": 1588,
        "topic_slug": "how-to-restore-cluster-after-accidentally-dropping-coordinators",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-restore-cluster-after-accidentally-dropping-coordinators/1588/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4919,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-08-20T01:13:50.012Z",
        "cooked": "<p>Oof.  In general, losing the data on a majority of your coordinators is data loss.</p>\n<p>If you have one coordinator\u2019s data, you could probably save the situation via handing out a new clusterfile to everyone that only lists the one coordinator, and then when the cluster recovers, reconfigure to a new full set of coordinators.  (This might cause data loss if your one coordinator\u2019s data was stale.)</p>\n<p>If you\u2019ve lost all of your coordinators\u2019 data, then\u2026 it\u2019d be really hard to reconstruct the state.  <em>Theoretically</em> this would be possible to do, but there\u2019s nothing that exists to do so, and it\u2019d probably take <em>at least</em> a few days of work for even us to achieve.</p>\n<p>It looks like you\u2019re spawned coordinators back on the machines, but the data that they had is gone, and thus they don\u2019t know anything about the database that once existed.  If you can find a coordinator data directory by hand, and you didn\u2019t drop other processes\u2019 data, then you might be able to do the one coordinator recovery path.  Otherwise\u2026 hopefully you had a backup? <img src=\"https://emoji.discourse-cdn.com/twitter/sweat_smile.png?v=9\" title=\":sweat_smile:\" class=\"emoji\" alt=\":sweat_smile:\"></p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2019-08-20T01:16:02.274Z",
        "reply_count": 1,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 8,
        "reads": 120,
        "readers_count": 119,
        "score": 69.0,
        "yours": false,
        "topic_id": 1588,
        "topic_slug": "how-to-restore-cluster-after-accidentally-dropping-coordinators",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 311,
          "username": "ThomasJ",
          "name": "Thomas Johson",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-restore-cluster-after-accidentally-dropping-coordinators/1588/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4920,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2019-08-20T01:15:50.273Z",
        "cooked": "<p>That\u2019s not necessary what happened thought.</p>\n<p>I had cluster 1 and cluster 2. I excluded all cluster 1 ips including the coordinators (although FDB says at the end that they are coordinators and they can\u2019t be moved).</p>\n<p>I then, instead of changing coordinators to the new IPs, just deleted the old servers including all the coordinators. So the data should be preserved in full on the new cluster, I\u2019m wrong?</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2019-08-20T01:15:50.273Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 9,
        "reads": 119,
        "readers_count": 118,
        "score": 73.8,
        "yours": false,
        "topic_id": 1588,
        "topic_slug": "how-to-restore-cluster-after-accidentally-dropping-coordinators",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-restore-cluster-after-accidentally-dropping-coordinators/1588/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4921,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-08-20T01:18:47.836Z",
        "cooked": "<p>Coordinators are not relocated via exclusions, but I can see why that would seem sensible to expect. <img src=\"https://emoji.discourse-cdn.com/twitter/confused.png?v=9\" title=\":confused:\" class=\"emoji\" alt=\":confused:\"></p>\n<p>Moving coordinators requires a <a href=\"https://apple.github.io/foundationdb/command-line-interface.html#coordinators\" rel=\"nofollow noopener\">separate command</a> in <code>fdbcli</code>.</p>\n<p>The reasoning behind this is that coordinators aren\u2019t viewed as part of the cluster.  Coordinators can, in fact, be shared between multiple clusters that don\u2019t know anything about each other.  This is why an exclude on one cluster doesn\u2019t automatically relocate everyone\u2019s coordinators.  On the other hand, I\u2019m not aware of anyone that actually uses coordinators in this way.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2019-08-20T01:19:20.476Z",
        "reply_count": 2,
        "reply_to_post_number": 5,
        "quote_count": 0,
        "incoming_link_count": 8,
        "reads": 116,
        "readers_count": 115,
        "score": 73.2,
        "yours": false,
        "topic_id": 1588,
        "topic_slug": "how-to-restore-cluster-after-accidentally-dropping-coordinators",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://apple.github.io/foundationdb/command-line-interface.html#coordinators",
            "internal": false,
            "reflection": false,
            "title": "Command Line Interface \u2014 FoundationDB 6.1",
            "clicks": 51
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 311,
          "username": "ThomasJ",
          "name": "Thomas Johson",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-restore-cluster-after-accidentally-dropping-coordinators/1588/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4922,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2019-08-20T01:19:41.452Z",
        "cooked": "<p>Shajt. Well, gotta rebuild everything from scratch. Fun times.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2019-08-20T01:19:41.452Z",
        "reply_count": 0,
        "reply_to_post_number": 6,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 116,
        "readers_count": 115,
        "score": 38.2,
        "yours": false,
        "topic_id": 1588,
        "topic_slug": "how-to-restore-cluster-after-accidentally-dropping-coordinators",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-restore-cluster-after-accidentally-dropping-coordinators/1588/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4929,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2019-08-20T20:06:56.106Z",
        "cooked": "<p>It seems that you\u2019re neither the first nor the last person who made this mistake. This tells me that we need to do a better job of protecting users from running into this issue. I created <a href=\"https://github.com/apple/foundationdb/issues/2022\" rel=\"nofollow noopener\">https://github.com/apple/foundationdb/issues/2022</a> to track this.</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2019-08-20T20:06:56.106Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 106,
        "readers_count": 105,
        "score": 41.2,
        "yours": false,
        "topic_id": 1588,
        "topic_slug": "how-to-restore-cluster-after-accidentally-dropping-coordinators",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/issues/2022",
            "internal": false,
            "reflection": false,
            "title": "Recover from a cluster with no coordinated state \u00b7 Issue #2022 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 65
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-restore-cluster-after-accidentally-dropping-coordinators/1588/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4940,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2019-08-23T20:50:24.440Z",
        "cooked": "<p>I do appreciate that.</p>\n<p>I think the main disconnect is that how Alex explained it</p>\n<aside class=\"quote no-group\" data-username=\"alexmiller\" data-post=\"6\" data-topic=\"1588\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/alexmiller/48/326_2.png\" class=\"avatar\"> alexmiller:</div>\n<blockquote>\n<p>The reasoning behind this is that coordinators aren\u2019t viewed as part of the cluster.</p>\n</blockquote>\n</aside>\n<p>is not the way that many of us think about it. To me, coordinator is an entry point to the cluster, more like a proxy. Obviously I\u2019m completely wrong about it, but that\u2019s how I thought of it and so I was hoping, when I mistakenly dropped the servers, that I can just somehow connect to the data. Especially that we have triple replica and I dropped 3 servers of 17.</p>\n<p>I think the most frustrating part is that the data is stored physically on the hdd but I can\u2019t do anything about it. Would be great if I could somehow \u201ccopy&amp;paste\u201d them into a new cluster or whatever.</p>\n<p>I must say FDB is the most resilient storage system I ever worked with. As such it trained me to be way less careful around it in comparison to other technologies. So your success is becoming also a weakness because it\u2019s hard to protect the cluster from user\u2019s stupidity.</p>\n<p>Maybe you should consider adding a \u201croundabout\u201d. In road systems roundabouts are considered to be fairly dangerous by drivers (which is also confirmed generally), however as drivers consider them dangerous, they actually pay more attention on them causing less accidents thus making them safer.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2019-08-23T20:50:24.440Z",
        "reply_count": 0,
        "reply_to_post_number": 8,
        "quote_count": 1,
        "incoming_link_count": 16,
        "reads": 97,
        "readers_count": 96,
        "score": 99.4,
        "yours": false,
        "topic_id": 1588,
        "topic_slug": "how-to-restore-cluster-after-accidentally-dropping-coordinators",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 15,
          "username": "markus.pilman",
          "name": "Markus Pilman",
          "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-restore-cluster-after-accidentally-dropping-coordinators/1588/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 9060,
        "name": "Amanda",
        "username": "amanda",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/67e7ee/{size}.png",
        "created_at": "2021-02-11T02:19:38.586Z",
        "cooked": "<p>Hey, I hit a similar situation. I have a cluster running on kubernetes with 3 fdbservers, 1 coordinator (it\u2019s a dev environment) and we accidentally did something that made the coordinator start up without its data files. We shut it down and put the data files back in the right place and turned it back on, but it seems like we totally lost the coordinator state. We\u2019re getting the same <code>The coordinator(s) have no record of this database</code> error. <code>status details</code> does list our one coordinator as reachable.</p>\n<p>I want to confirm that this scenario also counts as \u201closing the coordinator\u201d. Is this recoverable at all? I don\u2019t really understand why it\u2019s not recoverable, since the coordinator files weren\u2019t written to during the bad state. Wouldn\u2019t this be similar to if I shut down the system, copied all the files to a different machine, and turned the whole thing back on? (That\u2019s essentially how our k8s setup works with PVs, the FDB pods get recreated but attached to the same volume, and we have a wrapper service that watches for IP changes of the coordinator and updates the cluster files)</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 10,
        "updated_at": "2021-02-11T02:19:38.586Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 59,
        "readers_count": 58,
        "score": 56.8,
        "yours": false,
        "topic_id": 1588,
        "topic_slug": "how-to-restore-cluster-after-accidentally-dropping-coordinators",
        "display_username": "Amanda",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 810,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/how-to-restore-cluster-after-accidentally-dropping-coordinators/1588/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      4911,
      4914,
      4916,
      4919,
      4920,
      4921,
      4922,
      4929,
      4940,
      9060
    ]
  },
  "timeline_lookup": [
    [
      1,
      2255
    ],
    [
      8,
      2254
    ],
    [
      9,
      2251
    ],
    [
      10,
      1714
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "How to restore cluster after accidentally dropping coordinators",
  "id": 1588,
  "title": "How to restore cluster after accidentally dropping coordinators",
  "posts_count": 10,
  "created_at": "2019-08-19T17:17:44.072Z",
  "views": 2330,
  "reply_count": 5,
  "like_count": 1,
  "last_posted_at": "2021-02-11T02:19:38.586Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "how-to-restore-cluster-after-accidentally-dropping-coordinators",
  "category_id": 7,
  "word_count": 1334,
  "deleted_at": null,
  "user_id": 311,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_1588",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 10,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 4,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Deleted All Active Coordinators, How Can I Reset?",
      "id": 1589,
      "title": "Deleted All Active Coordinators, How Can I Reset?",
      "slug": "deleted-all-active-coordinators-how-can-i-reset",
      "posts_count": 4,
      "reply_count": 1,
      "highest_post_number": 4,
      "image_url": null,
      "created_at": "2019-08-20T19:40:56.078Z",
      "last_posted_at": "2019-08-20T20:23:44.043Z",
      "bumped": true,
      "bumped_at": "2019-08-20T20:23:44.043Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 831,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 369,
            "username": "ricky.saltzer",
            "name": "Ricky Saltzer",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/r/f17d59/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 15,
            "username": "markus.pilman",
            "name": "Markus Pilman",
            "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Could not communicate with a quorum of coordination servers",
      "id": 2000,
      "title": "Could not communicate with a quorum of coordination servers",
      "slug": "could-not-communicate-with-a-quorum-of-coordination-servers",
      "posts_count": 3,
      "reply_count": 0,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2020-03-03T22:43:21.635Z",
      "last_posted_at": "2020-03-05T16:51:23.670Z",
      "bumped": true,
      "bumped_at": "2020-03-05T16:51:23.670Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 2251,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 550,
            "username": "ntrhieu89",
            "name": "Hieu Nguyen",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ntrhieu89/{size}/587_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "How to remove a node from fdb cluster",
      "id": 1731,
      "title": "How to remove a node from fdb cluster",
      "slug": "how-to-remove-a-node-from-fdb-cluster",
      "posts_count": 10,
      "reply_count": 5,
      "highest_post_number": 10,
      "image_url": null,
      "created_at": "2019-11-13T19:43:40.774Z",
      "last_posted_at": "2019-11-13T22:09:13.656Z",
      "bumped": true,
      "bumped_at": "2019-11-13T22:09:13.656Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1633,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 604,
            "username": "Minaxi",
            "name": "meenakshi subramanyam",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/m/2bfe46/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Working High Avalable Solutions with Two Datacenters",
      "id": 2380,
      "title": "Working High Avalable Solutions with Two Datacenters",
      "slug": "working-high-avalable-solutions-with-two-datacenters",
      "posts_count": 8,
      "reply_count": 5,
      "highest_post_number": 8,
      "image_url": null,
      "created_at": "2020-10-07T09:28:40.618Z",
      "last_posted_at": "2020-12-01T06:50:01.982Z",
      "bumped": true,
      "bumped_at": "2020-12-01T07:27:11.254Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 1171,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 711,
            "username": "osamarin",
            "name": "Oleg Samarin",
            "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "30 server cluster just died",
      "id": 2731,
      "title": "30 server cluster just died",
      "slug": "30-server-cluster-just-died",
      "posts_count": 8,
      "reply_count": 3,
      "highest_post_number": 8,
      "image_url": null,
      "created_at": "2021-06-05T16:22:25.332Z",
      "last_posted_at": "2021-06-06T18:34:11.621Z",
      "bumped": true,
      "bumped_at": "2021-06-06T18:34:11.621Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 738,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 867,
            "username": "espaiz",
            "name": "David",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/e/ad7895/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 14,
            "username": "andrew.noyes",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 311,
        "username": "ThomasJ",
        "name": "Thomas Johson",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "post_count": 6,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 15,
        "username": "markus.pilman",
        "name": "Markus Pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 810,
        "username": "amanda",
        "name": "Amanda",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/67e7ee/{size}.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      }
    ],
    "created_by": {
      "id": 311,
      "username": "ThomasJ",
      "name": "Thomas Johson",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png"
    },
    "last_poster": {
      "id": 810,
      "username": "amanda",
      "name": "Amanda",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/67e7ee/{size}.png"
    },
    "links": [
      {
        "url": "https://github.com/apple/foundationdb/issues/2022",
        "title": "Recover from a cluster with no coordinated state \u00b7 Issue #2022 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 65,
        "user_id": 15,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://apple.github.io/foundationdb/command-line-interface.html#coordinators",
        "title": "Command Line Interface \u2014 FoundationDB 6.1",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 51,
        "user_id": 13,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      }
    ]
  },
  "bookmarks": []
}