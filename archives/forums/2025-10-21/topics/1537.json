{
  "post_stream": {
    "posts": [
      {
        "id": 4714,
        "name": "",
        "username": "Dan",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/eada6e/{size}.png",
        "created_at": "2019-07-25T21:19:54.597Z",
        "cooked": "<p>We recently ran into a cluster down situation where all of our coordinators had issues at the same time causing the database to be unavailable.</p>\n<p>For reference, we are running FDB version 6.0.15 with three datacenter mode with 54 nodes (18 nodes in each AZ), 5 coordinators in a 2, 2, 1 configuration and the nodes are c5d.2xlarge with 4500 being storage, 4501 being storage, 4502 being transaction and 4503 being stateless for each machine.</p>\n<p>The following was being spammed over and over until I restarted foundationdb on every coordination server:</p>\n<pre><code>Jul 25 16:50:30 ip-10-49-38-6.ec2.internal fdbmonitor[3794]: LogGroup=\"default\" Process=\"fdbserver.4500\": Fatal Error: Network connection failed\nJul 25 16:50:31 ip-10-49-38-6.ec2.internal fdbmonitor[3794]: LogGroup=\"default\" Process=\"fdbserver.4500\": Process 3797 exited 1, restarting in 0 seconds\nJul 25 16:50:31 ip-10-49-38-6.ec2.internal fdbmonitor[3794]: LogGroup=\"default\" Process=\"fdbserver.4500\": Launching /usr/sbin/fdbserver (21795) for fdbserver.4500\nJul 25 16:50:32 ip-10-49-38-6.ec2.internal fdbmonitor[3794]: LogGroup=\"default\" Process=\"fdbserver.4500\": FDBD joined cluster.\nJul 25 16:50:34 ip-10-49-38-6.ec2.internal fdbmonitor[3794]: LogGroup=\"default\" Process=\"fdbserver.4500\": Fatal Error: Network connection failed\nJul 25 16:50:34 ip-10-49-38-6.ec2.internal fdbmonitor[3794]: LogGroup=\"default\" Process=\"fdbserver.4500\": Process 21795 exited 1, restarting in 57 seconds\nJul 25 16:51:31 ip-10-49-38-6.ec2.internal fdbmonitor[3794]: LogGroup=\"default\" Process=\"fdbserver.4500\": Launching /usr/sbin/fdbserver (21800) for fdbserver.4500\nJul 25 16:51:31 ip-10-49-38-6.ec2.internal fdbmonitor[3794]: LogGroup=\"default\" Process=\"fdbserver.4500\": Fatal Error: Network connection failed\nJul 25 16:51:32 ip-10-49-38-6.ec2.internal fdbmonitor[3794]: LogGroup=\"default\" Process=\"fdbserver.4500\": Process 21800 exited 1, restarting in 56 seconds\nJul 25 16:51:54 ip-10-49-38-6.ec2.internal dhclient[2694]: XMT: Solicit on eth0, interval 117660ms.\nJul 25 16:52:28 ip-10-49-38-6.ec2.internal fdbmonitor[3794]: LogGroup=\"default\" Process=\"fdbserver.4500\": Launching /usr/sbin/fdbserver (21805) for fdbserver.4500\nJul 25 16:52:28 ip-10-49-38-6.ec2.internal fdbmonitor[3794]: LogGroup=\"default\" Process=\"fdbserver.4500\": Fatal Error: Network connection failed\nJul 25 16:52:28 ip-10-49-38-6.ec2.internal fdbmonitor[3794]: LogGroup=\"default\" Process=\"fdbserver.4500\": Process 21805 exited 1, restarting in 65 seconds\nJul 25 16:53:33 ip-10-49-38-6.ec2.internal fdbmonitor[3794]: LogGroup=\"default\" Process=\"fdbserver.4500\": Launching /usr/sbin/fdbserver (21811) for fdbserver.4500\nJul 25 16:53:34 ip-10-49-38-6.ec2.internal fdbmonitor[3794]: LogGroup=\"default\" Process=\"fdbserver.4500\": Fatal Error: Network connection failed\nJul 25 16:53:34 ip-10-49-38-6.ec2.internal fdbmonitor[3794]: LogGroup=\"default\" Process=\"fdbserver.4500\": Process 21811 exited 1, restarting in 62 seconds\nJul 25 16:53:52 ip-10-49-38-6.ec2.internal dhclient[2694]: XMT: Solicit on eth0, interval 126620ms.\nJul 25 16:54:36 ip-10-49-38-6.ec2.internal fdbmonitor[3794]: LogGroup=\"default\" Process=\"fdbserver.4500\": Launching /usr/sbin/fdbserver (21816) for fdbserver.4500\nJul 25 16:54:36 ip-10-49-38-6.ec2.internal fdbmonitor[3794]: LogGroup=\"default\" Process=\"fdbserver.4500\": Fatal Error: Network connection failed\nJul 25 16:54:36 ip-10-49-38-6.ec2.internal fdbmonitor[3794]: LogGroup=\"default\" Process=\"fdbserver.4500\": Process 21816 exited 1, restarting in 57 seconds\n</code></pre>\n<p>I tried recreating this behavior in another environment (which runs 6.1.8) by blocking port 4500 input and output using iptables on a hunch but was only able to get the following logs which are not the same (and quite frankly are expected:</p>\n<pre><code>Jul 25 20:11:51 ip-10-49-58-13.ec2.internal fdbmonitor[2216]: LogGroup=\"default\" Process=\"fdbserver.4500\": Launching /usr/sbin/fdbserver (2218) for fdbserver.4500\nJul 25 20:11:51 ip-10-49-58-13.ec2.internal fdbmonitor[2216]: LogGroup=\"default\" Process=\"backup_agent.1\": Launching /usr/lib/foundationdb/backup_agent/backup_agent (2217) for backup_agent.1\nJul 25 20:11:51 ip-10-49-58-13.ec2.internal fdbmonitor[2216]: LogGroup=\"default\" Process=\"fdbserver.4503\": Launching /usr/sbin/fdbserver (2221) for fdbserver.4503\nJul 25 20:11:53 ip-10-49-58-13.ec2.internal fdbmonitor[2216]: LogGroup=\"default\" Process=\"fdbserver.4502\": FDBD joined cluster.\nJul 25 20:11:56 ip-10-49-58-13.ec2.internal fdbmonitor[2216]: LogGroup=\"default\" Process=\"fdbserver.4500\": Warning: FDBD has not joined the cluster after 5 seconds.\nJul 25 20:11:56 ip-10-49-58-13.ec2.internal fdbmonitor[2216]: LogGroup=\"default\" Process=\"fdbserver.4500\":   Check configuration and availability using the 'status' command with the fdbcli\nJul 25 20:11:56 ip-10-49-58-13.ec2.internal fdbmonitor[2216]: LogGroup=\"default\" Process=\"fdbserver.4503\": Warning: FDBD has not joined the cluster after 5 seconds.\nJul 25 20:11:56 ip-10-49-58-13.ec2.internal fdbmonitor[2216]: LogGroup=\"default\" Process=\"fdbserver.4503\":   Check configuration and availability using the 'status' command with the fdbcli\nJul 25 20:11:56 ip-10-49-58-13.ec2.internal fdbmonitor[2216]: LogGroup=\"default\" Process=\"fdbserver.4501\": Warning: FDBD has not joined the cluster after 5 seconds.\nJul 25 20:11:56 ip-10-49-58-13.ec2.internal fdbmonitor[2216]: LogGroup=\"default\" Process=\"fdbserver.4501\":   Check configuration and availability using the 'status' command with the fdbcli\n</code></pre>\n<p>I was curious if anybody had any ideas what could have happened as the journald and dmesg log output has nothing useful.</p>\n<p>To be specific what could cause <code>Fatal Error: Network connection failed</code> from a storage class over and over on a coordinator (if that is even relevant here)? I see that this particular error (1026 in the code) is not easily reproducible for me by closing ports via a reject or drop iptables rule.</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-07-25T21:26:16.384Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 278,
        "reads": 85,
        "readers_count": 84,
        "score": 1404.0,
        "yours": false,
        "topic_id": 1537,
        "topic_slug": "all-coordinators-crashed-at-same-time",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/install-on-linux-without-root/1556/2",
            "internal": true,
            "reflection": true,
            "title": "Install on Linux without root?",
            "clicks": 0
          },
          {
            "url": "https://forums.foundationdb.org/t/how-fdb-react-to-too-many-connected-client/3480/3",
            "internal": true,
            "reflection": true,
            "title": "How FDB react to too many connected client",
            "clicks": 0
          },
          {
            "url": "https://forums.foundationdb.org/t/how-fdb-react-to-too-many-connected-client/3480/2",
            "internal": true,
            "reflection": true,
            "title": "How FDB react to too many connected client",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 627,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/all-coordinators-crashed-at-same-time/1537/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 4715,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-07-25T21:36:57.194Z",
        "cooked": "<p>That is\u2026 very strange.</p>\n<p>Can you pastebin your tracelogs from one of the coordinators during this time?  The output from fdbmonitor is too limited to divine what might have happened.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-07-25T21:37:14.256Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 78,
        "readers_count": 77,
        "score": 25.6,
        "yours": false,
        "topic_id": 1537,
        "topic_slug": "all-coordinators-crashed-at-same-time",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/all-coordinators-crashed-at-same-time/1537/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4716,
        "name": "",
        "username": "Dan",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/eada6e/{size}.png",
        "created_at": "2019-07-25T21:41:20.810Z",
        "cooked": "<p>Do you mind if I tar up the logs for each of these processes and attach them via a file sharing link?</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-07-25T21:41:20.810Z",
        "reply_count": 0,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 78,
        "readers_count": 77,
        "score": 15.6,
        "yours": false,
        "topic_id": 1537,
        "topic_slug": "all-coordinators-crashed-at-same-time",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 627,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/all-coordinators-crashed-at-same-time/1537/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4717,
        "name": "",
        "username": "Dan",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/eada6e/{size}.png",
        "created_at": "2019-07-25T21:48:48.571Z",
        "cooked": "<p>Went ahead and uploaded them. It is a tar.gz over two tar.gz files of the different logs from one machine. This file is 59 MB and I apologize about the spammy looking link in advance as it was the first site I found for sharing files without registering (also apparently it deletes itself in 7 days): <a href=\"https://we.tl/t-yVNUFnnp4F\" rel=\"nofollow noopener\">https://we.tl/t-yVNUFnnp4F</a></p>\n<p>If that doesn\u2019t work just let me know what is preferential and I\u2019ll make that work.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-07-25T21:48:48.571Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 76,
        "readers_count": 75,
        "score": 25.2,
        "yours": false,
        "topic_id": 1537,
        "topic_slug": "all-coordinators-crashed-at-same-time",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://we.tl/t-yVNUFnnp4F",
            "internal": false,
            "reflection": false,
            "clicks": 4
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 627,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/all-coordinators-crashed-at-same-time/1537/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4718,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-07-25T22:39:28.120Z",
        "cooked": "<p>Worked for me!</p>\n<pre><code class=\"lang-auto\">&lt;Event Severity=\"20\" Time=\"1564073857.327253\" Type=\"N2_AcceptError\" ID=\"0000000000000000\" SuppressedEventCount=\"0\" Message=\"24\" Machine=\"10.49.38.6:4500\" LogGroup=\"default\" Roles=\"SS\" /&gt;\n&lt;Event Severity=\"40\" Time=\"1564073857.327253\" Type=\"ListenError\" ID=\"0000000000000000\" Error=\"connection_failed\" ErrorDescription=\"Network connection failed\" ErrorCode=\"1026\" Backtrace=\"addr2line -e fdbserver.debug -p -C -f -i 0x1414706 0x1412e77 0x134e1f3 0x134e5f7 0x135b4d9 0x1440d20 0x1440f84 0x465599 0x143fa45 0x143fda7 0x1437abe 0x1438543 0x43a4a7 0x7fa2f3e6202a\" Machine=\"10.49.38.6:4500\" LogGroup=\"default\" Roles=\"SS\" /&gt;\n&lt;Event Severity=\"40\" Time=\"1564073857.327253\" Type=\"StopAfterError\" ID=\"0000000000000000\" Error=\"connection_failed\" ErrorDescription=\"Network connection failed\" ErrorCode=\"1026\" Backtrace=\"addr2line -e fdbserver.debug -p -C -f -i 0x1414706 0x1412e77 0x94cde7 0x94d0f7 0x45cd09 0x52db2d 0x45cd09 0x134e25a 0x134e5f7 0x135b4d9 0x1440d20 0x1440f84 0x465599 0x143fa45 0x143fda7 0x1437abe 0x1438543 0x43a4a7 0x7fa2f3e6202a\" Machine=\"10.49.38.6:4500\" LogGroup=\"default\" Roles=\"SS\" /&gt;\n</code></pre>\n<p>Shows that calling accept() returned error 24, which according to <code>errno.h</code>:</p>\n<pre><code class=\"lang-auto\">#define EMFILE    24  /* Too many open files */\n</code></pre>\n<p>And  <code>man 2 accept</code> says:</p>\n<pre><code class=\"lang-auto\">EMFILE The per-process limit on the number of open file descriptors has been reached.\n</code></pre>\n<p>\u2026 which is a bit strange.  Are you sure that whatever environment you\u2019re running in hasn\u2019t <code>rlimit()</code>'d you down in the number of open file descriptors you can have?</p>\n<p>If you have a coordinator that\u2019s running right now, and you <code>ls -l /proc/&lt;pid&gt;/fd/</code>, do you see anything strange?</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-07-25T22:39:28.120Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 76,
        "readers_count": 75,
        "score": 35.2,
        "yours": false,
        "topic_id": 1537,
        "topic_slug": "all-coordinators-crashed-at-same-time",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 627,
          "username": "Dan",
          "name": "",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/eada6e/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/all-coordinators-crashed-at-same-time/1537/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4719,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-07-25T22:48:28.568Z",
        "cooked": "<p>Thinking about your logs slightly more it does greatly concern me that you were crash looping with this error.</p>\n<p>Having too many open files in a relatively new process would suggest that you were inheriting file descriptors from fdbmonitor, which strongly shouldn\u2019t be happening.  If that is the case, you should be able to see a large number of file descriptors pointing to fdbmontior log files\u2026 or something\u2026 from an fdbserver process.</p>\n<p>However, it\u2019s also odd that this spontaneously happened after your log had rolled 628 times, implying your server had been alive for quite some time, and then happened immediately upon restart many times after that.  This really kind of feels like something was walking along and suddenly applied a rather forceful limit to the number of files each process on this system is allowed to have open\u2026</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-07-25T22:48:28.568Z",
        "reply_count": 1,
        "reply_to_post_number": 5,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 74,
        "readers_count": 73,
        "score": 39.8,
        "yours": false,
        "topic_id": 1537,
        "topic_slug": "all-coordinators-crashed-at-same-time",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/all-coordinators-crashed-at-same-time/1537/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4720,
        "name": "",
        "username": "Dan",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/eada6e/{size}.png",
        "created_at": "2019-07-26T16:02:39.669Z",
        "cooked": "<p>Hey Alex,</p>\n<p>Thanks for taking a look and letting me know it had to do with too many open files as that is a pretty big clue. I have to admit the trace logs look a bit daunting at first.</p>\n<p>I see that the limits of the fdbmonitor show the following:</p>\n<pre><code>Max open files            1024                 4096                 files\n</code></pre>\n<p>And for 4500 since the fdbmonitor started the process it will inherit the limits from it:</p>\n<pre><code>Max open files            1024                 4096                 files\n</code></pre>\n<p>Looking in the <code>fd</code> directories nothing really stands out. A few pipes and a lot of sockets which is kind of expected.</p>\n<p>Here you can download and see an <code>ls</code> from the <code>/proc/&lt;pid&gt;/fd</code> directory for the fdbmonitor and 4500/4501/4502/4503 started by it along with the limits file of each of those processes: <a href=\"https://we.tl/t-e5n6kF2seY\" rel=\"nofollow noopener\">https://we.tl/t-e5n6kF2seY</a></p>\n<p>FDB is really the only thing running on this node and has been running for a few months at least without issue so I\u2019m not sure if something suddenly changed the rlimits (which I doubt) but then makes me question if something went awry and a bunch of new sockets were spawned causing it to exceed the file limits for the process. I\u2019m just really perplexed how that then bubbled into all 5 coordinators in different AZs having the same <code>Too many open files</code> at the same timestamp. Confusion all around!</p>\n<p>However, there is some credence to the thought that something was modified due to failures on restarts. And then magically after another restart (and after the last coordinator in the list was restarted) things returned to normal.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-07-26T16:05:11.689Z",
        "reply_count": 0,
        "reply_to_post_number": 6,
        "quote_count": 0,
        "incoming_link_count": 9,
        "reads": 73,
        "readers_count": 72,
        "score": 59.6,
        "yours": false,
        "topic_id": 1537,
        "topic_slug": "all-coordinators-crashed-at-same-time",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://we.tl/t-e5n6kF2seY",
            "internal": false,
            "reflection": false,
            "clicks": 3
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 627,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/all-coordinators-crashed-at-same-time/1537/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4721,
        "name": "",
        "username": "Dan",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/eada6e/{size}.png",
        "created_at": "2019-07-26T19:28:40.471Z",
        "cooked": "<p>So this definitely is related to the amount of open file handles as I tried doing the following:</p>\n<ol>\n<li>prlimit --pid &lt;fdb_monitor_pid&gt; --nofile=50:50</li>\n<li>kill &lt;pid_of_4500&gt;</li>\n</ol>\n<p>Then when fdbmonitor tries to restart 4500 it dies with the <code>Fatal Error: Network connection failed</code>.</p>\n<p>But the logs prior to this actual incidence did not show any restart attempts by the fdbmonitor of the child processes and just started with:</p>\n<pre><code>Jul 25 16:50:30 ip-10-49-38-40.ec2.internal fdbmonitor[3779]: LogGroup=\"default\" Process=\"fdbserver.4500\": Fatal Error: Network connection failed\n</code></pre>\n<p>Still really perplexed.</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-07-26T19:29:27.744Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 68,
        "readers_count": 67,
        "score": 33.6,
        "yours": false,
        "topic_id": 1537,
        "topic_slug": "all-coordinators-crashed-at-same-time",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 627,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/all-coordinators-crashed-at-same-time/1537/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4725,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-07-27T02:31:37.097Z",
        "cooked": "<p>In a <em>cough cough</em> hypothetical environment where FDB stably runs large workloads, I have:</p>\n<pre><code class=\"lang-auto\">$ ulimit -n\n262144\n</code></pre>\n<p>and an arbitrarily chosen process shows:</p>\n<pre><code class=\"lang-auto\">$ sudo ls -l /proc/3611/fd | wc -l\n1116\n</code></pre>\n<p>So this would be why I haven\u2019t seen this happen, personally.  People with other large FDB deployments, <a class=\"mention\" href=\"/u/mrz\">@mrz</a> / <a class=\"mention\" href=\"/u/markus.pilman\">@markus.pilman</a>, I assume you\u2019ve had to adjust the allowable number of file descriptors upwards as well?  If so, we need to get this loudly added to our docs, and probably as a warning in fdbcli status.</p>\n<p>All clients and fdbserver processes can (and will, at some point) connect to a coordinator.  I\u2019m going to assume that you\u2019ve grown your usage to the point where having ~1000 processes connected to a coordinator is possible, and thus you hit your limit?  If so, this could make a lot of sense, otherwise, I need to keep pondering\u2026</p>\n<p>The behavior here of coordinators (or what would soon also be the cluster controller) crash looping is clearly suboptimal.  I never mentally connected before that the linux default for number of file descriptors is relatively low, and keeping a connection open to every client or process would quickly burn through that for a large cluster.  This can be changed to not crash and reject connections, but that\u2019s not\u2026 always going to be a better solution.  (If clients take up the first 1024 slots of connections, then no fdbserver processes will be able to join the cluster for there to actually be an FDB cluster.)</p>\n<p>I\u2019ll ask around with more ops-related folks to see if there\u2019s something wiser to do here.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-07-27T02:32:32.217Z",
        "reply_count": 2,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 8,
        "reads": 67,
        "readers_count": 66,
        "score": 63.4,
        "yours": false,
        "topic_id": 1537,
        "topic_slug": "all-coordinators-crashed-at-same-time",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 627,
          "username": "Dan",
          "name": "",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/eada6e/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/all-coordinators-crashed-at-same-time/1537/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4726,
        "name": "matthew zeier",
        "username": "mrz",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mrz/{size}/26_2.png",
        "created_at": "2019-07-27T04:08:26.311Z",
        "cooked": "<p>We do have \u201cmax\u201d file descriptors and no default unlimit settings.  And a lot of TCP sysctl settings.</p>\n<p>Slide 17 in <a href=\"https://docs.google.com/presentation/d/16Y8XRg2P0XTlssYBAvLA7UpRTuwZemQLnbnIJACExBg\" rel=\"nofollow noopener\">2018\u2019s summit talk</a> has some of those.</p>\n<p>YMMV - my environment isn\u2019t hypothetical <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=9\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"></p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-07-27T04:08:26.311Z",
        "reply_count": 0,
        "reply_to_post_number": 9,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 61,
        "readers_count": 60,
        "score": 12.2,
        "yours": false,
        "topic_id": 1537,
        "topic_slug": "all-coordinators-crashed-at-same-time",
        "display_username": "matthew zeier",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://docs.google.com/presentation/d/16Y8XRg2P0XTlssYBAvLA7UpRTuwZemQLnbnIJACExBg",
            "internal": false,
            "reflection": false,
            "clicks": 12
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 26,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/all-coordinators-crashed-at-same-time/1537/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4727,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2019-07-27T15:24:38.869Z",
        "cooked": "<p>Ah yes, running out of file descriptors\u2026</p>\n<p>It took us quite a while to run into this issue (also because we do set the <code>ulimit</code> numbers higher by default). In our case only some random coordinator would occasionally run out of file descriptors (and this was also a storage node - which made debugging even weirder). I think the reason it behaved less deterministic is because on AWS ping latencies over 1s happen relatively often and therefore not all clients are connected at all times.</p>\n<p>As you said, setting the <code>ulimit</code> is probably something we should document at a very prominent place. One thing that makes this also weird is that <code>fdbmonitor</code> by default runs as <code>root</code> and the <code>fdbserver</code> server process runs as an other user (or at least should run as another user than root). The limits are different for each of them.</p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-07-27T15:24:38.869Z",
        "reply_count": 0,
        "reply_to_post_number": 9,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 61,
        "readers_count": 60,
        "score": 12.2,
        "yours": false,
        "topic_id": 1537,
        "topic_slug": "all-coordinators-crashed-at-same-time",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/all-coordinators-crashed-at-same-time/1537/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4728,
        "name": "",
        "username": "Dan",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/eada6e/{size}.png",
        "created_at": "2019-07-27T15:38:07.276Z",
        "cooked": "<p>So my biggest takeaway going forward is that we will set file descriptor limits at 32768 (something a lot larger than 1024/4096) or so at a minimum for the fdbmonitor so the child processes can inherit that.</p>\n<p>However, I\u2019m still really curious how all 5 coordinators tipped over at the same time and why restarting them didn\u2019t seem to clear anything up until they were all restarted? It just seemed very errant as I\u2019d expect to lose a random coordinator here or there with such a small ulimit.</p>\n<p>But I will definitely second adding a note to increase ulimits to the docs and maybe a note about this particular exception because the error is misleading at first glance?</p>\n<p>Also maybe ship a larger LimitNOFILE setting in the systemd service file for foundationdb? Or mention that a /etc/systemd/system/servicename.d/override.conf can be made containing the following to survive upgrades?</p>\n<pre><code>[Service]\nLimitNOFILE=65536</code></pre>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-07-27T15:40:11.773Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 61,
        "readers_count": 60,
        "score": 27.2,
        "yours": false,
        "topic_id": 1537,
        "topic_slug": "all-coordinators-crashed-at-same-time",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 627,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/all-coordinators-crashed-at-same-time/1537/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4734,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-07-29T01:55:53.296Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"Dan\" data-post=\"12\" data-topic=\"1537\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/d/eada6e/48.png\" class=\"avatar\"> Dan:</div>\n<blockquote>\n<p>However, I\u2019m still really curious how all 5 coordinators tipped over at the same time and why restarting them didn\u2019t seem to clear anything up until they were all restarted? It just seemed very errant as I\u2019d expect to lose a random coordinator here or there with such a small ulimit.</p>\n</blockquote>\n</aside>\n<p>Client read from the coordinators to figure out how to connect to the rest of the cluster.  Clients do a quorum read, which involves connecting to all the coordinators.  So as soon as your number of fdbserver processes and client processes exceeded 1024, then the 1025th connection caused all your coordinators to crash.  When they came back up, the 1025 processes would try reconnect, and thus trigger the issue again.  I assume that whatever you did to fully restart your FDB server also reduced the number of clients or servers?</p>\n<aside class=\"quote no-group\" data-username=\"Dan\" data-post=\"12\" data-topic=\"1537\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/d/eada6e/48.png\" class=\"avatar\"> Dan:</div>\n<blockquote>\n<p>But I will definitely second adding a note to increase ulimits to the docs and maybe a note about this particular exception because the error is misleading at first glance?</p>\n</blockquote>\n</aside>\n<p>We\u2019re about to cut a 6.2 release, so I will probably not try to back port the warnings to 6.1, but I\u2019ll work on getting something merged to loudly warn about file descriptor limits.  6.2 already has some more changes to connection management that should lessen how many connections coordinators have at any time.</p>\n<aside class=\"quote no-group\" data-username=\"Dan\" data-post=\"12\" data-topic=\"1537\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/d/eada6e/48.png\" class=\"avatar\"> Dan:</div>\n<blockquote>\n<p>Also maybe ship a larger LimitNOFILE setting in the systemd service file for foundationdb? Or mention that a /etc/systemd/system/servicename.d/override.conf can be made containing the following to survive upgrades?</p>\n<pre><code class=\"lang-auto\">[Service]\nLimitNOFILE=65536\n</code></pre>\n</blockquote>\n</aside>\n<p>This is a great idea, that I had not thought of.  I\u2019ll do that.  Thanks!</p>",
        "post_number": 13,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-07-29T01:55:53.296Z",
        "reply_count": 1,
        "reply_to_post_number": 12,
        "quote_count": 1,
        "incoming_link_count": 8,
        "reads": 57,
        "readers_count": 56,
        "score": 56.4,
        "yours": false,
        "topic_id": 1537,
        "topic_slug": "all-coordinators-crashed-at-same-time",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/all-coordinators-crashed-at-same-time/1537/13",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4737,
        "name": "",
        "username": "Dan",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/eada6e/{size}.png",
        "created_at": "2019-07-29T15:26:15.855Z",
        "cooked": "<p>Hey Alex,</p>\n<p>Thanks for clearing that up \u2013 that actually makes a lot of sense and I just wasn\u2019t putting the pieces together that the quorum read caused all the coordinators to crash when 1024 was exceeded in this sort of cascading way.</p>\n<p>I restarted every FDB server in that cluster which probably contributed to lowering the connection count along with the applications reading/writing to FDB giving up on retries. Going forward I\u2019ll increase the limits for FDB and hopefully never see this again (at least in the same way across all the coordinators <img src=\"https://emoji.discourse-cdn.com/twitter/sweat_smile.png?v=9\" title=\":sweat_smile:\" class=\"emoji\" alt=\":sweat_smile:\">)</p>\n<p>Looking forward to the changes in 6.2 and some pre-flight checks would be useful \u2013 thinking of how k8s won\u2019t even start if swap is on \u2013 FDB could fail to start warning that xyz is too low of a FD limit or at least just spit out some loud warnings as you mentioned.</p>\n<p>Anyway thanks again!</p>",
        "post_number": 14,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-07-29T15:26:15.855Z",
        "reply_count": 1,
        "reply_to_post_number": 13,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 54,
        "readers_count": 53,
        "score": 45.8,
        "yours": false,
        "topic_id": 1537,
        "topic_slug": "all-coordinators-crashed-at-same-time",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 627,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/all-coordinators-crashed-at-same-time/1537/14",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5043,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-09-09T23:32:55.551Z",
        "cooked": "<p>I had forgotten about this for a bit, but I\u2019ve finally filed an issue for it <a href=\"https://github.com/apple/foundationdb/issues/2077\" rel=\"nofollow noopener\">#2077</a> to make sure that it does actually get addressed.  Coincidentally, 6.2 addressed some connection scaling issues. Clients will now drop connections to coordinators after bootstrapping, which should help reduce the chance of this being a problem, but definitely something we still need to highlight as an availability concern.</p>",
        "post_number": 15,
        "post_type": 1,
        "posts_count": 15,
        "updated_at": "2019-09-09T23:32:55.551Z",
        "reply_count": 0,
        "reply_to_post_number": 14,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 48,
        "readers_count": 47,
        "score": 14.6,
        "yours": false,
        "topic_id": 1537,
        "topic_slug": "all-coordinators-crashed-at-same-time",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/issues/2077",
            "internal": false,
            "reflection": false,
            "title": "HIghlight file descriptor limit as an operational concern \u00b7 Issue #2077 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 21
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 627,
          "username": "Dan",
          "name": "",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/eada6e/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/all-coordinators-crashed-at-same-time/1537/15",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      4714,
      4715,
      4716,
      4717,
      4718,
      4719,
      4720,
      4721,
      4725,
      4726,
      4727,
      4728,
      4734,
      4737,
      5043
    ]
  },
  "timeline_lookup": [
    [
      1,
      2280
    ],
    [
      7,
      2279
    ],
    [
      11,
      2278
    ],
    [
      13,
      2277
    ],
    [
      14,
      2276
    ],
    [
      15,
      2234
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "All Coordinators Crashed At Same Time",
  "id": 1537,
  "title": "All Coordinators Crashed At Same Time",
  "posts_count": 15,
  "created_at": "2019-07-25T21:19:54.522Z",
  "views": 2138,
  "reply_count": 10,
  "like_count": 0,
  "last_posted_at": "2019-09-09T23:32:55.551Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "all-coordinators-crashed-at-same-time",
  "category_id": 7,
  "word_count": 3020,
  "deleted_at": null,
  "user_id": 627,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_1537",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 15,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 4,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Foundationdb seems keep reinitialising itself after client hang",
      "id": 1437,
      "title": "Foundationdb seems keep reinitialising itself after client hang",
      "slug": "foundationdb-seems-keep-reinitialising-itself-after-client-hang",
      "posts_count": 6,
      "reply_count": 2,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2019-06-10T10:10:13.209Z",
      "last_posted_at": "2019-06-26T18:08:03.629Z",
      "bumped": true,
      "bumped_at": "2019-06-26T18:08:03.629Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 1222,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 602,
            "username": "ppggff",
            "name": "ppggff",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ppggff/{size}/855_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Segmentation fault error and broken cluster",
      "id": 483,
      "title": "Segmentation fault error and broken cluster",
      "slug": "segmentation-fault-error-and-broken-cluster",
      "posts_count": 17,
      "reply_count": 12,
      "highest_post_number": 17,
      "image_url": null,
      "created_at": "2018-05-31T15:34:28.123Z",
      "last_posted_at": "2018-06-11T17:31:13.656Z",
      "bumped": true,
      "bumped_at": "2018-06-11T17:31:13.656Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 4331,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 211,
            "username": "brk0v",
            "name": "Viacheslav Biriukov",
            "avatar_template": "/user_avatar/forums.foundationdb.org/brk0v/{size}/173_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 156,
            "username": "spullara",
            "name": "Sam Pullara",
            "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Database unavailable after shutting down a foundationdb node",
      "id": 2113,
      "title": "Database unavailable after shutting down a foundationdb node",
      "slug": "database-unavailable-after-shutting-down-a-foundationdb-node",
      "posts_count": 18,
      "reply_count": 8,
      "highest_post_number": 18,
      "image_url": null,
      "created_at": "2020-05-11T16:09:39.373Z",
      "last_posted_at": "2021-02-05T22:16:50.767Z",
      "bumped": true,
      "bumped_at": "2021-02-05T22:18:40.780Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 3,
      "views": 8569,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 714,
            "username": "tuk",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/b5ac83/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 810,
            "username": "amanda",
            "name": "Amanda",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/67e7ee/{size}.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "How are &lsquo;contributing_workers&rsquo; computed?",
      "id": 360,
      "title": "How are 'contributing_workers' computed?",
      "slug": "how-are-contributing-workers-computed",
      "posts_count": 20,
      "reply_count": 13,
      "highest_post_number": 20,
      "image_url": null,
      "created_at": "2018-05-07T00:53:18.538Z",
      "last_posted_at": "2018-05-12T07:19:34.562Z",
      "bumped": true,
      "bumped_at": "2018-05-12T07:19:34.562Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 6,
      "views": 1986,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 236,
            "username": "marctrem",
            "name": "Marc-Andr\u00e9 Tremblay",
            "avatar_template": "/user_avatar/forums.foundationdb.org/marctrem/{size}/208_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 54,
            "username": "Evan",
            "name": "Evan Tschannen",
            "avatar_template": "/user_avatar/forums.foundationdb.org/evan/{size}/104_2.png",
            "moderator": true,
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 156,
            "username": "spullara",
            "name": "Sam Pullara",
            "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 247,
            "username": "Chr1st0ph",
            "name": "Chr1st0ph",
            "avatar_template": "/user_avatar/forums.foundationdb.org/chr1st0ph/{size}/353_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 118,
            "username": "abdullin",
            "name": "Rinat Abdullin",
            "avatar_template": "/user_avatar/forums.foundationdb.org/abdullin/{size}/83_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Troubles scaling up the cluster",
      "id": 751,
      "title": "Troubles scaling up the cluster",
      "slug": "troubles-scaling-up-the-cluster",
      "posts_count": 32,
      "reply_count": 26,
      "highest_post_number": 32,
      "image_url": null,
      "created_at": "2018-10-08T03:24:54.004Z",
      "last_posted_at": "2018-11-01T16:26:01.527Z",
      "bumped": true,
      "bumped_at": "2018-11-01T16:26:01.527Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 3747,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 311,
            "username": "ThomasJ",
            "name": "Thomas Johson",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 15,
            "username": "markus.pilman",
            "name": "Markus Pilman",
            "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 255,
            "username": "aqua",
            "name": "Matt Lohier",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/b9bd4f/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 627,
        "username": "Dan",
        "name": "",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/eada6e/{size}.png",
        "post_count": 7,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 6,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 15,
        "username": "markus.pilman",
        "name": "Markus Pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 26,
        "username": "mrz",
        "name": "matthew zeier",
        "avatar_template": "/user_avatar/forums.foundationdb.org/mrz/{size}/26_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      }
    ],
    "created_by": {
      "id": 627,
      "username": "Dan",
      "name": "",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/eada6e/{size}.png"
    },
    "last_poster": {
      "id": 13,
      "username": "alexmiller",
      "name": "Alex Miller",
      "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
    },
    "links": [
      {
        "url": "https://github.com/apple/foundationdb/issues/2077",
        "title": "HIghlight file descriptor limit as an operational concern \u00b7 Issue #2077 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 21,
        "user_id": 13,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://docs.google.com/presentation/d/16Y8XRg2P0XTlssYBAvLA7UpRTuwZemQLnbnIJACExBg",
        "title": null,
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 12,
        "user_id": 26,
        "domain": "docs.google.com",
        "root_domain": "google.com"
      },
      {
        "url": "https://we.tl/t-yVNUFnnp4F",
        "title": null,
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 4,
        "user_id": 627,
        "domain": "we.tl",
        "root_domain": "we.tl"
      },
      {
        "url": "https://we.tl/t-e5n6kF2seY",
        "title": null,
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 627,
        "domain": "we.tl",
        "root_domain": "we.tl"
      }
    ]
  },
  "bookmarks": []
}