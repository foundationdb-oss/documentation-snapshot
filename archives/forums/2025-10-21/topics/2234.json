{
  "post_stream": {
    "posts": [
      {
        "id": 7541,
        "name": "",
        "username": "v-pap",
        "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png",
        "created_at": "2020-07-08T13:46:58.461Z",
        "cooked": "<p>Continuing the discussion from here <a href=\"https://forums.foundationdb.org/t/cpu-limited-storage-processes/2140\" class=\"inline-onebox\">CPU limited storage processes</a>, unfortunately I still have several problems with my FoundationDB cluster.</p>\n<ol>\n<li>The fdb cluster worked perfectly until at some point 3-5 days after the cluster was deployed and scaled up, one of the storage processes got progressively increasing data lag (now at ~1h) from which it never recovered.</li>\n<li>After several hours, another storage process seems to have sustained high CPU load without the data lag</li>\n<li>Disk IO wise the cluster seems healthy, with storage processes having about 30-40% load and the logs having about 60-80% load</li>\n<li>The CPU load on the storage processes is 50-85% with 2 processes stuck at 85%</li>\n<li>Because of the increased <code>moving data in flight</code> and  <code>moving data in queue</code> metrics 1GB and 20GB respectively, I added two process knobs in order to speed up the repartitioning, which so far hasn\u2019t made any noticeable difference:</li>\n</ol>\n<pre><code class=\"lang-auto\">customParameters:\n      - knob_relocation_parallelism_per_source_server=4\n      - knob_fetch_keys_parallelism_bytes=5e6\n</code></pre>\n<p>Questions:</p>\n<ol>\n<li>Does storage server performance degrades considerably as ssds store more and more data even though they are far from being full?</li>\n<li>Are there any other knobs that would help in a situation like that?</li>\n<li>What would be a recovery plan for a situation that I described above? Just add more storage servers and wait?</li>\n<li>Which are the most common pitfalls design wise which lead to high CPU load?</li>\n</ol>\n<p>Here are some details:</p>\n<ol>\n<li>When the data lag started</li>\n</ol>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://global.discourse-cdn.com/foundationdb/original/1X/e472648513de0e881bd62213804d5e43f9510ace.png\" data-download-href=\"/uploads/short-url/wAVWNDucsggkckyuNSAlciRZEv4.png?dl=1\" title=\"8AM\" rel=\"nofollow noopener\"><img src=\"https://global.discourse-cdn.com/foundationdb/optimized/1X/e472648513de0e881bd62213804d5e43f9510ace_2_690x382.png\" alt=\"8AM\" data-base62-sha1=\"wAVWNDucsggkckyuNSAlciRZEv4\" width=\"690\" height=\"382\" srcset=\"https://global.discourse-cdn.com/foundationdb/optimized/1X/e472648513de0e881bd62213804d5e43f9510ace_2_690x382.png, https://global.discourse-cdn.com/foundationdb/optimized/1X/e472648513de0e881bd62213804d5e43f9510ace_2_1035x573.png 1.5x, https://global.discourse-cdn.com/foundationdb/optimized/1X/e472648513de0e881bd62213804d5e43f9510ace_2_1380x764.png 2x\" data-small-upload=\"https://global.discourse-cdn.com/foundationdb/optimized/1X/e472648513de0e881bd62213804d5e43f9510ace_2_10x10.png\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use xlink:href=\"#far-image\"></use></svg><span class=\"filename\">8AM</span><span class=\"informations\">1894\u00d71051 189 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use xlink:href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<ol start=\"2\">\n<li>After one day of waiting</li>\n</ol>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://global.discourse-cdn.com/foundationdb/original/1X/234d9617f8c4d851f4ce101d261a06608086d3f6.png\" data-download-href=\"/uploads/short-url/52iWeSkfnCW2AQ2lx9GX5IHY7MG.png?dl=1\" title=\"11AM\" rel=\"nofollow noopener\"><img src=\"https://global.discourse-cdn.com/foundationdb/optimized/1X/234d9617f8c4d851f4ce101d261a06608086d3f6_2_690x376.png\" alt=\"11AM\" data-base62-sha1=\"52iWeSkfnCW2AQ2lx9GX5IHY7MG\" width=\"690\" height=\"376\" srcset=\"https://global.discourse-cdn.com/foundationdb/optimized/1X/234d9617f8c4d851f4ce101d261a06608086d3f6_2_690x376.png, https://global.discourse-cdn.com/foundationdb/optimized/1X/234d9617f8c4d851f4ce101d261a06608086d3f6_2_1035x564.png 1.5x, https://global.discourse-cdn.com/foundationdb/optimized/1X/234d9617f8c4d851f4ce101d261a06608086d3f6_2_1380x752.png 2x\" data-small-upload=\"https://global.discourse-cdn.com/foundationdb/optimized/1X/234d9617f8c4d851f4ce101d261a06608086d3f6_2_10x10.png\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use xlink:href=\"#far-image\"></use></svg><span class=\"filename\">11AM</span><span class=\"informations\">1880\u00d71027 205 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use xlink:href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<ol start=\"3\">\n<li>The cluster now</li>\n</ol>\n<pre><code class=\"lang-auto\">Using cluster file `/var/dynamic-conf/fdb.cluster'.\n\nThe database is available, but has issues (type 'status' for more information).\n\nWelcome to the fdbcli. For help, type `help'.\nfdb&gt; status details\n\nUsing cluster file `/var/dynamic-conf/fdb.cluster'.\n\nUnable to start batch priority transaction after 5 seconds.\n\nConfiguration:\n  Redundancy mode        - triple\n  Storage engine         - ssd-2\n  Coordinators           - 5\n  Desired Proxies        - 3\n  Desired Resolvers      - 1\n  Desired Logs           - 3\n\nCluster:\n  FoundationDB processes - 22\n  Zones                  - 22\n  Machines               - 22\n  Memory availability    - 6.8 GB per process on machine with least available\n  Retransmissions rate   - 2 Hz\n  Fault Tolerance        - 2 machines\n  Server time            - 07/08/20 13:41:03\n\nData:\n  Replication health     - Healthy (Repartitioning)\n  Moving data            - 22.368 GB\n  Sum of key-value sizes - 176.738 GB\n  Disk space used        - 666.725 GB\n\nOperating space:\n  Storage server         - 271.3 GB free on most full server\n  Log server             - 272.5 GB free on most full server\n\nWorkload:\n  Read rate              - 787 Hz\n  Write rate             - 46351 Hz\n  Transactions started   - 58 Hz\n  Transactions committed - 48 Hz\n  Conflict rate          - 0 Hz\n\nBackup and DR:\n  Running backups        - 0\n  Running DRs            - 0\n\nProcess performance details:\n  10.112.1.3:4501        ( 51% cpu; 34% machine; 0.009 Gbps; 25% disk IO; 3.3 GB / 7.2 GB RAM  )\n  10.112.2.75:4501       (  1% cpu; 19% machine; 0.000 Gbps;  0% disk IO; 0.3 GB / 9.0 GB RAM  )\n  10.112.2.76:4501       ( 12% cpu; 27% machine; 0.067 Gbps;  0% disk IO; 0.4 GB / 9.1 GB RAM  )\n  10.112.3.3:4501        ( 86% cpu; 55% machine; 0.017 Gbps; 29% disk IO; 3.6 GB / 6.8 GB RAM  )\n  10.112.17.6:4501       ( 54% cpu; 30% machine; 0.012 Gbps; 27% disk IO; 3.4 GB / 7.2 GB RAM  )\n  10.112.18.6:4501       (  6% cpu;  6% machine; 0.036 Gbps; 60% disk IO; 2.0 GB / 7.2 GB RAM  )\n  10.112.19.6:4501       ( 61% cpu; 32% machine; 0.013 Gbps; 33% disk IO; 3.4 GB / 7.2 GB RAM  )\n  10.112.21.3:4501       (  6% cpu; 19% machine; 0.045 Gbps; 38% disk IO; 1.9 GB / 7.2 GB RAM  )\n  10.112.22.6:4501       ( 54% cpu; 36% machine; 0.010 Gbps; 30% disk IO; 3.5 GB / 7.1 GB RAM  )\n  10.112.23.4:4501       ( 88% cpu; 55% machine; 0.019 Gbps; 24% disk IO; 3.7 GB / 7.2 GB RAM  )\n  10.112.24.7:4501       ( 80% cpu; 43% machine; 0.014 Gbps; 32% disk IO; 3.9 GB / 7.1 GB RAM  )\n  10.112.26.3:4501       (  8% cpu; 20% machine; 0.036 Gbps; 63% disk IO; 2.0 GB / 7.2 GB RAM  )\n  10.112.27.7:4501       ( 84% cpu; 51% machine; 0.015 Gbps; 29% disk IO; 3.6 GB / 7.1 GB RAM  )\n  10.112.28.3:4501       (  1% cpu; 16% machine; 0.000 Gbps;  0% disk IO; 0.3 GB / 7.1 GB RAM  )\n  10.112.97.10:4501      (  1% cpu; 18% machine; 0.000 Gbps;  0% disk IO; 0.3 GB / 7.2 GB RAM  )\n  10.112.98.253:4501     (  2% cpu; 22% machine; 0.000 Gbps;  0% disk IO; 0.3 GB / 9.2 GB RAM  )\n  10.112.98.254:4501     (  1% cpu; 21% machine; 0.000 Gbps;  0% disk IO; 0.3 GB / 9.2 GB RAM  )\n  10.112.140.7:4501      ( 14% cpu; 29% machine; 0.054 Gbps;  0% disk IO; 0.3 GB / 8.3 GB RAM  )\n  10.112.140.8:4501      (  3% cpu; 30% machine; 0.001 Gbps;  1% disk IO; 0.3 GB / 8.2 GB RAM  )\n  10.112.140.64:4501     (  9% cpu; 27% machine; 0.032 Gbps;  1% disk IO; 0.3 GB / 8.2 GB RAM  )\n  10.112.142.24:4501     ( 12% cpu; 19% machine; 0.065 Gbps;  0% disk IO; 0.3 GB / 9.2 GB RAM  )\n  10.112.142.25:4501     (  3% cpu; 19% machine; 0.001 Gbps;  0% disk IO; 0.3 GB / 9.2 GB RAM  )\n\nCoordination servers:\n  10.112.1.3:4501  (reachable)\n  10.112.17.6:4501  (reachable)\n  10.112.23.4:4501  (reachable)\n  10.112.26.3:4501  (reachable)\n  10.112.28.3:4501  (reachable)\n\nClient time: 07/08/20 13:40:58\n\nfdb&gt; setclass\nThere are currently 22 processes in the database:\n  10.112.1.3:4501: storage (command_line)\n  10.112.2.75:4501: stateless (command_line)\n  10.112.2.76:4501: stateless (command_line)\n  10.112.3.3:4501: storage (command_line)\n  10.112.17.6:4501: storage (command_line)\n  10.112.18.6:4501: log (command_line)\n  10.112.19.6:4501: storage (command_line)\n  10.112.21.3:4501: log (command_line)\n  10.112.22.6:4501: storage (command_line)\n  10.112.23.4:4501: storage (command_line)\n  10.112.24.7:4501: storage (command_line)\n  10.112.26.3:4501: log (command_line)\n  10.112.27.7:4501: storage (command_line)\n  10.112.28.3:4501: log (command_line)\n  10.112.97.10:4501: stateless (command_line)\n  10.112.98.253:4501: stateless (command_line)\n  10.112.98.254:4501: stateless (command_line)\n  10.112.140.7:4501: stateless (command_line)\n  10.112.140.8:4501: stateless (command_line)\n  10.112.140.64:4501: stateless (command_line)\n  10.112.142.24:4501: stateless (command_line)\n  10.112.142.25:4501: stateless (command_line)\n\n</code></pre>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 23,
        "updated_at": "2020-07-08T13:46:58.461Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 638,
        "reads": 105,
        "readers_count": 104,
        "score": 3211.0,
        "yours": false,
        "topic_id": 2234,
        "topic_slug": "storage-server-cpu-bottleneck-growing-data-lag",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/cpu-limited-storage-processes/2140",
            "internal": true,
            "reflection": false,
            "title": "CPU limited storage processes",
            "clicks": 19
          },
          {
            "url": "https://global.discourse-cdn.com/foundationdb/original/1X/234d9617f8c4d851f4ce101d261a06608086d3f6.png",
            "internal": false,
            "reflection": false,
            "title": "234d9617f8c4d851f4ce101d261a06608086d3f6.png",
            "clicks": 0
          },
          {
            "url": "https://global.discourse-cdn.com/foundationdb/original/1X/e472648513de0e881bd62213804d5e43f9510ace.png",
            "internal": false,
            "reflection": false,
            "title": "e472648513de0e881bd62213804d5e43f9510ace.png",
            "clicks": 0
          },
          {
            "url": "https://forums.foundationdb.org/t/fdb-degraded-log-processes-what-does-degraded-mean/2352",
            "internal": true,
            "reflection": true,
            "title": "FDB degraded log processes. What does degraded mean?",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 744,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-cpu-bottleneck-growing-data-lag/2234/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 7542,
        "name": "gaurav",
        "username": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "created_at": "2020-07-08T14:10:53.026Z",
        "cooked": "<p>Is it possible that the write load is saturating one of the SS just above the edge and causing it to fall behind?</p>\n<p>While high cpu% could indicate that the SS is not getting free cycles to perform the writes, but at 85% cpu, there should be enough remaining for SS to not be starved.</p>\n<p>How does the disk io activity look like (iostat -x 2)? It might be good to rule out the disk saturation (use fio to benchmark disk iops) before going to other aspects like read/write hotspots and cpu saturation.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 23,
        "updated_at": "2020-07-08T15:16:52.598Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 10,
        "reads": 94,
        "readers_count": 93,
        "score": 73.8,
        "yours": false,
        "topic_id": 2234,
        "topic_slug": "storage-server-cpu-bottleneck-growing-data-lag",
        "display_username": "gaurav",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/scaling-issues-with-fdb-for-write-throughput/2327/6",
            "internal": true,
            "reflection": true,
            "title": "Scaling issues with FDB for write throughput",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 166,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-cpu-bottleneck-growing-data-lag/2234/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7543,
        "name": "",
        "username": "v-pap",
        "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png",
        "created_at": "2020-07-08T14:46:05.009Z",
        "cooked": "<p>Here is the load of the SS which is lagging behind with <code>iostat -x 2</code>:</p>\n<pre><code class=\"lang-auto\">Linux 4.19.112+ (gke-dogfood-io5-1ff82003-tw3d)         07/08/20        _x86_64_        (2 CPU)\n\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n          32.24    0.01    5.40    3.12    0.00   59.24\n\nDevice:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nsdb               0.01 13698.38   49.96 6772.36   199.90 81881.90    24.06     2.30    0.35    0.19    0.35   0.04  24.23\nsda               0.03     0.90    0.07    1.94     1.98    22.14    23.94     0.01    4.92    3.05    4.99   0.89   0.18\ndm-0              0.00     0.00    0.01    0.00     0.54     0.00    88.37     0.00    5.74    5.74    0.00   1.96   0.00\n\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n          40.97    0.00    6.11    2.29    0.00   50.64\n\nDevice:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nsdb               0.00 18843.00   20.50 9046.50    82.00 111544.00    24.62     3.32    0.40    0.20    0.40   0.03  29.25\nsda               0.00     0.00    0.00    1.50     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00\ndm-0              0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00\n\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n          36.99    0.00    5.36    3.06    0.00   54.59\n\nDevice:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nsdb               0.00 19435.00   15.00 9852.50    60.00 117126.00    23.75     3.34    0.40    0.20    0.40   0.03  32.55\nsda               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00\ndm-0              0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00\n</code></pre>\n<p>Which I don\u2019t think is straining the GCE local SCSI SSD at all.<br>\nHere is a list of the GCE specs for the drives:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://global.discourse-cdn.com/foundationdb/original/1X/e1fdff192a9d3d18e0f875394999c1d83c56e6ad.png\" data-download-href=\"/uploads/short-url/wfdCb7a6b1zd4zbIptJj05jfcN7.png?dl=1\" title=\"ssds\" rel=\"nofollow noopener\"><img src=\"https://global.discourse-cdn.com/foundationdb/optimized/1X/e1fdff192a9d3d18e0f875394999c1d83c56e6ad_2_690x426.png\" alt=\"ssds\" data-base62-sha1=\"wfdCb7a6b1zd4zbIptJj05jfcN7\" width=\"690\" height=\"426\" srcset=\"https://global.discourse-cdn.com/foundationdb/optimized/1X/e1fdff192a9d3d18e0f875394999c1d83c56e6ad_2_690x426.png, https://global.discourse-cdn.com/foundationdb/original/1X/e1fdff192a9d3d18e0f875394999c1d83c56e6ad.png 1.5x, https://global.discourse-cdn.com/foundationdb/original/1X/e1fdff192a9d3d18e0f875394999c1d83c56e6ad.png 2x\" data-small-upload=\"https://global.discourse-cdn.com/foundationdb/optimized/1X/e1fdff192a9d3d18e0f875394999c1d83c56e6ad_2_10x10.png\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use xlink:href=\"#far-image\"></use></svg><span class=\"filename\">ssds</span><span class=\"informations\">981\u00d7606 55.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use xlink:href=\"#discourse-expand\"></use></svg></div></a></div></p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 23,
        "updated_at": "2020-07-08T14:46:40.944Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 92,
        "readers_count": 91,
        "score": 38.4,
        "yours": false,
        "topic_id": 2234,
        "topic_slug": "storage-server-cpu-bottleneck-growing-data-lag",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://global.discourse-cdn.com/foundationdb/original/1X/e1fdff192a9d3d18e0f875394999c1d83c56e6ad.png",
            "internal": false,
            "reflection": false,
            "title": "e1fdff192a9d3d18e0f875394999c1d83c56e6ad.png",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 166,
          "username": "gaurav",
          "name": "gaurav",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 744,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-cpu-bottleneck-growing-data-lag/2234/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7544,
        "name": "gaurav",
        "username": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "created_at": "2020-07-08T15:09:24.569Z",
        "cooked": "<p>Disk io looks fine. But is this storage server constantly writing more than 100MB/s and still behind? That seems like a lot of write throughput. Are the other healthy SS doing similar amount of writes?</p>\n<p>Can you check the iostat output over longer duration?</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 23,
        "updated_at": "2020-07-08T15:09:37.801Z",
        "reply_count": 1,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 86,
        "readers_count": 85,
        "score": 22.2,
        "yours": false,
        "topic_id": 2234,
        "topic_slug": "storage-server-cpu-bottleneck-growing-data-lag",
        "display_username": "gaurav",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 744,
          "username": "v-pap",
          "name": "",
          "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 166,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-cpu-bottleneck-growing-data-lag/2234/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7545,
        "name": "",
        "username": "v-pap",
        "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png",
        "created_at": "2020-07-08T15:41:55.409Z",
        "cooked": "<p>I left iostat running for 10 min on the lagging storage server and the results were similar with around 95-120 MB/s writes.  I then checked one of the storage servers with the least amount of CPU load at the time and the results were lower on average, somewhere around 80MB/s, with a range from 60 to 140MB/s writes. If I remember correctly in another thread, it was mentioned that fdb had an artificial IOPS limit in order not to saturate SATA SSDs, maybe this limit does interfere?</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 23,
        "updated_at": "2020-07-08T15:45:41.089Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 85,
        "readers_count": 84,
        "score": 27.0,
        "yours": false,
        "topic_id": 2234,
        "topic_slug": "storage-server-cpu-bottleneck-growing-data-lag",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 166,
          "username": "gaurav",
          "name": "gaurav",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 744,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-cpu-bottleneck-growing-data-lag/2234/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7546,
        "name": "gaurav",
        "username": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "created_at": "2020-07-08T16:06:27.609Z",
        "cooked": "<p>AFAIK, FDB does not apply any artificial limit to throttle down the iops.</p>\n<p>If there is any throttling, it could be due to the disk itself - from the specs you\u2019ve attached, there seems to be a limit of sustained WIOPS of 4680. It could be that on the lagging SS, it may just be going over the limits.</p>\n<p>In any case, this seems like a lot of write per server. Are you really doing so much logical writes (aggregated across all SS), from application point of view?</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 23,
        "updated_at": "2020-07-08T16:06:27.609Z",
        "reply_count": 0,
        "reply_to_post_number": 5,
        "quote_count": 0,
        "incoming_link_count": 31,
        "reads": 87,
        "readers_count": 86,
        "score": 172.4,
        "yours": false,
        "topic_id": 2234,
        "topic_slug": "storage-server-cpu-bottleneck-growing-data-lag",
        "display_username": "gaurav",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 744,
          "username": "v-pap",
          "name": "",
          "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 166,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-cpu-bottleneck-growing-data-lag/2234/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7547,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2020-07-08T16:11:06.052Z",
        "cooked": "<p>You seem to be running a very write-heavy workload. As the disk doesn\u2019t seem to be saturated, my guess is that the write-queue within FDB is the problem.</p>\n<p>The disk interface uses AIO with O_DIRECT, and we only allow to queue 64 operations at a time and reads will get a higher priority. This means that the max throughput is somewhere around <code>4KB * 64 * disk-latency</code> - or in other words: your performance might be limited by disk latency instead of disk throughput\u2026</p>\n<p>There are a few things you can do:</p>\n<ol>\n<li>If you have enough CPUs, I would suggest to start more storage servers per disk. You need one CPU core per disk - you could also try to oversubscribe and have two storages run on one CPU, but that might give you weird read-latency behavior, which is also weird.</li>\n<li>There\u2019s a knob called <code>MAX_OUTSTANDING</code> which controls how many operations fdb sends to the storage. You can try to set this to a higher value.</li>\n</ol>\n<p>I think the first suggestion has a higher probability for success, so if you can I would try this first.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 23,
        "updated_at": "2020-07-08T16:11:06.052Z",
        "reply_count": 3,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 7,
        "reads": 85,
        "readers_count": 84,
        "score": 67.0,
        "yours": false,
        "topic_id": 2234,
        "topic_slug": "storage-server-cpu-bottleneck-growing-data-lag",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/understand-fdb-read-write-with-disk-iops-throughtput-blocksize/3852",
            "internal": true,
            "reflection": true,
            "title": "Understand FDB read/write with disk IOPS/throughtput/Blocksize",
            "clicks": 1
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-cpu-bottleneck-growing-data-lag/2234/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7548,
        "name": "gaurav",
        "username": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "created_at": "2020-07-08T16:20:57.011Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"7\" data-topic=\"2234\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>we only allow to queue 64 operations at a time and reads will get a higher priority.</p>\n</blockquote>\n</aside>\n<p><a class=\"mention\" href=\"/u/v-pap\">@v-pap</a> can you post the iostat output over a longer duration? The field <code>avgqu-sz</code>, which measures the outstanding queue-depth on the disk, seems quite low (and does not look realistic to support such high iops being observed).</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 23,
        "updated_at": "2020-07-08T16:22:28.933Z",
        "reply_count": 1,
        "reply_to_post_number": 7,
        "quote_count": 1,
        "incoming_link_count": 4,
        "reads": 84,
        "readers_count": 83,
        "score": 41.8,
        "yours": false,
        "topic_id": 2234,
        "topic_slug": "storage-server-cpu-bottleneck-growing-data-lag",
        "display_username": "gaurav",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 166,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-cpu-bottleneck-growing-data-lag/2234/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7549,
        "name": "",
        "username": "v-pap",
        "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png",
        "created_at": "2020-07-08T16:37:22.156Z",
        "cooked": "<p><a class=\"mention\" href=\"/u/gaurav\">@gaurav</a> This is again for the lagging storage server, I have grep\u2019d the sdb to save space.</p>\n<pre><code class=\"lang-auto\">Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nsdb               0.00 16709.50   13.00 7995.50    52.00 98814.00    24.69     2.90    0.39    0.23    0.39   0.03  26.35\nsdb               0.00 16805.00   13.50 7764.50    54.00 98272.00    25.28     3.07    0.40    0.26    0.40   0.03  26.95\nsdb               0.00 19371.50   10.50 8771.50    42.00 112566.00    25.65     3.23    0.40    0.19    0.40   0.03  30.20\nsdb               0.00 17859.50    8.00 8540.00    32.00 105592.00    24.71     3.32    0.39    0.25    0.39   0.03  29.35\nsdb               0.00 19178.50    8.00 8919.00    32.00 112384.00    25.19     3.46    0.38    0.19    0.38   0.04  31.90\nsdb               0.00 17851.50   16.50 8285.50    66.00 104542.00    25.20     3.60    0.40    0.21    0.40   0.04  29.45\nsdb               0.00 19606.50   15.00 9467.00    60.00 116288.00    24.54     4.04    0.40    0.23    0.40   0.03  32.85\nsdb               0.00 18475.00   22.00 8760.50    88.00 108936.00    24.83     3.33    0.40    0.18    0.40   0.04  30.80\nsdb               0.00 18283.50   25.00 8752.00   100.00 108136.00    24.66     2.62    0.39    0.18    0.39   0.03  29.90\nsdb               0.00 17794.00   17.00 8216.00    68.00 104034.00    25.29     3.11    0.40    0.21    0.40   0.04  29.40\nsdb               0.00 19139.00   15.50 8764.50    62.00 111608.00    25.44     3.47    0.40    0.19    0.40   0.04  30.85\nsdb               0.00 18295.50   16.00 8691.00    64.00 107940.00    24.81     3.57    0.42    0.22    0.42   0.03  30.25\nsdb               0.00 18305.50    9.50 8471.00    38.00 107100.00    25.27     3.57    0.41    0.21    0.41   0.04  30.10\nsdb               0.00 18562.50    9.50 9088.00    38.00 110596.00    24.32     3.27    0.42    0.26    0.42   0.03  30.80\nsdb               0.00 18951.50   19.00 8798.50    76.00 110994.00    25.19     3.42    0.39    0.18    0.40   0.03  30.40\nsdb               0.00 18863.50   13.50 8917.00    54.00 111116.00    24.90     3.03    0.38    0.22    0.38   0.03  31.00\nsdb               0.00 19127.00   25.50 8947.50   102.00 112292.00    25.05     3.60    0.41    0.18    0.41   0.03  31.05\nsdb               0.00 18379.00    4.00 8441.50    16.00 107276.00    25.41     3.53    0.39    0.25    0.39   0.04  30.20\nsdb               0.00 17855.00   10.00 8278.00    40.00 104526.00    25.23     3.35    0.40    0.20    0.40   0.03  28.80\nsdb               0.00 18404.00   14.50 8439.50    58.00 107368.00    25.41     3.34    0.40    0.21    0.40   0.04  30.15\nsdb               0.00 21784.50    5.00 8731.50    20.00 121978.00    27.93     3.81    0.40    0.20    0.40   0.04  33.10\nsdb               0.00 17068.00   40.00 8871.00   160.00 103830.00    23.34     3.47    0.42    0.19    0.42   0.03  30.15\nsdb               0.00 20704.50   12.00 8975.00    48.00 118650.00    26.42     3.55    0.42    0.21    0.42   0.04  32.60\nsdb               0.00 19638.00   28.50 8335.00   114.00 111946.00    26.80     3.33    0.41    0.18    0.41   0.04  31.30\nsdb               0.00 19215.50   61.00 9510.00   244.00 114898.00    24.06     4.17    0.40    0.17    0.41   0.03  31.40\nsdb               0.00 18551.00   21.00 10212.50    84.00 115024.00    22.50     4.24    0.40    0.19    0.40   0.03  31.20\nsdb               0.00 19656.00   14.00 9940.00    56.00 118400.00    23.80     3.75    0.41    0.21    0.41   0.03  32.50\nsdb               0.00 18036.00    6.50 8312.00    26.00 105318.00    25.33     3.56    0.42    0.15    0.42   0.04  29.90\nsdb               0.00 18500.50    4.00 8895.00    16.00 109644.00    24.65     3.86    0.43    0.25    0.43   0.04  31.75\nsdb               0.00 18298.50   18.50 8814.50    74.00 108446.00    24.57     3.51    0.38    0.19    0.38   0.03  29.40\nsdb               0.00 17564.00   18.50 7841.50    74.00 101616.00    25.88     3.50    0.41    0.19    0.41   0.04  29.25\nsdb               0.00 17852.00   11.50 8499.00    46.00 105398.00    24.78     3.33    0.39    0.17    0.39   0.03  29.20\nsdb               0.00 18272.50   12.50 8433.00    50.00 106816.00    25.31     3.05    0.40    0.20    0.40   0.04  29.85\nsdb               0.00 21082.00   11.00 8662.00    44.00 118908.00    27.43     3.54    0.41    0.23    0.41   0.04  32.95\nsdb               0.00 16902.00   32.00 8746.00   128.00 102586.00    23.40     3.51    0.39    0.17    0.39   0.03  28.55\nsdb               0.00 21131.00    9.00 9686.00    36.00 123202.00    25.42     3.35    0.40    0.17    0.40   0.03  32.80\nsdb               0.00 19789.00   10.00 8959.00    40.00 115104.00    25.68     3.86    0.41    0.25    0.41   0.04  32.55\nsdb               0.00 20015.00   26.50 11077.00   106.00 124364.00    22.42     4.44    0.42    0.19    0.42   0.03  33.90\nsdb               0.00 17723.00   10.00 8621.50    40.00 105372.00    24.42     3.11    0.41    0.20    0.41   0.04  30.50\nsdb               0.00 18684.00   14.50 8719.00    58.00 109606.00    25.11     3.37    0.41    0.21    0.41   0.03  29.90\nsdb               0.00 17420.00    8.00 8196.50    32.00 102460.00    24.98     3.55    0.42    0.19    0.42   0.04  28.75\nsdb               0.00 19008.00   12.00 8269.50    48.00 109104.00    26.36     3.09    0.40    0.21    0.40   0.04  29.95\n</code></pre>\n<p>Indeed my use case requires a lot of write throughput since I am storing cloud machine metrics.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 23,
        "updated_at": "2020-07-08T16:48:14.047Z",
        "reply_count": 1,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 81,
        "readers_count": 80,
        "score": 21.2,
        "yours": false,
        "topic_id": 2234,
        "topic_slug": "storage-server-cpu-bottleneck-growing-data-lag",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 166,
          "username": "gaurav",
          "name": "gaurav",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 744,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-cpu-bottleneck-growing-data-lag/2234/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7551,
        "name": "",
        "username": "v-pap",
        "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png",
        "created_at": "2020-07-08T16:42:00.627Z",
        "cooked": "<p>Unfortunately, it seems like the 1st option wont work in my case, since I am deploying this cluster with the Kubernetes operator which doesn\u2019t seem to support this functionality yet. But I will try the 2nd option.</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 23,
        "updated_at": "2020-07-08T16:42:00.627Z",
        "reply_count": 0,
        "reply_to_post_number": 7,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 76,
        "readers_count": 75,
        "score": 15.2,
        "yours": false,
        "topic_id": 2234,
        "topic_slug": "storage-server-cpu-bottleneck-growing-data-lag",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 15,
          "username": "markus.pilman",
          "name": "Markus Pilman",
          "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 744,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-cpu-bottleneck-growing-data-lag/2234/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7554,
        "name": "gaurav",
        "username": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "created_at": "2020-07-09T03:02:57.554Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"v-pap\" data-post=\"9\" data-topic=\"2234\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/v-pap/48/936_2.png\" class=\"avatar\"> v-pap:</div>\n<blockquote>\n<p>Indeed my use case requires a lot of write throughput since I am storing cloud machine metrics.</p>\n</blockquote>\n</aside>\n<p>There are 8 SS. With each SS doing 100 MB/s, this amounts to 3TB/hr. But the posted key-Val size is nowhere near that. Can you think what could explain this discrepancy? How large is each key-val?</p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 23,
        "updated_at": "2020-07-09T03:02:57.554Z",
        "reply_count": 1,
        "reply_to_post_number": 9,
        "quote_count": 1,
        "incoming_link_count": 4,
        "reads": 77,
        "readers_count": 76,
        "score": 40.4,
        "yours": false,
        "topic_id": 2234,
        "topic_slug": "storage-server-cpu-bottleneck-growing-data-lag",
        "display_username": "gaurav",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 166,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-cpu-bottleneck-growing-data-lag/2234/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7555,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2020-07-09T03:37:33.181Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"gaurav\" data-post=\"11\" data-topic=\"2234\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/g/b487fb/48.png\" class=\"avatar\"> gaurav:</div>\n<blockquote>\n<p>There are 8 SS. With each SS doing 100 MB/s, this amounts to 3TB/hr. But the posted key-Val size is nowhere near that. Can you think what could explain this discrepancy? How large is each key-val?</p>\n</blockquote>\n</aside>\n<p>You are comparing <em>disk</em> writes to FDB key/value writes.  They are very different, and this difference is often referred to as \u201cwrite amplification\u201d.  FDB deals with KV pairs, but those KV pairs are stored in blocks on disk, and to update or insert a KV pair means to write the entire block it resides in or will reside in based on sorted order.</p>\n<p>In the worst case, random writes of small values, each FDB kv pair written requires one 4KB disk block to be updated on disk.  In the storage engine, on order to update that block atomically with other blocks in the commit, there are actually two total 4KB writes that must happen to change that single record, and then there are other writes that can happen was well for internal record keeping and slack space management.</p>\n<p>To put some numbers on a worst-case scenario, writing 16 byte keys with 8 byte values where the keys are uniformly random across the key space and total 1 megabyte worth of 24-byte KV pairs per second would result in about 350MB of actual disk writes per second on the storage servers with the <code>ssd</code> storage engine (or basically any other btree with 4k pages).  In triple replication, that number triples as well.</p>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 23,
        "updated_at": "2020-07-09T03:37:33.181Z",
        "reply_count": 1,
        "reply_to_post_number": 11,
        "quote_count": 1,
        "incoming_link_count": 19,
        "reads": 78,
        "readers_count": 77,
        "score": 115.6,
        "yours": false,
        "topic_id": 2234,
        "topic_slug": "storage-server-cpu-bottleneck-growing-data-lag",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-cpu-bottleneck-growing-data-lag/2234/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7556,
        "name": "gaurav",
        "username": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "created_at": "2020-07-09T04:02:45.854Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"SteavedHams\" data-post=\"12\" data-topic=\"2234\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/steavedhams/48/18_2.png\" class=\"avatar\"> SteavedHams:</div>\n<blockquote>\n<p>You are comparing <em>disk</em> writes to FDB key/value writes. They are very different,</p>\n</blockquote>\n</aside>\n<p>Agreed. I was trying to allude to this possibility of a very high write amplification factor due to many small-sized kv writes spread randomly around. I did miss to factor in replication factor.<br>\nIf this is the limiting problem, then a change in data model will be needed at application side.</p>\n<p>Thanks for adding theses details!</p>",
        "post_number": 13,
        "post_type": 1,
        "posts_count": 23,
        "updated_at": "2020-07-09T04:02:45.854Z",
        "reply_count": 1,
        "reply_to_post_number": 12,
        "quote_count": 1,
        "incoming_link_count": 1,
        "reads": 73,
        "readers_count": 72,
        "score": 24.6,
        "yours": false,
        "topic_id": 2234,
        "topic_slug": "storage-server-cpu-bottleneck-growing-data-lag",
        "display_username": "gaurav",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 166,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-cpu-bottleneck-growing-data-lag/2234/13",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7565,
        "name": "",
        "username": "v-pap",
        "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png",
        "created_at": "2020-07-09T11:45:41.782Z",
        "cooked": "<p>I think I have mentioned my data model already in another thread but I will mention it again just in case you have any idea or recommendation on how to improve it. Each monitored resource has its own directory path: <code>monitored_resource_id/resolution</code> where <code>resource_id </code> is its own unique id and <code>resolution</code> is a string: <code>second, minute, hour or day</code>. Under these directories exist key-value pairs of the form key: <code>(metric, timeinfo)</code> with value: a <code>64bit</code> int float etc. Of course for  other resolutions other than second, I use atomic operations as a way to calculate aggregations on the fly. So each metric is essentially written one time in the seconds resolution and for each other resolution 4 values are updated: 2 counters (count, sum) and 2 other values for max and min (all with atomic operations), in total 1 + 3*4 = 13 writes/counter updates. Each write transaction to the fdb is essentially scraped metric data coming every 5 seconds for each monitored resource. So each write transaction contains around 200 metrics which are to be written under the directory path of the appropriate resource. I guess that these inserts as the data is growing are getting further apart since more key-values are inserted between metrics. I had thought of changing the key to something like <code>(timeinfo, metric)</code> so inserts would possibly require less disk writes, but in this case querying specific metrics would get very expensive.</p>",
        "post_number": 14,
        "post_type": 1,
        "posts_count": 23,
        "updated_at": "2020-07-09T11:45:41.782Z",
        "reply_count": 1,
        "reply_to_post_number": 13,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 71,
        "readers_count": 70,
        "score": 29.2,
        "yours": false,
        "topic_id": 2234,
        "topic_slug": "storage-server-cpu-bottleneck-growing-data-lag",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 166,
          "username": "gaurav",
          "name": "gaurav",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 744,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-cpu-bottleneck-growing-data-lag/2234/14",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7566,
        "name": "gaurav",
        "username": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "created_at": "2020-07-09T12:13:15.495Z",
        "cooked": "<p>This is an interesting modeling problem. As a quick modification, is it possible to buffer 5-sec values in memory for a minute, before writing them to fdb. You can probably create one transaction per resource/resolution/metric to write all the raw/derived values.</p>\n<p>While this may put more complexity and ram requirement on your layer, you will know if it helps in reducing your write load by ~10x due to the locality of kvs per transaction.</p>\n<p>Just curious what really is the amount of data in bytes/sec you are writing, as measured by the application layer? It will be interesting to estimate current write application factor.</p>",
        "post_number": 15,
        "post_type": 1,
        "posts_count": 23,
        "updated_at": "2020-07-09T12:13:15.495Z",
        "reply_count": 1,
        "reply_to_post_number": 14,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 70,
        "readers_count": 69,
        "score": 24.0,
        "yours": false,
        "topic_id": 2234,
        "topic_slug": "storage-server-cpu-bottleneck-growing-data-lag",
        "display_username": "gaurav",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 744,
          "username": "v-pap",
          "name": "",
          "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 166,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-cpu-bottleneck-growing-data-lag/2234/15",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7569,
        "name": "",
        "username": "v-pap",
        "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png",
        "created_at": "2020-07-09T15:34:20.489Z",
        "cooked": "<p>That would be an interesting approach but I am afraid at least for my case this would require something like a distributed memory system, since there are many writer processes which may have different bundles of metrics etc.</p>\n<p>As far as bytes/sec I don\u2019t have any numbers at the moment but I will try to measure it.</p>",
        "post_number": 16,
        "post_type": 1,
        "posts_count": 23,
        "updated_at": "2020-07-09T15:34:20.489Z",
        "reply_count": 1,
        "reply_to_post_number": 15,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 70,
        "readers_count": 69,
        "score": 24.0,
        "yours": false,
        "topic_id": 2234,
        "topic_slug": "storage-server-cpu-bottleneck-growing-data-lag",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 166,
          "username": "gaurav",
          "name": "gaurav",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 744,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-cpu-bottleneck-growing-data-lag/2234/16",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7571,
        "name": "gaurav",
        "username": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "created_at": "2020-07-09T16:02:50.909Z",
        "cooked": "<p>I was suggesting that you try out the buffering approach as a test only in some kind of test workload to see if it helps. That may give some pointers for future.</p>",
        "post_number": 17,
        "post_type": 1,
        "posts_count": 23,
        "updated_at": "2020-07-09T16:02:50.909Z",
        "reply_count": 1,
        "reply_to_post_number": 16,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 72,
        "readers_count": 71,
        "score": 39.4,
        "yours": false,
        "topic_id": 2234,
        "topic_slug": "storage-server-cpu-bottleneck-growing-data-lag",
        "display_username": "gaurav",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 744,
          "username": "v-pap",
          "name": "",
          "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 166,
        "hidden": false,
        "trust_level": 3,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-cpu-bottleneck-growing-data-lag/2234/17",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10360,
        "name": "Oleg Samarin",
        "username": "osamarin",
        "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png",
        "created_at": "2021-12-03T11:35:45.435Z",
        "cooked": "<p>Hello, all!</p>\n<p>I have a three-node fdb cluster. I got a problem with growing the data lag of one fdb process.</p>\n<p>I see that at first the durability lag start growing (probably because the i/o subsystem had been saturated). Then, a dozen of minutes later, the data lag started growing too.</p>\n<p>How to troubleshoot the reason of growing data lag? Does the high durability lag influence the data lag? How does it? Are they any parameters that control this relation?</p>\n<p>May be the TLog process itself instead of the SS process responsible for the high data lag?</p>",
        "post_number": 18,
        "post_type": 1,
        "posts_count": 23,
        "updated_at": "2021-12-03T11:35:45.435Z",
        "reply_count": 0,
        "reply_to_post_number": 17,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 58,
        "readers_count": 57,
        "score": 41.6,
        "yours": false,
        "topic_id": 2234,
        "topic_slug": "storage-server-cpu-bottleneck-growing-data-lag",
        "display_username": "Oleg Samarin",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 166,
          "username": "gaurav",
          "name": "gaurav",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 711,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-cpu-bottleneck-growing-data-lag/2234/18",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10361,
        "name": "Oleg Samarin",
        "username": "osamarin",
        "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png",
        "created_at": "2021-12-03T14:51:30.453Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"7\" data-topic=\"2234\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>The disk interface uses AIO with O_DIRECT, and we only allow to queue 64 operations at a time and reads will get a higher priority. This means that the max throughput is somewhere around <code>4KB * 64 * disk-latency</code> - or in other words: your performance might be limited by disk latency instead of disk throughput\u2026</p>\n</blockquote>\n</aside>\n<p>Is there the 64 operations at a time limit now? Can this limit be altered with a knob?</p>",
        "post_number": 19,
        "post_type": 1,
        "posts_count": 23,
        "updated_at": "2021-12-06T09:09:24.035Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 5,
        "reads": 62,
        "readers_count": 61,
        "score": 42.4,
        "yours": false,
        "topic_id": 2234,
        "topic_slug": "storage-server-cpu-bottleneck-growing-data-lag",
        "display_username": "Oleg Samarin",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 711,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-cpu-bottleneck-growing-data-lag/2234/19",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 10366,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2021-12-04T00:55:08.083Z",
        "cooked": "<p><code>knob_max_outstanding</code> controls the maximum number of outstanding operations.  <code>knob_min_submit</code> controls the number of IO operations below the max outstanding that you should reach before you submit more IO operations (due to io_submit latency).</p>",
        "post_number": 20,
        "post_type": 1,
        "posts_count": 23,
        "updated_at": "2021-12-04T00:55:08.083Z",
        "reply_count": 1,
        "reply_to_post_number": 19,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 64,
        "readers_count": 63,
        "score": 37.8,
        "yours": false,
        "topic_id": 2234,
        "topic_slug": "storage-server-cpu-bottleneck-growing-data-lag",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 711,
          "username": "osamarin",
          "name": "Oleg Samarin",
          "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-cpu-bottleneck-growing-data-lag/2234/20",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      7541,
      7542,
      7543,
      7544,
      7545,
      7546,
      7547,
      7548,
      7549,
      7551,
      7554,
      7555,
      7556,
      7565,
      7566,
      7569,
      7571,
      10360,
      10361,
      10366,
      10375,
      10382,
      10423
    ]
  },
  "timeline_lookup": [
    [
      1,
      1931
    ],
    [
      14,
      1930
    ],
    [
      18,
      1418
    ],
    [
      21,
      1416
    ],
    [
      22,
      1415
    ],
    [
      23,
      1409
    ]
  ],
  "tags": [
    "performance"
  ],
  "tags_descriptions": {},
  "fancy_title": "Storage Server CPU bottleneck - Growing data lag",
  "id": 2234,
  "title": "Storage Server CPU bottleneck - Growing data lag",
  "posts_count": 23,
  "created_at": "2020-07-08T13:46:58.378Z",
  "views": 3083,
  "reply_count": 18,
  "like_count": 2,
  "last_posted_at": "2021-12-13T09:55:15.976Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "storage-server-cpu-bottleneck-growing-data-lag",
  "category_id": 7,
  "word_count": 5157,
  "deleted_at": null,
  "user_id": 744,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": "https://global.discourse-cdn.com/foundationdb/optimized/1X/e472648513de0e881bd62213804d5e43f9510ace_2_1023x568.png",
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_2234",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 23,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 7,
  "show_read_indicator": false,
  "thumbnails": [
    {
      "max_width": null,
      "max_height": null,
      "width": 1894,
      "height": 1051,
      "url": "https://global.discourse-cdn.com/foundationdb/original/1X/e472648513de0e881bd62213804d5e43f9510ace.png"
    },
    {
      "max_width": 1024,
      "max_height": 1024,
      "width": 1023,
      "height": 568,
      "url": "https://global.discourse-cdn.com/foundationdb/optimized/1X/e472648513de0e881bd62213804d5e43f9510ace_2_1023x568.png"
    }
  ],
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": null,
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 166,
        "username": "gaurav",
        "name": "gaurav",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
        "post_count": 8,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 3
      },
      {
        "id": 744,
        "username": "v-pap",
        "name": "",
        "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png",
        "post_count": 7,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 711,
        "username": "osamarin",
        "name": "Oleg Samarin",
        "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png",
        "post_count": 4,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 12,
        "username": "ajbeamon",
        "name": "A.J. Beamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 15,
        "username": "markus.pilman",
        "name": "Markus Pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 7,
        "username": "SteavedHams",
        "name": "Steve Atherton",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      }
    ],
    "created_by": {
      "id": 744,
      "username": "v-pap",
      "name": "",
      "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png"
    },
    "last_poster": {
      "id": 711,
      "username": "osamarin",
      "name": "Oleg Samarin",
      "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png"
    },
    "links": [
      {
        "url": "https://forums.foundationdb.org/t/cpu-limited-storage-processes/2140",
        "title": "CPU limited storage processes",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 19,
        "user_id": 744,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/release-6.3/fdbserver/Knobs.cpp",
        "title": "foundationdb/Knobs.cpp at release-6.3 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 7,
        "user_id": 711,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://forums.foundationdb.org/t/understand-fdb-read-write-with-disk-iops-throughtput-blocksize/3852",
        "title": "Understand FDB read/write with disk IOPS/throughtput/Blocksize",
        "internal": true,
        "attachment": false,
        "reflection": true,
        "clicks": 1,
        "user_id": 970,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      }
    ]
  },
  "bookmarks": []
}