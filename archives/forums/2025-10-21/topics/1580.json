{
  "post_stream": {
    "posts": [
      {
        "id": 4863,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2019-08-11T17:20:33.441Z",
        "cooked": "<p>I know cluster setups were covered a lot, but I\u2019m running into (to me) illogical issue and was hoping to get some advice.</p>\n<p>I drained our old cluster and replaced it with a larger one. Everything is working as it should, however getting this warning</p>\n<pre><code class=\"lang-auto\">WARNING: A single process is both a transaction log and a storage server.\n  For best performance use dedicated disks for the transaction logs by setting process classes.\n</code></pre>\n<p>It\u2019s confusing, because the old cluster had similar settings and was fine. Is there a way to find out which process is it? I tried to poke in the json file, but can\u2019t to find it.</p>\n<p>Here is the setup</p>\n<p>24x 4cpu, 16GB RAM, 1.2TB space</p>\n<pre><code class=\"lang-auto\">  Redundancy mode        - triple\n  Storage engine         - ssd-2\n  Coordinators           - 3\n  Exclusions             - 26 (type `exclude' for details)\n  Desired Proxies        - 7\n  Desired Resolvers      - 1\n  Desired Logs           - 4\n</code></pre>\n<pre><code class=\"lang-auto\">10.128.0.104:4500,stateless\n10.128.0.104:4501,storage\n10.128.0.104:4502,storage\n10.128.0.104:4503,stateless\n10.128.0.122:4500,stateless\n10.128.0.122:4501,storage\n10.128.0.122:4502,storage\n10.128.0.122:4503,stateless\n10.128.0.215:4500,stateless\n10.128.0.215:4501,storage\n10.128.0.215:4502,storage\n10.128.0.215:4503,stateless\n10.128.1.166:4500,stateless\n10.128.1.166:4501,storage\n10.128.1.166:4502,storage\n10.128.1.166:4503,stateless\n10.128.1.222:4500,stateless\n10.128.1.222:4501,storage\n10.128.1.222:4502,storage\n10.128.1.222:4503,stateless\n10.128.1.250:4500,stateless\n10.128.1.250:4501,storage\n10.128.1.250:4502,storage\n10.128.1.250:4503,stateless\n10.128.2.102:4500,stateless\n10.128.2.102:4501,storage\n10.128.2.102:4502,storage\n10.128.2.102:4503,stateless\n10.128.2.245:4500,stateless\n10.128.2.245:4501,log\n10.128.2.245:4502,log\n10.128.2.245:4503,stateless\n10.128.2.44:4500,stateless\n10.128.2.44:4501,storage\n10.128.2.44:4502,storage\n10.128.2.44:4503,stateless\n10.128.2.50:4500,stateless\n10.128.2.50:4501,log\n10.128.2.50:4502,log\n10.128.2.50:4503,stateless\n10.128.2.84:4500,stateless\n10.128.2.84:4501,storage\n10.128.2.84:4502,storage\n10.128.2.84:4503,stateless\n10.128.3.142:4500,stateless\n10.128.3.142:4501,storage\n10.128.3.142:4502,storage\n10.128.3.142:4503,stateless\n10.128.3.231:4500,stateless\n10.128.3.231:4501,storage\n10.128.3.231:4502,storage\n10.128.3.231:4503,stateless\n10.128.3.24:4500,stateless\n10.128.3.24:4501,storage\n10.128.3.24:4502,storage\n10.128.3.24:4503,stateless\n10.128.3.32:4500,stateless\n10.128.3.32:4501,storage\n10.128.3.32:4502,storage\n10.128.3.32:4503,stateless\n10.128.4.149:4500,stateless\n10.128.4.149:4501,storage\n10.128.4.149:4502,storage\n10.128.4.149:4503,stateless\n10.128.4.229:4500,stateless\n10.128.4.229:4501,storage\n10.128.4.229:4502,storage\n10.128.4.229:4503,stateless\n10.128.4.50:4500,stateless\n10.128.4.50:4501,storage\n10.128.4.50:4502,storage\n10.128.4.50:4503,stateless\n10.128.5.105:4500,stateless\n10.128.5.105:4501,storage\n10.128.5.105:4502,storage\n10.128.5.105:4503,stateless\n10.128.6.122:4500,stateless\n10.128.6.122:4501,storage\n10.128.6.122:4502,storage\n10.128.6.122:4503,stateless\n10.128.6.253:4500,stateless\n10.128.6.253:4501,storage\n10.128.6.253:4502,storage\n10.128.6.253:4503,stateless\n10.128.6.6:4500,stateless\n10.128.6.6:4501,storage\n10.128.6.6:4502,storage\n10.128.6.6:4503,stateless\n10.128.7.2:4500,stateless\n10.128.7.2:4501,storage\n10.128.7.2:4502,storage\n10.128.7.2:4503,stateless\n10.128.7.96:4500,stateless\n10.128.7.96:4501,storage\n10.128.7.96:4502,storage\n10.128.7.96:4503,stateless\n</code></pre>\n<p>If I\u2019m not completely blind, then we are assigning 4 processes on 2 separate servers log and 2 other processes are kept stateless. Then we are requesting 4 log processes in the cluster configuration.</p>\n<p>Any pointers are greatly appreciated.</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-08-11T17:20:33.441Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 236,
        "reads": 70,
        "readers_count": 69,
        "score": 1194.0,
        "yours": false,
        "topic_id": 1580,
        "topic_slug": "warning-a-single-process-is-both-a-transaction-log-and-a-storage-server",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/warning-a-single-process-is-both-a-transaction-log-and-a-storage-server/1580/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 4864,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2019-08-11T23:35:19.899Z",
        "cooked": "<p>It seems your problem is that you only run tlogs on two machines:</p>\n<pre><code class=\"lang-auto\">10.128.2.50:4501,log\n10.128.2.50:4502,log\n</code></pre>\n<p>and</p>\n<pre><code class=\"lang-auto\">10.128.2.50:4501,log\n10.128.2.50:4502,log\n</code></pre>\n<p>However, you run with triple replication. Therefore fdb has to recruit tlogs on at least three machines - so it needs to recruit one on a storage server (which is not optimal but the only way to not violate the contract that the data is replicated across three machines).</p>\n<p>With triple replication you probably want to run log processes on at least 3, better 5 machines. If you lose a machine and only run logs on three, you will find a tlog on a storage again. With triple replication you can survive two machine failures and therefore 5 is probably a good number.</p>\n<p>If you\u2019re starved for resources, I would do the following:</p>\n<ol>\n<li>Set disired logs to <code>5</code>\n</li>\n<li>Run a log process on <code>5</code> machines</li>\n<li>If a machine fails, you will run with 2 logs, if 2 fail you will run with 3 (which is fine and you can bring back the machines later and fdb will redistribute the log load).</li>\n</ol>\n<p>If resources is not an issue for you, I would do the following:</p>\n<ol>\n<li>Run 1 log on each machine</li>\n<li>set desired logs to something reasonable (for this cluster-size probably 12? not sure\u2026).</li>\n<li>Keep the same configuration on each machine: for example 1 log, 1 stateless, 2 storage</li>\n</ol>\n<p>I don\u2019t know how your disk layout looks though - if not all machines are the same, you might want to use another topology.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-08-11T23:35:19.899Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 65,
        "readers_count": 64,
        "score": 63.0,
        "yours": false,
        "topic_id": 1580,
        "topic_slug": "warning-a-single-process-is-both-a-transaction-log-and-a-storage-server",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/warning-a-single-process-is-both-a-transaction-log-and-a-storage-server/1580/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4866,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2019-08-12T03:57:22.507Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"2\" data-topic=\"1580\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>However, you run with triple replication. Therefore fdb has to recruit tlogs on at least three machines - so it needs to recruit one on a storage server (which is not optimal but the only way to not violate the contract that the data is replicated across three machines).</p>\n</blockquote>\n</aside>\n<p>Ah, that\u2019s the missing piece.</p>\n<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"2\" data-topic=\"1580\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>I don\u2019t know how your disk layout looks though - if not all machines are the same, you might want to use another topology.</p>\n</blockquote>\n</aside>\n<p>It\u2019s 3 NVME disks merged into raid 0.</p>\n<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"2\" data-topic=\"1580\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<ul>\n<li>Run 1 log on each machine</li>\n<li>set desired logs to something reasonable (for this cluster-size probably 12? not sure\u2026).</li>\n<li>Keep the same configuration on each machine: for example 1 log, 1 stateless, 2 storage</li>\n</ul>\n</blockquote>\n</aside>\n<p>Wait, I thought logs and storage are not supposed to be mixed together.</p>\n<p>Somehow my understanding was that it\u2019s better to have log processes separated and leave some space for breading. So 2 log, 2 stateless. But if 1 log, 1 storage and 2 stateless works better, I can certainly do that.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-08-12T03:57:22.507Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 60,
        "readers_count": 59,
        "score": 17.0,
        "yours": false,
        "topic_id": 1580,
        "topic_slug": "warning-a-single-process-is-both-a-transaction-log-and-a-storage-server",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/warning-a-single-process-is-both-a-transaction-log-and-a-storage-server/1580/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4871,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2019-08-12T15:22:52.617Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"ThomasJ\" data-post=\"3\" data-topic=\"1580\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/48.png\" class=\"avatar\"> ThomasJ:</div>\n<blockquote>\n<p>Wait, I thought logs and storage are not supposed to be mixed together.</p>\n</blockquote>\n</aside>\n<p>Having logs and storages share a process is a bad idea - however, having log and storage processes sharing a machine is completely fine (we do that for years now on most of our clusters, on the ones we didn\u2019t the motivation had more to do with different VM-types on AWS which gives us more flexibility).</p>\n<p>The main reason for not having them share a process is CPU: each <code>fdbserver</code> process is single threaded. But log and storage can both consume quite some CPU and if a log process is starved for CPU (for example because you run some range queries) your commit latency will go up which can have all kind of undesired effects.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-08-12T15:22:52.617Z",
        "reply_count": 2,
        "reply_to_post_number": 3,
        "quote_count": 1,
        "incoming_link_count": 14,
        "reads": 55,
        "readers_count": 54,
        "score": 90.8,
        "yours": false,
        "topic_id": 1580,
        "topic_slug": "warning-a-single-process-is-both-a-transaction-log-and-a-storage-server",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/reasons-for-not-collocating-tlog-and-ss-io-characteristics-of-ss/2013",
            "internal": true,
            "reflection": true,
            "title": "Reasons for not co-locating tlog and SS? IO characteristics of SS",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/warning-a-single-process-is-both-a-transaction-log-and-a-storage-server/1580/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4872,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-08-12T15:28:44.016Z",
        "cooked": "<p>We also recommend not sharing disks between the logs and storage processes, as that can be a performance cost as well.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-08-12T15:28:44.016Z",
        "reply_count": 2,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 8,
        "reads": 50,
        "readers_count": 49,
        "score": 59.8,
        "yours": false,
        "topic_id": 1580,
        "topic_slug": "warning-a-single-process-is-both-a-transaction-log-and-a-storage-server",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/reasons-for-not-collocating-tlog-and-ss-io-characteristics-of-ss/2013",
            "internal": true,
            "reflection": true,
            "title": "Reasons for not co-locating tlog and SS? IO characteristics of SS",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 15,
          "username": "markus.pilman",
          "name": "Markus Pilman",
          "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/warning-a-single-process-is-both-a-transaction-log-and-a-storage-server/1580/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4873,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2019-08-12T17:22:27.124Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"4\" data-topic=\"1580\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>Having logs and storages share a process is a bad idea - however, having log and storage processes sharing a machine is completely fine (we do that for years now on most of our clusters, on the ones we didn\u2019t the motivation had more to do with different VM-types on AWS which gives us more flexibility)</p>\n</blockquote>\n</aside>\n<p>This is news to me. But I will adjust the cluster and see.</p>\n<aside class=\"quote no-group\" data-username=\"ajbeamon\" data-post=\"5\" data-topic=\"1580\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>We also recommend not sharing disks between the logs and storage processes, as that can be a performance cost as well.</p>\n</blockquote>\n</aside>\n<p>Hm, that will make things quite complicated. But will adjust to it.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-08-12T17:22:27.124Z",
        "reply_count": 0,
        "reply_to_post_number": 4,
        "quote_count": 2,
        "incoming_link_count": 2,
        "reads": 48,
        "readers_count": 47,
        "score": 19.4,
        "yours": false,
        "topic_id": 1580,
        "topic_slug": "warning-a-single-process-is-both-a-transaction-log-and-a-storage-server",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/warning-a-single-process-is-both-a-transaction-log-and-a-storage-server/1580/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4875,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2019-08-12T21:05:29.106Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"ajbeamon\" data-post=\"5\" data-topic=\"1580\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>We also recommend not sharing disks between the logs and storage processes, as that can be a performance cost as well.</p>\n</blockquote>\n</aside>\n<p>When we are on this, what\u2019s the right size for a log HDD and what kind of settings should we use? We generally use NVME disks that are 375GB</p>\n<p>This is what we have in settings</p>\n<pre><code class=\"lang-auto\">command = /usr/sbin/fdbserver\npublic_address = auto:$ID\nlisten_address = public\ndatadir = /var/lib/foundationdb/data/$ID\nlogdir = /var/log/foundationdb\nlogsize = 50MiB\nmaxlogssize = 10GiB\nmachine_id = {{machine_id}}\n# datacenter_id =\n# class =\nmemory = 13GiB\nstorage_memory = 1GiB\n# metrics_cluster =\n# metrics_prefix =\n</code></pre>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-08-12T21:05:29.106Z",
        "reply_count": 1,
        "reply_to_post_number": 5,
        "quote_count": 1,
        "incoming_link_count": 5,
        "reads": 47,
        "readers_count": 46,
        "score": 39.2,
        "yours": false,
        "topic_id": 1580,
        "topic_slug": "warning-a-single-process-is-both-a-transaction-log-and-a-storage-server",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/warning-a-single-process-is-both-a-transaction-log-and-a-storage-server/1580/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4878,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2019-08-12T23:20:39.970Z",
        "cooked": "<p>To determine the size of the disk, I would recommend something like expected write-load in bytes per second and multiply this number by something that makes you comfortable (I would say at least 6 hours).</p>\n<p>Basically, if you lose a machine, the log needs to be able to keep all writes to this lost machine on disk. You also should alert if this disk starts running full.</p>\n<p>But your config looks wrong to me (or it looks like it doesn\u2019t do what you want it to do):</p>\n<aside class=\"quote no-group\" data-username=\"ThomasJ\" data-post=\"7\" data-topic=\"1580\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/48.png\" class=\"avatar\"> ThomasJ:</div>\n<blockquote>\n<p>memory = 13GiB</p>\n</blockquote>\n</aside>\n<p>This means that each process can use up to 13GiB of memory - but your machine only has 16GiB? I think what you want is that all processes together are not allowed to use more than 13GiB of memory? If that is the case you need to divide this number by number of processes.</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-08-12T23:20:39.970Z",
        "reply_count": 1,
        "reply_to_post_number": 7,
        "quote_count": 1,
        "incoming_link_count": 9,
        "reads": 43,
        "readers_count": 42,
        "score": 58.4,
        "yours": false,
        "topic_id": 1580,
        "topic_slug": "warning-a-single-process-is-both-a-transaction-log-and-a-storage-server",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/separating-logs-on-its-own-hdd/1597",
            "internal": true,
            "reflection": true,
            "title": "Separating logs on its own HDD",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/warning-a-single-process-is-both-a-transaction-log-and-a-storage-server/1580/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4879,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2019-08-12T23:44:32.039Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"8\" data-topic=\"1580\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>This means that each process can use up to 13GiB of memory - but your machine only has 16GiB? I think what you want is that all processes together are not allowed to use more than 13GiB of memory? If that is the case you need to divide this number by number of processes.</p>\n</blockquote>\n</aside>\n<p>Ah! It\u2019s quite confusing as some settings are global, some are \u201clocal\u201d per process.</p>\n<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"8\" data-topic=\"1580\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>To determine the size of the disk, I would recommend something like expected write-load in bytes per second and multiply this number by something that makes you comfortable (I would say at least 6 hours).</p>\n<p>Basically, if you lose a machine, the log needs to be able to keep all writes to this lost machine on disk. You also should alert if this disk starts running full.</p>\n</blockquote>\n</aside>\n<p>Ok, I will keep it on 375GB NVME. That should be fine.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-08-12T23:55:52.519Z",
        "reply_count": 0,
        "reply_to_post_number": 8,
        "quote_count": 1,
        "incoming_link_count": 2,
        "reads": 42,
        "readers_count": 41,
        "score": 18.2,
        "yours": false,
        "topic_id": 1580,
        "topic_slug": "warning-a-single-process-is-both-a-transaction-log-and-a-storage-server",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/warning-a-single-process-is-both-a-transaction-log-and-a-storage-server/1580/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4880,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2019-08-13T01:52:08.166Z",
        "cooked": "<p>BTW here is our config. If you spot something we should be doing differently, please let me know. It quite standard.</p>\n<pre><code class=\"lang-auto\">## foundationdb.conf\n##\n## Configuration file for FoundationDB server processes\n## Full documentation is available at\n## https://apple.github.io/foundationdb/configuration.html#the-configuration-file\n\n[fdbmonitor]\nuser = foundationdb\ngroup = foundationdb\n\n[general]\nrestart_delay = 60\n## by default, restart_backoff = restart_delay_reset_interval = restart_delay\n# initial_restart_delay = 0\n# restart_backoff = 60\n# restart_delay_reset_interval = 60\ncluster_file = /etc/foundationdb/fdb.cluster\n# delete_envvars =\n# kill_on_configuration_change = true\n\n## Default parameters for individual fdbserver processes\n[fdbserver]\ncommand = /usr/sbin/fdbserver\npublic_address = auto:$ID\nlisten_address = public\ndatadir = /var/lib/foundationdb/data/$ID\nlogdir = /var/log/foundationdb\nlogsize = 50MiB\nmaxlogssize = 10GiB\nmachine_id = {{ instance }}\n# datacenter_id =\n# class =\nmemory = 4GiB\nstorage_memory = 1GiB\n# metrics_cluster =\n# metrics_prefix =\n\n## An individual fdbserver process with id 4500\n## Parameters set here override defaults from the [fdbserver] section\n[fdbserver.4500]\nclass=log\n[fdbserver.4501]\nclass=storage\n[fdbserver.4502]\nclass=storage\n[fdbserver.4503]\nclass=stateless\n\n[backup_agent]\ncommand = /usr/lib/foundationdb/backup_agent/backup_agent\nlogdir = /var/log/foundationdb\n\n[backup_agent.1]\n\n</code></pre>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-08-13T01:52:16.041Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 42,
        "readers_count": 41,
        "score": 18.2,
        "yours": false,
        "topic_id": 1580,
        "topic_slug": "warning-a-single-process-is-both-a-transaction-log-and-a-storage-server",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/warning-a-single-process-is-both-a-transaction-log-and-a-storage-server/1580/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4883,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2019-08-13T18:36:56.579Z",
        "cooked": "<p>This looks good to me. The only thing I would recommend:</p>\n<aside class=\"quote no-group\" data-username=\"ThomasJ\" data-post=\"10\" data-topic=\"1580\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/48.png\" class=\"avatar\"> ThomasJ:</div>\n<blockquote>\n<p>restart_delay = 60</p>\n</blockquote>\n</aside>\n<p>I would set this lower - I think we have it at <code>10</code>. 1 minute restart delay is quite long and will put some unnecessary load onto the cluster whenever a single process dies (and with only 4GiB of memory per process, one process will probably OOM on a semi-regular basis).</p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-08-13T18:36:56.579Z",
        "reply_count": 2,
        "reply_to_post_number": 10,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 39,
        "readers_count": 38,
        "score": 32.6,
        "yours": false,
        "topic_id": 1580,
        "topic_slug": "warning-a-single-process-is-both-a-transaction-log-and-a-storage-server",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/warning-a-single-process-is-both-a-transaction-log-and-a-storage-server/1580/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4884,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2019-08-13T18:39:23.444Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"11\" data-topic=\"1580\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>and with only 4GiB of memory per process, one process will probably OOM on a semi-regular basis</p>\n</blockquote>\n</aside>\n<p>What\u2019s your setting per process?</p>\n<p>BTW I can\u2019t recall the last time we ran into OOM for any of the processes. And we have quite heavy load on the cluster (500k transactions/sec).</p>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-08-13T18:39:23.444Z",
        "reply_count": 1,
        "reply_to_post_number": 11,
        "quote_count": 1,
        "incoming_link_count": 1,
        "reads": 39,
        "readers_count": 38,
        "score": 17.6,
        "yours": false,
        "topic_id": 1580,
        "topic_slug": "warning-a-single-process-is-both-a-transaction-log-and-a-storage-server",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/warning-a-single-process-is-both-a-transaction-log-and-a-storage-server/1580/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4885,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2019-08-13T18:45:06.354Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"ThomasJ\" data-post=\"12\" data-topic=\"1580\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/48.png\" class=\"avatar\"> ThomasJ:</div>\n<blockquote>\n<p>What\u2019s your setting per process?</p>\n</blockquote>\n</aside>\n<p>It depends on the cluster - but we generally run with a lot of memory (up to 100GiB per process). We used to run with 8GiB per process and saw quite many OOMs (although that was with FDB 3).</p>\n<p>I think FoundationDB still has a weird bug somewhere (at least in 6.1 - don\u2019t know whether this got accidentally fixed in 6.2) where a process will allocate memory like crazy (usually around 3GiB within a few seconds). It should be rare, but if you run into this issue, your process will OOM.</p>\n<aside class=\"quote no-group\" data-username=\"ThomasJ\" data-post=\"12\" data-topic=\"1580\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/48.png\" class=\"avatar\"> ThomasJ:</div>\n<blockquote>\n<p>BTW I can\u2019t recall the last time we ran into OOM for any of the processes. And we have quite heavy load on the cluster (500k transactions/sec).</p>\n</blockquote>\n</aside>\n<p>TBF, you ran with a 13GiB limit. It is very well possible that one process used more than 4GiB at one point but the other didn\u2019t use up their memory\u2026</p>\n<p>It is possible that you won\u2019t see OOMs, but it is better to be prepared to see a few which is why I suggested to set the timeout to a lower value.</p>",
        "post_number": 13,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-08-13T18:45:06.354Z",
        "reply_count": 1,
        "reply_to_post_number": 12,
        "quote_count": 1,
        "incoming_link_count": 2,
        "reads": 39,
        "readers_count": 38,
        "score": 37.6,
        "yours": false,
        "topic_id": 1580,
        "topic_slug": "warning-a-single-process-is-both-a-transaction-log-and-a-storage-server",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/warning-a-single-process-is-both-a-transaction-log-and-a-storage-server/1580/13",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4886,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2019-08-13T18:55:43.504Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"13\" data-topic=\"1580\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>TBF, you ran with a 13GiB limit. It is very well possible that one process used more than 4GiB at one point but the other didn\u2019t use up their memory\u2026</p>\n</blockquote>\n</aside>\n<p>I think this is the correct observation I unintentionally dismissed. Will monitor it closely and see.</p>\n<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"13\" data-topic=\"1580\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>It depends on the cluster - but we generally run with a lot of memory (up to 100GiB per process)</p>\n</blockquote>\n</aside>\n<p>Just wow!</p>",
        "post_number": 14,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-08-13T18:55:43.504Z",
        "reply_count": 0,
        "reply_to_post_number": 13,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 37,
        "readers_count": 36,
        "score": 7.2,
        "yours": false,
        "topic_id": 1580,
        "topic_slug": "warning-a-single-process-is-both-a-transaction-log-and-a-storage-server",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/warning-a-single-process-is-both-a-transaction-log-and-a-storage-server/1580/14",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4888,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-08-13T20:10:17.638Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"markus.pilman\" data-post=\"11\" data-topic=\"1580\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/markus.pilman/48/379_2.png\" class=\"avatar\"> markus.pilman:</div>\n<blockquote>\n<p>I would set this lower - I think we have it at <code>10</code> . 1 minute restart delay is quite long and will put some unnecessary load onto the cluster whenever a single process dies (and with only 4GiB of memory per process, one process will probably OOM on a semi-regular basis).</p>\n</blockquote>\n</aside>\n<p>The 60 seconds will only kick in when you have two consecutive failures of a process (within the <code>restart_delay_reset_interval</code>, default 60s). With the parameters as they were set, a single process death will result in an immediate restart. I typically use the parameters as they were originally written (0s first restart, 60s second and subsequent, reset to 0 after 60s). There\u2019s also an option to backoff more slowly from the initial delay to the max delay if you wanted to be more responsive during some sort of transient issue but avoid frequent repeated restarts.</p>",
        "post_number": 15,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-08-13T20:10:17.638Z",
        "reply_count": 1,
        "reply_to_post_number": 11,
        "quote_count": 1,
        "incoming_link_count": 1,
        "reads": 37,
        "readers_count": 36,
        "score": 32.2,
        "yours": false,
        "topic_id": 1580,
        "topic_slug": "warning-a-single-process-is-both-a-transaction-log-and-a-storage-server",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/warning-a-single-process-is-both-a-transaction-log-and-a-storage-server/1580/15",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4889,
        "name": "Markus Pilman",
        "username": "markus.pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "created_at": "2019-08-13T20:22:44.628Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"ajbeamon\" data-post=\"15\" data-topic=\"1580\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>The 60 seconds will only kick in when you have two consecutive failures of a process (within the <code>restart_delay_reset_interval</code> , default 60s).</p>\n</blockquote>\n</aside>\n<p>oh - Today I learned something new\u2026</p>",
        "post_number": 16,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-08-13T20:22:44.628Z",
        "reply_count": 1,
        "reply_to_post_number": 15,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 38,
        "readers_count": 37,
        "score": 27.4,
        "yours": false,
        "topic_id": 1580,
        "topic_slug": "warning-a-single-process-is-both-a-transaction-log-and-a-storage-server",
        "display_username": "Markus Pilman",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 15,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/warning-a-single-process-is-both-a-transaction-log-and-a-storage-server/1580/16",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 4890,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-08-13T20:43:59.991Z",
        "cooked": "<p>It seems that these restart parameters aren\u2019t even mentioned in our documentation with the exception of <code>restart_delay</code>, which has a slightly misleading description. That\u2019s probably something we should fix.</p>",
        "post_number": 17,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-08-13T20:43:59.991Z",
        "reply_count": 0,
        "reply_to_post_number": 16,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 38,
        "readers_count": 37,
        "score": 22.4,
        "yours": false,
        "topic_id": 1580,
        "topic_slug": "warning-a-single-process-is-both-a-transaction-log-and-a-storage-server",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 15,
          "username": "markus.pilman",
          "name": "Markus Pilman",
          "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/warning-a-single-process-is-both-a-transaction-log-and-a-storage-server/1580/17",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      4863,
      4864,
      4866,
      4871,
      4872,
      4873,
      4875,
      4878,
      4879,
      4880,
      4883,
      4884,
      4885,
      4886,
      4888,
      4889,
      4890
    ]
  },
  "timeline_lookup": [
    [
      1,
      2263
    ],
    [
      4,
      2262
    ],
    [
      11,
      2261
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "WARNING: A single process is both a transaction log and a storage server",
  "id": 1580,
  "title": "WARNING: A single process is both a transaction log and a storage server",
  "posts_count": 17,
  "created_at": "2019-08-11T17:20:33.378Z",
  "views": 1783,
  "reply_count": 14,
  "like_count": 6,
  "last_posted_at": "2019-08-13T20:43:59.991Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "warning-a-single-process-is-both-a-transaction-log-and-a-storage-server",
  "category_id": 7,
  "word_count": 2728,
  "deleted_at": null,
  "user_id": 311,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_1580",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 17,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 3,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "WARNING A single process is both a transaction log and a storage server",
      "id": 1529,
      "title": "WARNING A single process is both a transaction log and a storage server",
      "slug": "warning-a-single-process-is-both-a-transaction-log-and-a-storage-server",
      "posts_count": 3,
      "reply_count": 1,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2019-07-18T14:42:38.020Z",
      "last_posted_at": "2023-01-31T06:35:46.426Z",
      "bumped": true,
      "bumped_at": "2023-01-31T06:36:10.430Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 1910,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 520,
            "username": "Vasilii",
            "name": "Vasiliy Popkov",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/v/258eb7/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 919,
            "username": "Rjerk",
            "name": "Rjerk",
            "avatar_template": "/user_avatar/forums.foundationdb.org/rjerk/{size}/1056_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Production optimizations",
      "id": 601,
      "title": "Production optimizations",
      "slug": "production-optimizations",
      "posts_count": 21,
      "reply_count": 14,
      "highest_post_number": 21,
      "image_url": null,
      "created_at": "2018-07-30T21:18:56.894Z",
      "last_posted_at": "2018-08-15T04:47:23.743Z",
      "bumped": true,
      "bumped_at": "2018-08-15T04:47:23.743Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 6,
      "views": 6473,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 311,
            "username": "ThomasJ",
            "name": "Thomas Johson",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 255,
            "username": "aqua",
            "name": "Matt Lohier",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/b9bd4f/{size}.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "CPU limited storage processes",
      "id": 2140,
      "title": "CPU limited storage processes",
      "slug": "cpu-limited-storage-processes",
      "posts_count": 10,
      "reply_count": 5,
      "highest_post_number": 10,
      "image_url": null,
      "created_at": "2020-05-29T11:53:05.632Z",
      "last_posted_at": "2021-05-18T11:29:51.842Z",
      "bumped": true,
      "bumped_at": "2021-05-18T11:29:51.842Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1567,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 744,
            "username": "v-pap",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/v-pap/{size}/936_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 741,
            "username": "sears",
            "name": "Russell Sears",
            "avatar_template": "/user_avatar/forums.foundationdb.org/sears/{size}/887_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 393,
            "username": "ex3ndr",
            "name": "Steve Korshakov",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ex3ndr/{size}/389_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Cluster tuning cookbook",
      "id": 520,
      "title": "Cluster tuning cookbook",
      "slug": "cluster-tuning-cookbook",
      "posts_count": 27,
      "reply_count": 19,
      "highest_post_number": 27,
      "image_url": null,
      "created_at": "2018-06-19T14:35:25.802Z",
      "last_posted_at": "2019-02-01T12:38:24.733Z",
      "bumped": true,
      "bumped_at": "2019-02-01T12:38:24.733Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 12,
      "views": 8885,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 310,
            "username": "shamatar",
            "name": "Alexander",
            "avatar_template": "/user_avatar/forums.foundationdb.org/shamatar/{size}/315_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 41,
            "username": "amirouche",
            "name": "Amirouche",
            "avatar_template": "/user_avatar/forums.foundationdb.org/amirouche/{size}/1911_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 502,
            "username": "nikolas.ioannou",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/n/5daacb/{size}.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Process class and machine sharing deployment questions",
      "id": 1600,
      "title": "Process class and machine sharing deployment questions",
      "slug": "process-class-and-machine-sharing-deployment-questions",
      "posts_count": 16,
      "reply_count": 11,
      "highest_post_number": 16,
      "image_url": null,
      "created_at": "2019-08-28T14:29:20.326Z",
      "last_posted_at": "2019-09-03T19:26:35.853Z",
      "bumped": true,
      "bumped_at": "2019-09-03T19:26:35.853Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 3,
      "views": 2619,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 642,
            "username": "arob",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 311,
        "username": "ThomasJ",
        "name": "Thomas Johson",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "post_count": 8,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 15,
        "username": "markus.pilman",
        "name": "Markus Pilman",
        "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
        "post_count": 6,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 12,
        "username": "ajbeamon",
        "name": "A.J. Beamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      }
    ],
    "created_by": {
      "id": 311,
      "username": "ThomasJ",
      "name": "Thomas Johson",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png"
    },
    "last_poster": {
      "id": 12,
      "username": "ajbeamon",
      "name": "A.J. Beamon",
      "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
    }
  },
  "bookmarks": []
}