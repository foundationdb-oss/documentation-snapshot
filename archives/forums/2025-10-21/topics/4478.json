{
  "post_stream": {
    "posts": [
      {
        "id": 14049,
        "name": "Nigel Birkenshaw",
        "username": "nbirkenshaw",
        "avatar_template": "/user_avatar/forums.foundationdb.org/nbirkenshaw/{size}/1788_2.png",
        "created_at": "2024-05-14T19:58:48.831Z",
        "cooked": "<p>Hi all, I\u2019ve recently been through the exercise of developing and deploying some game leaderboards using the record layer, which have now seem some use, and I can reasonably say they work. This actually uses the TimeWindowLeaderboards (which I appreciate are marked experimental). The purpose was to learn about this (fdb + record layer) before using it for anything more serious.</p>\n<p>A few things came up which made me wonder if I\u2019m doing it right.</p>\n<p>Firstly, the architecture is that there is a golang edge server, a Java server (which has the fdb client) then the fdb cluster. The Java piece is a grpc server for interfacing with the go, which is the only part publicly reachable. That grpc server is written to use async style patterns. Is anyone actually deploying code using the synchronous methods in the Record Layer? All the examples I saw seemed to do so, yet my assumption (and it is only that) is that async would be preferable. A consequence of this is I made it to about one day before going live before noticing I had copy/pasted the example recordStoreProvider function and it was blocking! Assuming async is preferable is there an even trivial example of production style Record Layer code?</p>\n<p>From that, this Java code has the oddest performance characteristics I\u2019ve ever seen, with a ridiculously long warm up time. (Hours). I have been tempted to use another key space on the prod fdb cluster to exercise all the grpc methods on startup. Is there a more proper approach? (I appreciate this may not be a pure fdb question, but did wonder if there is something specific going on).</p>\n<p>Right now all of my transactions occur within a single record store (per environment test/dev/prod etc.) but I am assuming that transactions across record stores are allowable without nasty side effects? (Within usual limits for space and time) If you try to use multi tenancy is that impacted?</p>\n<p>I was slightly surprised by managing to make UUIDs work in records so easily (meaning com.apple.foundationdb.record.UUID fields convert silently to a java uuid in tuples when they\u2019re indexed). This is obviously welcome behaviour, but I did not see it documented.</p>\n<p>A more general observation is I found reading the unit tests to be surprisingly educational, particularly with respect to learning how to write keyexpressions for secondary indexes. I wish I had been kicked that way earlier.</p>\n<p>I am absolutely willing to make PRs against the client repo to address, for example, the UUID documentation, however, I just want to make sure I\u2019m not missing something.</p>\n<p>Thanks a lot!</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 1,
        "updated_at": "2024-05-14T19:58:48.831Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 87,
        "reads": 18,
        "readers_count": 17,
        "score": 433.6,
        "yours": false,
        "topic_id": 4478,
        "topic_slug": "thoughts-from-using-and-deploying-the-record-layer-as-a-learning-exercise",
        "display_username": "Nigel Birkenshaw",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1420,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/thoughts-from-using-and-deploying-the-record-layer-as-a-learning-exercise/4478/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      }
    ],
    "stream": [
      14049
    ]
  },
  "timeline_lookup": [
    [
      1,
      525
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Thoughts from using and deploying the Record Layer as a learning exercise",
  "id": 4478,
  "title": "Thoughts from using and deploying the Record Layer as a learning exercise",
  "posts_count": 1,
  "created_at": "2024-05-14T19:58:48.748Z",
  "views": 205,
  "reply_count": 0,
  "like_count": 0,
  "last_posted_at": "2024-05-14T19:58:48.831Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "thoughts-from-using-and-deploying-the-record-layer-as-a-learning-exercise",
  "category_id": 12,
  "word_count": 443,
  "deleted_at": null,
  "user_id": 1420,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_4478",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 1,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 1,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Using Record Layer via other languages, e.g. Python",
      "id": 2882,
      "title": "Using Record Layer via other languages, e.g. Python",
      "slug": "using-record-layer-via-other-languages-e-g-python",
      "posts_count": 7,
      "reply_count": 3,
      "highest_post_number": 7,
      "image_url": null,
      "created_at": "2021-09-06T13:20:19.020Z",
      "last_posted_at": "2021-09-09T17:21:06.448Z",
      "bumped": true,
      "bumped_at": "2021-09-09T17:21:06.448Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 1056,
      "category_id": 12,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 782,
            "username": "omidb",
            "name": "Omid Bakhshandeh",
            "avatar_template": "/user_avatar/forums.foundationdb.org/omidb/{size}/925_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 946,
            "username": "rajivr",
            "name": "Rajiv M Ranganath",
            "avatar_template": "/user_avatar/forums.foundationdb.org/rajivr/{size}/1100_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 369,
            "username": "ricky.saltzer",
            "name": "Ricky Saltzer",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/r/f17d59/{size}.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Opensourcing Record-Store",
      "id": 2358,
      "title": "Opensourcing Record-Store",
      "slug": "opensourcing-record-store",
      "posts_count": 3,
      "reply_count": 1,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2020-09-23T16:06:09.727Z",
      "last_posted_at": "2020-09-23T16:30:44.149Z",
      "bumped": true,
      "bumped_at": "2020-09-23T16:30:44.149Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 5,
      "views": 1012,
      "category_id": 12,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 534,
            "username": "PierreZ",
            "name": "Pierre Zemb",
            "avatar_template": "/user_avatar/forums.foundationdb.org/pierrez/{size}/866_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 15,
            "username": "markus.pilman",
            "name": "Markus Pilman",
            "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Torture test gRPC facade w/ Record Layer",
      "id": 2831,
      "title": "Torture test gRPC facade w/ Record Layer",
      "slug": "torture-test-grpc-facade-w-record-layer",
      "posts_count": 3,
      "reply_count": 1,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2021-08-02T10:46:02.669Z",
      "last_posted_at": "2021-08-02T16:58:46.204Z",
      "bumped": true,
      "bumped_at": "2021-08-02T16:58:46.204Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 562,
      "category_id": 12,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 38,
            "username": "panghy",
            "name": "Clement Pang",
            "avatar_template": "/user_avatar/forums.foundationdb.org/panghy/{size}/19_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 34,
            "username": "scgray",
            "name": "Scott Gray",
            "avatar_template": "/user_avatar/forums.foundationdb.org/scgray/{size}/30_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Record Layer query performance benchmarking against traditional RDBMS",
      "id": 2082,
      "title": "Record Layer query performance benchmarking against traditional RDBMS",
      "slug": "record-layer-query-performance-benchmarking-against-traditional-rdbms",
      "posts_count": 4,
      "reply_count": 0,
      "highest_post_number": 4,
      "image_url": null,
      "created_at": "2020-04-20T18:46:55.680Z",
      "last_posted_at": "2020-04-22T15:51:53.223Z",
      "bumped": true,
      "bumped_at": "2020-04-22T15:51:53.223Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 1528,
      "category_id": 12,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 712,
            "username": "rahul-nitkkr",
            "name": "Rahul Roy",
            "avatar_template": "/user_avatar/forums.foundationdb.org/rahul-nitkkr/{size}/754_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 34,
            "username": "scgray",
            "name": "Scott Gray",
            "avatar_template": "/user_avatar/forums.foundationdb.org/scgray/{size}/30_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "recordLayer implementation",
      "id": 3707,
      "title": "recordLayer implementation",
      "slug": "recordlayer-implementation",
      "posts_count": 1,
      "reply_count": 0,
      "highest_post_number": 1,
      "image_url": null,
      "created_at": "2022-12-23T09:13:57.619Z",
      "last_posted_at": "2022-12-23T09:13:57.673Z",
      "bumped": true,
      "bumped_at": "2022-12-23T09:13:57.673Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 410,
      "category_id": 12,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest single",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 989,
            "username": "laita",
            "name": "Lou",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/77aa72/{size}.png",
            "trust_level": 1
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 1420,
        "username": "nbirkenshaw",
        "name": "Nigel Birkenshaw",
        "avatar_template": "/user_avatar/forums.foundationdb.org/nbirkenshaw/{size}/1788_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      }
    ],
    "created_by": {
      "id": 1420,
      "username": "nbirkenshaw",
      "name": "Nigel Birkenshaw",
      "avatar_template": "/user_avatar/forums.foundationdb.org/nbirkenshaw/{size}/1788_2.png"
    },
    "last_poster": {
      "id": 1420,
      "username": "nbirkenshaw",
      "name": "Nigel Birkenshaw",
      "avatar_template": "/user_avatar/forums.foundationdb.org/nbirkenshaw/{size}/1788_2.png"
    }
  },
  "bookmarks": []
}