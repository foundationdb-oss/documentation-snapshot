{
  "post_stream": {
    "posts": [
      {
        "id": 8944,
        "name": "Pierre Zemb",
        "username": "PierreZ",
        "avatar_template": "/user_avatar/forums.foundationdb.org/pierrez/{size}/866_2.png",
        "created_at": "2021-01-18T13:24:12.458Z",
        "cooked": "<p>Hi!</p>\n<p>I\u2019m currently implementing the <a href=\"https://github.com/Clikengo/foundationdb-rs/pull/217\" rel=\"noopener nofollow ugc\">Directory for the unofficial Rust client</a> and I\u2019m confused around the idea of the <code>DirectoryPartition</code>.</p>\n<p>I do think something is wrong around my mental representation of the Directory, and I would love some help to find which part <img src=\"https://emoji.discourse-cdn.com/twitter/rofl.png?v=12\" title=\":rofl:\" class=\"emoji\" alt=\":rofl:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>On the <a href=\"https://github.com/apple/foundationdb/blob/master/bindings/python/fdb/directory_impl.py#L492-L495\" rel=\"noopener nofollow ugc\">Python bindings, we have this</a>:</p>\n<pre data-code-wrap=\"python\"><code class=\"lang-python\">    def _contents_of_node(self, node, path, layer=None):\n        prefix = self._node_subspace.unpack(node.key())[0]\n\n        if layer == b'partition':\n            return DirectoryPartition(self._path + path, prefix, self)\n        else:\n            return DirectorySubspace(self._path + path, prefix, self, layer)\n</code></pre>\n<p>It looks like a <code>DirectoryPartition</code> is kind of a nested Directory inside a <code>node_subspace</code>, which is confirmed by <a href=\"https://github.com/apple/foundationdb/blob/master/bindings/go/src/fdb/directory/directoryPartition.go#L31-L34\" rel=\"noopener nofollow ugc\">the Go\u2019s related struct</a>:</p>\n<pre data-code-wrap=\"go\"><code class=\"lang-go\">type directoryPartition struct {\n\tdirectoryLayer\n\tparentDirectoryLayer directoryLayer\n}\n</code></pre>\n<p>I do not see the point of having another <code>Directory</code> with his own <code>{node, hca} subspaces</code> inside the <code>node_subspace</code> of the parent.</p>\n<p>I also don\u2019t understand the <a href=\"https://apple.github.io/foundationdb/developer-guide.html#directory-partitions\" rel=\"noopener nofollow ugc\">relevant documentation</a>:</p>\n<blockquote>\n<p>Under normal operation, a directory does not share a common key prefix with its subdirectories. As a result, related directories are not necessarily located together in key-space.</p>\n</blockquote>\n<p>Are we talking about the <code>content_subspace</code> or the <code>node_subspace</code>? Both of them have a key-prefix:</p>\n<ul>\n<li>the <code>content_subspace</code> has an <a href=\"https://github.com/apple/foundationdb/blob/master/bindings/go/src/fdb/directory/directory.go#L50\" rel=\"noopener nofollow ugc\">prefix for all sub-directories</a>,</li>\n<li>the <code>node_subspace</code> can be configured at creation.</li>\n</ul>\n<blockquote>\n<p>This means that you cannot use a single range query to read all contents of a directory and its descendants simultaneously, for example.</p>\n</blockquote>\n<p>Why can\u2019t we *just* scan the <code>node_subspace</code>? Here\u2019s how I represent the directory, for a path like <code>[]string{\"app\", \"my-app\"}</code>:</p>\n<pre><code class=\"lang-plaintext\">               +\n               |\n               | version = (1,0,0)              # Directory's version\n               |\n               |      +\n               | \"hca\"|                          # used to allocate numbers like 12 and 42\n               |      +\n     \\xFE      |\n    node's     | (0,\"app\")=12                    # id allocated by the hca for \"path\"\n   subspace    | (0,\"app\",\"layer\")=\"\"            # layer allow an ownership's mecanism\n               |\n               |\n               | (0,\"app\",0,\"my-app\",\"layer\")=\"\" # layer allow an ownership's mecanism\n               | (0,\"app\",0,\"my-app\")=42         # id allocated by the hca for \"layer\"\n               +\n\n\n               +\n               |\n               |\n   (12,42)     |\n   content     | # data's subspace for path \"app\",\"my-app\"\n  subspace     |\n               |\n               +\n</code></pre>\n<p>As we are packing any nested path in the previous subspace (here <code>\"my-app\"</code> is a Subspace packed from the \u201capp\u201d subspace, himself packed from the <code>node_subspace</code>), I don\u2019t see why we cannot scan between</p>\n<ul>\n<li><code>(\\xFE, 0)</code> and <code>(\\xFE, 1)</code> for the <code>root_node</code>,</li>\n<li><code>(\\xFE, 0, ...some nested path..., 0)</code> and <code>(\\xFE, ...some nested path..., 1)</code> for any nested node,</li>\n</ul>\n<p>and filter the \u201clayer\u201d row key?</p>\n<blockquote>\n<p>For most applications this behavior is acceptable, but in some cases it may be useful to have a directory tree in your hierarchy where every directory shares a common prefix.</p>\n</blockquote>\n<p>I guess here we are talking about the <code>content_subspace</code>, but we do have a common prefix: the parent, like in my exemple <code>\"my-app\"</code> is prefixed by the integer generated for <code>\"app\"</code>.</p>\n<hr>\n<p>Thanks for reading me, and stay safe,<br>\nPierreZ</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 5,
        "updated_at": "2021-01-18T13:24:12.458Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 187,
        "reads": 41,
        "readers_count": 40,
        "score": 948.2,
        "yours": false,
        "topic_id": 2514,
        "topic_slug": "questions-about-the-directory-partitions",
        "display_username": "Pierre Zemb",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/Clikengo/foundationdb-rs/pull/217",
            "internal": false,
            "reflection": false,
            "title": "[WIP] directory layer by PierreZ \u00b7 Pull Request #217 \u00b7 Clikengo/foundationdb-rs \u00b7 GitHub",
            "clicks": 2
          },
          {
            "url": "https://github.com/apple/foundationdb/blob/master/bindings/python/fdb/directory_impl.py#L492-L495",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/directory_impl.py at master \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 2
          },
          {
            "url": "https://apple.github.io/foundationdb/developer-guide.html#directory-partitions",
            "internal": false,
            "reflection": false,
            "title": "Developer Guide \u2014 FoundationDB 6.2",
            "clicks": 2
          },
          {
            "url": "https://github.com/apple/foundationdb/blob/master/bindings/go/src/fdb/directory/directory.go#L50",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/directory.go at master \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 2
          },
          {
            "url": "https://github.com/apple/foundationdb/blob/master/bindings/go/src/fdb/directory/directoryPartition.go#L31-L34",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/directoryPartition.go at master \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 534,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/questions-about-the-directory-partitions/2514/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 8949,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2021-01-20T23:34:25.696Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"PierreZ\" data-post=\"1\" data-topic=\"2514\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/pierrez/48/866_2.png\" class=\"avatar\"> PierreZ:</div>\n<blockquote>\n<p>Are we talking about the <code>content_subspace</code> or the <code>node_subspace</code> ? Both of them have a key-prefix:</p>\n<ul>\n<li>the <code>content_subspace</code> has an <a href=\"https://github.com/apple/foundationdb/blob/master/bindings/go/src/fdb/directory/directory.go#L50\">prefix for all sub-directories</a>,</li>\n</ul>\n</blockquote>\n</aside>\n<p>This is referring to the content subspace, which is disjoint between a parent and its children. The directory paths are hierarchical as stored in the node subspace, but a parent and its children will be allocated prefixes separately and neither will be a prefix of the other.</p>\n<p>This is actually necessarily true if we want to support cheap directory moves. We can\u2019t move all of the data in the content subspace, but we can easily update the indirection map in the node subspace to say directory X now is a child of directory Y.</p>\n<aside class=\"quote no-group\" data-username=\"PierreZ\" data-post=\"1\" data-topic=\"2514\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/pierrez/48/866_2.png\" class=\"avatar\"> PierreZ:</div>\n<blockquote>\n<p>I\u2019m confused around the idea of the <code>DirectoryPartition</code> .</p>\n</blockquote>\n</aside>\n<p>As far as I know this is a little used feature, and I don\u2019t remember many details from the particular use-case that motivated it. The basic idea, though, is that all of the directory partitions subdirectories will be allocated within the content subspace of the partition, so now you can read all of this sub-tree, etc. by scanning one prefix.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 5,
        "updated_at": "2021-01-20T23:34:25.696Z",
        "reply_count": 2,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 2,
        "reads": 27,
        "readers_count": 26,
        "score": 25.4,
        "yours": false,
        "topic_id": 2514,
        "topic_slug": "questions-about-the-directory-partitions",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/questions-about-the-directory-partitions/2514/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8950,
        "name": "Seph Gentle",
        "username": "josephg",
        "avatar_template": "/user_avatar/forums.foundationdb.org/josephg/{size}/84_2.png",
        "created_at": "2021-01-21T05:20:59.345Z",
        "cooked": "<p>I wrote the (unofficial) nodejs frontend. When I was porting the <a href=\"https://github.com/josephg/node-foundationdb/blob/e36c0efe70c564ed7cd5eea4e0f3cf314fa15d7e/lib/directory.ts\" rel=\"noopener nofollow ugc\">directory layer to nodejs</a> code I puzzled over some similar ideas.</p>\n<p>I think the idea of <code>DirectoryPartiton</code> is that it allows \u2018physical\u2019 separation between applications / database contents via prefixes rather than just \u2018logical\u2019 separation (what you\u2019d get by putting each application into its own directory).</p>\n<p>So if you have two applications <code>a</code> and <code>b</code> in your fdb database, you can completely isolate each application to <code>a/</code> and <code>b/</code> subspaces, without any chance of crosstalk. And that might be useful if you later wanted to move application <code>a</code> to a different database, or back up application <code>b</code> independently of <code>a</code>, and stuff like that.</p>\n<p>That said, my instinct is that whoever wrote the directory layer designed it that way because they believe singletons are bad. The design makes the RootDirectoryLayer the only special object in the directory layer, with a hardcoded path. That hinge exists as a maker\u2019s mark even if nobody ever uses it. I thought about taking that out (and generally <a href=\"https://github.com/josephg/node-foundationdb/blob/e36c0efe70c564ed7cd5eea4e0f3cf314fa15d7e/lib/directory.ts#L281-L301\" rel=\"noopener nofollow ugc\">tidying the whole directory layer up</a>) but the directory layer fuzzer is <a href=\"https://github.com/josephg/node-foundationdb/blob/e36c0efe70c564ed7cd5eea4e0f3cf314fa15d7e/lib/directory.ts#L668-L673\" rel=\"noopener nofollow ugc\">very picky</a>. And the other implementations of the directory layer are all almost identical. So I ended up favoring consistency and just porting the directory layer almost directly.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 5,
        "updated_at": "2021-01-21T05:29:28.186Z",
        "reply_count": 1,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 25,
        "readers_count": 24,
        "score": 10.0,
        "yours": false,
        "topic_id": 2514,
        "topic_slug": "questions-about-the-directory-partitions",
        "display_username": "Seph Gentle",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/josephg/node-foundationdb/blob/e36c0efe70c564ed7cd5eea4e0f3cf314fa15d7e/lib/directory.ts",
            "internal": false,
            "reflection": false,
            "title": "node-foundationdb/directory.ts at e36c0efe70c564ed7cd5eea4e0f3cf314fa15d7e \u00b7 josephg/node-foundationdb \u00b7 GitHub",
            "clicks": 3
          },
          {
            "url": "https://github.com/josephg/node-foundationdb/blob/e36c0efe70c564ed7cd5eea4e0f3cf314fa15d7e/lib/directory.ts#L668-L673",
            "internal": false,
            "reflection": false,
            "title": "node-foundationdb/directory.ts at e36c0efe70c564ed7cd5eea4e0f3cf314fa15d7e \u00b7 josephg/node-foundationdb \u00b7 GitHub",
            "clicks": 2
          },
          {
            "url": "https://github.com/josephg/node-foundationdb/blob/e36c0efe70c564ed7cd5eea4e0f3cf314fa15d7e/lib/directory.ts#L281-L301",
            "internal": false,
            "reflection": false,
            "title": "node-foundationdb/directory.ts at e36c0efe70c564ed7cd5eea4e0f3cf314fa15d7e \u00b7 josephg/node-foundationdb \u00b7 GitHub",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 12,
          "username": "ajbeamon",
          "name": "A.J. Beamon",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 120,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/questions-about-the-directory-partitions/2514/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8978,
        "name": "Pierre Zemb",
        "username": "PierreZ",
        "avatar_template": "/user_avatar/forums.foundationdb.org/pierrez/{size}/866_2.png",
        "created_at": "2021-01-25T09:03:42.801Z",
        "cooked": "<p>Thank you both for your replies!</p>\n<aside class=\"quote no-group\" data-username=\"ajbeamon\" data-post=\"3\" data-topic=\"2514\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>This is referring to the content subspace, which is disjoint between a parent and its children. The directory paths are hierarchical as stored in the node subspace, but a parent and its children will be allocated prefixes separately and neither will be a prefix of the other.</p>\n</blockquote>\n</aside>\n<p>Strange, I thought that for a path like <code>/app/my-app</code>, the <code>content-subspace</code> would been like (12, 42). I will test that.</p>\n<aside class=\"quote no-group\" data-username=\"josephg\" data-post=\"4\" data-topic=\"2514\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/josephg/48/84_2.png\" class=\"avatar\"> josephg:</div>\n<blockquote>\n<p>I wrote the (unofficial) nodejs frontend. When I was porting the <a href=\"https://github.com/josephg/node-foundationdb/blob/e36c0efe70c564ed7cd5eea4e0f3cf314fa15d7e/lib/directory.ts\" rel=\"noopener nofollow ugc\">directory layer to nodejs</a> code I puzzled over some similar ideas.</p>\n</blockquote>\n</aside>\n<p>Thanks, I will go through your implementation <img src=\"https://emoji.discourse-cdn.com/twitter/+1.png?v=12\" title=\":+1:\" class=\"emoji\" alt=\":+1:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<aside class=\"quote no-group\" data-username=\"josephg\" data-post=\"4\" data-topic=\"2514\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/josephg/48/84_2.png\" class=\"avatar\"> josephg:</div>\n<blockquote>\n<p>So if you have two applications <code>a</code> and <code>b</code> in your fdb database, you can completely isolate each application to <code>a/</code> and <code>b/</code> subspaces, without any chance of crosstalk. And that might be useful if you later wanted to move application <code>a</code> to a different database, or back up application <code>b</code> independently of <code>a</code> , and stuff like that.</p>\n</blockquote>\n</aside>\n<p>The isolation is brought by the HCA, no? And in a \u201ccomplex\u201d path, isolation is brought by the HCA\u2019s allocation of the parent? Am I mistaken?</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 5,
        "updated_at": "2021-01-25T09:03:42.801Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 2,
        "incoming_link_count": 2,
        "reads": 24,
        "readers_count": 23,
        "score": 19.8,
        "yours": false,
        "topic_id": 2514,
        "topic_slug": "questions-about-the-directory-partitions",
        "display_username": "Pierre Zemb",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 534,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/questions-about-the-directory-partitions/2514/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8980,
        "name": "Seph Gentle",
        "username": "josephg",
        "avatar_template": "/user_avatar/forums.foundationdb.org/josephg/{size}/84_2.png",
        "created_at": "2021-01-25T12:20:22.847Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"PierreZ\" data-post=\"5\" data-topic=\"2514\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/pierrez/48/866_2.png\" class=\"avatar\"> PierreZ:</div>\n<blockquote>\n<p>Thanks, I will go through your implementation <img src=\"https://emoji.discourse-cdn.com/twitter/+1.png?v=12\" title=\":+1:\" class=\"emoji\" alt=\":+1:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n</blockquote>\n</aside>\n<p>Sure thing. Feel free to reach out if you have questions, though my comments probably contain most of my remaining memory of that code.</p>\n<aside class=\"quote no-group\" data-username=\"PierreZ\" data-post=\"5\" data-topic=\"2514\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/pierrez/48/866_2.png\" class=\"avatar\"> PierreZ:</div>\n<blockquote>\n<p>The isolation is brought by the HCA, no? And in a \u201ccomplex\u201d path, isolation is brought by the HCA\u2019s allocation of the parent? Am I mistaken?</p>\n</blockquote>\n</aside>\n<p>Yes, but they share the same HCA &amp; HCA pool. If you used separate DirectoryLayers under two raw prefixes then the code to split the data apart wouldn\u2019t need to understand the directorylayer at all - it could copy all the keys under the prefixes blindly. But I suspect the number of applications which have ever done that could be counted on one hand. If the rust implementation was missing that feature, I doubt anyone would lose sleep over it.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 5,
        "updated_at": "2021-01-25T12:20:22.847Z",
        "reply_count": 0,
        "reply_to_post_number": 5,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 22,
        "readers_count": 21,
        "score": 4.4,
        "yours": false,
        "topic_id": 2514,
        "topic_slug": "questions-about-the-directory-partitions",
        "display_username": "Seph Gentle",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 120,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/questions-about-the-directory-partitions/2514/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      8944,
      8949,
      8950,
      8978,
      8980
    ]
  },
  "timeline_lookup": [
    [
      1,
      1737
    ],
    [
      2,
      1735
    ],
    [
      4,
      1731
    ],
    [
      5,
      1730
    ]
  ],
  "suggested_topics": [],
  "tags": [
    "bindings"
  ],
  "tags_descriptions": {},
  "fancy_title": "Questions about the Directory partitions",
  "id": 2514,
  "title": "Questions about the Directory partitions",
  "posts_count": 5,
  "created_at": "2021-01-18T13:24:12.363Z",
  "views": 883,
  "reply_count": 2,
  "like_count": 0,
  "last_posted_at": "2021-01-25T12:20:22.847Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "questions-about-the-directory-partitions",
  "category_id": 7,
  "word_count": 1382,
  "deleted_at": null,
  "user_id": 534,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_2514",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 6,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 3,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "What&rsquo;s the purpose of the Directory layer?",
      "id": 677,
      "title": "What's the purpose of the Directory layer?",
      "slug": "whats-the-purpose-of-the-directory-layer",
      "posts_count": 10,
      "reply_count": 6,
      "highest_post_number": 11,
      "image_url": null,
      "created_at": "2018-09-02T20:58:11.436Z",
      "last_posted_at": "2022-07-22T02:24:33.270Z",
      "bumped": true,
      "bumped_at": "2022-07-22T02:24:33.270Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 11,
      "views": 6523,
      "category_id": 9,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 41,
            "username": "amirouche",
            "name": "Amirouche",
            "avatar_template": "/user_avatar/forums.foundationdb.org/amirouche/{size}/1911_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 538,
            "username": "ravilution",
            "name": "Ravilution",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ravilution/{size}/728_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 1080,
            "username": "knarayanan88",
            "name": "Narayanan K",
            "avatar_template": "/user_avatar/forums.foundationdb.org/knarayanan88/{size}/1300_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Application design using Subspace and Tuple",
      "id": 452,
      "title": "Application design using Subspace and Tuple",
      "slug": "application-design-using-subspace-and-tuple",
      "posts_count": 9,
      "reply_count": 7,
      "highest_post_number": 9,
      "image_url": null,
      "created_at": "2018-05-22T21:46:43.537Z",
      "last_posted_at": "2018-07-14T21:02:50.010Z",
      "bumped": true,
      "bumped_at": "2018-07-14T21:02:50.010Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 5,
      "views": 3678,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 211,
            "username": "brk0v",
            "name": "Viacheslav Biriukov",
            "avatar_template": "/user_avatar/forums.foundationdb.org/brk0v/{size}/173_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 317,
            "username": "Lundin",
            "name": "Pontus Lundin",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/dfb087/{size}.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "How to traverse directory/subspace schema",
      "id": 1913,
      "title": "How to traverse directory/subspace schema",
      "slug": "how-to-traverse-directory-subspace-schema",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2020-01-27T14:14:45.214Z",
      "last_posted_at": "2020-01-27T16:51:55.243Z",
      "bumped": true,
      "bumped_at": "2020-01-28T09:59:23.285Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1036,
      "category_id": 5,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 688,
            "username": "nkev",
            "name": "Nuri",
            "avatar_template": "/user_avatar/forums.foundationdb.org/nkev/{size}/740_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Directory Layer design document",
      "id": 1538,
      "title": "Directory Layer design document",
      "slug": "directory-layer-design-document",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2019-07-26T19:30:02.034Z",
      "last_posted_at": "2019-07-26T20:00:10.504Z",
      "bumped": true,
      "bumped_at": "2019-07-26T20:00:10.504Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1042,
      "category_id": 9,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 251,
            "username": "George",
            "name": "",
            "avatar_template": "/user_avatar/forums.foundationdb.org/george/{size}/620_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Can subspace/dir be used unlimited (modelling) and about multi client",
      "id": 536,
      "title": "Can subspace/dir be used unlimited (modelling) and about multi client",
      "slug": "can-subspace-dir-be-used-unlimited-modelling-and-about-multi-client",
      "posts_count": 4,
      "reply_count": 1,
      "highest_post_number": 4,
      "image_url": null,
      "created_at": "2018-07-01T15:39:50.966Z",
      "last_posted_at": "2018-07-03T18:41:34.170Z",
      "bumped": true,
      "bumped_at": "2018-07-03T18:44:49.138Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1105,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 317,
            "username": "Lundin",
            "name": "Pontus Lundin",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/dfb087/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 22,
            "username": "dave",
            "name": "David Scherer",
            "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 120,
        "username": "josephg",
        "name": "Seph Gentle",
        "avatar_template": "/user_avatar/forums.foundationdb.org/josephg/{size}/84_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 534,
        "username": "PierreZ",
        "name": "Pierre Zemb",
        "avatar_template": "/user_avatar/forums.foundationdb.org/pierrez/{size}/866_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 12,
        "username": "ajbeamon",
        "name": "A.J. Beamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      }
    ],
    "created_by": {
      "id": 534,
      "username": "PierreZ",
      "name": "Pierre Zemb",
      "avatar_template": "/user_avatar/forums.foundationdb.org/pierrez/{size}/866_2.png"
    },
    "last_poster": {
      "id": 120,
      "username": "josephg",
      "name": "Seph Gentle",
      "avatar_template": "/user_avatar/forums.foundationdb.org/josephg/{size}/84_2.png"
    },
    "links": [
      {
        "url": "https://github.com/josephg/node-foundationdb/blob/e36c0efe70c564ed7cd5eea4e0f3cf314fa15d7e/lib/directory.ts",
        "title": "node-foundationdb/directory.ts at e36c0efe70c564ed7cd5eea4e0f3cf314fa15d7e \u00b7 josephg/node-foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 120,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://apple.github.io/foundationdb/developer-guide.html#directory-partitions",
        "title": "Developer Guide \u2014 FoundationDB 6.2",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 534,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/master/bindings/go/src/fdb/directory/directory.go#L50",
        "title": "foundationdb/directory.go at master \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 534,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/blob/master/bindings/python/fdb/directory_impl.py#L492-L495",
        "title": "foundationdb/directory_impl.py at master \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 534,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/Clikengo/foundationdb-rs/pull/217",
        "title": "[WIP] directory layer by PierreZ \u00b7 Pull Request #217 \u00b7 Clikengo/foundationdb-rs \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 534,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/josephg/node-foundationdb/blob/e36c0efe70c564ed7cd5eea4e0f3cf314fa15d7e/lib/directory.ts#L668-L673",
        "title": "node-foundationdb/directory.ts at e36c0efe70c564ed7cd5eea4e0f3cf314fa15d7e \u00b7 josephg/node-foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 120,
        "domain": "github.com",
        "root_domain": "github.com"
      }
    ]
  },
  "bookmarks": []
}