{
  "post_stream": {
    "posts": [
      {
        "id": 6745,
        "name": "Leo Hu",
        "username": "lehu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
        "created_at": "2020-04-18T06:43:30.070Z",
        "cooked": "<p>I tested some FDB backup/restore scenarios for our dbs, and found the backups were slow and restores very slow. Like to get some advice on performance tuning for backup/restore.</p>\n<p>Let me first describe our example db cluster and how backup/restore were done.</p>\n<ul>\n<li>The db contains 1.5TB KV data.</li>\n<li>The cluster uses 2 FDB regions with 3 DCs, and with triple replication mode.</li>\n<li>It is deployed on Kubernetes with TLS enabled, 20 storage pods/nodes.</li>\n<li>Need to backup to remote storage target, as a K8s pod\u2019s local storage cannot be guaranteed to persistent when the pod goes bad. Only one type of remote storages is available in the RNPCI env the  cluster is deployed, which is NFS drive (NetApp Filer).</li>\n<li>Use dedicated pods/nodes (separate from data nodes) for backup agents.</li>\n<li>When restoring, disabled cross-DC replication first, and further reduced it to single mode. After restore, enabled triple mode and cross-DC replication.</li>\n</ul>\n<p>Here are the best performance times we\u2019ve achieved:</p>\n<ul>\n<li>\n<strong>backup time: 8 hrs, at 3.1GB per min</strong> .</li>\n<li>\n<strong>restore time: 27 hrs at 0.93GB per min (minute, not second)</strong> . At that time, the db is operational at single-replica mode.  After turning on triple-mode and cross-DC replication, then <strong>Another 9 hrs</strong> to achieve fully redundant state.</li>\n</ul>\n<p>The restore is too slow. We need to tune it. I tried parallel restore with multiple backup_agents on one node, and multiple agents on 2 nodes. I want to see how backup agents are collaborating, e.g., which agent is working and how fast, so that I can adjust the config. But I don\u2019t see such info from the status output.</p>\n<p>Is there a way to get performance data on each backup agent?</p>\n<p>What are the good methods to identify bottlenecks of the restore op?  Which is usually most crucial? I/O, CPU, network, or # of backup agents?</p>\n<p>What type of storage is usually faster for backup/restore? NFS, blob, others?</p>\n<p>If you can share your backup/restore performance data and tips, I\u2019d highly appreciate it. Please be specific with how you achieve your best performance, such as</p>\n<ul>\n<li>backup agent config (# of processes, # of nodes),</li>\n<li>what type of storage destinations is used,</li>\n<li>whether you disable triple mode before restore, and reenable it after.</li>\n<li>the env and topology your cluster is deployed.</li>\n</ul>\n<p>Thank you.</p>\n<p>Leo</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2020-04-18T06:43:30.070Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1028,
        "reads": 106,
        "readers_count": 105,
        "score": 5151.2,
        "yours": false,
        "topic_id": 2078,
        "topic_slug": "backup-restore-performance-tuning",
        "display_username": "Leo Hu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 643,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-restore-performance-tuning/2078/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 6746,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2020-04-18T09:11:10.413Z",
        "cooked": "<ul>\n<li>\n<p>One backup agent per 6 fdb storage processes should perform well assuming their hardware and cluster connectivity is comparable to that of the cluster\u2019s storage processes.</p>\n</li>\n<li>\n<p>The backup agents get work randomly assigned, they should be essentially interchangeable for best performance (similar hardware, similar connectivity).</p>\n</li>\n<li>\n<p>The backup medium (blob, filesystem) does not matter as far as FDB is concerned, only the speed/connectivity to that medium and in most instances this will not be the bottleneck.</p>\n</li>\n<li>\n<p>Switching to single replication during restore is a good idea.  Double is also an option, which still maintains some fault tolerance during the restore.</p>\n</li>\n<li>\n<p>Backup agents can produce a trace log with the <code>--logdir</code> option, and there are trace events beginning with <code>FileBackup</code> and <code>FileRestore</code> that can tell you about how much work they are doing.  But there really is no need to go here unless you suspect that your agents\u2019 capabilities are extremely mismatched.  For example, one backup agent with a much slower connection than all the others could spend a long time finishing the tasks it has been assigned long after all of the others have finished all other outstanding work.</p>\n</li>\n</ul>\n<p>Some more info about backup/restore performance limits:</p>\n<p>The current default backup and restore tools operate mostly as clients of the database.  This means that backup will not go faster than the read rate of your fdb cluster, and restore will not go faster than the write rate of your cluster.  Adding more agents only helps up to these limits.</p>\n<p>A backup that runs to a restorable state and then ends will write a randomly-ordered series of key space snapshots at different versions which collectively cover the entire range being backed up, plus the mutation log during that period.  This should max out of the read speed of a cluster as long as you have enough backup agents.  The random ordering means they will spread the work evenly over all storage teams.</p>\n<p>Restore will write all of a backup\u2019s key range snapshots to the database and apply the backup\u2019s mutation log to update them to the target version.  This process normally maxes out at the rate at which a single fdb proxy can apply the backup\u2019s mutation log, which is around 100MB/s on a well-tuned cluster.  A backup from a mostly-idle cluster can restore faster than this since it will have very few mutations to apply which are subject to this bottleneck.</p>\n<p>Coming in FDB 6.3 is a completely new restore process which eliminates the single-proxy bottleneck.  It uses a set of processes called restore workers to apply the backup\u2019s mutation log in parallel using large memory buffers and then commit the coalesced results to the database cluster in parallel.  This should bring restore speeds much closer to the write speed of the cluster even for backups that have large mutation logs.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2020-04-18T09:11:10.413Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 44,
        "reads": 105,
        "readers_count": 104,
        "score": 261.0,
        "yours": false,
        "topic_id": 2078,
        "topic_slug": "backup-restore-performance-tuning",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-restore-performance-tuning/2078/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6764,
        "name": "Leo Hu",
        "username": "lehu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
        "created_at": "2020-04-20T16:57:45.424Z",
        "cooked": "<p>Hi Steve,</p>\n<p>Thanks a lot for the tips and the info on the inner working of backup and restore. A couple of follow-up questions.</p>\n<ol>\n<li>On the number of backup agents: currently our backup agents use the same hardware config as storage nodes of 3 CPUs. We are flexible to get more powerful nodes from the Kubernetes cluster. Let\u2019s assume we expand to 40 storage processes and like to use 7 backup agents (~40/6). Which of the following is better or is there a difference?</li>\n</ol>\n<ul>\n<li>using 3 nodes of 3 CPUs, with 3, 3, 1 backup agents on them.</li>\n<li>using 1 node of 7 CPUs, with 7 backup agents.</li>\n</ul>\n<ol start=\"2\">\n<li>How do I detect and tune on the fdb proxy bottleneck? We are using fdb v6.2.</li>\n</ol>\n<p>Appreciate it.</p>\n<p>Leo</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2020-04-20T16:57:45.424Z",
        "reply_count": 2,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 96,
        "readers_count": 95,
        "score": 39.2,
        "yours": false,
        "topic_id": 2078,
        "topic_slug": "backup-restore-performance-tuning",
        "display_username": "Leo Hu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 7,
          "username": "SteavedHams",
          "name": "Steve Atherton",
          "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 643,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-restore-performance-tuning/2078/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6766,
        "name": "Leo Hu",
        "username": "lehu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
        "created_at": "2020-04-20T17:30:06.640Z",
        "cooked": "<p>Another question:<br>\nFDB has DR backup/restore option, where logs are continuously applied to the DR target cluster. Is it possible to configure to delay applying logs by a certain amount of time?</p>\n<p>This function is useful to remediate some human errors like accidental deletion of data. MongoDB has a similar function like this, called Delayed Replica Set Members.</p>\n<p>Thanks.</p>\n<p>Leo</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2020-04-20T17:30:06.640Z",
        "reply_count": 2,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 85,
        "readers_count": 84,
        "score": 42.0,
        "yours": false,
        "topic_id": 2078,
        "topic_slug": "backup-restore-performance-tuning",
        "display_username": "Leo Hu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 643,
          "username": "lehu",
          "name": "Leo Hu",
          "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 643,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-restore-performance-tuning/2078/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6779,
        "name": "Leo Hu",
        "username": "lehu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
        "created_at": "2020-04-20T20:17:22.968Z",
        "cooked": "<p>Yet another question.  The Fdb restore has the option to restore by key ranges selectively. Wondering what conditions need to be met to be able to perform a selective restore from a key range.</p>\n<ul>\n<li>Can it be restored from a full db backup? Or must it be from a backup done on the same key range?</li>\n<li>Can I keep the rest of the db (all keys out of the selected key range) unchanged and unaffected?</li>\n<li>Any additional actions needed for the full db consistency at the end?</li>\n</ul>\n<p>Thanks.</p>\n<p>Leo</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2020-04-20T20:17:22.968Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 82,
        "readers_count": 81,
        "score": 26.4,
        "yours": false,
        "topic_id": 2078,
        "topic_slug": "backup-restore-performance-tuning",
        "display_username": "Leo Hu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 643,
          "username": "lehu",
          "name": "Leo Hu",
          "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 643,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-restore-performance-tuning/2078/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6781,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2020-04-20T20:30:47.362Z",
        "cooked": "<p>You can restore a more restrictive set of key range(s) than what the backup contains, and leave the rest of the database untouched.  At the end of the restore, the target range will have been restored to the restore target version.</p>\n<p>There is one catch currently, however, that the database is locked during restore so you can\u2019t continue to use the untouched ranges.  This is so that clients do not write to the range being restored.  It\u2019s not uncommon for users to be unaware of all of the things using their database, so relaxing this part of the restore process is not a great idea, but in the future locks will likely be key range based and restore can just lock the ranges it will be restoring.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2020-04-20T20:30:47.362Z",
        "reply_count": 0,
        "reply_to_post_number": 5,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 77,
        "readers_count": 76,
        "score": 20.4,
        "yours": false,
        "topic_id": 2078,
        "topic_slug": "backup-restore-performance-tuning",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 643,
          "username": "lehu",
          "name": "Leo Hu",
          "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-restore-performance-tuning/2078/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6782,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2020-04-20T20:35:36.342Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"lehu\" data-post=\"4\" data-topic=\"2078\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/lehu/48/995_2.png\" class=\"avatar\"> lehu:</div>\n<blockquote>\n<p>FDB has DR backup/restore option, where logs are continuously applied to the DR target cluster. Is it possible to configure to delay applying logs by a certain amount of time?</p>\n</blockquote>\n</aside>\n<p>I\u2019m not aware of this currently being a feature, although it was discussed as a useful feature in the early days of DR.  The idea was to pause the application of mutations on the DR side and let them buffer in the database (where they are initially stored before being applied), but I\u2019m not sure if/when this would be implemented.</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2020-04-20T20:35:36.342Z",
        "reply_count": 0,
        "reply_to_post_number": 4,
        "quote_count": 1,
        "incoming_link_count": 2,
        "reads": 78,
        "readers_count": 77,
        "score": 25.6,
        "yours": false,
        "topic_id": 2078,
        "topic_slug": "backup-restore-performance-tuning",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-restore-performance-tuning/2078/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6783,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2020-04-20T20:40:11.988Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"lehu\" data-post=\"3\" data-topic=\"2078\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/lehu/48/995_2.png\" class=\"avatar\"> lehu:</div>\n<blockquote>\n<p>Let\u2019s assume we expand to 40 storage processes and like to use 7 backup agents (~40/6). Which of the following is better or is there a difference?</p>\n<ul>\n<li>using 3 nodes of 3 CPUs, with 3, 3, 1 backup agents on them.</li>\n<li>using 1 node of 7 CPUs, with 7 backup agents.</li>\n</ul>\n</blockquote>\n</aside>\n<p>Just so I understand you correctly, you\u2019re saying you want to have 40 storage processes but only 3 physical nodes with 3 CPUs each?</p>\n<p>EDIT:  I think I get it, these are just referring to the nodes running backup agents.  The first option is likely to perform better.  In networking, bandwidth isn\u2019t a completely fungible commodity to be split over an arbitrary number of hosts.  In other words, if you want to use X total bandwidth, even if X is less than the network interface maximum speed on a single host, you may not actually achieve X on a single host but you probably will using multiple hosts, each using less bandwidth.</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2020-04-20T20:46:42.970Z",
        "reply_count": 1,
        "reply_to_post_number": 3,
        "quote_count": 1,
        "incoming_link_count": 14,
        "reads": 80,
        "readers_count": 79,
        "score": 91.0,
        "yours": false,
        "topic_id": 2078,
        "topic_slug": "backup-restore-performance-tuning",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-restore-performance-tuning/2078/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6785,
        "name": "Leo Hu",
        "username": "lehu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
        "created_at": "2020-04-20T20:47:55.630Z",
        "cooked": "<p>The 3 nodes or 1 node are for backup agents only, separated from storage processes. I was thinking to have as many backup agent processes on a node as its number of CPUs. So I\u2019ll start 3 backup agent processes on a node of 3 CPUs, and 7 on a node of 7 CPUs.</p>\n<p>Sorry for not being clear on that.</p>\n<p>Thank you on your replies to my other questions.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2020-04-20T20:47:55.630Z",
        "reply_count": 1,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 74,
        "readers_count": 73,
        "score": 29.8,
        "yours": false,
        "topic_id": 2078,
        "topic_slug": "backup-restore-performance-tuning",
        "display_username": "Leo Hu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 7,
          "username": "SteavedHams",
          "name": "Steve Atherton",
          "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 643,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-restore-performance-tuning/2078/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6786,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2020-04-20T20:50:09.041Z",
        "cooked": "<p>Sorry I was being slow, <a class=\"mention\" href=\"/u/alexmiller\">@alexmiller</a> explained it to me and I updated my post before you replied.</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2020-04-20T20:50:09.041Z",
        "reply_count": 1,
        "reply_to_post_number": 9,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 73,
        "readers_count": 72,
        "score": 19.6,
        "yours": false,
        "topic_id": 2078,
        "topic_slug": "backup-restore-performance-tuning",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 643,
          "username": "lehu",
          "name": "Leo Hu",
          "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-restore-performance-tuning/2078/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6788,
        "name": "Leo Hu",
        "username": "lehu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
        "created_at": "2020-04-20T21:07:56.002Z",
        "cooked": "<p>I can see that more hosts (thus likely more network interface cards) have an advantage over fewer hosts in terms of accumulated network performance. Thanks, Steve.</p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2020-04-20T21:07:56.002Z",
        "reply_count": 1,
        "reply_to_post_number": 10,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 72,
        "readers_count": 71,
        "score": 19.4,
        "yours": false,
        "topic_id": 2078,
        "topic_slug": "backup-restore-performance-tuning",
        "display_username": "Leo Hu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 7,
          "username": "SteavedHams",
          "name": "Steve Atherton",
          "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 643,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-restore-performance-tuning/2078/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6789,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2020-04-20T21:37:23.784Z",
        "cooked": "<p>Yes, and this sort of thing can be in play at multiple levels.  Talking to the storage service (be it blob store or remote filesystem) from 3 client IPs could be better than just 1 if it tries to balance/limit bandwidth by IP to enforce some notion of fairness.</p>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2020-04-20T21:37:23.965Z",
        "reply_count": 1,
        "reply_to_post_number": 11,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 72,
        "readers_count": 71,
        "score": 29.4,
        "yours": false,
        "topic_id": 2078,
        "topic_slug": "backup-restore-performance-tuning",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 643,
          "username": "lehu",
          "name": "Leo Hu",
          "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": "Automatically removed quote of whole previous post.",
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-restore-performance-tuning/2078/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6906,
        "name": "Leo Hu",
        "username": "lehu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
        "created_at": "2020-05-05T19:00:10.774Z",
        "cooked": "<p>Hi folks, I have questions on fault tolerance with backup agents.</p>\n<p>When we have multiple nodes with multiple agents on each node collaborating together,</p>\n<ul>\n<li>What happens if one of the node or agent dies?</li>\n<li>Will the backup job still produces a consistent and complete backup at the end?</li>\n<li>Are there any affect on the restorability of the backup?</li>\n</ul>\n<p>Also I\u2019ve been wondering</p>\n<ul>\n<li>Is there a leader/controller elected among the agents?</li>\n<li>Through what mechanism does the agents collaborate together?</li>\n<li>Where is the metadata of backup/restore activities stored?</li>\n<li>How does the agents use the metadata to divide and conquer?</li>\n<li>Does each agent get the same of work pre-assigned? Workload dynamically adjusted?</li>\n</ul>\n<p>Thank you.<br>\nLeo</p>",
        "post_number": 13,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2020-05-05T19:00:10.774Z",
        "reply_count": 2,
        "reply_to_post_number": 12,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 72,
        "readers_count": 71,
        "score": 39.4,
        "yours": false,
        "topic_id": 2078,
        "topic_slug": "backup-restore-performance-tuning",
        "display_username": "Leo Hu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 7,
          "username": "SteavedHams",
          "name": "Steve Atherton",
          "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 643,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-restore-performance-tuning/2078/13",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6911,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2020-05-05T21:08:43.132Z",
        "cooked": "<p>Backup agents are all stateless workers, that coordinate using the database to grab smaller tasks as part of the overall backup.  If a backup agent dies, then the work it was assigned will eventually be picked up and completed by some other backup agent.</p>\n<aside class=\"quote\" data-post=\"6\" data-topic=\"205\">\n  <div class=\"title\">\n    <div class=\"quote-controls\"></div>\n    <img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/evan/48/104_2.png\" class=\"avatar\">\n    <a href=\"https://forums.foundationdb.org/t/throughput-of-a-queue-set-like-data-structure/205/6\">Throughput of a Queue/Set like data structure</a> <a class=\"badge-category__wrapper \" href=\"/c/using-foundationdb/7\"><span data-category-id=\"7\" data-drop-close=\"true\" class=\"badge-category \" title=\"Topics related to use of FoundationDB.\"><span class=\"badge-category__name\">Using FoundationDB</span></span></a>\n  </div>\n  <blockquote>\n    Our backup and DR are implemented as clients of the database. We wrote a task bucket abstraction on top of the database to prevent different workers from doing the same work. You might be interested in looking at how we implemented that to give you some ideas for what you are planning.\n  </blockquote>\n</aside>\n\n<p>has links to both the TaskBucket implementation in FDB that\u2019s used to coordinate backup agent work, and the next post down has a link to something similar, but written in python (and smaller, clearer, and probably easier to quickly grok).</p>\n<p>This is also all changing in 6.3, and there will be a new backup implementation available that uses a different sort of worker, that instead recruited and managed as part of the cluster.  You can read more about that in the <a href=\"https://github.com/apple/foundationdb/blob/master/design/backup_v2_partitioned_logs.md\">design doc</a>.</p>",
        "post_number": 14,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2020-05-05T21:08:43.132Z",
        "reply_count": 1,
        "reply_to_post_number": 13,
        "quote_count": 0,
        "incoming_link_count": 7,
        "reads": 71,
        "readers_count": 70,
        "score": 54.2,
        "yours": false,
        "topic_id": 2078,
        "topic_slug": "backup-restore-performance-tuning",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/blob/master/design/backup_v2_partitioned_logs.md",
            "internal": false,
            "reflection": false,
            "title": "foundationdb/backup_v2_partitioned_logs.md at master \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 11
          },
          {
            "url": "https://forums.foundationdb.org/t/throughput-of-a-queue-set-like-data-structure/205/6",
            "internal": true,
            "reflection": false,
            "title": "Throughput of a Queue/Set like data structure",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 643,
          "username": "lehu",
          "name": "Leo Hu",
          "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-restore-performance-tuning/2078/14",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6912,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2020-05-05T21:23:32.901Z",
        "cooked": "<p>Backup agents can die at any time, this does not affect the integrity of the backup.  As long as one backup agent is running and successfully connected to your cluster and backup storage medium backup progress will be made.</p>\n<p>Backup agents use a shared work queue stored in FDB.  The queue stores tasks under different priorities.  The agents use FDB transactions to \u201cclaim\u201d a task exclusively for execution.  That claim times out after a period, so while an agent is executing task it routinely extends its claim, again with an FDB transaction.  If the agent fails, it will no longer extend its task ownership claim.  Another agent will then notice this (all agents check occasionally for expired task claims) and transactionally return the task to an executable state.</p>\n<p>A Backup begins as a single task, and its execution creates other tasks transactionally with its completion, and those tasks do the same.  Some tasks that represent large amounts of work are split into many smaller tasks representing the same work in aggregate.  Tasks are not \u201cpre\u201d-assigned to agents.  Each agent has a number of task slots, determined by a knob, and when an agent has a free task slot it will look for work to claim as described above.  The order in which tasks are claimed by agents for execution is random within a priority level.</p>",
        "post_number": 15,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2020-05-05T21:23:32.901Z",
        "reply_count": 0,
        "reply_to_post_number": 13,
        "quote_count": 0,
        "incoming_link_count": 8,
        "reads": 72,
        "readers_count": 71,
        "score": 54.4,
        "yours": false,
        "topic_id": 2078,
        "topic_slug": "backup-restore-performance-tuning",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 643,
          "username": "lehu",
          "name": "Leo Hu",
          "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-restore-performance-tuning/2078/15",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6913,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2020-05-05T21:37:41.337Z",
        "cooked": "<aside class=\"quote no-group quote-modified\" data-username=\"alexmiller\" data-post=\"14\" data-topic=\"2078\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/alexmiller/48/326_2.png\" class=\"avatar\"> alexmiller:</div>\n<blockquote>\n<p>This is also all changing in 6.3 <a href=\"https://github.com/apple/foundationdb/blob/master/design/backup_v2_partitioned_logs.md\">design doc</a>.</p>\n</blockquote>\n</aside>\n<p>To be clear, the part that is changing is how mutations are written to the backup.  Instead of the backup tasks writing the mutations themselves, one of the initial backup tasks will essentially configure a new database feature where the database will recruit \u201cbackup worker\u201d roles and stream mutation logs more efficiently to a backup destination URL until it is told, by another backup task, to stop.</p>\n<p>Everything else (backup start/stop/abort/pause, key range snapshots and metadata written to backup) remains the same.</p>",
        "post_number": 16,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2020-05-05T21:37:54.285Z",
        "reply_count": 1,
        "reply_to_post_number": 14,
        "quote_count": 1,
        "incoming_link_count": 3,
        "reads": 66,
        "readers_count": 65,
        "score": 33.2,
        "yours": false,
        "topic_id": 2078,
        "topic_slug": "backup-restore-performance-tuning",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-restore-performance-tuning/2078/16",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6914,
        "name": "Leo Hu",
        "username": "lehu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
        "created_at": "2020-05-05T23:43:10.917Z",
        "cooked": "<p>Quite interesting algorithm for parallelism in backup/restore!</p>\n<p>I figure, since KV pairs in FDB are more independent from each other than rows/tables in a relational db, which has rich data integrity constraints, we can have more flexibility and creativity for parallel ops. Is that right?</p>\n<p>I did one preliminary test with multiple backup nodes, but one of nodes erred. Describing the backup returns \u201crestorable\u201d. From the info you provided, I\u2019ll try testing to restore it.</p>\n<p>Thank you.</p>",
        "post_number": 17,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2020-05-05T23:50:16.184Z",
        "reply_count": 1,
        "reply_to_post_number": 16,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 70,
        "readers_count": 69,
        "score": 29.0,
        "yours": false,
        "topic_id": 2078,
        "topic_slug": "backup-restore-performance-tuning",
        "display_username": "Leo Hu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 7,
          "username": "SteavedHams",
          "name": "Steve Atherton",
          "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 643,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-restore-performance-tuning/2078/17",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6918,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2020-05-06T09:01:50.194Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"lehu\" data-post=\"17\" data-topic=\"2078\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/lehu/48/995_2.png\" class=\"avatar\"> lehu:</div>\n<blockquote>\n<p>I did one preliminary test with multiple backup nodes, but one of nodes erred.</p>\n</blockquote>\n</aside>\n<p>Yes, we need to improve the description around the \u201crecent errors\u201d output.  They do not mean necessarily that anything is \u201cwrong\u201d, just that errors did occur during execution.  The errors are only a problem if they are happening constantly and the backup is not making any progress.</p>\n<aside class=\"quote no-group\" data-username=\"lehu\" data-post=\"17\" data-topic=\"2078\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/lehu/48/995_2.png\" class=\"avatar\"> lehu:</div>\n<blockquote>\n<p>I figure, since KV pairs in FDB are more independent from each other than rows/tables in a relational db, which has rich data integrity constraints, we can have more flexibility and creativity for parallel ops. Is that right?</p>\n</blockquote>\n</aside>\n<p>Not quite, no.  When you restore a backup in FDB, you restore to a specific version and the entire key space that was backed up, all keys and values, are restored to that version.  Keys and values from different parts of the keyspace are no more independent than, say, a set of tables or indexes in a relational model that are all restored to a specific consistent version.</p>",
        "post_number": 18,
        "post_type": 1,
        "posts_count": 18,
        "updated_at": "2020-05-06T09:01:50.194Z",
        "reply_count": 0,
        "reply_to_post_number": 17,
        "quote_count": 1,
        "incoming_link_count": 14,
        "reads": 66,
        "readers_count": 65,
        "score": 83.2,
        "yours": false,
        "topic_id": 2078,
        "topic_slug": "backup-restore-performance-tuning",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/backup-restore-performance-tuning/2078/18",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      6745,
      6746,
      6764,
      6766,
      6779,
      6781,
      6782,
      6783,
      6785,
      6786,
      6788,
      6789,
      6906,
      6911,
      6912,
      6913,
      6914,
      6918
    ]
  },
  "timeline_lookup": [
    [
      1,
      2013
    ],
    [
      3,
      2010
    ],
    [
      13,
      1995
    ]
  ],
  "suggested_topics": [],
  "tags": [
    "performance"
  ],
  "tags_descriptions": {},
  "fancy_title": "Backup &amp; restore performance tuning",
  "id": 2078,
  "title": "Backup & restore performance tuning",
  "posts_count": 18,
  "created_at": "2020-04-18T06:43:29.997Z",
  "views": 2929,
  "reply_count": 16,
  "like_count": 1,
  "last_posted_at": "2020-05-06T09:01:50.194Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "backup-restore-performance-tuning",
  "category_id": 7,
  "word_count": 2598,
  "deleted_at": null,
  "user_id": 643,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_2078",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 18,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 3,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Restore is slow and parallel restore doesn&rsquo;t achieve performance boost",
      "id": 2128,
      "title": "Restore is slow and parallel restore doesn't achieve performance boost",
      "slug": "restore-is-slow-and-parallel-restore-doesnt-achieve-performance-boost",
      "posts_count": 11,
      "reply_count": 7,
      "highest_post_number": 11,
      "image_url": null,
      "created_at": "2020-05-20T05:56:49.975Z",
      "last_posted_at": "2020-05-23T04:17:19.585Z",
      "bumped": true,
      "bumped_at": "2020-05-23T04:17:19.585Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 1398,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 643,
            "username": "lehu",
            "name": "Leo Hu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Backup /restore fdb",
      "id": 1637,
      "title": "Backup /restore fdb",
      "slug": "backup-restore-fdb",
      "posts_count": 22,
      "reply_count": 17,
      "highest_post_number": 22,
      "image_url": null,
      "created_at": "2019-09-19T17:04:18.878Z",
      "last_posted_at": "2019-10-05T04:45:51.663Z",
      "bumped": true,
      "bumped_at": "2019-10-05T04:45:51.663Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 2729,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 604,
            "username": "Minaxi",
            "name": "meenakshi subramanyam",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/m/2bfe46/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Design and Implementation of a Performant Restore System in FDB",
      "id": 1277,
      "title": "Design and Implementation of a Performant Restore System in FDB",
      "slug": "design-and-implementation-of-a-performant-restore-system-in-fdb",
      "posts_count": 24,
      "reply_count": 21,
      "highest_post_number": 24,
      "image_url": null,
      "created_at": "2019-04-02T23:35:14.946Z",
      "last_posted_at": "2020-12-08T12:50:31.915Z",
      "bumped": true,
      "bumped_at": "2020-12-08T12:50:31.915Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 4,
      "views": 3171,
      "category_id": 5,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 454,
            "username": "jzhou",
            "name": "Jingyu Zhou",
            "avatar_template": "/user_avatar/forums.foundationdb.org/jzhou/{size}/445_2.png",
            "admin": true,
            "moderator": true,
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 711,
            "username": "osamarin",
            "name": "Oleg Samarin",
            "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "FDB Restore: performance tuning and availability of parallel restore",
      "id": 3596,
      "title": "FDB Restore: performance tuning and availability of parallel restore",
      "slug": "fdb-restore-performance-tuning-and-availability-of-parallel-restore",
      "posts_count": 1,
      "reply_count": 0,
      "highest_post_number": 1,
      "image_url": null,
      "created_at": "2022-10-18T02:28:59.679Z",
      "last_posted_at": "2022-10-18T02:28:59.737Z",
      "bumped": true,
      "bumped_at": "2022-10-18T02:28:59.737Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 327,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest single",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 643,
            "username": "lehu",
            "name": "Leo Hu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "FDB 6.3 performant restore",
      "id": 2137,
      "title": "FDB 6.3 performant restore",
      "slug": "fdb-6-3-performant-restore",
      "posts_count": 17,
      "reply_count": 8,
      "highest_post_number": 17,
      "image_url": null,
      "created_at": "2020-05-27T06:16:38.330Z",
      "last_posted_at": "2022-10-05T00:25:32.840Z",
      "bumped": true,
      "bumped_at": "2022-10-05T00:25:32.840Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 3,
      "views": 2583,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 645,
            "username": "subramaniamr",
            "name": "Subramaniam R",
            "avatar_template": "/user_avatar/forums.foundationdb.org/subramaniamr/{size}/658_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 746,
            "username": "matiasholte",
            "name": "Matias Holte",
            "avatar_template": "/user_avatar/forums.foundationdb.org/matiasholte/{size}/1124_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 711,
            "username": "osamarin",
            "name": "Oleg Samarin",
            "avatar_template": "/user_avatar/forums.foundationdb.org/osamarin/{size}/905_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 7,
        "username": "SteavedHams",
        "name": "Steve Atherton",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "post_count": 9,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 643,
        "username": "lehu",
        "name": "Leo Hu",
        "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
        "post_count": 8,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      }
    ],
    "created_by": {
      "id": 643,
      "username": "lehu",
      "name": "Leo Hu",
      "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png"
    },
    "last_poster": {
      "id": 7,
      "username": "SteavedHams",
      "name": "Steve Atherton",
      "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png"
    },
    "links": [
      {
        "url": "https://github.com/apple/foundationdb/blob/master/design/backup_v2_partitioned_logs.md",
        "title": "foundationdb/backup_v2_partitioned_logs.md at master \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 11,
        "user_id": 13,
        "domain": "github.com",
        "root_domain": "github.com"
      }
    ]
  },
  "bookmarks": []
}