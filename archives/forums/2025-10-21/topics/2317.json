{
  "post_stream": {
    "posts": [
      {
        "id": 7852,
        "name": "Amanda",
        "username": "amanda",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/67e7ee/{size}.png",
        "created_at": "2020-08-28T18:35:27.225Z",
        "cooked": "<p>Hi, I had an incident with one of my fdb clusters. The cluster has 3 machines, each one running 5-6 processes that include 3 storage processes. It\u2019s on double replication. The storage servers came close to filling so we expanded our EBS drives and ran xfs_grow. Then transactions started failing due to taking over 5s. <code>status details</code> showed that storage processes on all machines were failing with <code>StorageServerFailed: io_error</code>, and replication health reported <code>UNHEALTHY: No replicas remain of some data</code>. We tried restarting the whole cluster, and it would either report as repairing or Healthy removing storage server for awhile, until storage processes once again began failing with io_error.</p>\n<p>My understanding of <a href=\"https://forums.foundationdb.org/t/ss-lagging-behind/1397/5\" class=\"inline-onebox\">SS lagging behind</a> is that since we hit an io_error the storage server role was terminated. And since storage servers on all machines were failing, we lost all replicas for some of our data.</p>\n<p>Looking through the codebase it seems (?) that io_error being thrown is generally due to either IO performance or file corruption. IO load wasn\u2019t too high, and we cut off incoming requests from the client application. We\u2019ve expanded our drives many times and I find it unlikely that it would cause file corruption, much less on all machines. What could be the cause of hitting io_error on all machines?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2020-08-28T19:00:11.517Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 634,
        "reads": 64,
        "readers_count": 63,
        "score": 3162.8,
        "yours": false,
        "topic_id": 2317,
        "topic_slug": "io-error-on-all-fdb-storage-machines",
        "display_username": "Amanda",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/ss-lagging-behind/1397/5",
            "internal": true,
            "reflection": false,
            "title": "SS lagging behind",
            "clicks": 2
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 810,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/io-error-on-all-fdb-storage-machines/2317/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 7853,
        "name": "",
        "username": "andrew.noyes",
        "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
        "created_at": "2020-08-30T21:01:34.060Z",
        "cooked": "<p>io_error isn\u2019t very informative unfortunately. Usually in the trace logs there will be something more informative. A good thing to start searching for would be events with severity &gt;= 30, or grepping for UnixErrorCode</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2020-08-30T21:01:34.060Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 64,
        "readers_count": 63,
        "score": 17.8,
        "yours": false,
        "topic_id": 2317,
        "topic_slug": "io-error-on-all-fdb-storage-machines",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 14,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/io-error-on-all-fdb-storage-machines/2317/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7856,
        "name": "Jared2501",
        "username": "jared2501",
        "avatar_template": "/user_avatar/forums.foundationdb.org/jared2501/{size}/266_2.png",
        "created_at": "2020-08-31T04:57:02.688Z",
        "cooked": "<p>Here\u2019s a copy of one of the tracelogs on a process that has this error:</p>\n<pre><code class=\"lang-auto\">trace.10.67.246.24.4505.1598849143.xweXq9.0.1.xml:&lt;Event Severity=\"40\" Time=\"1598849497.011346\" Type=\"StorageServerFailed\" ID=\"630082c7067dbb30\" Error=\"io_error\" ErrorDescription=\"Disk i/o operation failed\" ErrorCode=\"1510\" Reason=\"Error\" Backtrace=\"addr2line -e fdbserver.debug -p -C -f -i 0x19938fc 0x1993218 0x19932e1 0x1039fe4 0x103a94d 0x103aa53 0x101e78e 0x101ea0e 0x6b5e79 0x10361a7 0x1036aee 0xb25d58 0xb25f7e 0x6b5e79 0x102e950 0x102eb22 0xb25d58 0xb25f7e 0x6b5e79 0xa5035f 0x7f2420 0x19d0da0 0x66d463 0x7fc2ab30c2e1\" Machine=\"10.67.246.24:4505\" LogGroup=\"default\" Roles=\"SS\" /&gt;\n</code></pre>\n<p>We\u2019re running FDB 6.2.22.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2020-08-31T04:57:36.881Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 5,
        "reads": 64,
        "readers_count": 63,
        "score": 37.8,
        "yours": false,
        "topic_id": 2317,
        "topic_slug": "io-error-on-all-fdb-storage-machines",
        "display_username": "Jared2501",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 260,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/io-error-on-all-fdb-storage-machines/2317/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7870,
        "name": "Amanda",
        "username": "amanda",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/67e7ee/{size}.png",
        "created_at": "2020-09-03T02:31:08.713Z",
        "cooked": "<p>So we found the error causing this:</p>\n<pre><code class=\"lang-auto\">&lt;Event Severity=\"40\" Time=\"1599095476.197744\" Type=\"DiskError\" ID=\"0000000000000000\" Error=\"io_error\" ErrorDescription=\"Disk i/o operation failed\" ErrorCode=\"1510\" In=\"BtreeInsert\" File=\"/storage/var/data/4504/storage-d74abaec8af5c2bc78a1b321fa34987d.sqlite\" SQLiteError=\"database or disk is full\" SQLiteErrorCode=\"13\" UnixErrorCode=\"b\" UnixError=\"Resource temporarily unavailable\" Backtrace=\"addr2line -e fdbserver.debug -p -C -f -i 0x19938fc 0x1993218 0x19932e1 0xb6d1fe 0xb6e54a 0xa4bfc2 0xa48d69 0x18a1126 0x7ff693bf5000\" Machine=\"10.67.246.32:4504\" LogGroup=\"default\" Roles=\"SS,TL\" /&gt;\n</code></pre>\n<p>It seems like ratekeeper isn\u2019t detecting that we have &lt;5% free space (which is correct, we have &gt;15% free) but sqlite3 is out of space. Looks like Btreeinsert is always at most adding one keyvalue. Does a sqlite btreeinsert always add only the size of the value written? (I\u2019m not familiar with sqlite but it seems like this would mainly be for a vacuum operation, which doesn\u2019t seem to happen on the btreeinsert codepath)</p>\n<p>One theory we have is if we\u2019re hitting sqlite limits. The sqlite page size fdb uses is 4096, and I couldn\u2019t find where we set the max page count so I\u2019m assuming we use the default of 1073741823. We have some massive storage nodes (working on getting to a more distributed setup. we just want to root cause this). Is there an inherent size limit to the size of a single storage server? The sqlite file is bigger than 4096 * 1073741823. I\u2019m not sure if there is some metadata overhead that doesn\u2019t contribute to page count but contributes to file size. I couldn\u2019t get the page_count through <code>PRAGMA max_page_count;</code> because I would get the following error:</p>\n<pre><code class=\"lang-auto\">sqlite&gt; PRAGMA page_count;\nError: file is encrypted or is not a database\n</code></pre>\n<p>I did this on a sqlite file on a functioning storage server, so it\u2019s definitely not corrupted. I couldn\u2019t find anything in fdb that encrypts the file either. Any thoughts?</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2020-09-03T02:31:08.713Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 9,
        "reads": 60,
        "readers_count": 59,
        "score": 62.0,
        "yours": false,
        "topic_id": 2317,
        "topic_slug": "io-error-on-all-fdb-storage-machines",
        "display_username": "Amanda",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 810,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/io-error-on-all-fdb-storage-machines/2317/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7871,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2020-09-03T03:01:10.681Z",
        "cooked": "<p>Nice job investigating.  Here\u2019s the rest of the story:</p>\n<p>BTreeInsert inserts a KV pair plus some overhead into the tree.  If the KV pair does not fit in an existing page then the page is split into two and the new page comes from the free list.  If the free list is empty, it extends the file to allocate new space.  To make file extensions for SQLite\u2019s purposes more efficient and avoid file extent fragmentation on disk, FoundationDB extends <code>.sqlite</code> files by a minimum chunk size which is currently 100MB.  This is likely why your storage file is larger than 4096 * 1073741823 bytes.</p>\n<p>FoundationDB is not using vanilla SQLite, so you cannot use SQLite tools on a <code>.sqlite</code> file and I\u2019m sorry for how misleading that is.</p>\n<p>FoundationDB does not change the default maximum page count.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2020-09-03T03:01:10.681Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 0,
        "incoming_link_count": 5,
        "reads": 54,
        "readers_count": 53,
        "score": 40.8,
        "yours": false,
        "topic_id": 2317,
        "topic_slug": "io-error-on-all-fdb-storage-machines",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 810,
          "username": "amanda",
          "name": "Amanda",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/67e7ee/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/io-error-on-all-fdb-storage-machines/2317/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7873,
        "name": "Amanda",
        "username": "amanda",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/67e7ee/{size}.png",
        "created_at": "2020-09-03T03:33:07.227Z",
        "cooked": "<p>Hey Steve, thanks for the info, this is super helpful for my understanding. Splitting the page and allocating a whole extra one makes sense, but it still limits the size of a single insert at a bit over 110,000 bytes if you write max value size and max key size, round up to the next page, and assume that a bit less than 4096 bytes of application data fit on each page (I know there is some header stuff per page, not sure the size). Guessing it must be &lt;120,000 bytes for a single insert and we have &gt;2TB free. And sounds like I can\u2019t tell how much fdb has extended the file, and I also can\u2019t use sqlite tools to get the page count. Do you have any ideas how I can tell if I hit the max page count? Or any other ideas why we would be getting this disk full error when we have &gt;2TB available?</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2020-09-03T03:34:36.002Z",
        "reply_count": 1,
        "reply_to_post_number": 5,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 48,
        "readers_count": 47,
        "score": 24.6,
        "yours": false,
        "topic_id": 2317,
        "topic_slug": "io-error-on-all-fdb-storage-machines",
        "display_username": "Amanda",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 7,
          "username": "SteavedHams",
          "name": "Steve Atherton",
          "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 810,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/io-error-on-all-fdb-storage-machines/2317/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7874,
        "name": "Jared2501",
        "username": "jared2501",
        "avatar_template": "/user_avatar/forums.foundationdb.org/jared2501/{size}/266_2.png",
        "created_at": "2020-09-03T03:41:00.038Z",
        "cooked": "<p>BTW for reference, we have 3 storage processes per 16TB volume. The sizes of the sqlite files that display these errors, in bytes are:</p>\n<pre><code class=\"lang-auto\">fdb1 4505: 4963015065600\nfdb1 4503: 4870530662400\nfdb3 4504: 4816319283200\nfdb2 4503: 4848195993600\nfdb2 4505: 4865916928000\n</code></pre>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2020-09-03T03:41:00.038Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 48,
        "readers_count": 47,
        "score": 14.6,
        "yours": false,
        "topic_id": 2317,
        "topic_slug": "io-error-on-all-fdb-storage-machines",
        "display_username": "Jared2501",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 260,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/io-error-on-all-fdb-storage-machines/2317/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7875,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2020-09-03T04:15:37.641Z",
        "cooked": "<p>What I\u2019m saying is <em>any</em> time the file grows it grows by 100MB.  Then it has lots of free space to fill up, and if it does that then it will grow again, by another 100MB.  So the file will not expand by only the amount of pages needed for the new record.</p>\n<p>I\u2019m not sure where you got your quoted max page count figure but according to<br>\n<a href=\"https://www.sqlite.org/fileformat.html\" class=\"onebox\" target=\"_blank\">https://www.sqlite.org/fileformat.html</a><br>\nthe maximum page number is<br>\n<code>4294967294 (2&lt;small&gt;32&lt;/small&gt; - 2)</code><br>\nand the database header does not seem to store the max page count, though it could be stored elsewhere.</p>\n<p>FoundationDB modifies the header string since there are other changes to the format that would break external SQLite tools, but the database header is otherwise in tact.</p>\n<p>What is your file size on disk, exactly?</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2020-09-03T04:15:37.641Z",
        "reply_count": 0,
        "reply_to_post_number": 6,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 47,
        "readers_count": 46,
        "score": 24.4,
        "yours": false,
        "topic_id": 2317,
        "topic_slug": "io-error-on-all-fdb-storage-machines",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://www.sqlite.org/fileformat.html",
            "internal": false,
            "reflection": false,
            "title": "Database File Format",
            "clicks": 2
          }
        ],
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 810,
          "username": "amanda",
          "name": "Amanda",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/67e7ee/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/io-error-on-all-fdb-storage-machines/2317/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7876,
        "name": "Amanda",
        "username": "amanda",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/67e7ee/{size}.png",
        "created_at": "2020-09-03T04:28:45.951Z",
        "cooked": "<p>4294967294 is the highest you can set for a max page count, but the default is 1073741823 and I don\u2019t see us set it anywhere for fdb\u2019s usage of sqlite</p>\n<pre><code class=\"lang-auto\">/*\n** Maximum number of pages in one database file.\n**\n** This is really just the default value for the max_page_count pragma.\n** This value can be lowered (or raised) at run-time using that the\n** max_page_count macro.\n*/\n#ifndef SQLITE_MAX_PAGE_COUNT\n# define SQLITE_MAX_PAGE_COUNT 1073741823\n#endif\n</code></pre>\n<p><a href=\"https://raw.githubusercontent.com/apple/foundationdb/master/fdbserver/sqlite/sqlite3.amalgamation.c\" class=\"onebox\" target=\"_blank\" rel=\"nofollow noopener\">https://raw.githubusercontent.com/apple/foundationdb/master/fdbserver/sqlite/sqlite3.amalgamation.c</a></p>\n<p>Jared\u2019s comment above is the file size in bytes of our 5 fdb sqlite files that we see the error from.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2020-09-03T04:28:45.951Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 44,
        "readers_count": 43,
        "score": 8.8,
        "yours": false,
        "topic_id": 2317,
        "topic_slug": "io-error-on-all-fdb-storage-machines",
        "display_username": "Amanda",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://raw.githubusercontent.com/apple/foundationdb/master/fdbserver/sqlite/sqlite3.amalgamation.c",
            "internal": false,
            "reflection": false,
            "clicks": 4
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 810,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/io-error-on-all-fdb-storage-machines/2317/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7878,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2020-09-03T05:13:16.519Z",
        "cooked": "<p>I\u2019m not sure how your files got so large.  I did find this in <code>sqlite3.amalgamation.c</code></p>\n<pre><code class=\"lang-auto\">  /* If the current number of pages in the file is greater than the\n  ** configured maximum pager number, increase the allowed limit so\n  ** that the file can be read.\n  */\n  if( nPage&gt;pPager-&gt;mxPgno ){\n    pPager-&gt;mxPgno = (Pgno)nPage;\n  }\n</code></pre>\n<p>where <code>nPage</code> comes from either the WAL file or, if that was not valid (which I think can happen if it was fully checkpoint and truncate and there were no further commits before the most recent close) then it takes the size of the <code>.sqlite</code> file.  So initially <code>pPager-&gt;mxPgno</code> is set to the macro you found but it can be bumped up automatically in this scenario.  Perhaps this combined with chunk based extension and a shutdown after checkpoint allowed the files to gradually grow a little bit with each restart?</p>\n<p>Are your files still growing at all?  If you restart your fdbserver processes, do they grow then?</p>\n<p>In any case, we should certainly set a higher max page size in <code>KeyValueStoreSQLite.cpp</code> during initialization, probably to a new server knob which defaults to maybe 8TB worth of pages.</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2020-09-03T05:13:16.519Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 44,
        "readers_count": 43,
        "score": 8.8,
        "yours": false,
        "topic_id": 2317,
        "topic_slug": "io-error-on-all-fdb-storage-machines",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/io-error-on-all-fdb-storage-machines/2317/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7879,
        "name": "Amanda",
        "username": "amanda",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/67e7ee/{size}.png",
        "created_at": "2020-09-03T06:32:23.951Z",
        "cooked": "<p>Just restarted it and it doesn\u2019t look like they\u2019re growing. The file sizes are the same even after the storage server has failed</p>\n<p>For the snippet you posted, my reading of it is its a bunch of places in the read path. Would it be possible that it is just there to ensure an existing sqlite file is readable? It feels appropriate that it throws SQLITE_FULL on write but not on read. Maybe that\u2019s why we couldn\u2019t find the max page count in the database header, it isn\u2019t stored and sqlite always assumes that the file was written below whatever the max was?</p>\n<p>I see this in <code>sqlite3PagerAcquire</code>:</p>\n<pre><code class=\"lang-auto\">    if( MEMDB || pPager-&gt;dbSize&lt;pgno || noContent || !isOpen(pPager-&gt;fd) ){\n      if( pgno&gt;pPager-&gt;mxPgno ){\n        rc = SQLITE_FULL;\n        goto pager_acquire_err;\n      }\n</code></pre>\n<p>I wonder if it sets the max page size to the last page in the sqlite file and then can\u2019t do any more writes.</p>\n<p>For higher max page size in  <code>KeyValueStoreSQLite.cpp</code> do you mean page count, as in you\u2019d want max page count * max page size &gt; 8TB? It would also be great if there was something that detected this case, like if it gets the page count and max page size in KeyValueStoreSQLite and throws a more specific error when we\u2019re on the last page</p>\n<p>If I didn\u2019t hit the max page, I really have no idea why I\u2019m getting SQLITE_FULL</p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2020-09-03T06:32:23.951Z",
        "reply_count": 2,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 43,
        "readers_count": 42,
        "score": 18.6,
        "yours": false,
        "topic_id": 2317,
        "topic_slug": "io-error-on-all-fdb-storage-machines",
        "display_username": "Amanda",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 810,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/io-error-on-all-fdb-storage-machines/2317/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7882,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2020-09-03T08:17:37.132Z",
        "cooked": "<p>Yes, what I was suggesting is that when opening a file larger than the default max page count it just increases the max page count.  For example:  If the default size limit were 110MB, and FDB is extending files by 100MB, then when SQLite first grows the file past 100MB via FDB\u2019s filesystem adapter (VFSAsync) the file will be grown to 200MB.  SQLite will still complain when it reaches 110MB, but then upon the next open it will see that the files is 200MB so as long as the WAL was logically empty (at a clean checkpoint) on shutdown the page page count will be raised to the equivalent of 200MB.  This will then allow more insertions because there will be free space in the file.</p>\n<p>I suspect something like this has happened but I don\u2019t quite see a solid path to extending the file repeatedly to end up with the files that you have.</p>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2020-09-03T08:17:37.132Z",
        "reply_count": 0,
        "reply_to_post_number": 11,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 42,
        "readers_count": 41,
        "score": 28.4,
        "yours": false,
        "topic_id": 2317,
        "topic_slug": "io-error-on-all-fdb-storage-machines",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 810,
          "username": "amanda",
          "name": "Amanda",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/67e7ee/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/io-error-on-all-fdb-storage-machines/2317/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7883,
        "name": "Steve Atherton",
        "username": "SteavedHams",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "created_at": "2020-09-03T08:37:11.538Z",
        "cooked": "<p>An error type other than <code>io_error</code> such as perhaps <code>out_of_space</code> would be more user friendly but it may not be trivial as I think there are some specific reactions to io_error which may need to check for this new type as well.</p>\n<p>I created two issues for what we\u2019ve figured out here.</p>\n<aside class=\"onebox githubissue\">\n  <header class=\"source\">\n      <a href=\"https://github.com/apple/foundationdb/issues/3735\" target=\"_blank\" rel=\"noopener\">github.com/apple/foundationdb</a>\n  </header>\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Issue\">\n\t  <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 14 16\" aria-hidden=\"true\"><path d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/apple/foundationdb/issues/3735\" target=\"_blank\" rel=\"noopener\">Storage engine running out of space should maybe have its own error type instead of io_error</a>\n    </h4>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2020-09-03\" data-time=\"08:25:07\" data-timezone=\"UTC\">08:25AM - 03 Sep 20 UTC</span>\n      </div>\n\n\n      <div class=\"user\">\n        <a href=\"https://github.com/satherton\" target=\"_blank\" rel=\"noopener\">\n          <img alt=\"satherton\" src=\"https://global.discourse-cdn.com/foundationdb/original/1X/dcab1adc161b25c2cd76455166702f4cdf35a09e.png\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\">\n          satherton\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=\"github-row\">\n  <p class=\"github-content\">When SQLite runs out of space, it reports SQLITE_FULL which becomes io_error.</p>\n</div>\n\n<div class=\"labels\">\n</div>\n\n  </article>\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n  <div style=\"clear: both\"></div>\n</aside>\n<br>\n<aside class=\"onebox githubissue\">\n  <header class=\"source\">\n      <a href=\"https://github.com/apple/foundationdb/issues/3736\" target=\"_blank\" rel=\"noopener\">github.com/apple/foundationdb</a>\n  </header>\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Issue\">\n\t  <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 14 16\" aria-hidden=\"true\"><path d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/apple/foundationdb/issues/3736\" target=\"_blank\" rel=\"noopener\">SQLite files are artificially limited to around 4TB but up to 16TB is supported (with 4k pages)</a>\n    </h4>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2020-09-03\" data-time=\"08:36:12\" data-timezone=\"UTC\">08:36AM - 03 Sep 20 UTC</span>\n      </div>\n\n\n      <div class=\"user\">\n        <a href=\"https://github.com/satherton\" target=\"_blank\" rel=\"noopener\">\n          <img alt=\"satherton\" src=\"https://global.discourse-cdn.com/foundationdb/original/1X/dcab1adc161b25c2cd76455166702f4cdf35a09e.png\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\">\n          satherton\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=\"github-row\">\n  <p class=\"github-content\">There should be a server knob, probably SQLITE_MAX_FILE_SIZE which is used to calculate and set the SQLite max page count during...</p>\n</div>\n\n<div class=\"labels\">\n</div>\n\n  </article>\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n  <div style=\"clear: both\"></div>\n</aside>\n",
        "post_number": 13,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2020-09-03T08:37:11.538Z",
        "reply_count": 0,
        "reply_to_post_number": 11,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 42,
        "readers_count": 41,
        "score": 33.4,
        "yours": false,
        "topic_id": 2317,
        "topic_slug": "io-error-on-all-fdb-storage-machines",
        "display_username": "Steve Atherton",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/issues/3736",
            "internal": false,
            "reflection": false,
            "title": "SQLite files are artificially limited to around 4TB but up to 16TB is supported (with 4k pages) \u00b7 Issue #3736 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 14
          },
          {
            "url": "https://github.com/apple/foundationdb/issues/3735",
            "internal": false,
            "reflection": false,
            "title": "Storage engine running out of space should maybe have its own error type instead of io_error \u00b7 Issue #3735 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 11
          },
          {
            "url": "https://github.com/satherton",
            "internal": false,
            "reflection": false,
            "title": "satherton (Steve Atherton) \u00b7 GitHub",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 810,
          "username": "amanda",
          "name": "Amanda",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/67e7ee/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 7,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/io-error-on-all-fdb-storage-machines/2317/13",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 7893,
        "name": "Amanda",
        "username": "amanda",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/67e7ee/{size}.png",
        "created_at": "2020-09-05T03:29:36.922Z",
        "cooked": "<p>Hey, we deployed a custom build that raised the max page count to the max value just to see if this is really the issue and the cluster was able to start up. Previously it would die about 5 min after starting up, but it\u2019s been up for 30 minutes. I\u2019m also not seeing any io_error or Btreeinsert error logs like before. A few of the previously broken files have grown in size (it\u2019s <code>HEALING</code> so the other files will probably grow in size as well later.). I\u2019m also not sure how the files got so far past the max size but it\u2019s pretty safe to say the sqlite max page count was the issue here.</p>\n<p>Thanks a ton for your help! In addition to the two issues you filed it would also be great if this was mentioned on the Known Limitations page.</p>",
        "post_number": 14,
        "post_type": 1,
        "posts_count": 14,
        "updated_at": "2020-09-05T03:29:36.922Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 39,
        "readers_count": 38,
        "score": 27.8,
        "yours": false,
        "topic_id": 2317,
        "topic_slug": "io-error-on-all-fdb-storage-machines",
        "display_username": "Amanda",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 810,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/io-error-on-all-fdb-storage-machines/2317/14",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      7852,
      7853,
      7856,
      7870,
      7871,
      7873,
      7874,
      7875,
      7876,
      7878,
      7879,
      7882,
      7883,
      7893
    ]
  },
  "timeline_lookup": [
    [
      1,
      1880
    ],
    [
      2,
      1878
    ],
    [
      4,
      1875
    ],
    [
      14,
      1873
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Io_error on all FDB storage machines",
  "id": 2317,
  "title": "Io_error on all FDB storage machines",
  "posts_count": 14,
  "created_at": "2020-08-28T18:35:27.154Z",
  "views": 1935,
  "reply_count": 5,
  "like_count": 2,
  "last_posted_at": "2020-09-05T03:29:36.922Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "io-error-on-all-fdb-storage-machines",
  "category_id": 7,
  "word_count": 2072,
  "deleted_at": null,
  "user_id": 810,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_2317",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 14,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 4,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Segmentation fault error and broken cluster",
      "id": 483,
      "title": "Segmentation fault error and broken cluster",
      "slug": "segmentation-fault-error-and-broken-cluster",
      "posts_count": 17,
      "reply_count": 12,
      "highest_post_number": 17,
      "image_url": null,
      "created_at": "2018-05-31T15:34:28.123Z",
      "last_posted_at": "2018-06-11T17:31:13.656Z",
      "bumped": true,
      "bumped_at": "2018-06-11T17:31:13.656Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 4331,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 211,
            "username": "brk0v",
            "name": "Viacheslav Biriukov",
            "avatar_template": "/user_avatar/forums.foundationdb.org/brk0v/{size}/173_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 156,
            "username": "spullara",
            "name": "Sam Pullara",
            "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Large spikes in memory usage on storage processes, 6.0.18",
      "id": 2115,
      "title": "Large spikes in memory usage on storage processes, 6.0.18",
      "slug": "large-spikes-in-memory-usage-on-storage-processes-6-0-18",
      "posts_count": 3,
      "reply_count": 1,
      "highest_post_number": 3,
      "image_url": "https://global.discourse-cdn.com/foundationdb/optimized/1X/4c7f8a022ee38e69df8abe772878aff823a76550_2_1024x320.png",
      "created_at": "2020-05-12T19:17:47.329Z",
      "last_posted_at": "2020-05-12T21:58:14.570Z",
      "bumped": true,
      "bumped_at": "2020-05-12T21:58:14.570Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 582,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 490,
            "username": "rjenkins",
            "name": "Ray Jenkins",
            "avatar_template": "/user_avatar/forums.foundationdb.org/rjenkins/{size}/487_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Foundationdb seems keep reinitialising itself after client hang",
      "id": 1437,
      "title": "Foundationdb seems keep reinitialising itself after client hang",
      "slug": "foundationdb-seems-keep-reinitialising-itself-after-client-hang",
      "posts_count": 6,
      "reply_count": 2,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2019-06-10T10:10:13.209Z",
      "last_posted_at": "2019-06-26T18:08:03.629Z",
      "bumped": true,
      "bumped_at": "2019-06-26T18:08:03.629Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 1222,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 602,
            "username": "ppggff",
            "name": "ppggff",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ppggff/{size}/855_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Foundationdb 6.2 - fdbserver going out of memory",
      "id": 2080,
      "title": "Foundationdb 6.2 - fdbserver going out of memory",
      "slug": "foundationdb-6-2-fdbserver-going-out-of-memory",
      "posts_count": 10,
      "reply_count": 5,
      "highest_post_number": 10,
      "image_url": null,
      "created_at": "2020-04-20T14:55:39.274Z",
      "last_posted_at": "2020-04-23T04:34:49.858Z",
      "bumped": true,
      "bumped_at": "2020-04-23T04:34:49.858Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1037,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 714,
            "username": "tuk",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/b5ac83/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Work around &ldquo;Storage server running out of space (approaching 5% limit)&rdquo; on your developer machine",
      "id": 1814,
      "title": "Work around \"Storage server running out of space (approaching 5% limit)\" on your developer machine",
      "slug": "work-around-storage-server-running-out-of-space-approaching-5-limit-on-your-developer-machine",
      "posts_count": 3,
      "reply_count": 1,
      "highest_post_number": 3,
      "image_url": null,
      "created_at": "2019-12-05T15:08:00.431Z",
      "last_posted_at": "2020-06-07T08:44:21.209Z",
      "bumped": true,
      "bumped_at": "2020-06-07T08:59:51.255Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 5,
      "views": 1914,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 776,
            "username": "dimi",
            "name": "Dimitri Bouniol",
            "avatar_template": "/user_avatar/forums.foundationdb.org/dimi/{size}/879_2.png",
            "trust_level": 1
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 810,
        "username": "amanda",
        "name": "Amanda",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/67e7ee/{size}.png",
        "post_count": 6,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 7,
        "username": "SteavedHams",
        "name": "Steve Atherton",
        "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
        "post_count": 5,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 260,
        "username": "jared2501",
        "name": "Jared2501",
        "avatar_template": "/user_avatar/forums.foundationdb.org/jared2501/{size}/266_2.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 14,
        "username": "andrew.noyes",
        "name": "",
        "avatar_template": "/user_avatar/forums.foundationdb.org/andrew.noyes/{size}/443_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      }
    ],
    "created_by": {
      "id": 810,
      "username": "amanda",
      "name": "Amanda",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/67e7ee/{size}.png"
    },
    "last_poster": {
      "id": 810,
      "username": "amanda",
      "name": "Amanda",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/67e7ee/{size}.png"
    },
    "links": [
      {
        "url": "https://github.com/apple/foundationdb/issues/3736",
        "title": "SQLite files are artificially limited to around 4TB but up to 16TB is supported (with 4k pages) \u00b7 Issue #3736 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 14,
        "user_id": 7,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/issues/3735",
        "title": "Storage engine running out of space should maybe have its own error type instead of io_error \u00b7 Issue #3735 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 11,
        "user_id": 7,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://raw.githubusercontent.com/apple/foundationdb/master/fdbserver/sqlite/sqlite3.amalgamation.c",
        "title": null,
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 4,
        "user_id": 810,
        "domain": "raw.githubusercontent.com",
        "root_domain": "raw.githubusercontent.com"
      },
      {
        "url": "https://forums.foundationdb.org/t/ss-lagging-behind/1397/5",
        "title": "SS lagging behind",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 810,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://www.sqlite.org/fileformat.html",
        "title": "Database File Format",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 7,
        "domain": "www.sqlite.org",
        "root_domain": "sqlite.org"
      }
    ]
  },
  "bookmarks": []
}