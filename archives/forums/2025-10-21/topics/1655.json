{
  "post_stream": {
    "posts": [
      {
        "id": 5180,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2019-09-28T02:44:46.289Z",
        "cooked": "<p>I always show up with some fun issue. This time is no different.</p>\n<p>After restoring the cluster, everything worked fine up until two of our 14 servers went down at the same time. Normally, this would be not issue, however thanks to triple replication, the cluster got saturated and is now running out of space.</p>\n<p>Because these are NVME servers, they ran into an issue that they can\u2019t recover (GCP thing).</p>\n<p>I thought, no problem, will just add more servers and things will rebalance. However, that\u2019s not what happened. Now everything seems to be crippled to almost a halt. I added 10 more servers so they added almost twice more new storage, but the cluster is still reporting that one of the server is running out of space.</p>\n<p>I found <a href=\"https://forums.foundationdb.org/t/full-disk-on-one-machine-results-in-99-performance-degradation/850\">this discussion</a> that explains why but not the solution. So what are my options here? How do I tell the cluster that it now has plenty of space and it should start rushing the rebalancing?</p>\n<p>I tried excluding the process, but it has no impact.</p>\n<pre><code class=\"lang-auto\">Configuration:\n  Redundancy mode        - triple\n  Storage engine         - ssd-2\n  Coordinators           - 3\n  Exclusions             - 1 (type `exclude' for details)\n  Desired Proxies        - 7\n  Desired Resolvers      - 1\n  Desired Logs           - 7\n\nCluster:\n  FoundationDB processes - 72 (less 4 excluded; 0 with errors)\n  Machines               - 18 (less 1 excluded)\n  Memory availability    - 7.9 GB per process on machine with least available\n  Fault Tolerance        - 0 machines\n  Server time            - 09/27/19 19:42:27\n\nData:\n  Replication health     - HEALING: Only two replicas remain of some data\n  Moving data            - 372.732 GB\n  Sum of key-value sizes - 3.649 TB\n  Disk space used        - 3.322 TB\n\nOperating space:\n  Storage server         - 0.0 GB free on most full server\n  Log server             - 339.4 GB free on most full server\n\nWorkload:\n  Read rate              - 2 Hz\n  Write rate             - 0 Hz\n  Transactions started   - 1 Hz\n  Transactions committed - 0 Hz\n  Conflict rate          - 0 Hz\n  Performance limited by process: Storage server running out of space (approaching 5% limit).\n  Most limiting process: 10.128.1.131:4502\n\nBackup and DR:\n  Running backups        - 0\n  Running DRs            - 0\n\nClient time: 09/27/19 19:42:17\n</code></pre>\n<p>In addition, one of the server that died was a coordinator and when I try to change the coordinators it just does nothing.</p>\n<p>Is there a way to help the cluster to understand that it has now plenty of space to start doing the proper rebalancing?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-09-28T02:44:46.289Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1350,
        "reads": 119,
        "readers_count": 118,
        "score": 6773.8,
        "yours": false,
        "topic_id": 1655,
        "topic_slug": "storage-server-running-out-of-space",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/full-disk-on-one-machine-results-in-99-performance-degradation/850",
            "internal": true,
            "reflection": false,
            "title": "Full disk on one machine results in 99% performance degradation",
            "clicks": 32
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-running-out-of-space/1655/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 5181,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-09-28T02:52:33.235Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"ThomasJ\" data-post=\"1\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/48.png\" class=\"avatar\"> ThomasJ:</div>\n<blockquote>\n<p>I always show up with some fun issue. This time is no different.</p>\n</blockquote>\n</aside>\n<p>We love you for your reports, and apologize for your troubles. <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<aside class=\"quote no-group quote-modified\" data-username=\"ThomasJ\" data-post=\"1\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/48.png\" class=\"avatar\"> ThomasJ:</div>\n<blockquote>\n<p>I thought, no problem, will just add more servers and things will rebalance. However, that\u2019s not what happened. Now everything seems to be crippled to almost a halt. I added 10 more servers so they added almost twice more new storage, but the cluster is still reporting that one of the server is running out of space.</p>\n<p>\u2026</p>\n<p>Is there a way to help the cluster to understand that it has now plenty of space to start doing the proper rebalancing?</p>\n</blockquote>\n</aside>\n<p>If you just add new machines without the exclude, data distribution tries to form groups of three machines using the new ones and old ones randomly, and then adding machines to a nearly full cluster can make it go completely full.</p>\n<p>The largest hammer here is to exclude all of your current machines, and attach an equal number of fresh processes, and then let data distribution copy from the old machines to the new ones, and then <strong>MOVE THE COORDINATORS</strong>, and tear down the old machines.</p>\n<p>If you don\u2019t have the excess machines to be able to do that, then you could configure from triple replication to double, let it calm down with the added machines, and then configure back to triple.  As you\u2019ll need to \u201cremove\u201d data from the cluster somehow to free up space while it rebalances.</p>\n<p><a href=\"https://forums.foundationdb.org/t/data-distribution-stopped-how-to-restart/1626\" class=\"inline-onebox\">Data Distribution Stopped - How to Restart?</a> has related graphs where you can see the on disk size of files jump when machines are added to the cluster, and a bit of discussion about it.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-09-28T02:53:50.311Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 21,
        "reads": 105,
        "readers_count": 104,
        "score": 131.0,
        "yours": false,
        "topic_id": 1655,
        "topic_slug": "storage-server-running-out-of-space",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/data-distribution-stopped-how-to-restart/1626",
            "internal": true,
            "reflection": false,
            "title": "Data Distribution Stopped - How to Restart?",
            "clicks": 24
          },
          {
            "url": "https://forums.foundationdb.org/t/storage-servers-95-full-how-to-recover/2315",
            "internal": true,
            "reflection": true,
            "title": "Storage servers 95% full - how to recover",
            "clicks": 1
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-running-out-of-space/1655/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5182,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2019-09-28T02:55:53.778Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"alexmiller\" data-post=\"2\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/alexmiller/48/326_2.png\" class=\"avatar\"> alexmiller:</div>\n<blockquote>\n<p>The largest hammer here is to exclude all of your current machines, and attach an equal number of fresh processes, and then let data distribution copy from the old machines to the new ones</p>\n</blockquote>\n</aside>\n<p>Ok, that\u2019s interesting. So you are saying, spin up new servers and exclude ALL the old servers and that will help the cluster to recover.</p>\n<aside class=\"quote no-group\" data-username=\"alexmiller\" data-post=\"2\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/alexmiller/48/326_2.png\" class=\"avatar\"> alexmiller:</div>\n<blockquote>\n<p>and then <strong>MOVE THE COORDINATORS</strong> , and tear down the old machines.</p>\n</blockquote>\n</aside>\n<p>Any reason why I can\u2019t move coordinators first?</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-09-28T02:56:21.828Z",
        "reply_count": 1,
        "reply_to_post_number": 2,
        "quote_count": 1,
        "incoming_link_count": 6,
        "reads": 101,
        "readers_count": 100,
        "score": 55.2,
        "yours": false,
        "topic_id": 1655,
        "topic_slug": "storage-server-running-out-of-space",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-running-out-of-space/1655/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5183,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-09-28T03:03:01.359Z",
        "cooked": "<p>Telling FDB to abandon the old servers makes it do the intelligent thing of move data only from full servers to empty servers.</p>\n<p>I\u2019d be happy if in the future, data distribution handled new servers in two phases</p>\n<ol>\n<li>Redistribute data so that disk fullness is roughly equal</li>\n<li>Redistribute data so that storage teams are sufficiently randomly chosen.</li>\n</ol>\n<p>Which would make FDB\u2019s behavior in these sorts of situations better.  Right now, it just goes straight to (2), so mass excluding is the way to force it to do (1).</p>\n<aside class=\"quote no-group\" data-username=\"ThomasJ\" data-post=\"3\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/48.png\" class=\"avatar\"> ThomasJ:</div>\n<blockquote>\n<p>Any reason why I can\u2019t move coordinators first?</p>\n</blockquote>\n</aside>\n<p>No, you should be able to.</p>\n<p>I did kind of skip that part of your question before.  I <em>think</em> you can\u2019t move them right now because coordinators need to write down a forwarding record in order to move, which they probably can\u2019t do if the disk is 100% full.  But I\u2019m not sure, I also would have expected that they could be moved.  AJ generally has better ideas on these sorts of things than I.</p>\n<p>Ratekeeper is supposed to clamp down entirely to prevent 100% disk fullness, so I\u2019d also be curious how you got a disk 100% full.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-09-28T03:03:01.359Z",
        "reply_count": 2,
        "reply_to_post_number": 3,
        "quote_count": 1,
        "incoming_link_count": 8,
        "reads": 99,
        "readers_count": 98,
        "score": 84.8,
        "yours": false,
        "topic_id": 1655,
        "topic_slug": "storage-server-running-out-of-space",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-running-out-of-space/1655/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5186,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2019-09-28T03:11:43.655Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"alexmiller\" data-post=\"4\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/alexmiller/48/326_2.png\" class=\"avatar\"> alexmiller:</div>\n<blockquote>\n<p>Ratekeeper is supposed to clamp down entirely to prevent 100% disk fullness, so I\u2019d also be curious how you got a disk 100% full.</p>\n</blockquote>\n</aside>\n<p>It\u2019s actually not 100% full. There is 5% still left.</p>\n<p><code> Performance limited by process: Storage server running out of space (approaching 5% limit).</code></p>\n<p>However somehow can\u2019t change the coordinators (it just hangs).</p>\n<aside class=\"quote no-group\" data-username=\"alexmiller\" data-post=\"4\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/alexmiller/48/326_2.png\" class=\"avatar\"> alexmiller:</div>\n<blockquote>\n<p>I\u2019d be happy if in the future, data distribution handled new servers in two phases</p>\n<ol>\n<li>Redistribute data so that disk fullness is roughly equal</li>\n<li>Redistribute data so that storage teams are sufficiently randomly chosen.</li>\n</ol>\n<p>Which would make FDB\u2019s behavior in these sorts of situations better. Right now, it just goes straight to (2), so mass excluding is the way to force it to do (1).</p>\n</blockquote>\n</aside>\n<p>That would be great. This seems quite unfortunate way to do it.</p>\n<aside class=\"quote no-group\" data-username=\"alexmiller\" data-post=\"4\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/alexmiller/48/326_2.png\" class=\"avatar\"> alexmiller:</div>\n<blockquote>\n<p>Telling FDB to abandon the old servers makes it do the intelligent thing of move data only from full servers to empty servers.</p>\n</blockquote>\n</aside>\n<p>Doing just that. Fortunately we have \u201cunlimited\u201d amount of servers available in cloud and these get lost in those tens of thousands we already run. Hope it works out well.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-09-28T03:11:43.655Z",
        "reply_count": 2,
        "reply_to_post_number": 4,
        "quote_count": 1,
        "incoming_link_count": 6,
        "reads": 94,
        "readers_count": 93,
        "score": 58.8,
        "yours": false,
        "topic_id": 1655,
        "topic_slug": "storage-server-running-out-of-space",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-running-out-of-space/1655/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5187,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2019-09-28T03:21:18.864Z",
        "cooked": "<p>Doesn\u2019t seem to be doing much after the exclusion</p>\n<pre><code class=\"lang-auto\">fdb&gt; status\n\nWARNING: Long delay (Ctrl-C to interrupt)\n\nUsing cluster file fdb.cluster.\n\nCould not communicate with all of the coordination servers.\n  The database will remain operational as long as we\n  can connect to a quorum of servers, however the fault\n  tolerance of the system is reduced as long as the\n  servers remain disconnected.\n\n  10.128.2.182:4500  (unreachable)\n  10.128.4.254:4500  (reachable)\n  10.128.6.87:4500  (reachable)\n\nUnable to start default priority transaction after 5 seconds.\n\nUnable to start batch priority transaction after 5 seconds.\n\nUnable to retrieve all status information.\n\nConfiguration:\n  Redundancy mode        - triple\n  Storage engine         - ssd-2\n  Coordinators           - 3\n  Exclusions             - 12 (type exclude for details)\n  Desired Proxies        - 7\n  Desired Resolvers      - 1\n  Desired Logs           - 7\n\nCluster:\n  FoundationDB processes - 128 (less 48 excluded; 0 with errors)\n  Machines               - 32 (less 12 excluded)\n  Memory availability    - 7.9 GB per process on machine with least available\n  Fault Tolerance        - 0 machines\n  Server time            - 09/27/19 20:19:23\n\nData:\n  Replication health     - (Re)initializing automatic data distribution\n  Moving data            - unknown (initializing)\n  Sum of key-value sizes - unknown\n  Disk space used        - 7.895 TB\n\nOperating space:\n  Storage server         - 0.0 GB free on most full server\n  Log server             - 355.1 GB free on most full server\n\nWorkload:\n  Read rate              - 5 Hz\n  Write rate             - 0 Hz\n  Transactions started   - 5 Hz\n  Transactions committed - 0 Hz\n  Conflict rate          - 0 Hz\n  Performance limited by process: Storage server running out of space (approaching 5% limit).\n  Most limiting process: 10.128.1.131:4502\n\nBackup and DR:\n  Running backups        - 0\n  Running DRs            - 0\n\nClient time: 09/27/19 20:19\n</code></pre>\n<p>Will give it some time and see</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-09-28T03:21:18.864Z",
        "reply_count": 0,
        "reply_to_post_number": 5,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 87,
        "readers_count": 86,
        "score": 32.4,
        "yours": false,
        "topic_id": 1655,
        "topic_slug": "storage-server-running-out-of-space",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 311,
          "username": "ThomasJ",
          "name": "Thomas Johson",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-running-out-of-space/1655/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5188,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2019-09-28T04:29:37.094Z",
        "cooked": "<p>I have tried to add completely new bunch of servers and exclude all of the previous ones. But still no impact. Any other ideas?</p>\n<pre><code class=\"lang-auto\">\nWARNING: Long delay (Ctrl-C to interrupt)\n\nUsing cluster file `fdb.cluster'.\n\nCould not communicate with all of the coordination servers.\n  The database will remain operational as long as we\n  can connect to a quorum of servers, however the fault\n  tolerance of the system is reduced as long as the\n  servers remain disconnected.\n\n  10.128.2.182:4500  (unreachable)\n  10.128.4.254:4500  (reachable)\n  10.128.6.87:4500  (reachable)\n\nUnable to start default priority transaction after 5 seconds.\n\nUnable to start batch priority transaction after 5 seconds.\n\nUnable to retrieve all status information.\n\nConfiguration:\n  Redundancy mode        - triple\n  Storage engine         - ssd-2\n  Coordinators           - 3\n  Exclusions             - 33 (type exclude for details)\n  Desired Proxies        - 7\n  Desired Resolvers      - 1\n  Desired Logs           - 7\n\nCluster:\n  FoundationDB processes - 208 (less 128 excluded; 0 with errors)\n  Machines               - 52 (less 32 excluded)\n  Memory availability    - 7.9 GB per process on machine with least available\n  Retransmissions rate   - 4 Hz\n  Fault Tolerance        - 0 machines\n  Server time            - 09/27/19 21:28:35\n\nData:\n  Replication health     - HEALING: Only two replicas remain of some data\n  Moving data            - 338.440 GB\n  Sum of key-value sizes - 3.649 TB\n  Disk space used        - 13.447 TB\n\nOperating space:\n  Storage server         - 0.0 GB free on most full server\n  Log server             - 355.1 GB free on most full server\n\nWorkload:\n  Read rate              - 832 Hz\n  Write rate             - 3 Hz\n  Transactions started   - 14 Hz\n  Transactions committed - 1 Hz\n  Conflict rate          - 0 Hz\n  Performance limited by process: Storage server running out of space (approaching 5% limit).\n  Most limiting process: 10.128.1.131:4502\n\nBackup and DR:\n  Running backups        - 0\n  Running DRs            - 0\n\nClient time: 09/27/19 21:28:25```</code></pre>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-09-28T04:29:37.094Z",
        "reply_count": 2,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 84,
        "readers_count": 83,
        "score": 31.8,
        "yours": false,
        "topic_id": 1655,
        "topic_slug": "storage-server-running-out-of-space",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-running-out-of-space/1655/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5189,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-09-28T04:45:44.874Z",
        "cooked": "<p>Is moving data decreasing?  The cluster will stay stuck for a little while until it manages to fully move shards off of the storage servers that are full.  If moving data decreases, then data is moving, and you\u2019re on your way to a healthy cluster.  If not, then we wait for <a class=\"mention\" href=\"/u/ajbeamon\">@ajbeamon</a> or <a class=\"mention\" href=\"/u/john_brownlee\">@john_brownlee</a> to appear and give their better operational wisdom.</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-09-28T04:45:44.874Z",
        "reply_count": 1,
        "reply_to_post_number": 7,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 79,
        "readers_count": 78,
        "score": 20.8,
        "yours": false,
        "topic_id": 1655,
        "topic_slug": "storage-server-running-out-of-space",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 311,
          "username": "ThomasJ",
          "name": "Thomas Johson",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-running-out-of-space/1655/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5190,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2019-09-28T04:47:21.138Z",
        "cooked": "<p>Yep, it actually just finally got unstuck and is now moving data at full speed. Took a while thought.</p>\n<p>Thanks for your help. Maybe you guys could figure out a way to speed up this process?</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-09-28T04:47:21.138Z",
        "reply_count": 1,
        "reply_to_post_number": 8,
        "quote_count": 0,
        "incoming_link_count": 4,
        "reads": 81,
        "readers_count": 80,
        "score": 41.2,
        "yours": false,
        "topic_id": 1655,
        "topic_slug": "storage-server-running-out-of-space",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 13,
          "username": "alexmiller",
          "name": "Alex Miller",
          "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-running-out-of-space/1655/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5191,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2019-09-28T08:35:48.207Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"ThomasJ\" data-post=\"9\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/48.png\" class=\"avatar\"> ThomasJ:</div>\n<blockquote>\n<p>Yep, it actually just finally got unstuck and is now moving data at full speed.</p>\n</blockquote>\n</aside>\n<p>Unlimited cloud servers to the rescue!</p>\n<aside class=\"quote no-group\" data-username=\"ThomasJ\" data-post=\"9\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/48.png\" class=\"avatar\"> ThomasJ:</div>\n<blockquote>\n<p>Maybe you guys could figure out a way to speed up this process?</p>\n</blockquote>\n</aside>\n<p>Data distribution speed has been a tricky topic.  It\u2019s been tuned down over time as data distribution was seen impacting client latencies.  For example, see <a href=\"https://forums.foundationdb.org/t/how-to-speed-up-balancing/1565\" class=\"inline-onebox\">How to speed up balancing?</a> as a report of data distribution running causing degraded throughput.  However, as you\u2019ve noticed, there\u2019s times when you\u2019d prefer data distribution to run as quickly as possible.</p>\n<p>So the root issue here is that we have data distribution set to a static rate, and we need to turn it into a dynamic rate based on how much idle disk/cpu time the cluster has, and what the priority of the data distribution action is.  Smoothing out a 5% data imbalance should be throttled down in the face of user traffic, but moving half of a full storage server to an empty one should be able to use all the resources of a storage server if ratekeeper has already blocked all client traffic to the cluster.</p>\n<p><a href=\"https://github.com/apple/foundationdb/issues/1046\">#1046</a> is the issue to follow for this.  <a class=\"mention\" href=\"/u/fzhjon\">@fzhjon</a> wrote <a href=\"https://github.com/apple/foundationdb/pull/1791\">Introduce priority to fetchKeys requests from data distribution #1791</a>, which is the first step in this direction.  I\u2019m actually unsure how much more work is scheduled to happen on this before 7.0\u2026 <a class=\"mention\" href=\"/u/fzhjon\">@fzhjon</a>?</p>",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-09-28T08:35:48.207Z",
        "reply_count": 2,
        "reply_to_post_number": 9,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 80,
        "readers_count": 79,
        "score": 41.0,
        "yours": false,
        "topic_id": 1655,
        "topic_slug": "storage-server-running-out-of-space",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/how-to-speed-up-balancing/1565",
            "internal": true,
            "reflection": false,
            "title": "How to speed up balancing?",
            "clicks": 13
          },
          {
            "url": "https://github.com/apple/foundationdb/pull/1791",
            "internal": false,
            "reflection": false,
            "clicks": 5
          },
          {
            "url": "https://github.com/apple/foundationdb/issues/1046",
            "internal": false,
            "reflection": false,
            "title": "Fetch keys improvements \u00b7 Issue #1046 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 4
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-running-out-of-space/1655/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5192,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2019-09-28T18:21:35.789Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"alexmiller\" data-post=\"10\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/alexmiller/48/326_2.png\" class=\"avatar\"> alexmiller:</div>\n<blockquote>\n<p>So the root issue here is that we have data distribution set to a static rate, and we need to turn it into a dynamic rate based on how much idle disk/cpu time the cluster has, and what the priority of the data distribution action is. Smoothing out a 5% data imbalance should be throttled down in the face of user traffic, but moving half of a full storage server to an empty one should be able to use all the resources of a storage server if ratekeeper has already blocked all client traffic to the cluster</p>\n</blockquote>\n</aside>\n<p>That\u2019s my thinking. It took 12 hours for us to drain and move the cluster before it became usable. That\u2019s 12 hours of outage rather than whatever else was possible if it was running at a full speed.</p>\n<p>Anyway, appreciate the help!</p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-09-28T18:21:35.789Z",
        "reply_count": 0,
        "reply_to_post_number": 10,
        "quote_count": 1,
        "incoming_link_count": 1,
        "reads": 75,
        "readers_count": 74,
        "score": 20.0,
        "yours": false,
        "topic_id": 1655,
        "topic_slug": "storage-server-running-out-of-space",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-running-out-of-space/1655/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5194,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-09-30T16:06:27.774Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"ThomasJ\" data-post=\"7\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/48.png\" class=\"avatar\"> ThomasJ:</div>\n<blockquote>\n<p>I have tried to add completely new bunch of servers and exclude all of the previous ones. But still no impact. Any other ideas?</p>\n</blockquote>\n</aside>\n<p>Another thing that could be affecting the speed at which this recovers is that the data moved off of the full hosts has to be cleaned up and made available for reuse. Like with any other clear, the work to free up space on disk after moving data is deferred, and it\u2019s possible that this could be a contributor to the delay. In 6.1, the rate that this cleanup happened was turned up significantly, while at the same time data movement speeds were reduced some. Out of curiosity, what version are you running?</p>",
        "post_number": 12,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-09-30T16:06:27.774Z",
        "reply_count": 1,
        "reply_to_post_number": 7,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 68,
        "readers_count": 67,
        "score": 18.6,
        "yours": false,
        "topic_id": 1655,
        "topic_slug": "storage-server-running-out-of-space",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-running-out-of-space/1655/12",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5195,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-09-30T16:19:01.814Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"ThomasJ\" data-post=\"5\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/48.png\" class=\"avatar\"> ThomasJ:</div>\n<blockquote>\n<p>It\u2019s actually not 100% full. There is 5% still left.</p>\n<p><code>Performance limited by process: Storage server running out of space (approaching 5% limit).</code></p>\n</blockquote>\n</aside>\n<p>I guess the text here is a bit misleading, but I believe you will see this message even as you hit and then pass the 5% threshold. Based on your status indicating that there is 0.0GB remaining (this number subtracts out the 5% minimum, but won\u2019t go below 0), I think that suggests you have done so.</p>\n<p>At 5%, the cluster should in theory completely lock down new transactions (at least at non-immediate priorities), but there could be other things still contributing to further disk space usage. For example, trace logs can still be written, and it is also possible to leak transactions if recoveries are happening on the cluster. Certainly any other non-FDB processes on the host would be able to write to the disk if any existed.</p>\n<p>We could determine the actual amount of space available from the <code>StorageMetrics</code> trace event, which has fields <code>KvStoreBytesAvailable</code> and <code>KvStoreBytesTotal</code>. The ratio of these is what is used by ratekeeper to determine whether to slow down the transaction rate. These numbers won\u2019t correspond exactly to numbers reported by the OS because the available bytes includes data within the files that is available for reuse to FoundationDB.</p>",
        "post_number": 13,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-09-30T16:19:01.814Z",
        "reply_count": 1,
        "reply_to_post_number": 5,
        "quote_count": 1,
        "incoming_link_count": 2,
        "reads": 65,
        "readers_count": 64,
        "score": 28.0,
        "yours": false,
        "topic_id": 1655,
        "topic_slug": "storage-server-running-out-of-space",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-running-out-of-space/1655/13",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5197,
        "name": "Jon Fu",
        "username": "fzhjon",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/f/9d8465/{size}.png",
        "created_at": "2019-09-30T16:48:45.377Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"alexmiller\" data-post=\"10\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/alexmiller/48/326_2.png\" class=\"avatar\"> alexmiller:</div>\n<blockquote>\n<p><a href=\"https://github.com/apple/foundationdb/issues/1046\" rel=\"noopener nofollow ugc\">#1046 </a> is the issue to follow for this. <a class=\"mention\" href=\"/u/fzhjon\">@fzhjon</a> wrote <a href=\"https://github.com/apple/foundationdb/pull/1791\" rel=\"noopener nofollow ugc\">Introduce priority to fetchKeys requests from data distribution #1791 </a>, which is the first step in this direction. I\u2019m actually unsure how much more work is scheduled to happen on this before 7.0\u2026 <a class=\"mention\" href=\"/u/fzhjon\">@fzhjon</a>?</p>\n</blockquote>\n</aside>\n<p>There is currently no immediate work scheduled for this before 7.0, as far as I\u2019m aware. I may end up being able to return to this should time permit, but I\u2019m not sure it\u2019s guaranteed.</p>",
        "post_number": 14,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-09-30T16:48:45.377Z",
        "reply_count": 0,
        "reply_to_post_number": 10,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 59,
        "readers_count": 58,
        "score": 11.8,
        "yours": false,
        "topic_id": 1655,
        "topic_slug": "storage-server-running-out-of-space",
        "display_username": "Jon Fu",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 612,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-running-out-of-space/1655/14",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5204,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-10-01T15:43:23.227Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"alexmiller\" data-post=\"4\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/alexmiller/48/326_2.png\" class=\"avatar\"> alexmiller:</div>\n<blockquote>\n<p>I did kind of skip that part of your question before. I <em>think</em> you can\u2019t move them right now because coordinators need to write down a forwarding record in order to move, which they probably can\u2019t do if the disk is 100% full. But I\u2019m not sure, I also would have expected that they could be moved. AJ generally has better ideas on these sorts of things than I.</p>\n</blockquote>\n</aside>\n<p>I\u2019m not sure it was intended that coordinators can\u2019t be changed when ratekeeper is not allowing transactions to start at normal priority, but I was able to reproduce it in my own test cluster. I\u2019ve submitted a PR which should resolve this particular issue: <a href=\"https://github.com/apple/foundationdb/pull/2191\" class=\"inline-onebox\">Use immediate priority for coordinator changes by ajbeamon \u00b7 Pull Request #2191 \u00b7 apple/foundationdb \u00b7 GitHub</a>.</p>",
        "post_number": 15,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-10-01T15:43:23.227Z",
        "reply_count": 1,
        "reply_to_post_number": 4,
        "quote_count": 1,
        "incoming_link_count": 1,
        "reads": 58,
        "readers_count": 57,
        "score": 21.6,
        "yours": false,
        "topic_id": 1655,
        "topic_slug": "storage-server-running-out-of-space",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/apple/foundationdb/pull/2191",
            "internal": false,
            "reflection": false,
            "title": "Use immediate priority for coordinator changes by ajbeamon \u00b7 Pull Request #2191 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 4
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-running-out-of-space/1655/15",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5213,
        "name": "Thomas Johson",
        "username": "ThomasJ",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "created_at": "2019-10-02T20:31:49.422Z",
        "cooked": "<p>Sorry for the delay, been bit busy.</p>\n<aside class=\"quote no-group\" data-username=\"ajbeamon\" data-post=\"12\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>Out of curiosity, what version are you running?</p>\n</blockquote>\n</aside>\n<p>6.1.8</p>\n<aside class=\"quote no-group\" data-username=\"ajbeamon\" data-post=\"12\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>the data moved off of the full hosts has to be cleaned up and made available for reuse</p>\n</blockquote>\n</aside>\n<p>Is this something internal?</p>\n<aside class=\"quote no-group\" data-username=\"ajbeamon\" data-post=\"13\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>I guess the text here is a bit misleading, but I believe you will see this message even as you hit and then pass the 5% threshold. Based on your status indicating that there is 0.0GB remaining (this number subtracts out the 5% minimum, but won\u2019t go below 0), I think that suggests you have done so.</p>\n</blockquote>\n</aside>\n<p>I don\u2019t know why it reported 0 because the server had 50GB space which is ~5%.</p>\n<aside class=\"quote no-group\" data-username=\"ajbeamon\" data-post=\"13\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>For example, trace logs can still be written</p>\n</blockquote>\n</aside>\n<p>It\u2019s on different hard drive</p>\n<aside class=\"quote no-group\" data-username=\"ajbeamon\" data-post=\"13\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>Certainly any other non-FDB processes on the host would be able to write to the disk if any existed.</p>\n</blockquote>\n</aside>\n<p>We have 4 processes, 2 storage and 1 log and 1 stateless</p>\n<aside class=\"quote no-group quote-modified\" data-username=\"ajbeamon\" data-post=\"15\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/ajbeamon/48/13_2.png\" class=\"avatar\"> ajbeamon:</div>\n<blockquote>\n<p>I\u2019m not sure it was intended that coordinators can\u2019t be changed when ratekeeper is not allowing transactions to start at normal priority, but I was able to reproduce it in my own test cluster. I\u2019ve submitted a PR which should resolve this particular issue: <a href=\"https://github.com/apple/foundationdb/pull/2191\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Use immediate priority for coordinator changes by ajbeamon \u00b7 Pull Request #2191 \u00b7 apple/foundationdb \u00b7 GitHub</a>.</p>\n</blockquote>\n</aside>\n<p>Glad to hear it wasn\u2019t a fluke and it\u2019s something reproducible. It caused quite a lot of issues  considering that one of the servers that went down was coordinator. Would we lose one more, the cluster would be lost forever.</p>",
        "post_number": 16,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-10-02T20:31:49.422Z",
        "reply_count": 1,
        "reply_to_post_number": 12,
        "quote_count": 3,
        "incoming_link_count": 6,
        "reads": 59,
        "readers_count": 58,
        "score": 46.8,
        "yours": false,
        "topic_id": 1655,
        "topic_slug": "storage-server-running-out-of-space",
        "display_username": "Thomas Johson",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 311,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-running-out-of-space/1655/16",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 5214,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2019-10-02T20:48:03.731Z",
        "cooked": "<aside class=\"quote no-group quote-modified\" data-username=\"ThomasJ\" data-post=\"16\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/48.png\" class=\"avatar\"> ThomasJ:</div>\n<blockquote>\n<blockquote>\n<p>the data moved off of the full hosts has to be cleaned up and made available for reuse</p>\n</blockquote>\n<p>Is this something internal?</p>\n</blockquote>\n</aside>\n<p>Yes, see for example <a href=\"https://forums.foundationdb.org/t/shards-are-not-splitted-into-smaller-ones/815/9\">this post</a> which roughly describes the steps that occur when data is cleared from a process. The gist is that the actual clearing of key ranges doesn\u2019t do much work initially but defers the cleanup to a background process.</p>\n<aside class=\"quote no-group quote-modified\" data-username=\"ThomasJ\" data-post=\"16\" data-topic=\"1655\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/48.png\" class=\"avatar\"> ThomasJ:</div>\n<blockquote>\n<blockquote>\n<p>I guess the text here is a bit misleading, but I believe you will see this message even as you hit and then pass the 5% threshold. Based on your status indicating that there is 0.0GB remaining (this number subtracts out the 5% minimum, but won\u2019t go below 0), I think that suggests you have done so.</p>\n</blockquote>\n<p>I don\u2019t know why it reported 0 because the server had 50GB space which is ~5%.</p>\n</blockquote>\n</aside>\n<p>The number reported subtracts out the 5% floor, so 0.0GB means you have 5% or less space remaining.</p>",
        "post_number": 17,
        "post_type": 1,
        "posts_count": 17,
        "updated_at": "2019-10-02T20:48:03.731Z",
        "reply_count": 0,
        "reply_to_post_number": 16,
        "quote_count": 1,
        "incoming_link_count": 13,
        "reads": 57,
        "readers_count": 56,
        "score": 91.4,
        "yours": false,
        "topic_id": 1655,
        "topic_slug": "storage-server-running-out-of-space",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/shards-are-not-splitted-into-smaller-ones/815/9",
            "internal": true,
            "reflection": false,
            "title": "Shards are not splitted into smaller ones",
            "clicks": 17
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/storage-server-running-out-of-space/1655/17",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      5180,
      5181,
      5182,
      5183,
      5186,
      5187,
      5188,
      5189,
      5190,
      5191,
      5192,
      5194,
      5195,
      5197,
      5204,
      5213,
      5214
    ]
  },
  "timeline_lookup": [
    [
      1,
      2216
    ],
    [
      11,
      2215
    ],
    [
      12,
      2213
    ],
    [
      15,
      2212
    ],
    [
      16,
      2211
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Storage server running out of space",
  "id": 1655,
  "title": "Storage server running out of space",
  "posts_count": 17,
  "created_at": "2019-09-28T02:44:46.227Z",
  "views": 4053,
  "reply_count": 14,
  "like_count": 3,
  "last_posted_at": "2019-10-02T20:48:03.731Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "storage-server-running-out-of-space",
  "category_id": 7,
  "word_count": 3422,
  "deleted_at": null,
  "user_id": 311,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_1655",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 17,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 4,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Migrating from a large cluster to another",
      "id": 721,
      "title": "Migrating from a large cluster to another",
      "slug": "migrating-from-a-large-cluster-to-another",
      "posts_count": 15,
      "reply_count": 9,
      "highest_post_number": 15,
      "image_url": null,
      "created_at": "2018-09-21T15:41:31.742Z",
      "last_posted_at": "2018-11-06T16:15:24.202Z",
      "bumped": true,
      "bumped_at": "2018-11-06T16:15:24.202Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 2418,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 16,
            "username": "ashishnm",
            "name": "Ashish Motivala",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/b5e925/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 15,
            "username": "markus.pilman",
            "name": "Markus Pilman",
            "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 43,
            "username": "killertypo",
            "name": "Mike McMahon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/killertypo/{size}/35_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 311,
            "username": "ThomasJ",
            "name": "Thomas Johson",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Troubles scaling up the cluster",
      "id": 751,
      "title": "Troubles scaling up the cluster",
      "slug": "troubles-scaling-up-the-cluster",
      "posts_count": 32,
      "reply_count": 26,
      "highest_post_number": 32,
      "image_url": null,
      "created_at": "2018-10-08T03:24:54.004Z",
      "last_posted_at": "2018-11-01T16:26:01.527Z",
      "bumped": true,
      "bumped_at": "2018-11-01T16:26:01.527Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 3747,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 311,
            "username": "ThomasJ",
            "name": "Thomas Johson",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 15,
            "username": "markus.pilman",
            "name": "Markus Pilman",
            "avatar_template": "/user_avatar/forums.foundationdb.org/markus.pilman/{size}/379_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 255,
            "username": "aqua",
            "name": "Matt Lohier",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/b9bd4f/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Full disk on one machine results in 99% performance degradation",
      "id": 850,
      "title": "Full disk on one machine results in 99% performance degradation",
      "slug": "full-disk-on-one-machine-results-in-99-performance-degradation",
      "posts_count": 6,
      "reply_count": 4,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2018-11-06T00:18:11.154Z",
      "last_posted_at": "2018-11-08T00:02:29.123Z",
      "bumped": true,
      "bumped_at": "2018-11-08T00:02:29.123Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 2223,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 421,
            "username": "rbranson",
            "name": "Rick Branson",
            "avatar_template": "/user_avatar/forums.foundationdb.org/rbranson/{size}/406_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Help me understand this status output",
      "id": 742,
      "title": "Help me understand this status output",
      "slug": "help-me-understand-this-status-output",
      "posts_count": 13,
      "reply_count": 8,
      "highest_post_number": 13,
      "image_url": null,
      "created_at": "2018-10-04T01:03:25.785Z",
      "last_posted_at": "2021-06-15T15:32:08.437Z",
      "bumped": true,
      "bumped_at": "2021-06-15T15:32:08.437Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 3594,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 44,
            "username": "cespare",
            "name": "Caleb Spare",
            "avatar_template": "/user_avatar/forums.foundationdb.org/cespare/{size}/36_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 22,
            "username": "dave",
            "name": "David Scherer",
            "avatar_template": "/user_avatar/forums.foundationdb.org/dave/{size}/89_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 949,
            "username": "DenisBY",
            "name": "Denis",
            "avatar_template": "/user_avatar/forums.foundationdb.org/denisby/{size}/1104_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Data distribution / Disk usage uneven: bifurcated at 2 tiers",
      "id": 2270,
      "title": "Data distribution / Disk usage uneven: bifurcated at 2 tiers",
      "slug": "data-distribution-disk-usage-uneven-bifurcated-at-2-tiers",
      "posts_count": 7,
      "reply_count": 3,
      "highest_post_number": 7,
      "image_url": null,
      "created_at": "2020-08-02T03:47:59.558Z",
      "last_posted_at": "2020-08-06T06:17:39.778Z",
      "bumped": true,
      "bumped_at": "2020-08-06T06:17:39.778Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 537,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 643,
            "username": "lehu",
            "name": "Leo Hu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/lehu/{size}/995_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 166,
            "username": "gaurav",
            "name": "gaurav",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/b487fb/{size}.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 741,
            "username": "sears",
            "name": "Russell Sears",
            "avatar_template": "/user_avatar/forums.foundationdb.org/sears/{size}/887_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 337,
            "username": "mengxu",
            "name": "Meng Xu",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mengxu/{size}/893_2.png",
            "trust_level": 2
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 311,
        "username": "ThomasJ",
        "name": "Thomas Johson",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
        "post_count": 8,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 4,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      },
      {
        "id": 12,
        "username": "ajbeamon",
        "name": "A.J. Beamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "post_count": 4,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 612,
        "username": "fzhjon",
        "name": "Jon Fu",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/f/9d8465/{size}.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      }
    ],
    "created_by": {
      "id": 311,
      "username": "ThomasJ",
      "name": "Thomas Johson",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png"
    },
    "last_poster": {
      "id": 12,
      "username": "ajbeamon",
      "name": "A.J. Beamon",
      "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
    },
    "links": [
      {
        "url": "https://forums.foundationdb.org/t/full-disk-on-one-machine-results-in-99-performance-degradation/850",
        "title": "Full disk on one machine results in 99% performance degradation",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 32,
        "user_id": 311,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://forums.foundationdb.org/t/data-distribution-stopped-how-to-restart/1626",
        "title": "Data Distribution Stopped - How to Restart?",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 24,
        "user_id": 13,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://forums.foundationdb.org/t/shards-are-not-splitted-into-smaller-ones/815/9",
        "title": "Shards are not splitted into smaller ones",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 17,
        "user_id": 12,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://forums.foundationdb.org/t/how-to-speed-up-balancing/1565",
        "title": "How to speed up balancing?",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 13,
        "user_id": 13,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://github.com/apple/foundationdb/pull/1791",
        "title": null,
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 5,
        "user_id": 13,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/pull/2191",
        "title": "Use immediate priority for coordinator changes by ajbeamon \u00b7 Pull Request #2191 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 4,
        "user_id": 12,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/apple/foundationdb/issues/1046",
        "title": "Fetch keys improvements \u00b7 Issue #1046 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 4,
        "user_id": 13,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://forums.foundationdb.org/t/storage-servers-95-full-how-to-recover/2315",
        "title": "Storage servers 95% full - how to recover",
        "internal": true,
        "attachment": false,
        "reflection": true,
        "clicks": 1,
        "user_id": 737,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      }
    ]
  },
  "bookmarks": []
}