{
  "post_stream": {
    "posts": [
      {
        "id": 13689,
        "name": null,
        "username": "stefanvasilic4",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/a8b319/{size}.png",
        "created_at": "2024-01-23T16:13:19.439Z",
        "cooked": "<p>Hello,</p>\n<p>While running some performance tests on <code>three_data_hall</code> and <code>multi_dc</code> setup , i get results to be 10 times slower in <code>multi_dc</code> scenario, for loading and reading. All storage and logs count being aprox the same. Increasing number of logs, proxies, log routers do not have an impact on performance ; only reducing nr of storage servers seems to improve the numbers a little bit (nothing significant) . Both scenarios use triple replication, and reside in one k8s across 3 namespaces mapped to 3 AZ (from cloud provider). Is there a logical justification for this type of  behavior ?</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2024-01-23T16:18:57.711Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 44,
        "reads": 32,
        "readers_count": 31,
        "score": 221.4,
        "yours": false,
        "topic_id": 4331,
        "topic_slug": "three-data-hall-vs-multi-dc",
        "display_username": null,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 2,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1320,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/three-data-hall-vs-multi-dc/4331/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 13789,
        "name": null,
        "username": "stefanvasilic4",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/a8b319/{size}.png",
        "created_at": "2024-02-19T01:55:10.512Z",
        "cooked": "<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://global.discourse-cdn.com/foundationdb/original/2X/3/3a74736a93fff4d8faba46416625d98112d7f822.jpeg\" data-download-href=\"/uploads/short-url/8l7bEWxqI2nXnP3xMree4C1xuXo.jpeg?dl=1\" title=\"multi_dc\" rel=\"noopener nofollow ugc\"><img src=\"https://global.discourse-cdn.com/foundationdb/optimized/2X/3/3a74736a93fff4d8faba46416625d98112d7f822_2_690x222.jpeg\" alt=\"multi_dc\" data-base62-sha1=\"8l7bEWxqI2nXnP3xMree4C1xuXo\" width=\"690\" height=\"222\" srcset=\"https://global.discourse-cdn.com/foundationdb/optimized/2X/3/3a74736a93fff4d8faba46416625d98112d7f822_2_690x222.jpeg, https://global.discourse-cdn.com/foundationdb/optimized/2X/3/3a74736a93fff4d8faba46416625d98112d7f822_2_1035x333.jpeg 1.5x, https://global.discourse-cdn.com/foundationdb/optimized/2X/3/3a74736a93fff4d8faba46416625d98112d7f822_2_1380x444.jpeg 2x\" data-dominant-color=\"1F2226\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">multi_dc</span><span class=\"informations\">2118\u00d7684 115 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div><br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://global.discourse-cdn.com/foundationdb/original/2X/6/6fc36968dbf220e0de926b911e333f2550e2e335.jpeg\" data-download-href=\"/uploads/short-url/fWHFlRf6pvMLnLEPOQ9MopSXg2h.jpeg?dl=1\" title=\"three_datahall\" rel=\"noopener nofollow ugc\"><img src=\"https://global.discourse-cdn.com/foundationdb/optimized/2X/6/6fc36968dbf220e0de926b911e333f2550e2e335_2_690x222.jpeg\" alt=\"three_datahall\" data-base62-sha1=\"fWHFlRf6pvMLnLEPOQ9MopSXg2h\" width=\"690\" height=\"222\" srcset=\"https://global.discourse-cdn.com/foundationdb/optimized/2X/6/6fc36968dbf220e0de926b911e333f2550e2e335_2_690x222.jpeg, https://global.discourse-cdn.com/foundationdb/optimized/2X/6/6fc36968dbf220e0de926b911e333f2550e2e335_2_1035x333.jpeg 1.5x, https://global.discourse-cdn.com/foundationdb/optimized/2X/6/6fc36968dbf220e0de926b911e333f2550e2e335_2_1380x444.jpeg 2x\" data-dominant-color=\"1D2025\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">three_datahall</span><span class=\"informations\">2118\u00d7684 98.7 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2024-02-19T01:55:10.512Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 6,
        "reads": 26,
        "readers_count": 25,
        "score": 40.2,
        "yours": false,
        "topic_id": 4331,
        "topic_slug": "three-data-hall-vs-multi-dc",
        "display_username": null,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://global.discourse-cdn.com/foundationdb/original/2X/3/3a74736a93fff4d8faba46416625d98112d7f822.jpeg",
            "internal": false,
            "reflection": false,
            "title": "3a74736a93fff4d8faba46416625d98112d7f822.jpeg",
            "clicks": 0
          },
          {
            "url": "https://global.discourse-cdn.com/foundationdb/original/2X/6/6fc36968dbf220e0de926b911e333f2550e2e335.jpeg",
            "internal": false,
            "reflection": false,
            "title": "6fc36968dbf220e0de926b911e333f2550e2e335.jpeg",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1320,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/three-data-hall-vs-multi-dc/4331/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 13790,
        "name": "Johannes Scheuermann",
        "username": "johscheuer",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
        "created_at": "2024-02-19T15:05:06.339Z",
        "cooked": "<p>Could you share the <code>multi_dc</code> setup? I assume that one dc is mapped to one AZ? I\u2019m not an expert with the <code>three_data_hall</code> setup but there are some subtle differences between the <code>three_data_hall</code> and the <code>multi_dc</code> setup:</p>\n<ul>\n<li>In <code>three_data_hall</code> there will be 3 replicas of a storage team, one per data hall.</li>\n<li>In <code>multi_dc</code> there will be 6 replicas of a storage team, 3 per dc (primary and remote), spread across the fault domains.</li>\n<li>In <code>three_data_hall</code> a commit is replicated 4 times, having 2 replicas per data hall. A commit has to wait until the data is persisted on all 4 log servers.</li>\n<li>In <code>multi_dc</code> there will be 3 replicas in the main dc + and with <code>one_satellite_double</code> there will be 2 replicas in the satellite. The mutations for the remote side are then fetched from the satellite (adding some additional load). A commit has to wait until all 5 log servers have persisted the data.</li>\n</ul>\n<p>When a client reads the data from the remote side it can happen that the storage server in the remote side has to wait until the according version is available locally. That means the log routers in the remote side must have fetched the new version/mutations from the satellite.</p>\n<p>I simplified a few steps but the ideas should be correct. Have you checked what is the limiting factor? e.g. is the RateKeeper throttling, and if yes, what is the reason for throttling? It would also be great to know the read/write ratio + if reads are local or not.</p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2024-02-19T15:05:06.339Z",
        "reply_count": 0,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 10,
        "reads": 24,
        "readers_count": 23,
        "score": 54.8,
        "yours": false,
        "topic_id": 4331,
        "topic_slug": "three-data-hall-vs-multi-dc",
        "display_username": "Johannes Scheuermann",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "reply_to_user": {
          "id": 1320,
          "username": "stefanvasilic4",
          "name": null,
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/a8b319/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 849,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/three-data-hall-vs-multi-dc/4331/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      13689,
      13789,
      13790
    ]
  },
  "timeline_lookup": [
    [
      1,
      637
    ],
    [
      2,
      611
    ],
    [
      3,
      610
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "Three_data_hall vs multi_dc",
  "id": 4331,
  "title": "Three_data_hall vs multi_dc",
  "posts_count": 3,
  "created_at": "2024-01-23T16:13:19.379Z",
  "views": 294,
  "reply_count": 1,
  "like_count": 0,
  "last_posted_at": "2024-02-19T15:05:06.339Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "three-data-hall-vs-multi-dc",
  "category_id": 16,
  "word_count": 362,
  "deleted_at": null,
  "user_id": 1320,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_4331",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 3,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 2,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Optimal configuration for more than 3 DCs",
      "id": 1519,
      "title": "Optimal configuration for more than 3 DCs",
      "slug": "optimal-configuration-for-more-than-3-dcs",
      "posts_count": 8,
      "reply_count": 4,
      "highest_post_number": 8,
      "image_url": null,
      "created_at": "2019-07-15T04:50:08.246Z",
      "last_posted_at": "2019-07-15T09:32:14.332Z",
      "bumped": true,
      "bumped_at": "2019-07-15T09:32:14.332Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 1332,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 542,
            "username": "jonahwest",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/90db22/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Evenly split replicas across datacenters",
      "id": 1522,
      "title": "Evenly split replicas across datacenters",
      "slug": "evenly-split-replicas-across-datacenters",
      "posts_count": 4,
      "reply_count": 1,
      "highest_post_number": 4,
      "image_url": null,
      "created_at": "2019-07-16T08:17:58.120Z",
      "last_posted_at": "2019-07-19T02:26:53.342Z",
      "bumped": true,
      "bumped_at": "2019-07-19T02:26:53.342Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 559,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 542,
            "username": "jonahwest",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/90db22/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Replication method consideration",
      "id": 1410,
      "title": "Replication method consideration",
      "slug": "replication-method-consideration",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2019-05-30T12:13:55.382Z",
      "last_posted_at": "2019-05-31T00:39:24.107Z",
      "bumped": true,
      "bumped_at": "2019-05-31T00:39:24.107Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 792,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 595,
            "username": "Choboz",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/c/65b543/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Multi DC cluster latency requirments",
      "id": 735,
      "title": "Multi DC cluster latency requirments",
      "slug": "multi-dc-cluster-latency-requirments",
      "posts_count": 1,
      "reply_count": 0,
      "highest_post_number": 1,
      "image_url": null,
      "created_at": "2018-09-27T12:07:15.092Z",
      "last_posted_at": "2018-09-27T12:07:15.164Z",
      "bumped": true,
      "bumped_at": "2018-09-27T12:07:15.164Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 508,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest single",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 366,
            "username": "tobad357",
            "name": "Tobad357",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/49beb7/{size}.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Cross Datacenter/Region?",
      "id": 186,
      "title": "Cross Datacenter/Region?",
      "slug": "cross-datacenter-region",
      "posts_count": 10,
      "reply_count": 3,
      "highest_post_number": 10,
      "image_url": null,
      "created_at": "2018-04-21T18:09:15.229Z",
      "last_posted_at": "2018-06-14T19:55:13.933Z",
      "bumped": true,
      "bumped_at": "2018-06-14T19:55:13.933Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 3406,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 130,
            "username": "aphistic",
            "name": "Erik Davidson",
            "avatar_template": "/user_avatar/forums.foundationdb.org/aphistic/{size}/90_2.png",
            "trust_level": 0
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 183,
            "username": "tylerchr",
            "name": "Tyler",
            "avatar_template": "/user_avatar/forums.foundationdb.org/tylerchr/{size}/143_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 54,
            "username": "Evan",
            "name": "Evan Tschannen",
            "avatar_template": "/user_avatar/forums.foundationdb.org/evan/{size}/104_2.png",
            "moderator": true,
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 8,
            "username": "alloc",
            "name": "Alec Grieser",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alloc/{size}/9_2.png",
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 1320,
        "username": "stefanvasilic4",
        "name": null,
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/a8b319/{size}.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 849,
        "username": "johscheuer",
        "name": "Johannes Scheuermann",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      }
    ],
    "created_by": {
      "id": 1320,
      "username": "stefanvasilic4",
      "name": null,
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/a8b319/{size}.png"
    },
    "last_poster": {
      "id": 849,
      "username": "johscheuer",
      "name": "Johannes Scheuermann",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/f475e1/{size}.png"
    }
  },
  "bookmarks": []
}