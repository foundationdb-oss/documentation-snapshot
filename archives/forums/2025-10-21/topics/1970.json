{
  "post_stream": {
    "posts": [
      {
        "id": 6272,
        "name": "Clement Pang",
        "username": "panghy",
        "avatar_template": "/user_avatar/forums.foundationdb.org/panghy/{size}/19_2.png",
        "created_at": "2020-02-20T04:42:06.469Z",
        "cooked": "<p>We recently upgraded a cluster from 5.2.x to 6.2.x (6.2.7 then 6.2.15) and since we use the memory engine extensively (as well as the SSD engine), we noticed the following happening:</p>\n<ul>\n<li>mem tier FDBCLI Latency increases 2-3x across all mem shards</li>\n<li>TCP TIME_WAIT increases across all instances</li>\n<li>mem tier Storage CPU increases 2x across all nodes</li>\n<li>mem tier Transaction CPU decreases by almost 2x across all mem shards (this is likely due to memory-2)</li>\n<li>ssd tier Storage CPU increases 2x</li>\n<li>ssd tier Transaction CPU decreases by almost 3x</li>\n<li>ssd and mem Master/CC CPU usage decreases by ~0.5x (likely from the JSON serialization improvements)</li>\n</ul>\n<p>The most alarming aspect of the upgrade is that the cpu time on storage servers increased significantly. It\u2019s showing patterns of hot spots whereby a subset of processes would be pegged at 5s while others are fine. This behavior, however, simply shifts between different storage processes (so there\u2019s always some SS that are deemed unreachable because of their CPU load).</p>\n<p>From what I can tell, memory-1 and memory-2 shares the same underlying storage so my hunch is that something changed in data distribution such that perhaps it is now either splitting or merging too aggressively.</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 11,
        "updated_at": "2020-02-20T04:42:06.469Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 42,
        "reads": 53,
        "readers_count": 52,
        "score": 265.6,
        "yours": false,
        "topic_id": 1970,
        "topic_slug": "performance-regression-with-6-2-15",
        "display_username": "Clement Pang",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 38,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/performance-regression-with-6-2-15/1970/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 6274,
        "name": "Clement Pang",
        "username": "panghy",
        "avatar_template": "/user_avatar/forums.foundationdb.org/panghy/{size}/19_2.png",
        "created_at": "2020-02-20T04:44:27.958Z",
        "cooked": "<p>For a visual look at what is going on pre/post upgrade in terms of SS CPU in a test cluster (note that we have dedicated processes for master/CC/logs/proxies/resolvers so these are just SS role processes):</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://global.discourse-cdn.com/foundationdb/original/1X/dff19919be1aa0b9f3937288c95f3cfcf0d0a971.png\" data-download-href=\"/uploads/short-url/vX662byFbahp4sDKVFs8AXrt4oF.png?dl=1\" title=\"Screen Shot 2020-02-19 at 8.43.29 PM\" rel=\"nofollow noopener\"><img src=\"https://global.discourse-cdn.com/foundationdb/optimized/1X/dff19919be1aa0b9f3937288c95f3cfcf0d0a971_2_690x149.png\" alt=\"Screen Shot 2020-02-19 at 8.43.29 PM\" data-base62-sha1=\"vX662byFbahp4sDKVFs8AXrt4oF\" width=\"690\" height=\"149\" srcset=\"https://global.discourse-cdn.com/foundationdb/optimized/1X/dff19919be1aa0b9f3937288c95f3cfcf0d0a971_2_690x149.png, https://global.discourse-cdn.com/foundationdb/optimized/1X/dff19919be1aa0b9f3937288c95f3cfcf0d0a971_2_1035x223.png 1.5x, https://global.discourse-cdn.com/foundationdb/optimized/1X/dff19919be1aa0b9f3937288c95f3cfcf0d0a971_2_1380x298.png 2x\" data-small-upload=\"https://global.discourse-cdn.com/foundationdb/optimized/1X/dff19919be1aa0b9f3937288c95f3cfcf0d0a971_2_10x10.png\"><div class=\"meta\">\n<svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use xlink:href=\"#far-image\"></use></svg><span class=\"filename\">Screen Shot 2020-02-19 at 8.43.29 PM</span><span class=\"informations\">1735\u00d7377 773 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use xlink:href=\"#discourse-expand\"></use></svg>\n</div></a></div></p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 11,
        "updated_at": "2020-02-20T04:44:27.958Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 52,
        "readers_count": 51,
        "score": 15.4,
        "yours": false,
        "topic_id": 1970,
        "topic_slug": "performance-regression-with-6-2-15",
        "display_username": "Clement Pang",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://global.discourse-cdn.com/foundationdb/original/1X/dff19919be1aa0b9f3937288c95f3cfcf0d0a971.png",
            "internal": false,
            "reflection": false,
            "title": "dff19919be1aa0b9f3937288c95f3cfcf0d0a971.png",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 38,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/performance-regression-with-6-2-15/1970/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6275,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2020-02-20T06:53:14.616Z",
        "cooked": "<p>Did this happen after upgrading from 5.2 or 6.2.7? Is the cluster done doing the machine team rebalancing that we discussed here? <a href=\"https://forums.foundationdb.org/t/constantly-repartitioning-under-no-load-and-moving-large-volumes-of-data/1875\" class=\"inline-onebox\">Constantly repartitioning (under no load) and moving large volumes of data</a></p>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 11,
        "updated_at": "2020-02-20T06:53:14.616Z",
        "reply_count": 2,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 49,
        "readers_count": 48,
        "score": 24.8,
        "yours": false,
        "topic_id": 1970,
        "topic_slug": "performance-regression-with-6-2-15",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/constantly-repartitioning-under-no-load-and-moving-large-volumes-of-data/1875",
            "internal": true,
            "reflection": false,
            "title": "Constantly repartitioning (under no load) and moving large volumes of data",
            "clicks": 2
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 38,
          "username": "panghy",
          "name": "Clement Pang",
          "avatar_template": "/user_avatar/forums.foundationdb.org/panghy/{size}/19_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/performance-regression-with-6-2-15/1970/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6276,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2020-02-20T06:59:43.852Z",
        "cooked": "<p>There were some data distribution changes in recent patch releases, so if you have a lot of movement that\u2019s not machine team work and wasn\u2019t there before, that would be interesting. You could check the <code>MovingData</code> event, which lists movements queued by priority and can tell you what type of movements you\u2019re doing now.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 11,
        "updated_at": "2020-02-20T06:59:43.852Z",
        "reply_count": 0,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 50,
        "readers_count": 49,
        "score": 20.0,
        "yours": false,
        "topic_id": 1970,
        "topic_slug": "performance-regression-with-6-2-15",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 12,
          "username": "ajbeamon",
          "name": "A.J. Beamon",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/performance-regression-with-6-2-15/1970/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6280,
        "name": "Mengran Wang",
        "username": "mengranewo",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/m/8e8cbc/{size}.png",
        "created_at": "2020-02-20T19:08:02.318Z",
        "cooked": "<p>This happened after we upgraded from 5.2 to 6.2.7<br>\nWe didn\u2019t see changes in data movement for memory storage engine, the following chart measures the total number of in-flight bytes and in-queue bytes<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://global.discourse-cdn.com/foundationdb/original/1X/bbb5c16a4499ab43a53955fade2c2bd066c6af36.png\" data-download-href=\"/uploads/short-url/qMyHaWJu6CAMsfY87ohOU0QNANg.png?dl=1\" title=\"Screen Shot 2020-02-20 at 11.03.15 AM\" rel=\"nofollow noopener\"><img src=\"https://global.discourse-cdn.com/foundationdb/optimized/1X/bbb5c16a4499ab43a53955fade2c2bd066c6af36_2_690x156.png\" alt=\"Screen Shot 2020-02-20 at 11.03.15 AM\" data-base62-sha1=\"qMyHaWJu6CAMsfY87ohOU0QNANg\" width=\"690\" height=\"156\" srcset=\"https://global.discourse-cdn.com/foundationdb/optimized/1X/bbb5c16a4499ab43a53955fade2c2bd066c6af36_2_690x156.png, https://global.discourse-cdn.com/foundationdb/optimized/1X/bbb5c16a4499ab43a53955fade2c2bd066c6af36_2_1035x234.png 1.5x, https://global.discourse-cdn.com/foundationdb/optimized/1X/bbb5c16a4499ab43a53955fade2c2bd066c6af36_2_1380x312.png 2x\" data-small-upload=\"https://global.discourse-cdn.com/foundationdb/optimized/1X/bbb5c16a4499ab43a53955fade2c2bd066c6af36_2_10x10.png\"><div class=\"meta\">\n<svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use xlink:href=\"#far-image\"></use></svg><span class=\"filename\">Screen Shot 2020-02-20 at 11.03.15 AM</span><span class=\"informations\">1884\u00d7428 192 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use xlink:href=\"#discourse-expand\"></use></svg>\n</div></a></div></p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 11,
        "updated_at": "2020-02-20T19:08:02.318Z",
        "reply_count": 0,
        "reply_to_post_number": 3,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 45,
        "readers_count": 44,
        "score": 19.0,
        "yours": false,
        "topic_id": 1970,
        "topic_slug": "performance-regression-with-6-2-15",
        "display_username": "Mengran Wang",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://global.discourse-cdn.com/foundationdb/original/1X/bbb5c16a4499ab43a53955fade2c2bd066c6af36.png",
            "internal": false,
            "reflection": false,
            "title": "bbb5c16a4499ab43a53955fade2c2bd066c6af36.png",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 12,
          "username": "ajbeamon",
          "name": "A.J. Beamon",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 412,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/performance-regression-with-6-2-15/1970/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6284,
        "name": "Clement Pang",
        "username": "panghy",
        "avatar_template": "/user_avatar/forums.foundationdb.org/panghy/{size}/19_2.png",
        "created_at": "2020-02-20T22:12:19.738Z",
        "cooked": "<p>Hm, I discovery is that the SS nodes are now assigned the proxy role (for those that are hot). There must be a new change in how roles are assigned (need to check the code to see, we did not change the number of transaction class processes in the cluster).</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 11,
        "updated_at": "2020-02-20T22:12:19.738Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 43,
        "readers_count": 42,
        "score": 8.6,
        "yours": false,
        "topic_id": 1970,
        "topic_slug": "performance-regression-with-6-2-15",
        "display_username": "Clement Pang",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 38,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/performance-regression-with-6-2-15/1970/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6285,
        "name": "Clement Pang",
        "username": "panghy",
        "avatar_template": "/user_avatar/forums.foundationdb.org/panghy/{size}/19_2.png",
        "created_at": "2020-02-20T22:33:46.086Z",
        "cooked": "<p>So some details about this test cluster, we have 14/14/29 (P/R/L) set and we have 58 processes with class=transaction (hence all should fit and every machine has at least 2 of these processes). In the past that would be the case where the P/R/L would be kept on those processes (unless P/R now biases torwards processes and not on class=transaction processes and would prefer storage over transaction class processes).</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 11,
        "updated_at": "2020-02-20T22:33:46.086Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 45,
        "readers_count": 44,
        "score": 14.0,
        "yours": false,
        "topic_id": 1970,
        "topic_slug": "performance-regression-with-6-2-15",
        "display_username": "Clement Pang",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 38,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/performance-regression-with-6-2-15/1970/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6287,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2020-02-21T00:10:14.258Z",
        "cooked": "<p>Are you using the storage class for the storage servers, or are you not setting a class?</p>",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 11,
        "updated_at": "2020-02-21T00:10:14.258Z",
        "reply_count": 0,
        "reply_to_post_number": 7,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 44,
        "readers_count": 43,
        "score": 8.8,
        "yours": false,
        "topic_id": 1970,
        "topic_slug": "performance-regression-with-6-2-15",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 38,
          "username": "panghy",
          "name": "Clement Pang",
          "avatar_template": "/user_avatar/forums.foundationdb.org/panghy/{size}/19_2.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/performance-regression-with-6-2-15/1970/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6288,
        "name": "Clement Pang",
        "username": "panghy",
        "avatar_template": "/user_avatar/forums.foundationdb.org/panghy/{size}/19_2.png",
        "created_at": "2020-02-21T00:19:44.979Z",
        "cooked": "<p>Ah, they are unset. So per <a href=\"https://forums.foundationdb.org/t/roles-classes-matrix/1340\" class=\"inline-onebox\">Roles / Classes matrix</a>, Unset is better than Okay so that\u2019s why it\u2019s now there. That\u2019s a change from 5.x then I suppose.</p>",
        "post_number": 9,
        "post_type": 1,
        "posts_count": 11,
        "updated_at": "2020-02-21T00:19:44.979Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 45,
        "readers_count": 44,
        "score": 14.0,
        "yours": false,
        "topic_id": 1970,
        "topic_slug": "performance-regression-with-6-2-15",
        "display_username": "Clement Pang",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://forums.foundationdb.org/t/roles-classes-matrix/1340",
            "internal": true,
            "reflection": false,
            "title": "Roles / Classes matrix",
            "clicks": 12
          }
        ],
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 38,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/performance-regression-with-6-2-15/1970/9",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6292,
        "name": "A.J. Beamon",
        "username": "ajbeamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "created_at": "2020-02-21T16:57:53.480Z",
        "cooked": "<p>I looked into it, and it appears this did change between 5.2 and 6.0. As far as I can tell, though, it\u2019s not documented even in the release notes, which is a bit of an oversight. The other natural place for something like this to go is in the upgrade notes: <a href=\"https://apple.github.io/foundationdb/administration.html#upgrading-from-5-2-x\">https://apple.github.io/foundationdb/administration.html#upgrading-from-5-2-x</a>.</p>\n<p>I\u2019ve created an issue to add this change to the documentation:</p>\n<aside class=\"onebox githubissue\">\n  <header class=\"source\">\n      <a href=\"https://github.com/apple/foundationdb/issues/2715\" target=\"_blank\">github.com/apple/foundationdb</a>\n  </header>\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Issue\">\n\t  <svg width=\"60\" height=\"60\" class=\"github-icon\" viewbox=\"0 0 14 16\" aria-hidden=\"true\"><path d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/apple/foundationdb/issues/2715\" target=\"_blank\">Document change in role affinities in 6.0</a>\n    </h4>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2020-02-21\" data-time=\"16:56:57\" data-timezone=\"UTC\">04:56PM - 21 Feb 20 UTC</span>\n      </div>\n\n\n      <div class=\"user\">\n        <a href=\"https://github.com/ajbeamon\" target=\"_blank\">\n          <img alt=\"ajbeamon\" src=\"https://global.discourse-cdn.com/foundationdb/original/1X/6daa487e02c4066a51abc45dead7a3188ce91201.png\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\">\n          ajbeamon\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=\"github-row\">\n  <p class=\"github-content\">There appears to be a change that occurred in release 6.0 that made proxies prefer unset class processes over transaction class...</p>\n</div>\n\n<div class=\"labels\">\n</div>\n\n  </article>\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n  <div style=\"clear: both\"></div>\n</aside>\n",
        "post_number": 10,
        "post_type": 1,
        "posts_count": 11,
        "updated_at": "2020-02-21T16:57:53.480Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 42,
        "readers_count": 41,
        "score": 13.4,
        "yours": false,
        "topic_id": 1970,
        "topic_slug": "performance-regression-with-6-2-15",
        "display_username": "A.J. Beamon",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://apple.github.io/foundationdb/administration.html#upgrading-from-5-2-x",
            "internal": false,
            "reflection": false,
            "title": "Administration \u2014 FoundationDB 6.2",
            "clicks": 2
          },
          {
            "url": "https://github.com/apple/foundationdb/issues/2715",
            "internal": false,
            "reflection": false,
            "title": "Document change in role affinities in 6.0 \u00b7 Issue #2715 \u00b7 apple/foundationdb \u00b7 GitHub",
            "clicks": 1
          },
          {
            "url": "https://github.com/ajbeamon",
            "internal": false,
            "reflection": false,
            "title": "ajbeamon (A.J. Beamon) \u00b7 GitHub",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": true,
        "staff": true,
        "user_id": 12,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/performance-regression-with-6-2-15/1970/10",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 6409,
        "name": "Sam Pullara",
        "username": "spullara",
        "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
        "created_at": "2020-03-03T22:24:10.116Z",
        "cooked": "<p>Should it prefer them? Why not revert this change?</p>",
        "post_number": 11,
        "post_type": 1,
        "posts_count": 11,
        "updated_at": "2020-03-03T22:24:10.116Z",
        "reply_count": 0,
        "reply_to_post_number": 10,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 32,
        "readers_count": 31,
        "score": 31.4,
        "yours": false,
        "topic_id": 1970,
        "topic_slug": "performance-regression-with-6-2-15",
        "display_username": "Sam Pullara",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 12,
          "username": "ajbeamon",
          "name": "A.J. Beamon",
          "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 156,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/performance-regression-with-6-2-15/1970/11",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      6272,
      6274,
      6275,
      6276,
      6280,
      6284,
      6285,
      6287,
      6288,
      6292,
      6409
    ]
  },
  "timeline_lookup": [
    [
      1,
      2071
    ],
    [
      5,
      2070
    ],
    [
      10,
      2069
    ],
    [
      11,
      2058
    ]
  ],
  "suggested_topics": [],
  "tags": [
    "performance"
  ],
  "tags_descriptions": {},
  "fancy_title": "Performance Regression with 6.2.15",
  "id": 1970,
  "title": "Performance Regression with 6.2.15",
  "posts_count": 11,
  "created_at": "2020-02-20T04:42:06.375Z",
  "views": 1321,
  "reply_count": 5,
  "like_count": 2,
  "last_posted_at": "2020-03-03T22:24:10.116Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "performance-regression-with-6-2-15",
  "category_id": 7,
  "word_count": 697,
  "deleted_at": null,
  "user_id": 38,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_1970",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 11,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 4,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Constantly repartitioning (under no load) and moving large volumes of data",
      "id": 1875,
      "title": "Constantly repartitioning (under no load) and moving large volumes of data",
      "slug": "constantly-repartitioning-under-no-load-and-moving-large-volumes-of-data",
      "posts_count": 16,
      "reply_count": 10,
      "highest_post_number": 16,
      "image_url": "https://global.discourse-cdn.com/foundationdb/original/1X/53cafee65013234d86e85273a82b5560b1ecd6a5.png",
      "created_at": "2020-01-10T19:16:54.909Z",
      "last_posted_at": "2020-01-15T00:25:14.230Z",
      "bumped": true,
      "bumped_at": "2020-01-15T00:25:14.230Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1636,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 43,
            "username": "killertypo",
            "name": "Mike McMahon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/killertypo/{size}/35_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 38,
            "username": "panghy",
            "name": "Clement Pang",
            "avatar_template": "/user_avatar/forums.foundationdb.org/panghy/{size}/19_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Why doesn&rsquo;t my cluster performance scale when I double the number of machines?",
      "id": 640,
      "title": "Why doesn't my cluster performance scale when I double the number of machines?",
      "slug": "why-doesnt-my-cluster-performance-scale-when-i-double-the-number-of-machines",
      "posts_count": 21,
      "reply_count": 16,
      "highest_post_number": 21,
      "image_url": null,
      "created_at": "2018-08-15T09:26:47.588Z",
      "last_posted_at": "2018-08-17T07:32:00.164Z",
      "bumped": true,
      "bumped_at": "2018-08-17T07:32:00.164Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 3323,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 255,
            "username": "aqua",
            "name": "Matt Lohier",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/b9bd4f/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 68,
            "username": "daverosenthal",
            "name": "Dave Rosenthal",
            "avatar_template": "/user_avatar/forums.foundationdb.org/daverosenthal/{size}/51_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 321,
            "username": "poma",
            "name": "Roman Semenov",
            "avatar_template": "/user_avatar/forums.foundationdb.org/poma/{size}/325_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Cluster tuning cookbook",
      "id": 520,
      "title": "Cluster tuning cookbook",
      "slug": "cluster-tuning-cookbook",
      "posts_count": 27,
      "reply_count": 19,
      "highest_post_number": 27,
      "image_url": null,
      "created_at": "2018-06-19T14:35:25.802Z",
      "last_posted_at": "2019-02-01T12:38:24.733Z",
      "bumped": true,
      "bumped_at": "2019-02-01T12:38:24.733Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 12,
      "views": 8885,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 310,
            "username": "shamatar",
            "name": "Alexander",
            "avatar_template": "/user_avatar/forums.foundationdb.org/shamatar/{size}/315_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 53,
            "username": "KrzysFR",
            "name": "Christophe Chevalier",
            "avatar_template": "/user_avatar/forums.foundationdb.org/krzysfr/{size}/43_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 41,
            "username": "amirouche",
            "name": "Amirouche",
            "avatar_template": "/user_avatar/forums.foundationdb.org/amirouche/{size}/1911_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 502,
            "username": "nikolas.ioannou",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/n/5daacb/{size}.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Process class and machine sharing deployment questions",
      "id": 1600,
      "title": "Process class and machine sharing deployment questions",
      "slug": "process-class-and-machine-sharing-deployment-questions",
      "posts_count": 16,
      "reply_count": 11,
      "highest_post_number": 16,
      "image_url": null,
      "created_at": "2019-08-28T14:29:20.326Z",
      "last_posted_at": "2019-09-03T19:26:35.853Z",
      "bumped": true,
      "bumped_at": "2019-09-03T19:26:35.853Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 3,
      "views": 2619,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 642,
            "username": "arob",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/9fc29f/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Production optimizations",
      "id": 601,
      "title": "Production optimizations",
      "slug": "production-optimizations",
      "posts_count": 21,
      "reply_count": 14,
      "highest_post_number": 21,
      "image_url": null,
      "created_at": "2018-07-30T21:18:56.894Z",
      "last_posted_at": "2018-08-15T04:47:23.743Z",
      "bumped": true,
      "bumped_at": "2018-08-15T04:47:23.743Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 6,
      "views": 6473,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 311,
            "username": "ThomasJ",
            "name": "Thomas Johson",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/6f9a4e/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 81,
            "username": "ryanworl",
            "name": "Ryan Worl",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ryanworl/{size}/440_2.png",
            "trust_level": 3
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 255,
            "username": "aqua",
            "name": "Matt Lohier",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/b9bd4f/{size}.png",
            "trust_level": 1
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 38,
        "username": "panghy",
        "name": "Clement Pang",
        "avatar_template": "/user_avatar/forums.foundationdb.org/panghy/{size}/19_2.png",
        "post_count": 5,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 12,
        "username": "ajbeamon",
        "name": "A.J. Beamon",
        "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
        "post_count": 4,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "admin": true,
        "trust_level": 4
      },
      {
        "id": 156,
        "username": "spullara",
        "name": "Sam Pullara",
        "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 412,
        "username": "mengranewo",
        "name": "Mengran Wang",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/m/8e8cbc/{size}.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      }
    ],
    "created_by": {
      "id": 38,
      "username": "panghy",
      "name": "Clement Pang",
      "avatar_template": "/user_avatar/forums.foundationdb.org/panghy/{size}/19_2.png"
    },
    "last_poster": {
      "id": 156,
      "username": "spullara",
      "name": "Sam Pullara",
      "avatar_template": "/user_avatar/forums.foundationdb.org/spullara/{size}/125_2.png"
    },
    "links": [
      {
        "url": "https://forums.foundationdb.org/t/roles-classes-matrix/1340",
        "title": "Roles / Classes matrix",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 12,
        "user_id": 38,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://apple.github.io/foundationdb/administration.html#upgrading-from-5-2-x",
        "title": "Administration \u2014 FoundationDB 6.2",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 12,
        "domain": "apple.github.io",
        "root_domain": "apple.github.io"
      },
      {
        "url": "https://forums.foundationdb.org/t/constantly-repartitioning-under-no-load-and-moving-large-volumes-of-data/1875",
        "title": "Constantly repartitioning (under no load) and moving large volumes of data",
        "internal": true,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 12,
        "domain": "forums.foundationdb.org",
        "root_domain": "foundationdb.org"
      },
      {
        "url": "https://github.com/apple/foundationdb/issues/2715",
        "title": "Document change in role affinities in 6.0 \u00b7 Issue #2715 \u00b7 apple/foundationdb \u00b7 GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 12,
        "domain": "github.com",
        "root_domain": "github.com"
      }
    ]
  },
  "bookmarks": []
}