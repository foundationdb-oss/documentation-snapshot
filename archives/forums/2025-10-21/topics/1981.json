{
  "post_stream": {
    "posts": [
      {
        "id": 6319,
        "name": "Greg Gilley",
        "username": "ggilley",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/7993a0/{size}.png",
        "created_at": "2020-02-26T17:17:34.865Z",
        "cooked": "<p>I\u2019m evaluating FoundationDB and thought an interesting first step would be to try out the Document Layer. I wrote a simple app talking to MongoDB which loads about 3MB (in text) of data, and does a few queries to make sure the data loaded as expected. It takes less than a second to run in MongoDB. I then pointed the same app at the document layer, it timed out after 660 seconds (which is 11 minutes for those of you counting). Note that both of these are docker containers running on my Mac Pro (the trash can, not the cheese grater). It does make progress through the test, just very slowly.</p>\n<p>I\u2019m not even sure where to begin with this. I certainly wasn\u2019t expecting it to be 1000x slower. Is Document Layer intended to be used? Or is it just a demo?</p>\n<p>Thanks,<br>\nGreg</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2020-02-26T17:17:34.865Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 29,
        "reads": 28,
        "readers_count": 27,
        "score": 150.6,
        "yours": false,
        "topic_id": 1981,
        "topic_slug": "document-layer-unexpectedly-slow-with-naive-test",
        "display_username": "Greg Gilley",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 721,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/document-layer-unexpectedly-slow-with-naive-test/1981/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 6325,
        "name": "Greg Gilley",
        "username": "ggilley",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/7993a0/{size}.png",
        "created_at": "2020-02-27T01:14:17.080Z",
        "cooked": "<p>Okay, I decided to start by profiling. And, of course, it wasn\u2019t where I thought it was. The better MongoDB comparison was &lt; 0.5 seconds and 6.3 seconds for FoundationDB. So it\u2019s only 12x slower. That I can start to figure out what to do with. The timeout was caused by the docker container hanging on shutdown from a deferred task, so it showed up as failing in the test. The container does not respond to signals correctly.</p>\n<p>Is anyone working on the Document Layer? It looks like there haven\u2019t been any changes for the docker container in 9 months or so. (And 5 months since any changes).</p>\n<p>Thanks,<br>\nGreg</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2020-02-27T01:14:17.080Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 3,
        "reads": 27,
        "readers_count": 26,
        "score": 25.4,
        "yours": false,
        "topic_id": 1981,
        "topic_slug": "document-layer-unexpectedly-slow-with-naive-test",
        "display_username": "Greg Gilley",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 721,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/document-layer-unexpectedly-slow-with-naive-test/1981/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 8032,
        "name": "Chandra",
        "username": "chandraonline",
        "avatar_template": "/user_avatar/forums.foundationdb.org/chandraonline/{size}/945_2.png",
        "created_at": "2020-10-04T03:54:46.084Z",
        "cooked": "<p>Hi Greg:</p>\n<p>I am going down this path as well and I was wondering how you got the document layer talking to foundationDB inside docker containers in your mac. I have them as two separate containers and have a basic docker-compose to wire them up. The containers seem to start but I have no luck connecting to fdb-document-layer and there seems to connection errors in the fdb-document-layer log files. Any ideas ?</p>\n<pre><code>&lt;Event Severity=\"40\" Time=\"1601782864.377070\" Type=\"StartupFailure\" ID=\"0000000000000000\" phase=\"ConnectToCluster\" timeout=\"1945\" Backtrace=\"addr2line -e fdbdoc.debug -p -C -f -i 0x686074 0x6840df 0x454b2d 0x459585 0x457821 0x41a731 0x6b535f 0x448793 0x7f806b88db97\" Machine=\"127.0.0.1:27017\" LogGroup=\"default\" /&gt;\n\n# cat fdb.cluster\ndocker:docker@172.20.0.2:4500\n\n$ docker ps\nCONTAINER ID        IMAGE                                   COMMAND                  CREATED             STATUS              PORTS                      NAMES\n764b110b3dfe        foundationdb/fdb-document-layer:1.7.2   \"/bin/sh -c /var/fdb\u2026\"   44 minutes ago      Up 44 minutes       0.0.0.0:27017-&gt;27017/tcp   foundation-db_fdb-doc-layer_1\nc7eb5283aaaf        foundationdb/foundationdb:6.3.8         \"/bin/sh -c /var/fdb\u2026\"   44 minutes ago      Up 44 minutes       0.0.0.0:4500-&gt;4500/tcp     foundation-db_fdb_1\n\n$ docker exec foundation-db_fdb_1 fdbcli --exec status\nUsing cluster file `/var/fdb/fdb.cluster'.\n\nConfiguration:\n  Redundancy mode        - single\n  Storage engine         - ssd-2\n  Coordinators           - 1\n  Usable Regions         - 1\n\nCluster:\n  FoundationDB processes - 1\n  Zones                  - 1\n  Machines               - 1\n  Memory availability    - 5.6 GB per process on machine with least available\n  Fault Tolerance        - 0 machines\n  Server time            - 10/04/20 03:54:03\n\nData:\n  Replication health     - Healthy\n  Moving data            - 0.000 GB\n  Sum of key-value sizes - 0 MB\n  Disk space used        - 210 MB\n\nOperating space:\n  Storage server         - 31.6 GB free on most full server\n  Log server             - 31.6 GB free on most full server\n\nWorkload:\n  Read rate              - 7 Hz\n  Write rate             - 0 Hz\n  Transactions started   - 3 Hz\n  Transactions committed - 0 Hz\n  Conflict rate          - 0 Hz\n\nBackup and DR:\n  Running backups        - 0\n  Running DRs            - 0\n\nClient time: 10/04/20 03:54:03</code></pre>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2020-10-04T03:54:46.084Z",
        "reply_count": 0,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 18,
        "readers_count": 17,
        "score": 8.6,
        "yours": false,
        "topic_id": 1981,
        "topic_slug": "document-layer-unexpectedly-slow-with-naive-test",
        "display_username": "Chandra",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 721,
          "username": "ggilley",
          "name": "Greg Gilley",
          "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/7993a0/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 829,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/document-layer-unexpectedly-slow-with-naive-test/1981/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      6319,
      6325,
      8032
    ]
  },
  "timeline_lookup": [
    [
      1,
      2064
    ],
    [
      3,
      1844
    ]
  ],
  "suggested_topics": [],
  "tags": [
    "performance"
  ],
  "tags_descriptions": {},
  "fancy_title": "Document layer unexpectedly slow with naive test",
  "id": 1981,
  "title": "Document layer unexpectedly slow with naive test",
  "posts_count": 3,
  "created_at": "2020-02-26T17:17:34.792Z",
  "views": 847,
  "reply_count": 1,
  "like_count": 0,
  "last_posted_at": "2020-10-04T03:54:46.084Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "document-layer-unexpectedly-slow-with-naive-test",
  "category_id": 11,
  "word_count": 593,
  "deleted_at": null,
  "user_id": 721,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_1981",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 3,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 2,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "Can&rsquo;t use MongoDB CLI to connect to Document Layer Docker image",
      "id": 1502,
      "title": "Can't use MongoDB CLI to connect to Document Layer Docker image",
      "slug": "cant-use-mongodb-cli-to-connect-to-document-layer-docker-image",
      "posts_count": 7,
      "reply_count": 3,
      "highest_post_number": 7,
      "image_url": null,
      "created_at": "2019-07-02T08:21:13.904Z",
      "last_posted_at": "2021-10-11T12:35:10.548Z",
      "bumped": true,
      "bumped_at": "2021-10-11T12:35:10.548Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1570,
      "category_id": 11,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 542,
            "username": "jonahwest",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/90db22/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 9,
            "username": "mbhaskar",
            "name": "Bhaskar Muppana",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mbhaskar/{size}/277_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 951,
            "username": "wedi",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/w/73ab20/{size}.png",
            "trust_level": 0
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 990,
            "username": "baiwfg2",
            "name": "Lewis Chan",
            "avatar_template": "/user_avatar/forums.foundationdb.org/baiwfg2/{size}/1173_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Document Layer Performance",
      "id": 1255,
      "title": "Document Layer Performance",
      "slug": "document-layer-performance",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2019-03-25T02:01:43.056Z",
      "last_posted_at": "2019-04-08T20:36:48.678Z",
      "bumped": true,
      "bumped_at": "2019-04-08T20:36:48.678Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [
        "performance"
      ],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 1531,
      "category_id": 11,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 542,
            "username": "jonahwest",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/90db22/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 9,
            "username": "mbhaskar",
            "name": "Bhaskar Muppana",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mbhaskar/{size}/277_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Announcing FoundationDB Document Layer",
      "id": 914,
      "title": "Announcing FoundationDB Document Layer",
      "slug": "announcing-foundationdb-document-layer",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2018-11-29T20:15:26.902Z",
      "last_posted_at": "2018-11-29T21:22:01.867Z",
      "bumped": true,
      "bumped_at": "2018-11-29T20:15:27.009Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": true,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 5,
      "views": 902,
      "category_id": 6,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest single",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 1,
            "username": "davelester",
            "name": "Dave Lester",
            "avatar_template": "/user_avatar/forums.foundationdb.org/davelester/{size}/1927_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "How to connect to FoundationDB with MongoDB CLI?",
      "id": 977,
      "title": "How to connect to FoundationDB with MongoDB CLI?",
      "slug": "how-to-connect-to-foundationdb-with-mongodb-cli",
      "posts_count": 4,
      "reply_count": 2,
      "highest_post_number": 4,
      "image_url": null,
      "created_at": "2018-12-28T15:06:54.534Z",
      "last_posted_at": "2019-01-02T23:14:14.408Z",
      "bumped": true,
      "bumped_at": "2019-01-02T23:14:14.408Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 1621,
      "category_id": 11,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 465,
            "username": "xet7",
            "name": "xet7",
            "avatar_template": "/user_avatar/forums.foundationdb.org/xet7/{size}/460_2.png",
            "trust_level": 0
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 9,
            "username": "mbhaskar",
            "name": "Bhaskar Muppana",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mbhaskar/{size}/277_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Need to use mongo api driver against document layer",
      "id": 1206,
      "title": "Need to use mongo api driver against document layer",
      "slug": "need-to-use-mongo-api-driver-against-document-layer",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2019-03-08T00:35:23.096Z",
      "last_posted_at": "2019-03-08T15:31:03.147Z",
      "bumped": true,
      "bumped_at": "2019-03-08T15:31:03.147Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 907,
      "category_id": 11,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 525,
            "username": "samir",
            "name": "Samir",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/ea666f/{size}.png",
            "trust_level": 0
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 9,
            "username": "mbhaskar",
            "name": "Bhaskar Muppana",
            "avatar_template": "/user_avatar/forums.foundationdb.org/mbhaskar/{size}/277_2.png",
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 721,
        "username": "ggilley",
        "name": "Greg Gilley",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/7993a0/{size}.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 829,
        "username": "chandraonline",
        "name": "Chandra",
        "avatar_template": "/user_avatar/forums.foundationdb.org/chandraonline/{size}/945_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      }
    ],
    "created_by": {
      "id": 721,
      "username": "ggilley",
      "name": "Greg Gilley",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/7993a0/{size}.png"
    },
    "last_poster": {
      "id": 829,
      "username": "chandraonline",
      "name": "Chandra",
      "avatar_template": "/user_avatar/forums.foundationdb.org/chandraonline/{size}/945_2.png"
    }
  },
  "bookmarks": []
}