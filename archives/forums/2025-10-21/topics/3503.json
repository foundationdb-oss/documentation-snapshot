{
  "post_stream": {
    "posts": [
      {
        "id": 11587,
        "name": "Deekshit kumar",
        "username": "gvddk",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/bbce88/{size}.png",
        "created_at": "2022-08-17T16:16:01.430Z",
        "cooked": "<p>We have implemented TLS in our fdb cluster using self signed certificates. Even the clients can able to connect with the cluster using tls certs and can able to write the data. By using below command, we can able to connect to fdbcli using the certs.</p>\n<p>fdbcli --tls_ca_file /etc/foundationdb/pki/ca.crt --tls_certificate_file /etc/foundationdb/pki/client-server.crt --tls_key_file /etc/foundationdb/pki/client-server.key --tls_verify_peers Check.Valid=0</p>\n<p>fdb server version:<br>\nFoundationDB 7.1 (v7.1.5)</p>\n<p>By using below modules in ansible, we have generated self signed certificates.</p>\n<p>community.crypto.openssl_privatekey:<br>\ncommunity.crypto.x509_certificate:<br>\ncommunity.crypto.openssl_privatekey:<br>\ncommunity.crypto.openssl_csr_pipe:</p>\n<p>Issue:<br>\nIn the foundationdb logs, we noticed that below traces are keep on generating with TLS failures.</p>\n<p>Event Severity=\u201c10\u201d Time=\u201c1660736446.267173\u201d DateTime=\u201c2022-08-17T11:40:46Z\u201d Type=\u201cIncomingConnectionError\u201d ID=\u201c26ae06d3d759554e\u201d Error=\u201cconnection_failed\u201d ErrorDescription=\u201cNetwork connection failed\u201d ErrorCode=\u201c1026\u201d SuppressedEventCount=\u201c4\u201d FromAddress=\u201cxxxxxxxx:57414:tls\u201d ThreadID=\u201c7499685985715584756\u201d Machine=\u201c10.23.216.10:4500\u201d LogGroup=\u201cdefault\u201d /</p>\n<p>Event Severity=\u201c20\u201d Time=\u201c1660736447.498181\u201d DateTime=\u201c2022-08-17T11:40:47Z\u201d Type=\u201cN2_AcceptHandshakeError\u201d ID=\u201c0000000000000000\u201d ErrorCode=\u201c336151576\u201d ErrorMsg=\u201ctlsv1 alert unknown ca (SSL routines, ssl3_read_bytes)\u201d BackgroundThread=\u201c1\u201d ThreadID=\u201c1547189418734296536\u201d Machine=\u201cxxxxxxx:4500\u201d LogGroup=\u201cdefault\u201d /</p>\n<p>what could be the issue? Please let us know the fix for this.</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2022-08-17T16:17:18.357Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 88,
        "reads": 23,
        "readers_count": 22,
        "score": 444.6,
        "yours": false,
        "topic_id": 3503,
        "topic_slug": "tls-implemenation-for-foundationdb",
        "display_username": "Deekshit kumar",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1116,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/tls-implemenation-for-foundationdb/3503/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null,
        "can_vote": false
      },
      {
        "id": 11588,
        "name": "Alex Miller",
        "username": "alexmiller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "created_at": "2022-08-17T19:55:08.084Z",
        "cooked": "<p>It\u2019s trying to tell you that the accepting process doesn\u2019t recognize the certificate that the client is presenting.  You\u2019ll need to match that up on the client and server side to understand why that\u2019s the case.</p>\n<p>If you add <code>--debug-tls</code> to your fdbcli invocation, it\u2019ll print out the certificates passed in with the rest of the arguments, which can make the process a bit simpler.</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2022-08-17T19:55:08.084Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 9,
        "reads": 21,
        "readers_count": 20,
        "score": 54.2,
        "yours": false,
        "topic_id": 3503,
        "topic_slug": "tls-implemenation-for-foundationdb",
        "display_username": "Alex Miller",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 13,
        "hidden": false,
        "trust_level": 4,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/tls-implemenation-for-foundationdb/3503/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      },
      {
        "id": 11590,
        "name": "Deekshit kumar",
        "username": "gvddk",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/bbce88/{size}.png",
        "created_at": "2022-08-18T04:03:11.190Z",
        "cooked": "<aside class=\"quote no-group quote-modified\" data-username=\"alexmiller\" data-post=\"2\" data-topic=\"3503\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://sea1.discourse-cdn.com/foundationdb/user_avatar/forums.foundationdb.org/alexmiller/48/326_2.png\" class=\"avatar\"> alexmiller:</div>\n<blockquote>\n<p>\u2013debug-tls</p>\n</blockquote>\n</aside>\n<p>Thanks for your prompt reply. we faced couple of issues with our certs then finally fixed it.</p>\n<p>Issue 1:<br>\nWhile doing the cert validation with below command, we got the error as verification failed. So we recreated the certs and copied in the required path.<br>\nopenssl verify -CAfile /etc/foundationdb/pki/ca.crt /etc/foundationdb/pki/client-server.crt</p>\n<p>Issue 2:<br>\nEven after changing the certs in foundationdb VM, still we noticed few TLS failure lines in the fdb logs.</p>\n<ol>\n<li>\n<p>In the fdb configuration file, we have multiple sections for the fdb daemons like [fdbserver], [backup-agent] etc\u2026<br>\n2)In the configuration file, fdbserver section as below TLS parameters but backup-agent section doesn\u2019t have that parameters.<br>\n[fdbserver]<br>\ntls_certificate_file = /etc/foundationdb/pki/client-server.crt<br>\ntls_key_file = /etc/foundationdb/pki/client-server.key<br>\ntls_ca_file\t= /etc/foundationdb/pki/ca.crt<br>\ntls_verify_peers = Check.Valid=0</p>\n</li>\n<li>\n<p>Since the TLS parameters are missing in the backup-agent section, the backup daemon is throwing the failure logs in the trace files.</p>\n</li>\n<li>\n<p>After adding the above TLS parameters, i don\u2019t see any failures</p>\n</li>\n</ol>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2022-08-18T11:36:36.628Z",
        "reply_count": 0,
        "reply_to_post_number": 2,
        "quote_count": 1,
        "incoming_link_count": 10,
        "reads": 19,
        "readers_count": 18,
        "score": 53.8,
        "yours": false,
        "topic_id": 3503,
        "topic_slug": "tls-implemenation-for-foundationdb",
        "display_username": "Deekshit kumar",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 5,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 1116,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/tls-implemenation-for-foundationdb/3503/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": null
      }
    ],
    "stream": [
      11587,
      11588,
      11590
    ]
  },
  "timeline_lookup": [
    [
      1,
      1161
    ]
  ],
  "suggested_topics": [],
  "tags": [],
  "tags_descriptions": {},
  "fancy_title": "TLS implemenation for foundationdb",
  "id": 3503,
  "title": "TLS implemenation for foundationdb",
  "posts_count": 3,
  "created_at": "2022-08-17T16:16:01.361Z",
  "views": 566,
  "reply_count": 1,
  "like_count": 0,
  "last_posted_at": "2022-08-18T04:03:11.190Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "tls-implemenation-for-foundationdb",
  "category_id": 7,
  "word_count": 470,
  "deleted_at": null,
  "user_id": 1116,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_3503",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 3,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 2,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "tags_disable_ads": false,
  "related_topics": [
    {
      "fancy_title": "(Solved) Correct setup of TLS for FoundationDB",
      "id": 1037,
      "title": "(Solved) Correct setup of TLS for FoundationDB",
      "slug": "solved-correct-setup-of-tls-for-foundationdb",
      "posts_count": 8,
      "reply_count": 3,
      "highest_post_number": 8,
      "image_url": null,
      "created_at": "2019-01-18T13:14:34.597Z",
      "last_posted_at": "2020-12-03T19:46:59.291Z",
      "bumped": true,
      "bumped_at": "2020-12-03T19:46:59.291Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 2,
      "views": 3516,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 483,
            "username": "Smerity",
            "name": "Stephen Merity",
            "avatar_template": "/user_avatar/forums.foundationdb.org/smerity/{size}/482_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 120,
            "username": "josephg",
            "name": "Seph Gentle",
            "avatar_template": "/user_avatar/forums.foundationdb.org/josephg/{size}/84_2.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 12,
            "username": "ajbeamon",
            "name": "A.J. Beamon",
            "avatar_template": "/user_avatar/forums.foundationdb.org/ajbeamon/{size}/13_2.png",
            "admin": true,
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 790,
            "username": "shubham4060",
            "name": "Shubham",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/0ea827/{size}.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "FoundationDB fails to verify valid TLS certificates",
      "id": 2223,
      "title": "FoundationDB fails to verify valid TLS certificates",
      "slug": "foundationdb-fails-to-verify-valid-tls-certificates",
      "posts_count": 6,
      "reply_count": 2,
      "highest_post_number": 6,
      "image_url": null,
      "created_at": "2020-07-03T10:58:27.977Z",
      "last_posted_at": "2020-07-08T11:38:11.736Z",
      "bumped": true,
      "bumped_at": "2020-07-08T11:38:11.736Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 0,
      "views": 636,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 787,
            "username": "afrozalm",
            "name": "Afroz Alam",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/8797f3/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 7,
            "username": "SteavedHams",
            "name": "Steve Atherton",
            "avatar_template": "/user_avatar/forums.foundationdb.org/steavedhams/{size}/18_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 319,
            "username": "kirilltitov",
            "name": "Kirill Titov",
            "avatar_template": "/user_avatar/forums.foundationdb.org/kirilltitov/{size}/328_2.png",
            "trust_level": 1
          }
        }
      ]
    },
    {
      "fancy_title": "Facing issue with TLS Setup",
      "id": 1463,
      "title": "Facing issue with TLS Setup",
      "slug": "facing-issue-with-tls-setup",
      "posts_count": 5,
      "reply_count": 2,
      "highest_post_number": 5,
      "image_url": null,
      "created_at": "2019-06-18T14:18:59.696Z",
      "last_posted_at": "2019-06-21T07:46:38.493Z",
      "bumped": true,
      "bumped_at": "2019-06-21T07:46:38.493Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 700,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 511,
            "username": "sakthivelpvs",
            "name": "Sakthivel",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9dc877/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 607,
            "username": "senthil",
            "name": "Senthil Nathan",
            "avatar_template": "/user_avatar/forums.foundationdb.org/senthil/{size}/720_2.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Set up fdb to use TLS failure with N2_ConnectError",
      "id": 3020,
      "title": "Set up fdb to use TLS failure with N2_ConnectError",
      "slug": "set-up-fdb-to-use-tls-failure-with-n2-connecterror",
      "posts_count": 9,
      "reply_count": 3,
      "highest_post_number": 9,
      "image_url": null,
      "created_at": "2021-11-19T08:38:17.530Z",
      "last_posted_at": "2021-11-23T00:53:27.886Z",
      "bumped": true,
      "bumped_at": "2021-11-23T05:48:39.795Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 1054,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 1029,
            "username": "liuyan",
            "name": "",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/839c29/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Issue with TLS in foundationdb docker container",
      "id": 2504,
      "title": "Issue with TLS in foundationdb docker container",
      "slug": "issue-with-tls-in-foundationdb-docker-container",
      "posts_count": 5,
      "reply_count": 2,
      "highest_post_number": 5,
      "image_url": null,
      "created_at": "2021-01-05T02:45:20.081Z",
      "last_posted_at": "2021-01-05T06:25:52.461Z",
      "bumped": true,
      "bumped_at": "2021-01-05T06:25:52.461Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags": [],
      "tags_descriptions": {},
      "like_count": 1,
      "views": 614,
      "category_id": 7,
      "featured_link": null,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 772,
            "username": "antonprabin",
            "name": "Prabin Poulose",
            "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/a/7cd45c/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 13,
            "username": "alexmiller",
            "name": "Alex Miller",
            "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
            "trust_level": 4
          }
        }
      ]
    }
  ],
  "summarizable": false,
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 1116,
        "username": "gvddk",
        "name": "Deekshit kumar",
        "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/bbce88/{size}.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      },
      {
        "id": 13,
        "username": "alexmiller",
        "name": "Alex Miller",
        "avatar_template": "/user_avatar/forums.foundationdb.org/alexmiller/{size}/326_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 4
      }
    ],
    "created_by": {
      "id": 1116,
      "username": "gvddk",
      "name": "Deekshit kumar",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/bbce88/{size}.png"
    },
    "last_poster": {
      "id": 1116,
      "username": "gvddk",
      "name": "Deekshit kumar",
      "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/bbce88/{size}.png"
    }
  },
  "bookmarks": []
}